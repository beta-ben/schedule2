@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root { height: 100%; }
/* Prevent horizontal overflow/gutters on mobile (iOS Safari) */
html, body, #root { max-width: 100%; overflow-x: hidden; }
.hour-label{ font-variant-numeric: tabular-nums; letter-spacing: 0; }
.no-select{ -webkit-user-select:none; -moz-user-select:none; user-select:none; }
/* Slightly tighter default text spacing to fit more on small widths */
.tight { letter-spacing: -0.01em; }
/* Hide scrollbars but keep scrolling (cross-browser) */
.no-scrollbar{ -ms-overflow-style: none; scrollbar-width: none; }
.no-scrollbar::-webkit-scrollbar{ display: none; width:0; height:0; }
/* Stronger: hide all scrollbars within the app root while preserving scroll */
#root, #root * { -ms-overflow-style: none; scrollbar-width: none; }
#root ::-webkit-scrollbar { width: 0; height: 0; display: none; }
/* Also hide page-level scrollbars globally */
html, body { -ms-overflow-style: none; scrollbar-width: none; }
html::-webkit-scrollbar, body::-webkit-scrollbar { display: none; }

/* Theme body backgrounds using :has to avoid white gutters behind app on iOS */
/* Theme-specific body treatments */
body:has([data-theme='night']) { background-color: #010101 !important; color-scheme: dark; }
body:has([data-theme='noir'][data-theme-variant='dark']) { background-color: #000000 !important; color-scheme: dark; }
body:has([data-theme='noir'][data-theme-variant='light']) { background-color: #f5f5f5 !important; color-scheme: light; }
body:has([data-theme='prism']) { background-color: #050514 !important; color-scheme: dark; }
/* Standard dark */
body:has([data-theme='dark']) { background-color: #0a0a0a !important; color-scheme: dark; }
/* Light/system fall back to default UA */

/* Quick animate-in for newly added list items */
@keyframes shift-add-in-keyframes {
	0% { opacity: 0; transform: translateY(-4px) scale(0.98); }
	100% { opacity: 1; transform: translateY(0) scale(1); }
}
.shift-add-in {
	animation: shift-add-in-keyframes 180ms ease-out;
}
@media (prefers-reduced-motion: reduce) {
	.shift-add-in { animation: none; }
}

/* Time input normalization to avoid icon overlapping text across browsers */
input[type="time"]::-webkit-calendar-picker-indicator{
	opacity: 1; /* keep visible in Chrome/Edge */
}
/* Reserve space so text doesn't sit under the native icon */
input[type="time"]{ padding-right: 2.25rem; }
/* On Firefox, keep default icon; avoid WebKit-specific rules */

/* Date input: ensure native calendar icon tints appropriately by theme */
input[type="date"]::-webkit-calendar-picker-indicator{
	opacity: 1; /* match time input behavior */
}
[data-theme='night'] input[type="date"]::-webkit-calendar-picker-indicator{
	/* Approximate Tailwind red-500 via filter; keeps native picker UX */
	filter: invert(36%) sepia(78%) saturate(2561%) hue-rotate(344deg) brightness(96%) contrast(96%);
}
[data-theme='noir'][data-theme-variant='dark'] input[type="date"]::-webkit-calendar-picker-indicator{
	/* High-contrast white for dark noir */
	filter: invert(100%);
	opacity: 0.9;
}
[data-theme='noir'][data-theme-variant='light'] input[type="date"]::-webkit-calendar-picker-indicator{
	/* Soft black icon for light noir */
	filter: invert(8%) sepia(6%) saturate(0%) hue-rotate(180deg) brightness(92%) contrast(92%);
	opacity: 0.9;
}

/* THEME OVERRIDES */
/* Night: black canvas with crimson accents */
[data-theme='night'] {
	background-color: #000 !important;
	color: #dc2626 !important;
}
[data-theme='night'] .bg-white,
[data-theme='night'] .bg-neutral-50,
[data-theme='night'] .bg-neutral-100,
[data-theme='night'] .bg-neutral-200,
[data-theme='night'] .bg-neutral-800,
[data-theme='night'] .bg-neutral-900,
[data-theme='night'] .bg-black {
	background-color: #000 !important;
}
[data-theme='night'] .text-neutral-900,
[data-theme='night'] .text-neutral-800,
[data-theme='night'] .text-neutral-700,
[data-theme='night'] .text-neutral-100,
[data-theme='night'] .text-white,
[data-theme='night'] .text-black,
[data-theme='night'] .text-blue-600,
[data-theme='night'] .text-blue-500,
[data-theme='night'] .text-slate-600 { color: #dc2626 !important; }
[data-theme='night'] .border-neutral-200,
[data-theme='night'] .border-neutral-300,
[data-theme='night'] .border-neutral-600,
[data-theme='night'] .border-neutral-700,
[data-theme='night'] .border-neutral-800,
[data-theme='night'] .border-white,
[data-theme='night'] .border-blue-600,
[data-theme='night'] .border { border-color: rgba(220,38,38,0.6) !important; }
[data-theme='night'] .bg-blue-600,
[data-theme='night'] .bg-blue-500,
[data-theme='night'] .bg-sky-500,
[data-theme='night'] .bg-emerald-500,
[data-theme='night'] .bg-indigo-500,
[data-theme='night'] .bg-amber-500,
[data-theme='night'] .bg-red-500,
[data-theme='night'] .bg-red-600 { background-color: rgba(220,38,38,0.92) !important; color: #ffffff !important; }
[data-theme='night'] .hover\:bg-neutral-100:hover,
[data-theme='night'] .hover\:bg-neutral-800:hover { background-color: rgba(220,38,38,0.2) !important; }
[data-theme='night'] svg { color: #dc2626 !important; stroke: #dc2626 !important; }

/* Noir: grayscale-only surfaces (light + dark variants) */
[data-theme='noir'] {
	--noir-bg: #0e0e10;
	--noir-surface: #161616;
	--noir-surface-strong: #1f1f1f;
	--noir-text: #f5f5f5;
	--noir-border: rgba(255,255,255,0.45);
	--noir-hover: rgba(255,255,255,0.08);
	background-color: var(--noir-bg) !important;
	color: var(--noir-text) !important;
}
[data-theme='noir'][data-theme-variant='light'] {
	--noir-bg: #f5f5f5;
	--noir-surface: #ffffff;
	--noir-surface-strong: #e7e7e7;
	--noir-text: #111111;
	--noir-border: rgba(0,0,0,0.28);
	--noir-hover: rgba(0,0,0,0.06);
}
[data-theme='noir'] .bg-white,
[data-theme='noir'] .bg-neutral-50,
[data-theme='noir'] .bg-neutral-100,
[data-theme='noir'] .bg-neutral-200,
[data-theme='noir'] .bg-neutral-800,
[data-theme='noir'] .bg-neutral-900 { background-color: var(--noir-surface) !important; }
[data-theme='noir'] .bg-neutral-700,
[data-theme='noir'] .bg-neutral-600 { background-color: var(--noir-surface-strong) !important; }
[data-theme='noir'] .text-neutral-900,
[data-theme='noir'] .text-neutral-800,
[data-theme='noir'] .text-neutral-700,
[data-theme='noir'] .text-neutral-100,
[data-theme='noir'] .text-white,
[data-theme='noir'] .text-black,
[data-theme='noir'] .text-blue-600,
[data-theme='noir'] .text-blue-500,
[data-theme='noir'] .text-red-500,
[data-theme='noir'] .text-emerald-500 { color: var(--noir-text) !important; }
[data-theme='noir'] .border-neutral-200,
[data-theme='noir'] .border-neutral-300,
[data-theme='noir'] .border-neutral-600,
[data-theme='noir'] .border-neutral-700,
[data-theme='noir'] .border-neutral-800,
[data-theme='noir'] .border,
[data-theme='noir'] .border-white,
[data-theme='noir'] .border-blue-600 { border-color: var(--noir-border) !important; }
[data-theme='noir'] .hover\:bg-neutral-100:hover,
[data-theme='noir'] .hover\:bg-neutral-800:hover { background-color: var(--noir-hover) !important; }
[data-theme='noir'] svg { color: var(--noir-text) !important; stroke: var(--noir-text) !important; }
[data-theme='noir'] .bg-blue-600,
[data-theme='noir'] .bg-blue-500,
[data-theme='noir'] .bg-sky-500,
[data-theme='noir'] .bg-indigo-500,
[data-theme='noir'] .bg-emerald-500,
[data-theme='noir'] .bg-red-500 { background-color: var(--noir-surface-strong) !important; color: var(--noir-text) !important; }

/* Unicorn LSD: animated rainbow surfaces with readable overlay */
@keyframes unicornShift {
	0% { background-position: 0% 50%; }
	50% { background-position: 100% 50%; }
	100% { background-position: 0% 50%; }
}
.unicorn-rainbow-bg {
	background: linear-gradient(270deg,
		#ff0080, #ff8c00, #ffd300, #21d19f, #00c3ff, #7f00ff, #ff0080
	);
	background-size: 1200% 1200%;
	animation: unicornShift 18s linear infinite;
}
.theme-unicorn {
	background: linear-gradient(270deg,
		#ff0080, #ff8c00, #ffd300, #21d19f, #00c3ff, #7f00ff, #ff0080
	);
	background-size: 1200% 1200%;
	animation: unicornShift 18s ease infinite;
}
[data-theme='unicorn'] { color: #fff !important; }
[data-theme='unicorn'] .bg-white,
[data-theme='unicorn'] .bg-neutral-50,
[data-theme='unicorn'] .bg-neutral-100,
[data-theme='unicorn'] .bg-neutral-200 { background-color: rgba(255,255,255,0.8) !important; color: #111 !important; }
[data-theme='unicorn'] .bg-neutral-800,
[data-theme='unicorn'] .bg-neutral-900 { background-color: rgba(17,17,17,0.55) !important; }
[data-theme='unicorn'] .border-neutral-200,
[data-theme='unicorn'] .border-neutral-300,
[data-theme='unicorn'] .border-neutral-600,
[data-theme='unicorn'] .border-neutral-700,
[data-theme='unicorn'] .border-neutral-800,
[data-theme='unicorn'] .border,
[data-theme='unicorn'] .border-white { border-color: rgba(255,255,255,0.6) !important; }

/* Night: force all common UI text classes to red */
[data-theme='night'] .text-neutral-100,
[data-theme='night'] .text-neutral-200,
[data-theme='night'] .text-neutral-300,
[data-theme='night'] .text-neutral-400,
[data-theme='night'] .text-neutral-500,
[data-theme='night'] .text-neutral-600,
[data-theme='night'] .text-neutral-700,
[data-theme='night'] .text-neutral-800,
[data-theme='night'] .text-neutral-900,
[data-theme='night'] .text-white,
[data-theme='night'] .text-black { color: #dc2626 !important; }
[data-theme='night'] svg { color: #dc2626 !important; stroke: #dc2626 !important; }

/* Unicorn chip animations */
@keyframes unicornChip {
	0% { background-position: 0% 50%; }
	50% { background-position: 100% 50%; }
	100% { background-position: 0% 50%; }
}
.chip-unicorn-bg {
	background: linear-gradient(90deg,
		rgba(255,0,128,0.8), rgba(255,140,0,0.8), rgba(255,211,0,0.8), rgba(33,209,159,0.8), rgba(0,195,255,0.8), rgba(127,0,255,0.8), rgba(255,0,128,0.8)
	);
	background-size: 400% 400%;
	animation: unicornChip 12s linear infinite;
}

/* Subtle pop animation for the floating Now time label */
@keyframes nowPop {
  0% { transform: translateX(-50%) scale(0.92); opacity: 0.85; }
  60% { transform: translateX(-50%) scale(1.04); opacity: 1; }
  100% { transform: translateX(-50%) scale(1.0); opacity: 1; }
}
.now-pop { animation: nowPop 240ms ease-out; }

@media (prefers-reduced-motion: reduce) {
  .now-pop { animation: none; }
}
/* Per-chip hue variant: supply --h to control palette */
.chip-unicorn-h {
	background-image: linear-gradient(90deg,
		hsl(var(--h, 0) 90% 62% / 0.96),
		hsl(calc(var(--h, 0) + 40) 88% 56% / 0.96),
		hsl(calc(var(--h, 0) + 80) 86% 62% / 0.96)
	);
	background-size: 300% 100%;
	animation: unicornChip 8s linear infinite;
}
@keyframes unicornBorder {
	0% { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.9), 0 0 0 0 rgba(255,255,255,0.7); }
	50% { box-shadow: inset 0 0 0 2px rgba(255,255,255,0.9), 0 0 0 2px rgba(255,255,255,0.5); }
	100% { box-shadow: inset 0 0 0 1px rgba(255,255,255,0.9), 0 0 0 0 rgba(255,255,255,0.7); }
}
.chip-unicorn-border { will-change: box-shadow; }
.chip-unicorn-border-anim { animation: unicornBorder 2.2s ease-in-out infinite reverse; }

/* Unicorn: animate day selector buttons and header text */
@keyframes unicornPulseBg {
	0% { filter: hue-rotate(0deg) brightness(1); }
	50% { filter: hue-rotate(180deg) brightness(1.15); }
	100% { filter: hue-rotate(360deg) brightness(1); }
}
[data-theme='unicorn'] .unicorn-anim-bg { animation: unicornPulseBg 10s linear infinite; }
[data-theme='unicorn'] .unicorn-header { animation: unicornPulseBg 8s linear infinite; }

/* Unicorn: day selector pills */
.unicorn-pill {
	background: linear-gradient(90deg, #ff0080, #ff8c00, #ffd300, #21d19f, #00c3ff, #7f00ff);
	background-size: 400% 100%;
	animation: unicornShift 10s linear infinite;
	color: #fff !important;
	border-color: rgba(255,255,255,0.7) !important;
	text-shadow: 0 1px 1px rgba(0,0,0,0.5);
}
.unicorn-pill:hover { filter: brightness(1.1); }

/* Unicorn headers: rainbow surface + stronger shadow */
.unicorn-header-bg {
	background: linear-gradient(270deg,
		rgba(255,0,128,0.35), rgba(255,140,0,0.35), rgba(255,211,0,0.35), rgba(33,209,159,0.35), rgba(0,195,255,0.35), rgba(127,0,255,0.35)
	);
	background-size: 800% 800%;
	animation: unicornShift 22s linear infinite;
	box-shadow: 0 6px 20px rgba(0,0,0,0.35), inset 0 -1px 0 rgba(255,255,255,0.2);
}
.unicorn-header-text { text-shadow: 0 2px 4px rgba(0,0,0,0.45); }

/* Unicorn hour columns overlay */
.unicorn-columns {
	background-image: repeating-linear-gradient(
		90deg,
		rgba(255,0,128,0.10) 0 1.5%,
		rgba(255,140,0,0.10) 1.5% 3%,
		rgba(255,211,0,0.10) 3% 4.5%,
		rgba(33,209,159,0.10) 4.5% 6%,
		rgba(0,195,255,0.10) 6% 7.5%,
		rgba(127,0,255,0.10) 7.5% 9%,
		rgba(255,0,128,0.10) 9% 10.5%
	);
	background-size: 400% 100%;
	animation: unicornShift 24s linear infinite;
}

	/* Prism: neon gradient-heavy theme on a dark canvas */
	[data-theme='prism'] {
		/* Global dark canvas with animated neon gradient */
		background-color: #02020A !important;
		--prism-pos-a: 0% 0%;
		--prism-pos-b: 100% 0%;
		--prism-pos-c: 0 0;
		--prism-size-a: 140% 140%;
		--prism-size-b: 160% 160%;
		--prism-size-c: 100% 100%;
		--prism-pan-duration: 60s;
		--prism-pan-delay: 0s;
		--prism-pan-direction: alternate;
		background-image: radial-gradient(1200px 800px at 10% 10%, rgba(168,85,247,0.4), transparent 62%),
											radial-gradient(1000px 700px at 90% 20%, rgba(34,211,238,0.32), transparent 68%),
											linear-gradient(135deg, #0a0a16 0%, #0b1220 100%);
		background-size: var(--prism-size-a), var(--prism-size-b), var(--prism-size-c);
		background-position: var(--prism-pos-a), var(--prism-pos-b), var(--prism-pos-c);
		animation: prismBgPan var(--prism-pan-duration) ease-in-out infinite;
		animation-delay: var(--prism-pan-delay);
		animation-direction: var(--prism-pan-direction);
		color: #E6EAF2 !important;
	}
	/* Remove invalid descendant targeting of body; body themed via :has above */
	[data-theme='prism'] input, [data-theme='prism'] select, [data-theme='prism'] button { color: inherit }
	[data-theme='prism'] .bg-white,
	[data-theme='prism'] .bg-neutral-50,
	[data-theme='prism'] .bg-neutral-100,
	[data-theme='prism'] .bg-neutral-200,
	[data-theme='prism'] .bg-neutral-800,
	[data-theme='prism'] .bg-neutral-900 {
		/* Rich rainbow gradient with slow pan */
		background-image: linear-gradient(var(--prism-panel-angle, 135deg),
			rgba(255,0,128,0.96) 0%,      /* magenta */
			rgba(255,140,0,0.97) 12%,      /* orange */
			rgba(255,211,0,0.97) 24%,      /* yellow */
			rgba(72,199,116,0.96) 36%,     /* green */
			rgba(34,211,238,0.96) 48%,     /* cyan */
			rgba(59,130,246,0.98) 60%,    /* blue */
			rgba(127,0,255,0.98) 72%,     /* violet */
			rgba(255,0,128,0.96) 84%,
			rgba(255,140,0,0.95) 100%
		) !important;
		background-size: 200% 200%;
		animation: prismPan 24s ease-in-out infinite;
		animation-delay: var(--prism-delay, 0s);
	}
	[data-theme='prism'] .border,
	[data-theme='prism'] .border-neutral-200,
	[data-theme='prism'] .border-neutral-300,
	[data-theme='prism'] .border-neutral-600,
	[data-theme='prism'] .border-neutral-700,
	[data-theme='prism'] .border-neutral-800,
	[data-theme='prism'] .border-white { border-color: rgba(173,216,230,0.62) !important; }
	[data-theme='prism'] .text-neutral-900,
	[data-theme='prism'] .text-neutral-800,
	[data-theme='prism'] .text-neutral-700,
	[data-theme='prism'] .text-neutral-600,
	[data-theme='prism'] .text-neutral-100,
	[data-theme='prism'] .text-white { color: #E6EAF2 !important; }
	[data-theme='prism'] .hover\:bg-neutral-100:hover,
	[data-theme='prism'] .hover\:bg-neutral-800:hover { background-color: rgba(255,255,255,0.12) !important; }
	@keyframes prismPan {
		0% { background-position: 0% 50%; }
		50% { background-position: 100% 50%; }
		100% { background-position: 0% 50%; }
	}
	@keyframes prismBgPan {
		0% { background-position: 0% 0%, 100% 0%, 0 0; }
		50% { background-position: 100% 50%, 0% 50%, 0 0; }
		100% { background-position: 0% 0%, 100% 0%, 0 0; }
	}
	/* Stagger helpers for surfaces */
	.prism-surface-1 { --prism-delay: 0s; --prism-panel-angle: 120deg; }
	.prism-surface-2 { --prism-delay: 4s; --prism-panel-angle: 165deg; }
	.prism-surface-3 { --prism-delay: 8s; --prism-panel-angle: 210deg; }
	.prism-surface-4 { --prism-delay: 12s; --prism-panel-angle: 255deg; }
	.prism-cycle-1 { --prism-pos-a: 8% 12%; --prism-pos-b: 62% 4%; --prism-pos-c: 0 0; --prism-size-a: 150% 150%; --prism-size-b: 170% 150%; --prism-pan-duration: 52s; --prism-pan-delay: -4s; }
	.prism-cycle-2 { --prism-pos-a: 82% 22%; --prism-pos-b: 14% 74%; --prism-pos-c: 0 0; --prism-size-a: 145% 150%; --prism-size-b: 185% 165%; --prism-pan-duration: 46s; --prism-pan-delay: -12s; --prism-pan-direction: alternate-reverse; }
	.prism-cycle-3 { --prism-pos-a: 24% 76%; --prism-pos-b: 88% 36%; --prism-pos-c: 0 0; --prism-size-a: 165% 170%; --prism-size-b: 175% 150%; --prism-pan-duration: 58s; --prism-pan-delay: -20s; }
	.prism-cycle-4 { --prism-pos-a: 68% 10%; --prism-pos-b: 12% 68%; --prism-pos-c: 0 0; --prism-size-a: 155% 160%; --prism-size-b: 190% 165%; --prism-pan-duration: 54s; --prism-pan-delay: -28s; --prism-pan-direction: alternate-reverse; }
	.prism-cycle-5 { --prism-pos-a: 12% 68%; --prism-pos-b: 74% 88%; --prism-pos-c: 0 0; --prism-size-a: 170% 165%; --prism-size-b: 165% 150%; --prism-pan-duration: 62s; --prism-pan-delay: -36s; }
	.prism-cycle-6 { --prism-pos-a: 46% 6%; --prism-pos-b: 6% 42%; --prism-pos-c: 0 0; --prism-size-a: 160% 150%; --prism-size-b: 175% 180%; --prism-pan-duration: 50s; --prism-pan-delay: -16s; --prism-pan-direction: alternate-reverse; }
	[data-theme='prism'] .prism-chip {
		background-size: 260% 100%;
		background-position: var(--prism-chip-pos, 0% 50%);
		animation: prismChip var(--prism-chip-duration, 26s) ease-in-out infinite;
		animation-delay: var(--prism-chip-delay, 0s);
		animation-direction: var(--prism-chip-direction, alternate);
	}
	.prism-chip-cycle-1 { --prism-chip-pos: 0% 46%; --prism-chip-delay: -2s; --prism-chip-duration: 24s; }
	.prism-chip-cycle-2 { --prism-chip-pos: 25% 52%; --prism-chip-delay: -6s; --prism-chip-duration: 28s; --prism-chip-direction: alternate-reverse; }
	.prism-chip-cycle-3 { --prism-chip-pos: 50% 44%; --prism-chip-delay: -10s; --prism-chip-duration: 30s; }
	.prism-chip-cycle-4 { --prism-chip-pos: 75% 58%; --prism-chip-delay: -4s; --prism-chip-duration: 26s; --prism-chip-direction: alternate-reverse; }
	.prism-chip-cycle-5 { --prism-chip-pos: 10% 38%; --prism-chip-delay: -12s; --prism-chip-duration: 32s; }
	.prism-chip-cycle-6 { --prism-chip-pos: 60% 62%; --prism-chip-delay: -8s; --prism-chip-duration: 29s; --prism-chip-direction: alternate-reverse; }
	/* Inputs: tint native date icon neon-cyan */
	[data-theme='prism'] input[type="date"]::-webkit-calendar-picker-indicator{
		filter: invert(71%) sepia(97%) saturate(415%) hue-rotate(161deg) brightness(104%) contrast(97%);
	}
	/* Accent outlines for focus and active elements */
	[data-theme='prism'] :focus { outline-color: rgba(99,102,241,0.65) }
	[data-theme='prism'] .ring-1, [data-theme='prism'] .ring-2 { --tw-ring-color: rgba(99,102,241,0.55) }
	/* Day selector current pill pop */
	[data-theme='prism'] .bg-blue-600 { background-image: linear-gradient(90deg, #a855f7, #3b82f6) !important; border-color: transparent !important; }
	[data-theme='prism'] .text-red-600 { color: #22d3ee !important; }

	/* Prism chip animation (per-shift) */
	@keyframes prismChip {
		0% { background-position: 0% 50%; }
		50% { background-position: 100% 50%; }
		100% { background-position: 0% 50%; }
	}
