(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))D(M);new MutationObserver(M=>{for(const g of M)if(g.type==="childList")for(const V of g.addedNodes)V.tagName==="LINK"&&V.rel==="modulepreload"&&D(V)}).observe(document,{childList:!0,subtree:!0});function c(M){const g={};return M.integrity&&(g.integrity=M.integrity),M.referrerPolicy&&(g.referrerPolicy=M.referrerPolicy),M.crossOrigin==="use-credentials"?g.credentials="include":M.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function D(M){if(M.ep)return;M.ep=!0;const g=c(M);fetch(M.href,g)}})();function id(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Ii={exports:{}},Jl={},$i={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc;function wf(){if(Yc)return xt;Yc=1;var a=Symbol.for("react.element"),y=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),V=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),fe=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Q=Symbol.iterator;function J(d){return d===null||typeof d!="object"?null:(d=Q&&d[Q]||d["@@iterator"],typeof d=="function"?d:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,h={};function v(d,C,Ie){this.props=d,this.context=C,this.refs=h,this.updater=Ie||ee}v.prototype.isReactComponent={},v.prototype.setState=function(d,C){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,C,"setState")},v.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function S(){}S.prototype=v.prototype;function p(d,C,Ie){this.props=d,this.context=C,this.refs=h,this.updater=Ie||ee}var T=p.prototype=new S;T.constructor=p,G(T,v.prototype),T.isPureReactComponent=!0;var O=Array.isArray,L=Object.prototype.hasOwnProperty,Ee={current:null},je={key:!0,ref:!0,__self:!0,__source:!0};function $e(d,C,Ie){var Me,Xe={},ke=null,Z=null;if(C!=null)for(Me in C.ref!==void 0&&(Z=C.ref),C.key!==void 0&&(ke=""+C.key),C)L.call(C,Me)&&!je.hasOwnProperty(Me)&&(Xe[Me]=C[Me]);var ue=arguments.length-2;if(ue===1)Xe.children=Ie;else if(1<ue){for(var W=Array(ue),q=0;q<ue;q++)W[q]=arguments[q+2];Xe.children=W}if(d&&d.defaultProps)for(Me in ue=d.defaultProps,ue)Xe[Me]===void 0&&(Xe[Me]=ue[Me]);return{$$typeof:a,type:d,key:ke,ref:Z,props:Xe,_owner:Ee.current}}function We(d,C){return{$$typeof:a,type:d.type,key:C,ref:d.ref,props:d.props,_owner:d._owner}}function Ne(d){return typeof d=="object"&&d!==null&&d.$$typeof===a}function ye(d){var C={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(Ie){return C[Ie]})}var Re=/\/+/g;function ae(d,C){return typeof d=="object"&&d!==null&&d.key!=null?ye(""+d.key):C.toString(36)}function Fe(d,C,Ie,Me,Xe){var ke=typeof d;(ke==="undefined"||ke==="boolean")&&(d=null);var Z=!1;if(d===null)Z=!0;else switch(ke){case"string":case"number":Z=!0;break;case"object":switch(d.$$typeof){case a:case y:Z=!0}}if(Z)return Z=d,Xe=Xe(Z),d=Me===""?"."+ae(Z,0):Me,O(Xe)?(Ie="",d!=null&&(Ie=d.replace(Re,"$&/")+"/"),Fe(Xe,C,Ie,"",function(q){return q})):Xe!=null&&(Ne(Xe)&&(Xe=We(Xe,Ie+(!Xe.key||Z&&Z.key===Xe.key?"":(""+Xe.key).replace(Re,"$&/")+"/")+d)),C.push(Xe)),1;if(Z=0,Me=Me===""?".":Me+":",O(d))for(var ue=0;ue<d.length;ue++){ke=d[ue];var W=Me+ae(ke,ue);Z+=Fe(ke,C,Ie,W,Xe)}else if(W=J(d),typeof W=="function")for(d=W.call(d),ue=0;!(ke=d.next()).done;)ke=ke.value,W=Me+ae(ke,ue++),Z+=Fe(ke,C,Ie,W,Xe);else if(ke==="object")throw C=String(d),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return Z}function Ve(d,C,Ie){if(d==null)return d;var Me=[],Xe=0;return Fe(d,Me,"","",function(ke){return C.call(Ie,ke,Xe++)}),Me}function X(d){if(d._status===-1){var C=d._result;C=C(),C.then(function(Ie){(d._status===0||d._status===-1)&&(d._status=1,d._result=Ie)},function(Ie){(d._status===0||d._status===-1)&&(d._status=2,d._result=Ie)}),d._status===-1&&(d._status=0,d._result=C)}if(d._status===1)return d._result.default;throw d._result}var R={current:null},k={transition:null},_={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:k,ReactCurrentOwner:Ee};function U(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:Ve,forEach:function(d,C,Ie){Ve(d,function(){C.apply(this,arguments)},Ie)},count:function(d){var C=0;return Ve(d,function(){C++}),C},toArray:function(d){return Ve(d,function(C){return C})||[]},only:function(d){if(!Ne(d))throw Error("React.Children.only expected to receive a single React element child.");return d}},xt.Component=v,xt.Fragment=c,xt.Profiler=M,xt.PureComponent=p,xt.StrictMode=D,xt.Suspense=A,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_,xt.act=U,xt.cloneElement=function(d,C,Ie){if(d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+d+".");var Me=G({},d.props),Xe=d.key,ke=d.ref,Z=d._owner;if(C!=null){if(C.ref!==void 0&&(ke=C.ref,Z=Ee.current),C.key!==void 0&&(Xe=""+C.key),d.type&&d.type.defaultProps)var ue=d.type.defaultProps;for(W in C)L.call(C,W)&&!je.hasOwnProperty(W)&&(Me[W]=C[W]===void 0&&ue!==void 0?ue[W]:C[W])}var W=arguments.length-2;if(W===1)Me.children=Ie;else if(1<W){ue=Array(W);for(var q=0;q<W;q++)ue[q]=arguments[q+2];Me.children=ue}return{$$typeof:a,type:d.type,key:Xe,ref:ke,props:Me,_owner:Z}},xt.createContext=function(d){return d={$$typeof:V,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},d.Provider={$$typeof:g,_context:d},d.Consumer=d},xt.createElement=$e,xt.createFactory=function(d){var C=$e.bind(null,d);return C.type=d,C},xt.createRef=function(){return{current:null}},xt.forwardRef=function(d){return{$$typeof:B,render:d}},xt.isValidElement=Ne,xt.lazy=function(d){return{$$typeof:ie,_payload:{_status:-1,_result:d},_init:X}},xt.memo=function(d,C){return{$$typeof:fe,type:d,compare:C===void 0?null:C}},xt.startTransition=function(d){var C=k.transition;k.transition={};try{d()}finally{k.transition=C}},xt.unstable_act=U,xt.useCallback=function(d,C){return R.current.useCallback(d,C)},xt.useContext=function(d){return R.current.useContext(d)},xt.useDebugValue=function(){},xt.useDeferredValue=function(d){return R.current.useDeferredValue(d)},xt.useEffect=function(d,C){return R.current.useEffect(d,C)},xt.useId=function(){return R.current.useId()},xt.useImperativeHandle=function(d,C,Ie){return R.current.useImperativeHandle(d,C,Ie)},xt.useInsertionEffect=function(d,C){return R.current.useInsertionEffect(d,C)},xt.useLayoutEffect=function(d,C){return R.current.useLayoutEffect(d,C)},xt.useMemo=function(d,C){return R.current.useMemo(d,C)},xt.useReducer=function(d,C,Ie){return R.current.useReducer(d,C,Ie)},xt.useRef=function(d){return R.current.useRef(d)},xt.useState=function(d){return R.current.useState(d)},xt.useSyncExternalStore=function(d,C,Ie){return R.current.useSyncExternalStore(d,C,Ie)},xt.useTransition=function(){return R.current.useTransition()},xt.version="18.3.1",xt}var Jc;function Wi(){return Jc||(Jc=1,$i.exports=wf()),$i.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gc;function jf(){if(Gc)return Jl;Gc=1;var a=Wi(),y=Symbol.for("react.element"),c=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,M=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function V(B,A,fe){var ie,Q={},J=null,ee=null;fe!==void 0&&(J=""+fe),A.key!==void 0&&(J=""+A.key),A.ref!==void 0&&(ee=A.ref);for(ie in A)D.call(A,ie)&&!g.hasOwnProperty(ie)&&(Q[ie]=A[ie]);if(B&&B.defaultProps)for(ie in A=B.defaultProps,A)Q[ie]===void 0&&(Q[ie]=A[ie]);return{$$typeof:y,type:B,key:J,ref:ee,props:Q,_owner:M.current}}return Jl.Fragment=c,Jl.jsx=V,Jl.jsxs=V,Jl}var Zc;function bf(){return Zc||(Zc=1,Ii.exports=jf()),Ii.exports}var r=bf(),oe=Wi();const w=id(oe);var qo={},Li={exports:{}},Wn={},Pi={exports:{}},_i={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qc;function Nf(){return qc||(qc=1,(function(a){function y(k,_){var U=k.length;k.push(_);e:for(;0<U;){var d=U-1>>>1,C=k[d];if(0<M(C,_))k[d]=_,k[U]=C,U=d;else break e}}function c(k){return k.length===0?null:k[0]}function D(k){if(k.length===0)return null;var _=k[0],U=k.pop();if(U!==_){k[0]=U;e:for(var d=0,C=k.length,Ie=C>>>1;d<Ie;){var Me=2*(d+1)-1,Xe=k[Me],ke=Me+1,Z=k[ke];if(0>M(Xe,U))ke<C&&0>M(Z,Xe)?(k[d]=Z,k[ke]=U,d=ke):(k[d]=Xe,k[Me]=U,d=Me);else if(ke<C&&0>M(Z,U))k[d]=Z,k[ke]=U,d=ke;else break e}}return _}function M(k,_){var U=k.sortIndex-_.sortIndex;return U!==0?U:k.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;a.unstable_now=function(){return g.now()}}else{var V=Date,B=V.now();a.unstable_now=function(){return V.now()-B}}var A=[],fe=[],ie=1,Q=null,J=3,ee=!1,G=!1,h=!1,v=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(k){for(var _=c(fe);_!==null;){if(_.callback===null)D(fe);else if(_.startTime<=k)D(fe),_.sortIndex=_.expirationTime,y(A,_);else break;_=c(fe)}}function O(k){if(h=!1,T(k),!G)if(c(A)!==null)G=!0,X(L);else{var _=c(fe);_!==null&&R(O,_.startTime-k)}}function L(k,_){G=!1,h&&(h=!1,S($e),$e=-1),ee=!0;var U=J;try{for(T(_),Q=c(A);Q!==null&&(!(Q.expirationTime>_)||k&&!ye());){var d=Q.callback;if(typeof d=="function"){Q.callback=null,J=Q.priorityLevel;var C=d(Q.expirationTime<=_);_=a.unstable_now(),typeof C=="function"?Q.callback=C:Q===c(A)&&D(A),T(_)}else D(A);Q=c(A)}if(Q!==null)var Ie=!0;else{var Me=c(fe);Me!==null&&R(O,Me.startTime-_),Ie=!1}return Ie}finally{Q=null,J=U,ee=!1}}var Ee=!1,je=null,$e=-1,We=5,Ne=-1;function ye(){return!(a.unstable_now()-Ne<We)}function Re(){if(je!==null){var k=a.unstable_now();Ne=k;var _=!0;try{_=je(!0,k)}finally{_?ae():(Ee=!1,je=null)}}else Ee=!1}var ae;if(typeof p=="function")ae=function(){p(Re)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Ve=Fe.port2;Fe.port1.onmessage=Re,ae=function(){Ve.postMessage(null)}}else ae=function(){v(Re,0)};function X(k){je=k,Ee||(Ee=!0,ae())}function R(k,_){$e=v(function(){k(a.unstable_now())},_)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(k){k.callback=null},a.unstable_continueExecution=function(){G||ee||(G=!0,X(L))},a.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):We=0<k?Math.floor(1e3/k):5},a.unstable_getCurrentPriorityLevel=function(){return J},a.unstable_getFirstCallbackNode=function(){return c(A)},a.unstable_next=function(k){switch(J){case 1:case 2:case 3:var _=3;break;default:_=J}var U=J;J=_;try{return k()}finally{J=U}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(k,_){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var U=J;J=k;try{return _()}finally{J=U}},a.unstable_scheduleCallback=function(k,_,U){var d=a.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?d+U:d):U=d,k){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=U+C,k={id:ie++,callback:_,priorityLevel:k,startTime:U,expirationTime:C,sortIndex:-1},U>d?(k.sortIndex=U,y(fe,k),c(A)===null&&k===c(fe)&&(h?(S($e),$e=-1):h=!0,R(O,U-d))):(k.sortIndex=C,y(A,k),G||ee||(G=!0,X(L))),k},a.unstable_shouldYield=ye,a.unstable_wrapCallback=function(k){var _=J;return function(){var U=J;J=_;try{return k.apply(this,arguments)}finally{J=U}}}})(_i)),_i}var ed;function Sf(){return ed||(ed=1,Pi.exports=Nf()),Pi.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td;function Mf(){if(td)return Wn;td=1;var a=Wi(),y=Sf();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D=new Set,M={};function g(e,t){V(e,t),V(e+"Capture",t)}function V(e,t){for(M[e]=t,e=0;e<t.length;e++)D.add(t[e])}var B=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A=Object.prototype.hasOwnProperty,fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ie={},Q={};function J(e){return A.call(Q,e)?!0:A.call(ie,e)?!1:fe.test(e)?Q[e]=!0:(ie[e]=!0,!1)}function ee(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G(e,t,n,s){if(t===null||typeof t>"u"||ee(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function h(e,t,n,s,l,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(S,p);v[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(S,p);v[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(S,p);v[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,t,n,s){var l=v.hasOwnProperty(t)?v[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G(t,n,l,s)&&(n=null),s||l===null?J(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,s=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var O=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),je=Symbol.for("react.fragment"),$e=Symbol.for("react.strict_mode"),We=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),ye=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),k=Symbol.iterator;function _(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var U=Object.assign,d;function C(e){if(d===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);d=t&&t[1]||""}return`
`+d+e}var Ie=!1;function Me(e,t){if(!e||Ie)return"";Ie=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(z){var s=z}Reflect.construct(e,[],t)}else{try{t.call()}catch(z){s=z}e.call(t.prototype)}else{try{throw Error()}catch(z){s=z}e()}}catch(z){if(z&&s&&typeof z.stack=="string"){for(var l=z.stack.split(`
`),o=s.stack.split(`
`),i=l.length-1,f=o.length-1;1<=i&&0<=f&&l[i]!==o[f];)f--;for(;1<=i&&0<=f;i--,f--)if(l[i]!==o[f]){if(i!==1||f!==1)do if(i--,f--,0>f||l[i]!==o[f]){var x=`
`+l[i].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=i&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?C(e):""}function Xe(e){switch(e.tag){case 5:return C(e.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return e=Me(e.type,!1),e;case 11:return e=Me(e.type.render,!1),e;case 1:return e=Me(e.type,!0),e;default:return""}}function ke(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case je:return"Fragment";case Ee:return"Portal";case We:return"Profiler";case $e:return"StrictMode";case ae:return"Suspense";case Fe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ye:return(e.displayName||"Context")+".Consumer";case Ne:return(e._context.displayName||"Context")+".Provider";case Re:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ve:return t=e.displayName||null,t!==null?t:ke(e.type)||"Memo";case X:t=e._payload,e=e._init;try{return ke(e(t))}catch{}}return null}function Z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(t);case 8:return t===$e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ue(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Te(e){e._valueTracker||(e._valueTracker=q(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ve(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gt(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function et(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ue(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ut(e,t){t=t.checked,t!=null&&T(e,"checked",t,!1)}function j(e,t){ut(e,t);var n=ue(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Le(e,t.type,n):t.hasOwnProperty("defaultValue")&&Le(e,t.type,ue(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function I(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Le(e,t,n){(t!=="number"||ve(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var re=Array.isArray;function De(e,t,n,s){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ue(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Y(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function K(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(c(92));if(re(n)){if(1<n.length)throw Error(c(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ue(n)}}function se(e,t){var n=ue(t.value),s=ue(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Ce(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ct,zt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ct=ct||document.createElement("div"),ct.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ce(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},te=["Webkit","ms","Moz","O"];Object.keys(Pe).forEach(function(e){te.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pe[t]=Pe[e]})});function lt(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pe.hasOwnProperty(e)&&Pe[e]?(""+t).trim():t+"px"}function pt(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=lt(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,l):e[n]=l}}var St=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wt(e,t){if(t){if(St[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function Wt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=null;function ft(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tt=null,Qt=null,Ut=null;function at(e){if(e=Tl(e)){if(typeof Tt!="function")throw Error(c(280));var t=e.stateNode;t&&(t=ho(t),Tt(e.stateNode,e.type,t))}}function Vt(e){Qt?Ut?Ut.push(e):Ut=[e]:Qt=e}function _t(){if(Qt){var e=Qt,t=Ut;if(Ut=Qt=null,at(e),t)for(e=0;e<t.length;e++)at(t[e])}}function At(e,t){return e(t)}function tt(){}var Rt=!1;function we(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return At(e,t,n)}finally{Rt=!1,(Qt!==null||Ut!==null)&&(tt(),_t())}}function rt(e,t){var n=e.stateNode;if(n===null)return null;var s=ho(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var vt=!1;if(B)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){vt=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{vt=!1}function jt(e,t,n,s,l,o,i,f,x){var z=Array.prototype.slice.call(arguments,3);try{t.apply(n,z)}catch(le){this.onError(le)}}var Mt=!1,Zt=null,Jt=!1,gn=null,fn={onError:function(e){Mt=!0,Zt=e}};function br(e,t,n,s,l,o,i,f,x){Mt=!1,Zt=null,jt.apply(fn,arguments)}function cr(e,t,n,s,l,o,i,f,x){if(br.apply(this,arguments),Mt){if(Mt){var z=Zt;Mt=!1,Zt=null}else throw Error(c(198));Jt||(Jt=!0,gn=z)}}function an(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ir(e){if(an(e)!==e)throw Error(c(188))}function Vn(e){var t=e.alternate;if(!t){if(t=an(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,s=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Ir(l),e;if(o===s)return Ir(l),t;o=o.sibling}throw Error(c(188))}if(n.return!==s.return)n=l,s=o;else{for(var i=!1,f=l.child;f;){if(f===n){i=!0,n=l,s=o;break}if(f===s){i=!0,s=l,n=o;break}f=f.sibling}if(!i){for(f=o.child;f;){if(f===n){i=!0,n=o,s=l;break}if(f===s){i=!0,s=o,n=l;break}f=f.sibling}if(!i)throw Error(c(189))}}if(n.alternate!==s)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function qn(e){return e=Vn(e),e!==null?E(e):null}function E(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=E(e);if(t!==null)return t;e=e.sibling}return null}var me=y.unstable_scheduleCallback,Se=y.unstable_cancelCallback,be=y.unstable_shouldYield,he=y.unstable_requestPaint,_e=y.unstable_now,Ae=y.unstable_getCurrentPriorityLevel,st=y.unstable_ImmediatePriority,bt=y.unstable_UserBlockingPriority,Ft=y.unstable_NormalPriority,In=y.unstable_LowPriority,Ot=y.unstable_IdlePriority,jn=null,mn=null;function fr(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(jn,e,void 0,(e.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:hl,Br=Math.log,Zl=Math.LN2;function hl(e){return e>>>=0,e===0?32:31-(Br(e)/Zl|0)|0}var ms=64,Wr=4194304;function Hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ur(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var f=i&~l;f!==0?s=Hr(f):(o&=i,o!==0&&(s=Hr(o)))}else i=n&~l,i!==0?s=Hr(i):o!==0&&(s=Hr(o));if(s===0)return 0;if(t!==0&&t!==s&&(t&l)===0&&(l=s&-s,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-bn(t),l=1<<n,s|=e[n],t&=~l;return s}function ql(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-bn(o),f=1<<i,x=l[i];x===-1?((f&n)===0||(f&s)!==0)&&(l[i]=ql(f,t)):x<=t&&(e.expiredLanes|=f),o&=~f}}function As(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hs(){var e=ms;return ms<<=1,(ms&4194240)===0&&(ms=64),e}function Os(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bn(t),e[t]=n}function eo(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-bn(n),o=1<<l;t[l]=0,s[l]=-1,e[l]=-1,n&=~o}}function Vr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-bn(n),l=1<<s;l&t|e[s]&t&&(e[s]|=t),n&=~l}}var It=0;function xl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var gl,Kn,to,zs,yl,Kr=!1,Qr=[],Qn=null,er=null,Xn=null,$r=new Map,Xr=new Map,tr=[],la="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vl(e,t){switch(e){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":$r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(t.pointerId)}}function Sr(e,t,n,s,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[l]},t!==null&&(t=Tl(t),t!==null&&Kn(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function oa(e,t,n,s,l){switch(t){case"focusin":return Qn=Sr(Qn,e,t,n,s,l),!0;case"dragenter":return er=Sr(er,e,t,n,s,l),!0;case"mouseover":return Xn=Sr(Xn,e,t,n,s,l),!0;case"pointerover":var o=l.pointerId;return $r.set(o,Sr($r.get(o)||null,e,t,n,s,l)),!0;case"gotpointercapture":return o=l.pointerId,Xr.set(o,Sr(Xr.get(o)||null,e,t,n,s,l)),!0}return!1}function ps(e){var t=Ns(e.target);if(t!==null){var n=an(t);if(n!==null){if(t=n.tag,t===13){if(t=dr(n),t!==null){e.blockedOn=t,yl(e.priority,function(){to(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Ht=s,n.target.dispatchEvent(s),Ht=null}else return t=Tl(n),t!==null&&Kn(t),e.blockedOn=n,!1;t.shift()}return!0}function xs(e,t,n){Rs(e)&&n.delete(t)}function aa(){Kr=!1,Qn!==null&&Rs(Qn)&&(Qn=null),er!==null&&Rs(er)&&(er=null),Xn!==null&&Rs(Xn)&&(Xn=null),$r.forEach(xs),Xr.forEach(xs)}function nr(e,t){e.blockedOn===t&&(e.blockedOn=null,Kr||(Kr=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,aa)))}function gs(e){function t(l){return nr(l,e)}if(0<Qr.length){nr(Qr[0],e);for(var n=1;n<Qr.length;n++){var s=Qr[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Qn!==null&&nr(Qn,e),er!==null&&nr(er,e),Xn!==null&&nr(Xn,e),$r.forEach(t),Xr.forEach(t),n=0;n<tr.length;n++)s=tr[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)ps(n),n.blockedOn===null&&tr.shift()}var Yn=O.ReactCurrentBatchConfig,ys=!0;function no(e,t,n,s){var l=It,o=Yn.transition;Yn.transition=null;try{It=1,Fs(e,t,n,s)}finally{It=l,Yn.transition=o}}function ia(e,t,n,s){var l=It,o=Yn.transition;Yn.transition=null;try{It=4,Fs(e,t,n,s)}finally{It=l,Yn.transition=o}}function Fs(e,t,n,s){if(ys){var l=vs(e,t,n,s);if(l===null)wa(e,t,s,Bs,n),vl(e,s);else if(oa(l,e,t,n,s))s.stopPropagation();else if(vl(e,s),t&4&&-1<la.indexOf(e)){for(;l!==null;){var o=Tl(l);if(o!==null&&gl(o),o=vs(e,t,n,s),o===null&&wa(e,t,s,Bs,n),o===l)break;l=o}l!==null&&s.stopPropagation()}else wa(e,t,s,null,n)}}var Bs=null;function vs(e,t,n,s){if(Bs=null,e=ft(s),e=Ns(e),e!==null)if(t=an(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dr(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bs=e,null}function ro(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ae()){case st:return 1;case bt:return 4;case Ft:case In:return 16;case Ot:return 536870912;default:return 16}default:return 16}}var mr=null,wl=null,Mr=null;function jl(){if(Mr)return Mr;var e,t=wl,n=t.length,s,l="value"in mr?mr.value:mr.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===l[o-s];s++);return Mr=l.slice(e,1<s?1-s:void 0)}function ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function so(){return!1}function yn(e){function t(n,s,l,o,i){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ws:so,this.isPropagationStopped=so,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=yn(Yr),js=U({},Yr,{view:0,detail:0}),ua=yn(js),Nl,Sl,bs,u=U({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bs&&(bs&&e.type==="mousemove"?(Nl=e.screenX-bs.screenX,Sl=e.screenY-bs.screenY):Sl=Nl=0,bs=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),m=yn(u),F=U({},u,{dataTransfer:0}),H=yn(F),pe=U({},js,{relatedTarget:0}),Ge=yn(pe),mt=U({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),$t=yn(mt),yt=U({},Yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kt=yn(yt),dt=U({},Yr,{data:0}),ln=yn(dt),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ct(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ht[e])?!!t[e]:!1}function Et(){return Ct}var rn=U({},js,{key:function(e){if(e.key){var t=b[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ke[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tn=yn(rn),Pt=U({},u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bt=yn(Pt),Nn=U({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et}),_n=yn(Nn),Tn=U({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),An=yn(Tn),$n=U({},u,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ml=yn($n),Hs=[9,13,27,32],Us=B&&"CompositionEvent"in window,Lr=null;B&&"documentMode"in document&&(Lr=document.documentMode);var ca=B&&"TextEvent"in window&&!Lr,kl=B&&(!Us||Lr&&8<Lr&&11>=Lr),lo=" ",Jr=!1;function Ui(e,t){switch(e){case"keyup":return Hs.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vs=!1;function xd(e,t){switch(e){case"compositionend":return Vi(t);case"keypress":return t.which!==32?null:(Jr=!0,lo);case"textInput":return e=t.data,e===lo&&Jr?null:e;default:return null}}function gd(e,t){if(Vs)return e==="compositionend"||!Us&&Ui(e,t)?(e=jl(),Mr=wl=mr=null,Vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kl&&t.locale!=="ko"?null:t.data;default:return null}}var yd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yd[e.type]:t==="textarea"}function Qi(e,t,n,s){Vt(s),t=co(t,"onChange"),0<t.length&&(n=new bl("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Cl=null,El=null;function vd(e){du(e,0)}function oo(e){var t=Js(e);if(Ye(t))return e}function wd(e,t){if(e==="change")return t}var Xi=!1;if(B){var da;if(B){var fa="oninput"in document;if(!fa){var Yi=document.createElement("div");Yi.setAttribute("oninput","return;"),fa=typeof Yi.oninput=="function"}da=fa}else da=!1;Xi=da&&(!document.documentMode||9<document.documentMode)}function Ji(){Cl&&(Cl.detachEvent("onpropertychange",Gi),El=Cl=null)}function Gi(e){if(e.propertyName==="value"&&oo(El)){var t=[];Qi(t,El,e,ft(e)),we(vd,t)}}function jd(e,t,n){e==="focusin"?(Ji(),Cl=t,El=n,Cl.attachEvent("onpropertychange",Gi)):e==="focusout"&&Ji()}function bd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oo(El)}function Nd(e,t){if(e==="click")return oo(t)}function Sd(e,t){if(e==="input"||e==="change")return oo(t)}function Md(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hr=typeof Object.is=="function"?Object.is:Md;function Dl(e,t){if(hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!A.call(t,l)||!hr(e[l],t[l]))return!1}return!0}function Zi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function qi(e,t){var n=Zi(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zi(n)}}function eu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tu(){for(var e=window,t=ve();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ve(e.document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kd(e){var t=tu(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&eu(n.ownerDocument.documentElement,n)){if(s!==null&&ma(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,o=Math.min(s.start,l);s=s.end===void 0?o:Math.min(s.end,l),!e.extend&&o>s&&(l=s,s=o,o=l),l=qi(n,o);var i=qi(n,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cd=B&&"documentMode"in document&&11>=document.documentMode,Ks=null,ha=null,Il=null,pa=!1;function nu(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pa||Ks==null||Ks!==ve(s)||(s=Ks,"selectionStart"in s&&ma(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Il&&Dl(Il,s)||(Il=s,s=co(ha,"onSelect"),0<s.length&&(t=new bl("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ks)))}function ao(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qs={animationend:ao("Animation","AnimationEnd"),animationiteration:ao("Animation","AnimationIteration"),animationstart:ao("Animation","AnimationStart"),transitionend:ao("Transition","TransitionEnd")},xa={},ru={};B&&(ru=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function io(e){if(xa[e])return xa[e];if(!Qs[e])return e;var t=Qs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ru)return xa[e]=t[n];return e}var su=io("animationend"),lu=io("animationiteration"),ou=io("animationstart"),au=io("transitionend"),iu=new Map,uu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(e,t){iu.set(e,t),g(t,[e])}for(var ga=0;ga<uu.length;ga++){var ya=uu[ga],Ed=ya.toLowerCase(),Dd=ya[0].toUpperCase()+ya.slice(1);Gr(Ed,"on"+Dd)}Gr(su,"onAnimationEnd"),Gr(lu,"onAnimationIteration"),Gr(ou,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(au,"onTransitionEnd"),V("onMouseEnter",["mouseout","mouseover"]),V("onMouseLeave",["mouseout","mouseover"]),V("onPointerEnter",["pointerout","pointerover"]),V("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Id=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function cu(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,cr(s,t,void 0,e),e.currentTarget=null}function du(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],l=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var f=s[i],x=f.instance,z=f.currentTarget;if(f=f.listener,x!==o&&l.isPropagationStopped())break e;cu(l,f,z),o=x}else for(i=0;i<s.length;i++){if(f=s[i],x=f.instance,z=f.currentTarget,f=f.listener,x!==o&&l.isPropagationStopped())break e;cu(l,f,z),o=x}}}if(Jt)throw e=gn,Jt=!1,gn=null,e}function Xt(e,t){var n=t[ka];n===void 0&&(n=t[ka]=new Set);var s=e+"__bubble";n.has(s)||(fu(t,e,2,!1),n.add(s))}function va(e,t,n){var s=0;t&&(s|=4),fu(n,e,s,t)}var uo="_reactListening"+Math.random().toString(36).slice(2);function Ll(e){if(!e[uo]){e[uo]=!0,D.forEach(function(n){n!=="selectionchange"&&(Id.has(n)||va(n,!1,e),va(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uo]||(t[uo]=!0,va("selectionchange",!1,t))}}function fu(e,t,n,s){switch(ro(t)){case 1:var l=no;break;case 4:l=ia;break;default:l=Fs}n=l.bind(null,t,n,e),l=void 0,!vt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function wa(e,t,n,s,l){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var f=s.stateNode.containerInfo;if(f===l||f.nodeType===8&&f.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var x=i.tag;if((x===3||x===4)&&(x=i.stateNode.containerInfo,x===l||x.nodeType===8&&x.parentNode===l))return;i=i.return}for(;f!==null;){if(i=Ns(f),i===null)return;if(x=i.tag,x===5||x===6){s=o=i;continue e}f=f.parentNode}}s=s.return}we(function(){var z=o,le=ft(n),de=[];e:{var ne=iu.get(e);if(ne!==void 0){var ze=bl,Ue=e;switch(e){case"keypress":if(ws(n)===0)break e;case"keydown":case"keyup":ze=tn;break;case"focusin":Ue="focus",ze=Ge;break;case"focusout":Ue="blur",ze=Ge;break;case"beforeblur":case"afterblur":ze=Ge;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=H;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=_n;break;case su:case lu:case ou:ze=$t;break;case au:ze=An;break;case"scroll":ze=ua;break;case"wheel":ze=Ml;break;case"copy":case"cut":case"paste":ze=kt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Bt}var Qe=(t&4)!==0,sn=!Qe&&e==="scroll",$=Qe?ne!==null?ne+"Capture":null:ne;Qe=[];for(var N=z,P;N!==null;){P=N;var ge=P.stateNode;if(P.tag===5&&ge!==null&&(P=ge,$!==null&&(ge=rt(N,$),ge!=null&&Qe.push(Pl(N,ge,P)))),sn)break;N=N.return}0<Qe.length&&(ne=new ze(ne,Ue,null,n,le),de.push({event:ne,listeners:Qe}))}}if((t&7)===0){e:{if(ne=e==="mouseover"||e==="pointerover",ze=e==="mouseout"||e==="pointerout",ne&&n!==Ht&&(Ue=n.relatedTarget||n.fromElement)&&(Ns(Ue)||Ue[Pr]))break e;if((ze||ne)&&(ne=le.window===le?le:(ne=le.ownerDocument)?ne.defaultView||ne.parentWindow:window,ze?(Ue=n.relatedTarget||n.toElement,ze=z,Ue=Ue?Ns(Ue):null,Ue!==null&&(sn=an(Ue),Ue!==sn||Ue.tag!==5&&Ue.tag!==6)&&(Ue=null)):(ze=null,Ue=z),ze!==Ue)){if(Qe=m,ge="onMouseLeave",$="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(Qe=Bt,ge="onPointerLeave",$="onPointerEnter",N="pointer"),sn=ze==null?ne:Js(ze),P=Ue==null?ne:Js(Ue),ne=new Qe(ge,N+"leave",ze,n,le),ne.target=sn,ne.relatedTarget=P,ge=null,Ns(le)===z&&(Qe=new Qe($,N+"enter",Ue,n,le),Qe.target=P,Qe.relatedTarget=sn,ge=Qe),sn=ge,ze&&Ue)t:{for(Qe=ze,$=Ue,N=0,P=Qe;P;P=Xs(P))N++;for(P=0,ge=$;ge;ge=Xs(ge))P++;for(;0<N-P;)Qe=Xs(Qe),N--;for(;0<P-N;)$=Xs($),P--;for(;N--;){if(Qe===$||$!==null&&Qe===$.alternate)break t;Qe=Xs(Qe),$=Xs($)}Qe=null}else Qe=null;ze!==null&&mu(de,ne,ze,Qe,!1),Ue!==null&&sn!==null&&mu(de,sn,Ue,Qe,!0)}}e:{if(ne=z?Js(z):window,ze=ne.nodeName&&ne.nodeName.toLowerCase(),ze==="select"||ze==="input"&&ne.type==="file")var Je=wd;else if(Ki(ne))if(Xi)Je=Sd;else{Je=bd;var Ze=jd}else(ze=ne.nodeName)&&ze.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(Je=Nd);if(Je&&(Je=Je(e,z))){Qi(de,Je,n,le);break e}Ze&&Ze(e,ne,z),e==="focusout"&&(Ze=ne._wrapperState)&&Ze.controlled&&ne.type==="number"&&Le(ne,"number",ne.value)}switch(Ze=z?Js(z):window,e){case"focusin":(Ki(Ze)||Ze.contentEditable==="true")&&(Ks=Ze,ha=z,Il=null);break;case"focusout":Il=ha=Ks=null;break;case"mousedown":pa=!0;break;case"contextmenu":case"mouseup":case"dragend":pa=!1,nu(de,n,le);break;case"selectionchange":if(Cd)break;case"keydown":case"keyup":nu(de,n,le)}var qe;if(Us)e:{switch(e){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Vs?Ui(e,n)&&(ot="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ot="onCompositionStart");ot&&(kl&&n.locale!=="ko"&&(Vs||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Vs&&(qe=jl()):(mr=le,wl="value"in mr?mr.value:mr.textContent,Vs=!0)),Ze=co(z,ot),0<Ze.length&&(ot=new ln(ot,e,null,n,le),de.push({event:ot,listeners:Ze}),qe?ot.data=qe:(qe=Vi(n),qe!==null&&(ot.data=qe)))),(qe=ca?xd(e,n):gd(e,n))&&(z=co(z,"onBeforeInput"),0<z.length&&(le=new ln("onBeforeInput","beforeinput",null,n,le),de.push({event:le,listeners:z}),le.data=qe))}du(de,t)})}function Pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function co(e,t){for(var n=t+"Capture",s=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=rt(e,n),o!=null&&s.unshift(Pl(e,o,l)),o=rt(e,t),o!=null&&s.push(Pl(e,o,l))),e=e.return}return s}function Xs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mu(e,t,n,s,l){for(var o=t._reactName,i=[];n!==null&&n!==s;){var f=n,x=f.alternate,z=f.stateNode;if(x!==null&&x===s)break;f.tag===5&&z!==null&&(f=z,l?(x=rt(n,o),x!=null&&i.unshift(Pl(n,x,f))):l||(x=rt(n,o),x!=null&&i.push(Pl(n,x,f)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var $d=/\r\n?/g,Ld=/\u0000|\uFFFD/g;function hu(e){return(typeof e=="string"?e:""+e).replace($d,`
`).replace(Ld,"")}function fo(e,t,n){if(t=hu(t),hu(e)!==t&&n)throw Error(c(425))}function mo(){}var ja=null,ba=null;function Na(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sa=typeof setTimeout=="function"?setTimeout:void 0,Pd=typeof clearTimeout=="function"?clearTimeout:void 0,pu=typeof Promise=="function"?Promise:void 0,_d=typeof queueMicrotask=="function"?queueMicrotask:typeof pu<"u"?function(e){return pu.resolve(null).then(e).catch(Td)}:Sa;function Td(e){setTimeout(function(){throw e})}function Ma(e,t){var n=t,s=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){e.removeChild(l),gs(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);gs(t)}function Zr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),kr="__reactFiber$"+Ys,_l="__reactProps$"+Ys,Pr="__reactContainer$"+Ys,ka="__reactEvents$"+Ys,Ad="__reactListeners$"+Ys,Od="__reactHandles$"+Ys;function Ns(e){var t=e[kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pr]||n[kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xu(e);e!==null;){if(n=e[kr])return n;e=xu(e)}return t}e=n,n=e.parentNode}return null}function Tl(e){return e=e[kr]||e[Pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Js(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function ho(e){return e[_l]||null}var Ca=[],Gs=-1;function qr(e){return{current:e}}function Yt(e){0>Gs||(e.current=Ca[Gs],Ca[Gs]=null,Gs--)}function Kt(e,t){Gs++,Ca[Gs]=e.current,e.current=t}var es={},Sn=qr(es),On=qr(!1),Ss=es;function Zs(e,t){var n=e.type.contextTypes;if(!n)return es;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function zn(e){return e=e.childContextTypes,e!=null}function po(){Yt(On),Yt(Sn)}function gu(e,t,n){if(Sn.current!==es)throw Error(c(168));Kt(Sn,t),Kt(On,n)}function yu(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(c(108,Z(e)||"Unknown",l));return U({},n,s)}function xo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||es,Ss=Sn.current,Kt(Sn,e),Kt(On,On.current),!0}function vu(e,t,n){var s=e.stateNode;if(!s)throw Error(c(169));n?(e=yu(e,t,Ss),s.__reactInternalMemoizedMergedChildContext=e,Yt(On),Yt(Sn),Kt(Sn,e)):Yt(On),Kt(On,n)}var _r=null,go=!1,Ea=!1;function wu(e){_r===null?_r=[e]:_r.push(e)}function zd(e){go=!0,wu(e)}function ts(){if(!Ea&&_r!==null){Ea=!0;var e=0,t=It;try{var n=_r;for(It=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}_r=null,go=!1}catch(l){throw _r!==null&&(_r=_r.slice(e+1)),me(st,ts),l}finally{It=t,Ea=!1}}return null}var qs=[],el=0,yo=null,vo=0,rr=[],sr=0,Ms=null,Tr=1,Ar="";function ks(e,t){qs[el++]=vo,qs[el++]=yo,yo=e,vo=t}function ju(e,t,n){rr[sr++]=Tr,rr[sr++]=Ar,rr[sr++]=Ms,Ms=e;var s=Tr;e=Ar;var l=32-bn(s)-1;s&=~(1<<l),n+=1;var o=32-bn(t)+l;if(30<o){var i=l-l%5;o=(s&(1<<i)-1).toString(32),s>>=i,l-=i,Tr=1<<32-bn(t)+l|n<<l|s,Ar=o+e}else Tr=1<<o|n<<l|s,Ar=e}function Da(e){e.return!==null&&(ks(e,1),ju(e,1,0))}function Ia(e){for(;e===yo;)yo=qs[--el],qs[el]=null,vo=qs[--el],qs[el]=null;for(;e===Ms;)Ms=rr[--sr],rr[sr]=null,Ar=rr[--sr],rr[sr]=null,Tr=rr[--sr],rr[sr]=null}var Jn=null,Gn=null,Gt=!1,pr=null;function bu(e,t){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Nu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jn=e,Gn=Zr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jn=e,Gn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ms!==null?{id:Tr,overflow:Ar}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Jn=e,Gn=null,!0):!1;default:return!1}}function $a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function La(e){if(Gt){var t=Gn;if(t){var n=t;if(!Nu(e,t)){if($a(e))throw Error(c(418));t=Zr(n.nextSibling);var s=Jn;t&&Nu(e,t)?bu(s,n):(e.flags=e.flags&-4097|2,Gt=!1,Jn=e)}}else{if($a(e))throw Error(c(418));e.flags=e.flags&-4097|2,Gt=!1,Jn=e}}}function Su(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jn=e}function wo(e){if(e!==Jn)return!1;if(!Gt)return Su(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Na(e.type,e.memoizedProps)),t&&(t=Gn)){if($a(e))throw Mu(),Error(c(418));for(;t;)bu(e,t),t=Zr(t.nextSibling)}if(Su(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gn=Zr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gn=null}}else Gn=Jn?Zr(e.stateNode.nextSibling):null;return!0}function Mu(){for(var e=Gn;e;)e=Zr(e.nextSibling)}function tl(){Gn=Jn=null,Gt=!1}function Pa(e){pr===null?pr=[e]:pr.push(e)}var Rd=O.ReactCurrentBatchConfig;function Al(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var s=n.stateNode}if(!s)throw Error(c(147,e));var l=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var f=l.refs;i===null?delete f[o]:f[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,e))}return e}function jo(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ku(e){var t=e._init;return t(e._payload)}function Cu(e){function t($,N){if(e){var P=$.deletions;P===null?($.deletions=[N],$.flags|=16):P.push(N)}}function n($,N){if(!e)return null;for(;N!==null;)t($,N),N=N.sibling;return null}function s($,N){for($=new Map;N!==null;)N.key!==null?$.set(N.key,N):$.set(N.index,N),N=N.sibling;return $}function l($,N){return $=us($,N),$.index=0,$.sibling=null,$}function o($,N,P){return $.index=P,e?(P=$.alternate,P!==null?(P=P.index,P<N?($.flags|=2,N):P):($.flags|=2,N)):($.flags|=1048576,N)}function i($){return e&&$.alternate===null&&($.flags|=2),$}function f($,N,P,ge){return N===null||N.tag!==6?(N=Si(P,$.mode,ge),N.return=$,N):(N=l(N,P),N.return=$,N)}function x($,N,P,ge){var Je=P.type;return Je===je?le($,N,P.props.children,ge,P.key):N!==null&&(N.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===X&&ku(Je)===N.type)?(ge=l(N,P.props),ge.ref=Al($,N,P),ge.return=$,ge):(ge=Vo(P.type,P.key,P.props,null,$.mode,ge),ge.ref=Al($,N,P),ge.return=$,ge)}function z($,N,P,ge){return N===null||N.tag!==4||N.stateNode.containerInfo!==P.containerInfo||N.stateNode.implementation!==P.implementation?(N=Mi(P,$.mode,ge),N.return=$,N):(N=l(N,P.children||[]),N.return=$,N)}function le($,N,P,ge,Je){return N===null||N.tag!==7?(N=_s(P,$.mode,ge,Je),N.return=$,N):(N=l(N,P),N.return=$,N)}function de($,N,P){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Si(""+N,$.mode,P),N.return=$,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case L:return P=Vo(N.type,N.key,N.props,null,$.mode,P),P.ref=Al($,null,N),P.return=$,P;case Ee:return N=Mi(N,$.mode,P),N.return=$,N;case X:var ge=N._init;return de($,ge(N._payload),P)}if(re(N)||_(N))return N=_s(N,$.mode,P,null),N.return=$,N;jo($,N)}return null}function ne($,N,P,ge){var Je=N!==null?N.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return Je!==null?null:f($,N,""+P,ge);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case L:return P.key===Je?x($,N,P,ge):null;case Ee:return P.key===Je?z($,N,P,ge):null;case X:return Je=P._init,ne($,N,Je(P._payload),ge)}if(re(P)||_(P))return Je!==null?null:le($,N,P,ge,null);jo($,P)}return null}function ze($,N,P,ge,Je){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return $=$.get(P)||null,f(N,$,""+ge,Je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case L:return $=$.get(ge.key===null?P:ge.key)||null,x(N,$,ge,Je);case Ee:return $=$.get(ge.key===null?P:ge.key)||null,z(N,$,ge,Je);case X:var Ze=ge._init;return ze($,N,P,Ze(ge._payload),Je)}if(re(ge)||_(ge))return $=$.get(P)||null,le(N,$,ge,Je,null);jo(N,ge)}return null}function Ue($,N,P,ge){for(var Je=null,Ze=null,qe=N,ot=N=0,xn=null;qe!==null&&ot<P.length;ot++){qe.index>ot?(xn=qe,qe=null):xn=qe.sibling;var Lt=ne($,qe,P[ot],ge);if(Lt===null){qe===null&&(qe=xn);break}e&&qe&&Lt.alternate===null&&t($,qe),N=o(Lt,N,ot),Ze===null?Je=Lt:Ze.sibling=Lt,Ze=Lt,qe=xn}if(ot===P.length)return n($,qe),Gt&&ks($,ot),Je;if(qe===null){for(;ot<P.length;ot++)qe=de($,P[ot],ge),qe!==null&&(N=o(qe,N,ot),Ze===null?Je=qe:Ze.sibling=qe,Ze=qe);return Gt&&ks($,ot),Je}for(qe=s($,qe);ot<P.length;ot++)xn=ze(qe,$,ot,P[ot],ge),xn!==null&&(e&&xn.alternate!==null&&qe.delete(xn.key===null?ot:xn.key),N=o(xn,N,ot),Ze===null?Je=xn:Ze.sibling=xn,Ze=xn);return e&&qe.forEach(function(cs){return t($,cs)}),Gt&&ks($,ot),Je}function Qe($,N,P,ge){var Je=_(P);if(typeof Je!="function")throw Error(c(150));if(P=Je.call(P),P==null)throw Error(c(151));for(var Ze=Je=null,qe=N,ot=N=0,xn=null,Lt=P.next();qe!==null&&!Lt.done;ot++,Lt=P.next()){qe.index>ot?(xn=qe,qe=null):xn=qe.sibling;var cs=ne($,qe,Lt.value,ge);if(cs===null){qe===null&&(qe=xn);break}e&&qe&&cs.alternate===null&&t($,qe),N=o(cs,N,ot),Ze===null?Je=cs:Ze.sibling=cs,Ze=cs,qe=xn}if(Lt.done)return n($,qe),Gt&&ks($,ot),Je;if(qe===null){for(;!Lt.done;ot++,Lt=P.next())Lt=de($,Lt.value,ge),Lt!==null&&(N=o(Lt,N,ot),Ze===null?Je=Lt:Ze.sibling=Lt,Ze=Lt);return Gt&&ks($,ot),Je}for(qe=s($,qe);!Lt.done;ot++,Lt=P.next())Lt=ze(qe,$,ot,Lt.value,ge),Lt!==null&&(e&&Lt.alternate!==null&&qe.delete(Lt.key===null?ot:Lt.key),N=o(Lt,N,ot),Ze===null?Je=Lt:Ze.sibling=Lt,Ze=Lt);return e&&qe.forEach(function(vf){return t($,vf)}),Gt&&ks($,ot),Je}function sn($,N,P,ge){if(typeof P=="object"&&P!==null&&P.type===je&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case L:e:{for(var Je=P.key,Ze=N;Ze!==null;){if(Ze.key===Je){if(Je=P.type,Je===je){if(Ze.tag===7){n($,Ze.sibling),N=l(Ze,P.props.children),N.return=$,$=N;break e}}else if(Ze.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===X&&ku(Je)===Ze.type){n($,Ze.sibling),N=l(Ze,P.props),N.ref=Al($,Ze,P),N.return=$,$=N;break e}n($,Ze);break}else t($,Ze);Ze=Ze.sibling}P.type===je?(N=_s(P.props.children,$.mode,ge,P.key),N.return=$,$=N):(ge=Vo(P.type,P.key,P.props,null,$.mode,ge),ge.ref=Al($,N,P),ge.return=$,$=ge)}return i($);case Ee:e:{for(Ze=P.key;N!==null;){if(N.key===Ze)if(N.tag===4&&N.stateNode.containerInfo===P.containerInfo&&N.stateNode.implementation===P.implementation){n($,N.sibling),N=l(N,P.children||[]),N.return=$,$=N;break e}else{n($,N);break}else t($,N);N=N.sibling}N=Mi(P,$.mode,ge),N.return=$,$=N}return i($);case X:return Ze=P._init,sn($,N,Ze(P._payload),ge)}if(re(P))return Ue($,N,P,ge);if(_(P))return Qe($,N,P,ge);jo($,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,N!==null&&N.tag===6?(n($,N.sibling),N=l(N,P),N.return=$,$=N):(n($,N),N=Si(P,$.mode,ge),N.return=$,$=N),i($)):n($,N)}return sn}var nl=Cu(!0),Eu=Cu(!1),bo=qr(null),No=null,rl=null,_a=null;function Ta(){_a=rl=No=null}function Aa(e){var t=bo.current;Yt(bo),e._currentValue=t}function Oa(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function sl(e,t){No=e,_a=rl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Rn=!0),e.firstContext=null)}function lr(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},rl===null){if(No===null)throw Error(c(308));rl=e,No.dependencies={lanes:0,firstContext:e}}else rl=rl.next=e;return t}var Cs=null;function za(e){Cs===null?Cs=[e]:Cs.push(e)}function Du(e,t,n,s){var l=t.interleaved;return l===null?(n.next=n,za(t)):(n.next=l.next,l.next=n),t.interleaved=n,Or(e,s)}function Or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ns=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Iu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Dt&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,Or(e,n)}return l=s.interleaved,l===null?(t.next=t,za(s)):(t.next=l.next,l.next=t),s.interleaved=t,Or(e,n)}function So(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Vr(e,n)}}function $u(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mo(e,t,n,s){var l=e.updateQueue;ns=!1;var o=l.firstBaseUpdate,i=l.lastBaseUpdate,f=l.shared.pending;if(f!==null){l.shared.pending=null;var x=f,z=x.next;x.next=null,i===null?o=z:i.next=z,i=x;var le=e.alternate;le!==null&&(le=le.updateQueue,f=le.lastBaseUpdate,f!==i&&(f===null?le.firstBaseUpdate=z:f.next=z,le.lastBaseUpdate=x))}if(o!==null){var de=l.baseState;i=0,le=z=x=null,f=o;do{var ne=f.lane,ze=f.eventTime;if((s&ne)===ne){le!==null&&(le=le.next={eventTime:ze,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var Ue=e,Qe=f;switch(ne=t,ze=n,Qe.tag){case 1:if(Ue=Qe.payload,typeof Ue=="function"){de=Ue.call(ze,de,ne);break e}de=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Qe.payload,ne=typeof Ue=="function"?Ue.call(ze,de,ne):Ue,ne==null)break e;de=U({},de,ne);break e;case 2:ns=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,ne=l.effects,ne===null?l.effects=[f]:ne.push(f))}else ze={eventTime:ze,lane:ne,tag:f.tag,payload:f.payload,callback:f.callback,next:null},le===null?(z=le=ze,x=de):le=le.next=ze,i|=ne;if(f=f.next,f===null){if(f=l.shared.pending,f===null)break;ne=f,f=ne.next,ne.next=null,l.lastBaseUpdate=ne,l.shared.pending=null}}while(!0);if(le===null&&(x=de),l.baseState=x,l.firstBaseUpdate=z,l.lastBaseUpdate=le,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);Is|=i,e.lanes=i,e.memoizedState=de}}function Lu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(c(191,l));l.call(s)}}}var Ol={},Cr=qr(Ol),zl=qr(Ol),Rl=qr(Ol);function Es(e){if(e===Ol)throw Error(c(174));return e}function Fa(e,t){switch(Kt(Rl,t),Kt(zl,e),Kt(Cr,Ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:He(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=He(t,e)}Yt(Cr),Kt(Cr,t)}function ll(){Yt(Cr),Yt(zl),Yt(Rl)}function Pu(e){Es(Rl.current);var t=Es(Cr.current),n=He(t,e.type);t!==n&&(Kt(zl,e),Kt(Cr,n))}function Ba(e){zl.current===e&&(Yt(Cr),Yt(zl))}var qt=qr(0);function ko(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wa=[];function Ha(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var Co=O.ReactCurrentDispatcher,Ua=O.ReactCurrentBatchConfig,Ds=0,en=null,un=null,hn=null,Eo=!1,Fl=!1,Bl=0,Fd=0;function Mn(){throw Error(c(321))}function Va(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hr(e[n],t[n]))return!1;return!0}function Ka(e,t,n,s,l,o){if(Ds=o,en=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Co.current=e===null||e.memoizedState===null?Ud:Vd,e=n(s,l),Fl){o=0;do{if(Fl=!1,Bl=0,25<=o)throw Error(c(301));o+=1,hn=un=null,t.updateQueue=null,Co.current=Kd,e=n(s,l)}while(Fl)}if(Co.current=$o,t=un!==null&&un.next!==null,Ds=0,hn=un=en=null,Eo=!1,t)throw Error(c(300));return e}function Qa(){var e=Bl!==0;return Bl=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?en.memoizedState=hn=e:hn=hn.next=e,hn}function or(){if(un===null){var e=en.alternate;e=e!==null?e.memoizedState:null}else e=un.next;var t=hn===null?en.memoizedState:hn.next;if(t!==null)hn=t,un=e;else{if(e===null)throw Error(c(310));un=e,e={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},hn===null?en.memoizedState=hn=e:hn=hn.next=e}return hn}function Wl(e,t){return typeof t=="function"?t(e):t}function Xa(e){var t=or(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var s=un,l=s.baseQueue,o=n.pending;if(o!==null){if(l!==null){var i=l.next;l.next=o.next,o.next=i}s.baseQueue=l=o,n.pending=null}if(l!==null){o=l.next,s=s.baseState;var f=i=null,x=null,z=o;do{var le=z.lane;if((Ds&le)===le)x!==null&&(x=x.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),s=z.hasEagerState?z.eagerState:e(s,z.action);else{var de={lane:le,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};x===null?(f=x=de,i=s):x=x.next=de,en.lanes|=le,Is|=le}z=z.next}while(z!==null&&z!==o);x===null?i=s:x.next=f,hr(s,t.memoizedState)||(Rn=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=x,n.lastRenderedState=s}if(e=n.interleaved,e!==null){l=e;do o=l.lane,en.lanes|=o,Is|=o,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ya(e){var t=or(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var s=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do o=e(o,i.action),i=i.next;while(i!==l);hr(o,t.memoizedState)||(Rn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function _u(){}function Tu(e,t){var n=en,s=or(),l=t(),o=!hr(s.memoizedState,l);if(o&&(s.memoizedState=l,Rn=!0),s=s.queue,Ja(zu.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Hl(9,Ou.bind(null,n,s,l,t),void 0,null),pn===null)throw Error(c(349));(Ds&30)!==0||Au(n,t,l)}return l}function Au(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ou(e,t,n,s){t.value=n,t.getSnapshot=s,Ru(t)&&Fu(e)}function zu(e,t,n){return n(function(){Ru(t)&&Fu(e)})}function Ru(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hr(e,n)}catch{return!0}}function Fu(e){var t=Or(e,1);t!==null&&vr(t,e,1,-1)}function Bu(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:e},t.queue=e,e=e.dispatch=Hd.bind(null,en,e),[t.memoizedState,e]}function Hl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Wu(){return or().memoizedState}function Do(e,t,n,s){var l=Er();en.flags|=e,l.memoizedState=Hl(1|t,n,void 0,s===void 0?null:s)}function Io(e,t,n,s){var l=or();s=s===void 0?null:s;var o=void 0;if(un!==null){var i=un.memoizedState;if(o=i.destroy,s!==null&&Va(s,i.deps)){l.memoizedState=Hl(t,n,o,s);return}}en.flags|=e,l.memoizedState=Hl(1|t,n,o,s)}function Hu(e,t){return Do(8390656,8,e,t)}function Ja(e,t){return Io(2048,8,e,t)}function Uu(e,t){return Io(4,2,e,t)}function Vu(e,t){return Io(4,4,e,t)}function Ku(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qu(e,t,n){return n=n!=null?n.concat([e]):null,Io(4,4,Ku.bind(null,t,e),n)}function Ga(){}function Xu(e,t){var n=or();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Va(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Yu(e,t){var n=or();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Va(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Ju(e,t,n){return(Ds&21)===0?(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=n):(hr(n,t)||(n=hs(),en.lanes|=n,Is|=n,e.baseState=!0),t)}function Bd(e,t){var n=It;It=n!==0&&4>n?n:4,e(!0);var s=Ua.transition;Ua.transition={};try{e(!1),t()}finally{It=n,Ua.transition=s}}function Gu(){return or().memoizedState}function Wd(e,t,n){var s=as(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Zu(e))qu(t,n);else if(n=Du(e,t,n,s),n!==null){var l=Pn();vr(n,e,s,l),ec(n,t,s)}}function Hd(e,t,n){var s=as(e),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zu(e))qu(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,f=o(i,n);if(l.hasEagerState=!0,l.eagerState=f,hr(f,i)){var x=t.interleaved;x===null?(l.next=l,za(t)):(l.next=x.next,x.next=l),t.interleaved=l;return}}catch{}finally{}n=Du(e,t,l,s),n!==null&&(l=Pn(),vr(n,e,s,l),ec(n,t,s))}}function Zu(e){var t=e.alternate;return e===en||t!==null&&t===en}function qu(e,t){Fl=Eo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ec(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Vr(e,n)}}var $o={readContext:lr,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},Ud={readContext:lr,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:lr,useEffect:Hu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Do(4194308,4,Ku.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=Er();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Er();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Wd.bind(null,en,e),[s.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:Bu,useDebugValue:Ga,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=Bu(!1),t=e[0];return e=Bd.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=en,l=Er();if(Gt){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),pn===null)throw Error(c(349));(Ds&30)!==0||Au(s,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,Hu(zu.bind(null,s,o,e),[e]),s.flags|=2048,Hl(9,Ou.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=Er(),t=pn.identifierPrefix;if(Gt){var n=Ar,s=Tr;n=(s&~(1<<32-bn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Fd++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vd={readContext:lr,useCallback:Xu,useContext:lr,useEffect:Ja,useImperativeHandle:Qu,useInsertionEffect:Uu,useLayoutEffect:Vu,useMemo:Yu,useReducer:Xa,useRef:Wu,useState:function(){return Xa(Wl)},useDebugValue:Ga,useDeferredValue:function(e){var t=or();return Ju(t,un.memoizedState,e)},useTransition:function(){var e=Xa(Wl)[0],t=or().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:Tu,useId:Gu,unstable_isNewReconciler:!1},Kd={readContext:lr,useCallback:Xu,useContext:lr,useEffect:Ja,useImperativeHandle:Qu,useInsertionEffect:Uu,useLayoutEffect:Vu,useMemo:Yu,useReducer:Ya,useRef:Wu,useState:function(){return Ya(Wl)},useDebugValue:Ga,useDeferredValue:function(e){var t=or();return un===null?t.memoizedState=e:Ju(t,un.memoizedState,e)},useTransition:function(){var e=Ya(Wl)[0],t=or().memoizedState;return[e,t]},useMutableSource:_u,useSyncExternalStore:Tu,useId:Gu,unstable_isNewReconciler:!1};function xr(e,t){if(e&&e.defaultProps){t=U({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Za(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:U({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Lo={isMounted:function(e){return(e=e._reactInternals)?an(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Pn(),l=as(e),o=zr(s,l);o.payload=t,n!=null&&(o.callback=n),t=rs(e,o,l),t!==null&&(vr(t,e,l,s),So(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Pn(),l=as(e),o=zr(s,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=rs(e,o,l),t!==null&&(vr(t,e,l,s),So(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pn(),s=as(e),l=zr(n,s);l.tag=2,t!=null&&(l.callback=t),t=rs(e,l,s),t!==null&&(vr(t,e,s,n),So(t,e,s))}};function tc(e,t,n,s,l,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Dl(n,s)||!Dl(l,o):!0}function nc(e,t,n){var s=!1,l=es,o=t.contextType;return typeof o=="object"&&o!==null?o=lr(o):(l=zn(t)?Ss:Sn.current,s=t.contextTypes,o=(s=s!=null)?Zs(e,l):es),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Lo,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function rc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Lo.enqueueReplaceState(t,t.state,null)}function qa(e,t,n,s){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Ra(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=lr(o):(o=zn(t)?Ss:Sn.current,l.context=Zs(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Za(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Lo.enqueueReplaceState(l,l.state,null),Mo(e,n,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ol(e,t){try{var n="",s=t;do n+=Xe(s),s=s.return;while(s);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function ei(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ti(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qd=typeof WeakMap=="function"?WeakMap:Map;function sc(e,t,n){n=zr(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Ro||(Ro=!0,xi=s),ti(e,t)},n}function lc(e,t,n){n=zr(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;n.payload=function(){return s(l)},n.callback=function(){ti(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ti(e,t),typeof s!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function oc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Qd;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(n)||(l.add(n),e=af.bind(null,e,t,n),t.then(e,e))}function ac(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ic(e,t,n,s,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zr(-1,1),t.tag=2,rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Xd=O.ReactCurrentOwner,Rn=!1;function Ln(e,t,n,s){t.child=e===null?Eu(t,null,n,s):nl(t,e.child,n,s)}function uc(e,t,n,s,l){n=n.render;var o=t.ref;return sl(t,l),s=Ka(e,t,n,s,o,l),n=Qa(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Rr(e,t,l)):(Gt&&n&&Da(t),t.flags|=1,Ln(e,t,s,l),t.child)}function cc(e,t,n,s,l){if(e===null){var o=n.type;return typeof o=="function"&&!Ni(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,dc(e,t,o,s,l)):(e=Vo(n.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&l)===0){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Dl,n(i,s)&&e.ref===t.ref)return Rr(e,t,l)}return t.flags|=1,e=us(o,s),e.ref=t.ref,e.return=t,t.child=e}function dc(e,t,n,s,l){if(e!==null){var o=e.memoizedProps;if(Dl(o,s)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=s=o,(e.lanes&l)!==0)(e.flags&131072)!==0&&(Rn=!0);else return t.lanes=e.lanes,Rr(e,t,l)}return ni(e,t,n,s,l)}function fc(e,t,n){var s=t.pendingProps,l=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(il,Zn),Zn|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Kt(il,Zn),Zn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,Kt(il,Zn),Zn|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,Kt(il,Zn),Zn|=s;return Ln(e,t,l,n),t.child}function mc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ni(e,t,n,s,l){var o=zn(n)?Ss:Sn.current;return o=Zs(t,o),sl(t,l),n=Ka(e,t,n,s,o,l),s=Qa(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Rr(e,t,l)):(Gt&&s&&Da(t),t.flags|=1,Ln(e,t,n,l),t.child)}function hc(e,t,n,s,l){if(zn(n)){var o=!0;xo(t)}else o=!1;if(sl(t,l),t.stateNode===null)_o(e,t),nc(t,n,s),qa(t,n,s,l),s=!0;else if(e===null){var i=t.stateNode,f=t.memoizedProps;i.props=f;var x=i.context,z=n.contextType;typeof z=="object"&&z!==null?z=lr(z):(z=zn(n)?Ss:Sn.current,z=Zs(t,z));var le=n.getDerivedStateFromProps,de=typeof le=="function"||typeof i.getSnapshotBeforeUpdate=="function";de||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==s||x!==z)&&rc(t,i,s,z),ns=!1;var ne=t.memoizedState;i.state=ne,Mo(t,s,i,l),x=t.memoizedState,f!==s||ne!==x||On.current||ns?(typeof le=="function"&&(Za(t,n,le,s),x=t.memoizedState),(f=ns||tc(t,n,f,s,ne,x,z))?(de||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=x),i.props=s,i.state=x,i.context=z,s=f):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Iu(e,t),f=t.memoizedProps,z=t.type===t.elementType?f:xr(t.type,f),i.props=z,de=t.pendingProps,ne=i.context,x=n.contextType,typeof x=="object"&&x!==null?x=lr(x):(x=zn(n)?Ss:Sn.current,x=Zs(t,x));var ze=n.getDerivedStateFromProps;(le=typeof ze=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==de||ne!==x)&&rc(t,i,s,x),ns=!1,ne=t.memoizedState,i.state=ne,Mo(t,s,i,l);var Ue=t.memoizedState;f!==de||ne!==Ue||On.current||ns?(typeof ze=="function"&&(Za(t,n,ze,s),Ue=t.memoizedState),(z=ns||tc(t,n,z,s,ne,Ue,x)||!1)?(le||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,Ue,x),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,Ue,x)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&ne===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&ne===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=Ue),i.props=s,i.state=Ue,i.context=x,s=z):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&ne===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&ne===e.memoizedState||(t.flags|=1024),s=!1)}return ri(e,t,n,s,o,l)}function ri(e,t,n,s,l,o){mc(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&vu(t,n,!1),Rr(e,t,o);s=t.stateNode,Xd.current=t;var f=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=nl(t,e.child,null,o),t.child=nl(t,null,f,o)):Ln(e,t,f,o),t.memoizedState=s.state,l&&vu(t,n,!0),t.child}function pc(e){var t=e.stateNode;t.pendingContext?gu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gu(e,t.context,!1),Fa(e,t.containerInfo)}function xc(e,t,n,s,l){return tl(),Pa(l),t.flags|=256,Ln(e,t,n,s),t.child}var si={dehydrated:null,treeContext:null,retryLane:0};function li(e){return{baseLanes:e,cachePool:null,transitions:null}}function gc(e,t,n){var s=t.pendingProps,l=qt.current,o=!1,i=(t.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(l&2)!==0),f?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Kt(qt,l&1),e===null)return La(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=s.children,e=s.fallback,o?(s=t.mode,o=t.child,i={mode:"hidden",children:i},(s&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Ko(i,s,0,null),e=_s(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=li(n),t.memoizedState=si,e):oi(t,i));if(l=e.memoizedState,l!==null&&(f=l.dehydrated,f!==null))return Yd(e,t,i,s,f,l,n);if(o){o=s.fallback,i=t.mode,l=e.child,f=l.sibling;var x={mode:"hidden",children:s.children};return(i&1)===0&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=x,t.deletions=null):(s=us(l,x),s.subtreeFlags=l.subtreeFlags&14680064),f!==null?o=us(f,o):(o=_s(o,i,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,i=e.child.memoizedState,i=i===null?li(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=si,s}return o=e.child,e=o.sibling,s=us(o,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function oi(e,t){return t=Ko({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Po(e,t,n,s){return s!==null&&Pa(s),nl(t,e.child,null,n),e=oi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Yd(e,t,n,s,l,o,i){if(n)return t.flags&256?(t.flags&=-257,s=ei(Error(c(422))),Po(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,l=t.mode,s=Ko({mode:"visible",children:s.children},l,0,null),o=_s(o,l,i,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,(t.mode&1)!==0&&nl(t,e.child,null,i),t.child.memoizedState=li(i),t.memoizedState=si,o);if((t.mode&1)===0)return Po(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var f=s.dgst;return s=f,o=Error(c(419)),s=ei(o,s,void 0),Po(e,t,i,s)}if(f=(i&e.childLanes)!==0,Rn||f){if(s=pn,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(s.suspendedLanes|i))!==0?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,Or(e,l),vr(s,e,l,-1))}return bi(),s=ei(Error(c(421))),Po(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=uf.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,Gn=Zr(l.nextSibling),Jn=t,Gt=!0,pr=null,e!==null&&(rr[sr++]=Tr,rr[sr++]=Ar,rr[sr++]=Ms,Tr=e.id,Ar=e.overflow,Ms=t),t=oi(t,s.children),t.flags|=4096,t)}function yc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Oa(e.return,t,n)}function ai(e,t,n,s,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=l)}function vc(e,t,n){var s=t.pendingProps,l=s.revealOrder,o=s.tail;if(Ln(e,t,s.children,n),s=qt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yc(e,n,t);else if(e.tag===19)yc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Kt(qt,s),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&ko(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ai(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&ko(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ai(t,!0,n,null,o);break;case"together":ai(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _o(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Is|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=us(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=us(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jd(e,t,n){switch(t.tag){case 3:pc(t),tl();break;case 5:Pu(t);break;case 1:zn(t.type)&&xo(t);break;case 4:Fa(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;Kt(bo,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Kt(qt,qt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?gc(e,t,n):(Kt(qt,qt.current&1),e=Rr(e,t,n),e!==null?e.sibling:null);Kt(qt,qt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return vc(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Kt(qt,qt.current),s)break;return null;case 22:case 23:return t.lanes=0,fc(e,t,n)}return Rr(e,t,n)}var wc,ii,jc,bc;wc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ii=function(){},jc=function(e,t,n,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,Es(Cr.current);var o=null;switch(n){case"input":l=gt(e,l),s=gt(e,s),o=[];break;case"select":l=U({},l,{value:void 0}),s=U({},s,{value:void 0}),o=[];break;case"textarea":l=Y(e,l),s=Y(e,s),o=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=mo)}wt(n,s);var i;n=null;for(z in l)if(!s.hasOwnProperty(z)&&l.hasOwnProperty(z)&&l[z]!=null)if(z==="style"){var f=l[z];for(i in f)f.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(M.hasOwnProperty(z)?o||(o=[]):(o=o||[]).push(z,null));for(z in s){var x=s[z];if(f=l?.[z],s.hasOwnProperty(z)&&x!==f&&(x!=null||f!=null))if(z==="style")if(f){for(i in f)!f.hasOwnProperty(i)||x&&x.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in x)x.hasOwnProperty(i)&&f[i]!==x[i]&&(n||(n={}),n[i]=x[i])}else n||(o||(o=[]),o.push(z,n)),n=x;else z==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,f=f?f.__html:void 0,x!=null&&f!==x&&(o=o||[]).push(z,x)):z==="children"?typeof x!="string"&&typeof x!="number"||(o=o||[]).push(z,""+x):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(M.hasOwnProperty(z)?(x!=null&&z==="onScroll"&&Xt("scroll",e),o||f===x||(o=[])):(o=o||[]).push(z,x))}n&&(o=o||[]).push("style",n);var z=o;(t.updateQueue=z)&&(t.flags|=4)}},bc=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ul(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function kn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Gd(e,t,n){var s=t.pendingProps;switch(Ia(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(t),null;case 1:return zn(t.type)&&po(),kn(t),null;case 3:return s=t.stateNode,ll(),Yt(On),Yt(Sn),Ha(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pr!==null&&(vi(pr),pr=null))),ii(e,t),kn(t),null;case 5:Ba(t);var l=Es(Rl.current);if(n=t.type,e!==null&&t.stateNode!=null)jc(e,t,n,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(c(166));return kn(t),null}if(e=Es(Cr.current),wo(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[kr]=t,s[_l]=o,e=(t.mode&1)!==0,n){case"dialog":Xt("cancel",s),Xt("close",s);break;case"iframe":case"object":case"embed":Xt("load",s);break;case"video":case"audio":for(l=0;l<$l.length;l++)Xt($l[l],s);break;case"source":Xt("error",s);break;case"img":case"image":case"link":Xt("error",s),Xt("load",s);break;case"details":Xt("toggle",s);break;case"input":et(s,o),Xt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Xt("invalid",s);break;case"textarea":K(s,o),Xt("invalid",s)}wt(n,o),l=null;for(var i in o)if(o.hasOwnProperty(i)){var f=o[i];i==="children"?typeof f=="string"?s.textContent!==f&&(o.suppressHydrationWarning!==!0&&fo(s.textContent,f,e),l=["children",f]):typeof f=="number"&&s.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&fo(s.textContent,f,e),l=["children",""+f]):M.hasOwnProperty(i)&&f!=null&&i==="onScroll"&&Xt("scroll",s)}switch(n){case"input":Te(s),I(s,o,!0);break;case"textarea":Te(s),Ce(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=mo)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[kr]=t,e[_l]=s,wc(e,t,!1,!1),t.stateNode=e;e:{switch(i=Wt(n,s),n){case"dialog":Xt("cancel",e),Xt("close",e),l=s;break;case"iframe":case"object":case"embed":Xt("load",e),l=s;break;case"video":case"audio":for(l=0;l<$l.length;l++)Xt($l[l],e);l=s;break;case"source":Xt("error",e),l=s;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),l=s;break;case"details":Xt("toggle",e),l=s;break;case"input":et(e,s),l=gt(e,s),Xt("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=U({},s,{value:void 0}),Xt("invalid",e);break;case"textarea":K(e,s),l=Y(e,s),Xt("invalid",e);break;default:l=s}wt(n,l),f=l;for(o in f)if(f.hasOwnProperty(o)){var x=f[o];o==="style"?pt(e,x):o==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&zt(e,x)):o==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&ce(e,x):typeof x=="number"&&ce(e,""+x):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(M.hasOwnProperty(o)?x!=null&&o==="onScroll"&&Xt("scroll",e):x!=null&&T(e,o,x,i))}switch(n){case"input":Te(e),I(e,s,!1);break;case"textarea":Te(e),Ce(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ue(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?De(e,!!s.multiple,o,!1):s.defaultValue!=null&&De(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=mo)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kn(t),null;case 6:if(e&&t.stateNode!=null)bc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(n=Es(Rl.current),Es(Cr.current),wo(t)){if(s=t.stateNode,n=t.memoizedProps,s[kr]=t,(o=s.nodeValue!==n)&&(e=Jn,e!==null))switch(e.tag){case 3:fo(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fo(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[kr]=t,t.stateNode=s}return kn(t),null;case 13:if(Yt(qt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&Gn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Mu(),tl(),t.flags|=98560,o=!1;else if(o=wo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[kr]=t}else tl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;kn(t),o=!1}else pr!==null&&(vi(pr),pr=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(qt.current&1)!==0?cn===0&&(cn=3):bi())),t.updateQueue!==null&&(t.flags|=4),kn(t),null);case 4:return ll(),ii(e,t),e===null&&Ll(t.stateNode.containerInfo),kn(t),null;case 10:return Aa(t.type._context),kn(t),null;case 17:return zn(t.type)&&po(),kn(t),null;case 19:if(Yt(qt),o=t.memoizedState,o===null)return kn(t),null;if(s=(t.flags&128)!==0,i=o.rendering,i===null)if(s)Ul(o,!1);else{if(cn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=ko(e),i!==null){for(t.flags|=128,Ul(o,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Kt(qt,qt.current&1|2),t.child}e=e.sibling}o.tail!==null&&_e()>ul&&(t.flags|=128,s=!0,Ul(o,!1),t.lanes=4194304)}else{if(!s)if(e=ko(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ul(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Gt)return kn(t),null}else 2*_e()-o.renderingStartTime>ul&&n!==1073741824&&(t.flags|=128,s=!0,Ul(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=_e(),t.sibling=null,n=qt.current,Kt(qt,s?n&1|2:n&1),t):(kn(t),null);case 22:case 23:return ji(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Zn&1073741824)!==0&&(kn(t),t.subtreeFlags&6&&(t.flags|=8192)):kn(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function Zd(e,t){switch(Ia(t),t.tag){case 1:return zn(t.type)&&po(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ll(),Yt(On),Yt(Sn),Ha(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ba(t),null;case 13:if(Yt(qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(qt),null;case 4:return ll(),null;case 10:return Aa(t.type._context),null;case 22:case 23:return ji(),null;case 24:return null;default:return null}}var To=!1,Cn=!1,qd=typeof WeakSet=="function"?WeakSet:Set,Be=null;function al(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){nn(e,t,s)}else n.current=null}function ui(e,t,n){try{n()}catch(s){nn(e,t,s)}}var Nc=!1;function ef(e,t){if(ja=ys,e=tu(),ma(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,f=-1,x=-1,z=0,le=0,de=e,ne=null;t:for(;;){for(var ze;de!==n||l!==0&&de.nodeType!==3||(f=i+l),de!==o||s!==0&&de.nodeType!==3||(x=i+s),de.nodeType===3&&(i+=de.nodeValue.length),(ze=de.firstChild)!==null;)ne=de,de=ze;for(;;){if(de===e)break t;if(ne===n&&++z===l&&(f=i),ne===o&&++le===s&&(x=i),(ze=de.nextSibling)!==null)break;de=ne,ne=de.parentNode}de=ze}n=f===-1||x===-1?null:{start:f,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(ba={focusedElem:e,selectionRange:n},ys=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var Ue=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ue!==null){var Qe=Ue.memoizedProps,sn=Ue.memoizedState,$=t.stateNode,N=$.getSnapshotBeforeUpdate(t.elementType===t.type?Qe:xr(t.type,Qe),sn);$.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var P=t.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(ge){nn(t,t.return,ge)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return Ue=Nc,Nc=!1,Ue}function Vl(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&ui(t,n,o)}l=l.next}while(l!==s)}}function Ao(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function ci(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Sc(e){var t=e.alternate;t!==null&&(e.alternate=null,Sc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kr],delete t[_l],delete t[ka],delete t[Ad],delete t[Od])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Mc(e){return e.tag===5||e.tag===3||e.tag===4}function kc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function di(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=mo));else if(s!==4&&(e=e.child,e!==null))for(di(e,t,n),e=e.sibling;e!==null;)di(e,t,n),e=e.sibling}function fi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(fi(e,t,n),e=e.sibling;e!==null;)fi(e,t,n),e=e.sibling}var vn=null,gr=!1;function ss(e,t,n){for(n=n.child;n!==null;)Cc(e,t,n),n=n.sibling}function Cc(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(jn,n)}catch{}switch(n.tag){case 5:Cn||al(n,t);case 6:var s=vn,l=gr;vn=null,ss(e,t,n),vn=s,gr=l,vn!==null&&(gr?(e=vn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(gr?(e=vn,n=n.stateNode,e.nodeType===8?Ma(e.parentNode,n):e.nodeType===1&&Ma(e,n),gs(e)):Ma(vn,n.stateNode));break;case 4:s=vn,l=gr,vn=n.stateNode.containerInfo,gr=!0,ss(e,t,n),vn=s,gr=l;break;case 0:case 11:case 14:case 15:if(!Cn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var o=l,i=o.destroy;o=o.tag,i!==void 0&&((o&2)!==0||(o&4)!==0)&&ui(n,t,i),l=l.next}while(l!==s)}ss(e,t,n);break;case 1:if(!Cn&&(al(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(f){nn(n,t,f)}ss(e,t,n);break;case 21:ss(e,t,n);break;case 22:n.mode&1?(Cn=(s=Cn)||n.memoizedState!==null,ss(e,t,n),Cn=s):ss(e,t,n);break;default:ss(e,t,n)}}function Ec(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new qd),t.forEach(function(s){var l=cf.bind(null,e,s);n.has(s)||(n.add(s),s.then(l,l))})}}function yr(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var o=e,i=t,f=i;e:for(;f!==null;){switch(f.tag){case 5:vn=f.stateNode,gr=!1;break e;case 3:vn=f.stateNode.containerInfo,gr=!0;break e;case 4:vn=f.stateNode.containerInfo,gr=!0;break e}f=f.return}if(vn===null)throw Error(c(160));Cc(o,i,l),vn=null,gr=!1;var x=l.alternate;x!==null&&(x.return=null),l.return=null}catch(z){nn(l,t,z)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dc(t,e),t=t.sibling}function Dc(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yr(t,e),Dr(e),s&4){try{Vl(3,e,e.return),Ao(3,e)}catch(Qe){nn(e,e.return,Qe)}try{Vl(5,e,e.return)}catch(Qe){nn(e,e.return,Qe)}}break;case 1:yr(t,e),Dr(e),s&512&&n!==null&&al(n,n.return);break;case 5:if(yr(t,e),Dr(e),s&512&&n!==null&&al(n,n.return),e.flags&32){var l=e.stateNode;try{ce(l,"")}catch(Qe){nn(e,e.return,Qe)}}if(s&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,f=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&ut(l,o),Wt(f,i);var z=Wt(f,o);for(i=0;i<x.length;i+=2){var le=x[i],de=x[i+1];le==="style"?pt(l,de):le==="dangerouslySetInnerHTML"?zt(l,de):le==="children"?ce(l,de):T(l,le,de,z)}switch(f){case"input":j(l,o);break;case"textarea":se(l,o);break;case"select":var ne=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var ze=o.value;ze!=null?De(l,!!o.multiple,ze,!1):ne!==!!o.multiple&&(o.defaultValue!=null?De(l,!!o.multiple,o.defaultValue,!0):De(l,!!o.multiple,o.multiple?[]:"",!1))}l[_l]=o}catch(Qe){nn(e,e.return,Qe)}}break;case 6:if(yr(t,e),Dr(e),s&4){if(e.stateNode===null)throw Error(c(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(Qe){nn(e,e.return,Qe)}}break;case 3:if(yr(t,e),Dr(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(Qe){nn(e,e.return,Qe)}break;case 4:yr(t,e),Dr(e);break;case 13:yr(t,e),Dr(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(pi=_e())),s&4&&Ec(e);break;case 22:if(le=n!==null&&n.memoizedState!==null,e.mode&1?(Cn=(z=Cn)||le,yr(t,e),Cn=z):yr(t,e),Dr(e),s&8192){if(z=e.memoizedState!==null,(e.stateNode.isHidden=z)&&!le&&(e.mode&1)!==0)for(Be=e,le=e.child;le!==null;){for(de=Be=le;Be!==null;){switch(ne=Be,ze=ne.child,ne.tag){case 0:case 11:case 14:case 15:Vl(4,ne,ne.return);break;case 1:al(ne,ne.return);var Ue=ne.stateNode;if(typeof Ue.componentWillUnmount=="function"){s=ne,n=ne.return;try{t=s,Ue.props=t.memoizedProps,Ue.state=t.memoizedState,Ue.componentWillUnmount()}catch(Qe){nn(s,n,Qe)}}break;case 5:al(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Lc(de);continue}}ze!==null?(ze.return=ne,Be=ze):Lc(de)}le=le.sibling}e:for(le=null,de=e;;){if(de.tag===5){if(le===null){le=de;try{l=de.stateNode,z?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=de.stateNode,x=de.memoizedProps.style,i=x!=null&&x.hasOwnProperty("display")?x.display:null,f.style.display=lt("display",i))}catch(Qe){nn(e,e.return,Qe)}}}else if(de.tag===6){if(le===null)try{de.stateNode.nodeValue=z?"":de.memoizedProps}catch(Qe){nn(e,e.return,Qe)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===e)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===e)break e;for(;de.sibling===null;){if(de.return===null||de.return===e)break e;le===de&&(le=null),de=de.return}le===de&&(le=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:yr(t,e),Dr(e),s&4&&Ec(e);break;case 21:break;default:yr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Mc(n)){var s=n;break e}n=n.return}throw Error(c(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(ce(l,""),s.flags&=-33);var o=kc(e);fi(e,o,l);break;case 3:case 4:var i=s.stateNode.containerInfo,f=kc(e);di(e,f,i);break;default:throw Error(c(161))}}catch(x){nn(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tf(e,t,n){Be=e,Ic(e)}function Ic(e,t,n){for(var s=(e.mode&1)!==0;Be!==null;){var l=Be,o=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||To;if(!i){var f=l.alternate,x=f!==null&&f.memoizedState!==null||Cn;f=To;var z=Cn;if(To=i,(Cn=x)&&!z)for(Be=l;Be!==null;)i=Be,x=i.child,i.tag===22&&i.memoizedState!==null?Pc(l):x!==null?(x.return=i,Be=x):Pc(l);for(;o!==null;)Be=o,Ic(o),o=o.sibling;Be=l,To=f,Cn=z}$c(e)}else(l.subtreeFlags&8772)!==0&&o!==null?(o.return=l,Be=o):$c(e)}}function $c(e){for(;Be!==null;){var t=Be;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Cn||Ao(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Cn)if(n===null)s.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:xr(t.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Lu(t,o,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Lu(t,i,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var z=t.alternate;if(z!==null){var le=z.memoizedState;if(le!==null){var de=le.dehydrated;de!==null&&gs(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Cn||t.flags&512&&ci(t)}catch(ne){nn(t,t.return,ne)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function Lc(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function Pc(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ao(4,t)}catch(x){nn(t,n,x)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(x){nn(t,l,x)}}var o=t.return;try{ci(t)}catch(x){nn(t,o,x)}break;case 5:var i=t.return;try{ci(t)}catch(x){nn(t,i,x)}}}catch(x){nn(t,t.return,x)}if(t===e){Be=null;break}var f=t.sibling;if(f!==null){f.return=t.return,Be=f;break}Be=t.return}}var nf=Math.ceil,Oo=O.ReactCurrentDispatcher,mi=O.ReactCurrentOwner,ar=O.ReactCurrentBatchConfig,Dt=0,pn=null,on=null,wn=0,Zn=0,il=qr(0),cn=0,Kl=null,Is=0,zo=0,hi=0,Ql=null,Fn=null,pi=0,ul=1/0,Fr=null,Ro=!1,xi=null,ls=null,Fo=!1,os=null,Bo=0,Xl=0,gi=null,Wo=-1,Ho=0;function Pn(){return(Dt&6)!==0?_e():Wo!==-1?Wo:Wo=_e()}function as(e){return(e.mode&1)===0?1:(Dt&2)!==0&&wn!==0?wn&-wn:Rd.transition!==null?(Ho===0&&(Ho=hs()),Ho):(e=It,e!==0||(e=window.event,e=e===void 0?16:ro(e.type)),e)}function vr(e,t,n,s){if(50<Xl)throw Xl=0,gi=null,Error(c(185));Nr(e,n,s),((Dt&2)===0||e!==pn)&&(e===pn&&((Dt&2)===0&&(zo|=n),cn===4&&is(e,wn)),Bn(e,s),n===1&&Dt===0&&(t.mode&1)===0&&(ul=_e()+500,go&&ts()))}function Bn(e,t){var n=e.callbackNode;pl(e,t);var s=Ur(e,e===pn?wn:0);if(s===0)n!==null&&Se(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Se(n),t===1)e.tag===0?zd(Tc.bind(null,e)):wu(Tc.bind(null,e)),_d(function(){(Dt&6)===0&&ts()}),n=null;else{switch(xl(s)){case 1:n=st;break;case 4:n=bt;break;case 16:n=Ft;break;case 536870912:n=Ot;break;default:n=Ft}n=Hc(n,_c.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _c(e,t){if(Wo=-1,Ho=0,(Dt&6)!==0)throw Error(c(327));var n=e.callbackNode;if(cl()&&e.callbackNode!==n)return null;var s=Ur(e,e===pn?wn:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Uo(e,s);else{t=s;var l=Dt;Dt|=2;var o=Oc();(pn!==e||wn!==t)&&(Fr=null,ul=_e()+500,Ls(e,t));do try{lf();break}catch(f){Ac(e,f)}while(!0);Ta(),Oo.current=o,Dt=l,on!==null?t=0:(pn=null,wn=0,t=cn)}if(t!==0){if(t===2&&(l=As(e),l!==0&&(s=l,t=yi(e,l))),t===1)throw n=Kl,Ls(e,0),is(e,s),Bn(e,_e()),n;if(t===6)is(e,s);else{if(l=e.current.alternate,(s&30)===0&&!rf(l)&&(t=Uo(e,s),t===2&&(o=As(e),o!==0&&(s=o,t=yi(e,o))),t===1))throw n=Kl,Ls(e,0),is(e,s),Bn(e,_e()),n;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(c(345));case 2:Ps(e,Fn,Fr);break;case 3:if(is(e,s),(s&130023424)===s&&(t=pi+500-_e(),10<t)){if(Ur(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){Pn(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Sa(Ps.bind(null,e,Fn,Fr),t);break}Ps(e,Fn,Fr);break;case 4:if(is(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-bn(s);o=1<<i,i=t[i],i>l&&(l=i),s&=~o}if(s=l,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*nf(s/1960))-s,10<s){e.timeoutHandle=Sa(Ps.bind(null,e,Fn,Fr),s);break}Ps(e,Fn,Fr);break;case 5:Ps(e,Fn,Fr);break;default:throw Error(c(329))}}}return Bn(e,_e()),e.callbackNode===n?_c.bind(null,e):null}function yi(e,t){var n=Ql;return e.current.memoizedState.isDehydrated&&(Ls(e,t).flags|=256),e=Uo(e,t),e!==2&&(t=Fn,Fn=n,t!==null&&vi(t)),e}function vi(e){Fn===null?Fn=e:Fn.push.apply(Fn,e)}function rf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],o=l.getSnapshot;l=l.value;try{if(!hr(o(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function is(e,t){for(t&=~hi,t&=~zo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bn(t),s=1<<n;e[n]=-1,t&=~s}}function Tc(e){if((Dt&6)!==0)throw Error(c(327));cl();var t=Ur(e,0);if((t&1)===0)return Bn(e,_e()),null;var n=Uo(e,t);if(e.tag!==0&&n===2){var s=As(e);s!==0&&(t=s,n=yi(e,s))}if(n===1)throw n=Kl,Ls(e,0),is(e,t),Bn(e,_e()),n;if(n===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e,Fn,Fr),Bn(e,_e()),null}function wi(e,t){var n=Dt;Dt|=1;try{return e(t)}finally{Dt=n,Dt===0&&(ul=_e()+500,go&&ts())}}function $s(e){os!==null&&os.tag===0&&(Dt&6)===0&&cl();var t=Dt;Dt|=1;var n=ar.transition,s=It;try{if(ar.transition=null,It=1,e)return e()}finally{It=s,ar.transition=n,Dt=t,(Dt&6)===0&&ts()}}function ji(){Zn=il.current,Yt(il)}function Ls(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Pd(n)),on!==null)for(n=on.return;n!==null;){var s=n;switch(Ia(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&po();break;case 3:ll(),Yt(On),Yt(Sn),Ha();break;case 5:Ba(s);break;case 4:ll();break;case 13:Yt(qt);break;case 19:Yt(qt);break;case 10:Aa(s.type._context);break;case 22:case 23:ji()}n=n.return}if(pn=e,on=e=us(e.current,null),wn=Zn=t,cn=0,Kl=null,hi=zo=Is=0,Fn=Ql=null,Cs!==null){for(t=0;t<Cs.length;t++)if(n=Cs[t],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,o=n.pending;if(o!==null){var i=o.next;o.next=l,s.next=i}n.pending=s}Cs=null}return e}function Ac(e,t){do{var n=on;try{if(Ta(),Co.current=$o,Eo){for(var s=en.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Eo=!1}if(Ds=0,hn=un=en=null,Fl=!1,Bl=0,mi.current=null,n===null||n.return===null){cn=1,Kl=t,on=null;break}e:{var o=e,i=n.return,f=n,x=t;if(t=wn,f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var z=x,le=f,de=le.tag;if((le.mode&1)===0&&(de===0||de===11||de===15)){var ne=le.alternate;ne?(le.updateQueue=ne.updateQueue,le.memoizedState=ne.memoizedState,le.lanes=ne.lanes):(le.updateQueue=null,le.memoizedState=null)}var ze=ac(i);if(ze!==null){ze.flags&=-257,ic(ze,i,f,o,t),ze.mode&1&&oc(o,z,t),t=ze,x=z;var Ue=t.updateQueue;if(Ue===null){var Qe=new Set;Qe.add(x),t.updateQueue=Qe}else Ue.add(x);break e}else{if((t&1)===0){oc(o,z,t),bi();break e}x=Error(c(426))}}else if(Gt&&f.mode&1){var sn=ac(i);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),ic(sn,i,f,o,t),Pa(ol(x,f));break e}}o=x=ol(x,f),cn!==4&&(cn=2),Ql===null?Ql=[o]:Ql.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var $=sc(o,x,t);$u(o,$);break e;case 1:f=x;var N=o.type,P=o.stateNode;if((o.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(ls===null||!ls.has(P)))){o.flags|=65536,t&=-t,o.lanes|=t;var ge=lc(o,f,t);$u(o,ge);break e}}o=o.return}while(o!==null)}Rc(n)}catch(Je){t=Je,on===n&&n!==null&&(on=n=n.return);continue}break}while(!0)}function Oc(){var e=Oo.current;return Oo.current=$o,e===null?$o:e}function bi(){(cn===0||cn===3||cn===2)&&(cn=4),pn===null||(Is&268435455)===0&&(zo&268435455)===0||is(pn,wn)}function Uo(e,t){var n=Dt;Dt|=2;var s=Oc();(pn!==e||wn!==t)&&(Fr=null,Ls(e,t));do try{sf();break}catch(l){Ac(e,l)}while(!0);if(Ta(),Dt=n,Oo.current=s,on!==null)throw Error(c(261));return pn=null,wn=0,cn}function sf(){for(;on!==null;)zc(on)}function lf(){for(;on!==null&&!be();)zc(on)}function zc(e){var t=Wc(e.alternate,e,Zn);e.memoizedProps=e.pendingProps,t===null?Rc(e):on=t,mi.current=null}function Rc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Gd(n,t,Zn),n!==null){on=n;return}}else{if(n=Zd(n,t),n!==null){n.flags&=32767,on=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{cn=6,on=null;return}}if(t=t.sibling,t!==null){on=t;return}on=t=e}while(t!==null);cn===0&&(cn=5)}function Ps(e,t,n){var s=It,l=ar.transition;try{ar.transition=null,It=1,of(e,t,n,s)}finally{ar.transition=l,It=s}return null}function of(e,t,n,s){do cl();while(os!==null);if((Dt&6)!==0)throw Error(c(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(eo(e,o),e===pn&&(on=pn=null,wn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Fo||(Fo=!0,Hc(Ft,function(){return cl(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=ar.transition,ar.transition=null;var i=It;It=1;var f=Dt;Dt|=4,mi.current=null,ef(e,n),Dc(n,e),kd(ba),ys=!!ja,ba=ja=null,e.current=n,tf(n),he(),Dt=f,It=i,ar.transition=o}else e.current=n;if(Fo&&(Fo=!1,os=e,Bo=l),o=e.pendingLanes,o===0&&(ls=null),fr(n.stateNode),Bn(e,_e()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],s(l.value,{componentStack:l.stack,digest:l.digest});if(Ro)throw Ro=!1,e=xi,xi=null,e;return(Bo&1)!==0&&e.tag!==0&&cl(),o=e.pendingLanes,(o&1)!==0?e===gi?Xl++:(Xl=0,gi=e):Xl=0,ts(),null}function cl(){if(os!==null){var e=xl(Bo),t=ar.transition,n=It;try{if(ar.transition=null,It=16>e?16:e,os===null)var s=!1;else{if(e=os,os=null,Bo=0,(Dt&6)!==0)throw Error(c(331));var l=Dt;for(Dt|=4,Be=e.current;Be!==null;){var o=Be,i=o.child;if((Be.flags&16)!==0){var f=o.deletions;if(f!==null){for(var x=0;x<f.length;x++){var z=f[x];for(Be=z;Be!==null;){var le=Be;switch(le.tag){case 0:case 11:case 15:Vl(8,le,o)}var de=le.child;if(de!==null)de.return=le,Be=de;else for(;Be!==null;){le=Be;var ne=le.sibling,ze=le.return;if(Sc(le),le===z){Be=null;break}if(ne!==null){ne.return=ze,Be=ne;break}Be=ze}}}var Ue=o.alternate;if(Ue!==null){var Qe=Ue.child;if(Qe!==null){Ue.child=null;do{var sn=Qe.sibling;Qe.sibling=null,Qe=sn}while(Qe!==null)}}Be=o}}if((o.subtreeFlags&2064)!==0&&i!==null)i.return=o,Be=i;else e:for(;Be!==null;){if(o=Be,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Vl(9,o,o.return)}var $=o.sibling;if($!==null){$.return=o.return,Be=$;break e}Be=o.return}}var N=e.current;for(Be=N;Be!==null;){i=Be;var P=i.child;if((i.subtreeFlags&2064)!==0&&P!==null)P.return=i,Be=P;else e:for(i=N;Be!==null;){if(f=Be,(f.flags&2048)!==0)try{switch(f.tag){case 0:case 11:case 15:Ao(9,f)}}catch(Je){nn(f,f.return,Je)}if(f===i){Be=null;break e}var ge=f.sibling;if(ge!==null){ge.return=f.return,Be=ge;break e}Be=f.return}}if(Dt=l,ts(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(jn,e)}catch{}s=!0}return s}finally{It=n,ar.transition=t}}return!1}function Fc(e,t,n){t=ol(n,t),t=sc(e,t,1),e=rs(e,t,1),t=Pn(),e!==null&&(Nr(e,1,t),Bn(e,t))}function nn(e,t,n){if(e.tag===3)Fc(e,e,n);else for(;t!==null;){if(t.tag===3){Fc(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ls===null||!ls.has(s))){e=ol(n,e),e=lc(t,e,1),t=rs(t,e,1),e=Pn(),t!==null&&(Nr(t,1,e),Bn(t,e));break}}t=t.return}}function af(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Pn(),e.pingedLanes|=e.suspendedLanes&n,pn===e&&(wn&n)===n&&(cn===4||cn===3&&(wn&130023424)===wn&&500>_e()-pi?Ls(e,0):hi|=n),Bn(e,t)}function Bc(e,t){t===0&&((e.mode&1)===0?t=1:(t=Wr,Wr<<=1,(Wr&130023424)===0&&(Wr=4194304)));var n=Pn();e=Or(e,t),e!==null&&(Nr(e,t,n),Bn(e,n))}function uf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bc(e,n)}function cf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(c(314))}s!==null&&s.delete(t),Bc(e,n)}var Wc;Wc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||On.current)Rn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Rn=!1,Jd(e,t,n);Rn=(e.flags&131072)!==0}else Rn=!1,Gt&&(t.flags&1048576)!==0&&ju(t,vo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;_o(e,t),e=t.pendingProps;var l=Zs(t,Sn.current);sl(t,n),l=Ka(null,t,s,e,l,n);var o=Qa();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zn(s)?(o=!0,xo(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ra(t),l.updater=Lo,t.stateNode=l,l._reactInternals=t,qa(t,s,e,n),t=ri(null,t,s,!0,o,n)):(t.tag=0,Gt&&o&&Da(t),Ln(null,t,l,n),t=t.child),t;case 16:s=t.elementType;e:{switch(_o(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=ff(s),e=xr(s,e),l){case 0:t=ni(null,t,s,e,n);break e;case 1:t=hc(null,t,s,e,n);break e;case 11:t=uc(null,t,s,e,n);break e;case 14:t=cc(null,t,s,xr(s.type,e),n);break e}throw Error(c(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),ni(e,t,s,l,n);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),hc(e,t,s,l,n);case 3:e:{if(pc(t),e===null)throw Error(c(387));s=t.pendingProps,o=t.memoizedState,l=o.element,Iu(e,t),Mo(t,s,null,n);var i=t.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=ol(Error(c(423)),t),t=xc(e,t,s,n,l);break e}else if(s!==l){l=ol(Error(c(424)),t),t=xc(e,t,s,n,l);break e}else for(Gn=Zr(t.stateNode.containerInfo.firstChild),Jn=t,Gt=!0,pr=null,n=Eu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),s===l){t=Rr(e,t,n);break e}Ln(e,t,s,n)}t=t.child}return t;case 5:return Pu(t),e===null&&La(t),s=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,i=l.children,Na(s,l)?i=null:o!==null&&Na(s,o)&&(t.flags|=32),mc(e,t),Ln(e,t,i,n),t.child;case 6:return e===null&&La(t),null;case 13:return gc(e,t,n);case 4:return Fa(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=nl(t,null,s,n):Ln(e,t,s,n),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),uc(e,t,s,l,n);case 7:return Ln(e,t,t.pendingProps,n),t.child;case 8:return Ln(e,t,t.pendingProps.children,n),t.child;case 12:return Ln(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,o=t.memoizedProps,i=l.value,Kt(bo,s._currentValue),s._currentValue=i,o!==null)if(hr(o.value,i)){if(o.children===l.children&&!On.current){t=Rr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var f=o.dependencies;if(f!==null){i=o.child;for(var x=f.firstContext;x!==null;){if(x.context===s){if(o.tag===1){x=zr(-1,n&-n),x.tag=2;var z=o.updateQueue;if(z!==null){z=z.shared;var le=z.pending;le===null?x.next=x:(x.next=le.next,le.next=x),z.pending=x}}o.lanes|=n,x=o.alternate,x!==null&&(x.lanes|=n),Oa(o.return,n,t),f.lanes|=n;break}x=x.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(c(341));i.lanes|=n,f=i.alternate,f!==null&&(f.lanes|=n),Oa(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ln(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,sl(t,n),l=lr(l),s=s(l),t.flags|=1,Ln(e,t,s,n),t.child;case 14:return s=t.type,l=xr(s,t.pendingProps),l=xr(s.type,l),cc(e,t,s,l,n);case 15:return dc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),_o(e,t),t.tag=1,zn(s)?(e=!0,xo(t)):e=!1,sl(t,n),nc(t,s,l),qa(t,s,l,n),ri(null,t,s,!0,e,n);case 19:return vc(e,t,n);case 22:return fc(e,t,n)}throw Error(c(156,t.tag))};function Hc(e,t){return me(e,t)}function df(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,n,s){return new df(e,t,n,s)}function Ni(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ff(e){if(typeof e=="function")return Ni(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Re)return 11;if(e===Ve)return 14}return 2}function us(e,t){var n=e.alternate;return n===null?(n=ir(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vo(e,t,n,s,l,o){var i=2;if(s=e,typeof e=="function")Ni(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case je:return _s(n.children,l,o,t);case $e:i=8,l|=8;break;case We:return e=ir(12,n,t,l|2),e.elementType=We,e.lanes=o,e;case ae:return e=ir(13,n,t,l),e.elementType=ae,e.lanes=o,e;case Fe:return e=ir(19,n,t,l),e.elementType=Fe,e.lanes=o,e;case R:return Ko(n,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ne:i=10;break e;case ye:i=9;break e;case Re:i=11;break e;case Ve:i=14;break e;case X:i=16,s=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=ir(i,n,t,l),t.elementType=e,t.type=s,t.lanes=o,t}function _s(e,t,n,s){return e=ir(7,e,s,t),e.lanes=n,e}function Ko(e,t,n,s){return e=ir(22,e,s,t),e.elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Si(e,t,n){return e=ir(6,e,null,t),e.lanes=n,e}function Mi(e,t,n){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mf(e,t,n,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Os(0),this.expirationTimes=Os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ki(e,t,n,s,l,o,i,f,x){return e=new mf(e,t,n,f,x),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ir(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(o),e}function hf(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Uc(e){if(!e)return es;e=e._reactInternals;e:{if(an(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var n=e.type;if(zn(n))return yu(e,n,t)}return t}function Vc(e,t,n,s,l,o,i,f,x){return e=ki(n,s,!0,e,l,o,i,f,x),e.context=Uc(null),n=e.current,s=Pn(),l=as(n),o=zr(s,l),o.callback=t??null,rs(n,o,l),e.current.lanes=l,Nr(e,l,s),Bn(e,s),e}function Qo(e,t,n,s){var l=t.current,o=Pn(),i=as(l);return n=Uc(n),t.context===null?t.context=n:t.pendingContext=n,t=zr(o,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rs(l,t,i),e!==null&&(vr(e,l,i,o),So(e,l,i)),i}function Xo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Kc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ci(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}function pf(){return null}var Qc=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ei(e){this._internalRoot=e}Yo.prototype.render=Ei.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));Qo(e,t,null,null)},Yo.prototype.unmount=Ei.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$s(function(){Qo(null,e,null,null)}),t[Pr]=null}};function Yo(e){this._internalRoot=e}Yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=zs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tr.length&&t!==0&&t<tr[n].priority;n++);tr.splice(n,0,e),n===0&&ps(e)}};function Di(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xc(){}function xf(e,t,n,s,l){if(l){if(typeof s=="function"){var o=s;s=function(){var z=Xo(i);o.call(z)}}var i=Vc(t,s,e,0,null,!1,!1,"",Xc);return e._reactRootContainer=i,e[Pr]=i.current,Ll(e.nodeType===8?e.parentNode:e),$s(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var f=s;s=function(){var z=Xo(x);f.call(z)}}var x=ki(e,0,!1,null,null,!1,!1,"",Xc);return e._reactRootContainer=x,e[Pr]=x.current,Ll(e.nodeType===8?e.parentNode:e),$s(function(){Qo(t,x,n,s)}),x}function Go(e,t,n,s,l){var o=n._reactRootContainer;if(o){var i=o;if(typeof l=="function"){var f=l;l=function(){var x=Xo(i);f.call(x)}}Qo(t,i,e,l)}else i=xf(n,t,e,l,s);return Xo(i)}gl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hr(t.pendingLanes);n!==0&&(Vr(t,n|1),Bn(t,_e()),(Dt&6)===0&&(ul=_e()+500,ts()))}break;case 13:$s(function(){var s=Or(e,1);if(s!==null){var l=Pn();vr(s,e,1,l)}}),Ci(e,1)}},Kn=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var n=Pn();vr(t,e,134217728,n)}Ci(e,134217728)}},to=function(e){if(e.tag===13){var t=as(e),n=Or(e,t);if(n!==null){var s=Pn();vr(n,e,t,s)}Ci(e,t)}},zs=function(){return It},yl=function(e,t){var n=It;try{return It=e,t()}finally{It=n}},Tt=function(e,t,n){switch(t){case"input":if(j(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var l=ho(s);if(!l)throw Error(c(90));Ye(s),j(s,l)}}}break;case"textarea":se(e,n);break;case"select":t=n.value,t!=null&&De(e,!!n.multiple,t,!1)}},At=wi,tt=$s;var gf={usingClientEntryPoint:!1,Events:[Tl,Js,ho,Vt,_t,wi]},Yl={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yf={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qn(e),e===null?null:e.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||pf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zo.isDisabled&&Zo.supportsFiber)try{jn=Zo.inject(yf),mn=Zo}catch{}}return Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gf,Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Di(t))throw Error(c(200));return hf(e,t,null,n)},Wn.createRoot=function(e,t){if(!Di(e))throw Error(c(299));var n=!1,s="",l=Qc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=ki(e,1,!1,null,null,n,!1,s,l),e[Pr]=t.current,Ll(e.nodeType===8?e.parentNode:e),new Ei(t)},Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=qn(t),e=e===null?null:e.stateNode,e},Wn.flushSync=function(e){return $s(e)},Wn.hydrate=function(e,t,n){if(!Jo(t))throw Error(c(200));return Go(null,e,t,!0,n)},Wn.hydrateRoot=function(e,t,n){if(!Di(e))throw Error(c(405));var s=n!=null&&n.hydratedSources||null,l=!1,o="",i=Qc;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Vc(t,null,e,1,n??null,l,!1,o,i),e[Pr]=t.current,Ll(e),s)for(e=0;e<s.length;e++)n=s[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Yo(t)},Wn.render=function(e,t,n){if(!Jo(t))throw Error(c(200));return Go(null,e,t,!1,n)},Wn.unmountComponentAtNode=function(e){if(!Jo(e))throw Error(c(40));return e._reactRootContainer?($s(function(){Go(null,null,e,!1,function(){e._reactRootContainer=null,e[Pr]=null})}),!0):!1},Wn.unstable_batchedUpdates=wi,Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Jo(n))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return Go(e,t,n,!1,s)},Wn.version="18.3.1-next-f1338f8080-20240426",Wn}var nd;function kf(){if(nd)return Li.exports;nd=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(y){console.error(y)}}return a(),Li.exports=Mf(),Li.exports}var rd;function Cf(){if(rd)return qo;rd=1;var a=kf();return qo.createRoot=a.createRoot,qo.hydrateRoot=a.hydrateRoot,qo}var Ef=Cf();const Df=id(Ef),it=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],En=[{id:"America/Los_Angeles",label:"PT",offset:0},{id:"America/Denver",label:"MT",offset:1},{id:"America/Chicago",label:"CT",offset:2},{id:"America/New_York",label:"ET",offset:3}],Gl=24;function ds(){return Math.random().toString(36).slice(2,9)}function Oe(a){const[y,c]=a.split(":").map(Number);return y*60+(c||0)}function Nt(a){const y=(a%1440+1440)%1440,c=Math.floor(y/60),D=y%60;return`${String(c).padStart(2,"0")}:${String(D).padStart(2,"0")}`}function Dn(a){const[y,c,D]=a.split("-").map(Number);return new Date(y,c-1,D)}function jr(a,y){const c=new Date(a);return c.setDate(a.getDate()+y),c}function dn(a){return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function ea(a){return a.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function If(a,y){const c=a.getFullYear(),D=y.getFullYear(),M=a.getMonth(),g=y.getMonth(),V=a.getDate(),B=y.getDate(),A=a.toLocaleString(void 0,{month:"short"}),fe=y.toLocaleString(void 0,{month:"short"});return c===D&&M===g&&V===B?ea(a):c===D&&M===g?`${A} ${V} – ${B}, ${c}`:c===D?`${A} ${V} – ${fe} ${B}, ${c}`:`${A} ${V}, ${c} – ${fe} ${B}, ${D}`}function ta(a){const c=0-a.getDay(),D=new Date(a);return D.setDate(a.getDate()+c),D.setHours(0,0,0,0),D}function wr(a){try{const c=new Intl.DateTimeFormat("en-US",{timeZone:a,hour:"2-digit",minute:"2-digit",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"}).formatToParts(new Date),D=J=>c.find(ee=>ee.type===J)?.value||"",M=parseInt(D("hour")||"0",10),g=parseInt(D("minute")||"0",10),V=parseInt(D("year")||"0",10),B=parseInt(D("month")||"0",10),A=parseInt(D("day")||"0",10),fe=(D("weekday")||"").slice(0,3),ie=(M*60+g)%1440,Q=`${V}-${String(B).padStart(2,"0")}-${String(A).padStart(2,"0")}`;return{minutes:ie,ymd:Q,weekdayShort:fe,h:M,m:g,y:V,mo:B,d:A}}catch{const y=new Date,c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][y.getDay()];return{minutes:y.getHours()*60+y.getMinutes(),ymd:dn(y),weekdayShort:c,h:y.getHours(),m:y.getMinutes(),y:y.getFullYear(),mo:y.getMonth()+1,d:y.getDate()}}}function fl(a,y=new Date){try{const M=new Intl.DateTimeFormat("en-US",{timeZone:a,timeZoneName:"short",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(y).find(g=>g.type==="timeZoneName")?.value;if(M&&/[A-Z]{2,4}/.test(M))return M}catch{}try{const M=new Intl.DateTimeFormat("en-US",{timeZone:a,timeZoneName:"shortOffset"}).formatToParts(y).find(g=>g.type==="timeZoneName")?.value;if(M)return M}catch{}return"UTC"}function Ai(a,y){return(a%y+y)%y}function sd(a,y){const c=it.indexOf(a),D=Ai(c+y,7);return it[D]}function Ts(a,y){const c=[],D=y*60;for(const M of a){const g=Oe(M.start),V=M.end==="24:00"?1440:Oe(M.end),B=typeof M.endDay=="string"?M.endDay!==M.day:V<g&&M.end!=="24:00",A=M.end==="24:00"?1440-g:B?1440-g+V:V-g,fe=g+A,ie=g+D,Q=fe+D,J=Math.floor(ie/1440),ee=Math.floor((Q-1)/1440),G=Ai(ie,1440),h=Ai(Q,1440),v=sd(M.day,J),S=sd(M.day,ee);J===ee?c.push({...M,day:v,start:Nt(G),end:Q-ie===1440?"24:00":Nt(h)}):(c.push({...M,day:v,start:Nt(G),end:"24:00",endDay:S}),c.push({...M,day:S,start:"00:00",end:Nt(h),endDay:S}))}return c}function na(a,y,c){return Ts(a,c).filter(M=>M.day===y)}function ur(a,y,c){if(y){const D=a.find(M=>M.id&&M.id===y);if(D){const M=`${D.firstName||""} ${D.lastName||""}`.trim();if(M)return M}}return(c||"").trim()}function dl(a,y){const c=(y||"").trim().toLowerCase();return c?a.find(M=>`${M.firstName||""} ${M.lastName||""}`.trim().toLowerCase()===c)?.id:void 0}function ra(a,y){const c=Oe(a.start),D=Oe(a.end),g=(D>c?D:1440)-c,V=a.segments||[],B=y.map(Q=>{const J=Oe(Q.start),ee=Oe(Q.end),G=Math.max(0,Math.min(g,J-c)),h=Math.max(0,Math.min(g,ee-c)),v=Math.max(0,h-G);return v>0?{taskId:Q.taskId,startOffsetMin:G,durationMin:v}:null}).filter(Boolean),A=new Array(g).fill(null);for(const Q of B)for(let J=Q.startOffsetMin;J<Q.startOffsetMin+Q.durationMin&&J<g;J++)A[J]==null&&(A[J]={taskId:Q.taskId,source:"cal"});for(const Q of V)for(let J=Q.startOffsetMin;J<Q.startOffsetMin+Q.durationMin&&J<g;J++)A[J]={taskId:Q.taskId,source:"manual"};const fe=[];let ie=0;for(;ie<g;){const Q=A[ie];if(!Q){ie++;continue}const J=ie,ee=Q.taskId;let G=ie+1;for(;G<g&&A[G]&&A[G].taskId===ee&&A[G].source===Q.source;)G++;fe.push({id:`${a.id}-${ee}-${J}`,shiftId:a.id,taskId:ee,startOffsetMin:J,durationMin:G-J}),ie=G}return fe}const ml=!1,Hn="".replace(/\/$/,""),Un="/api".replace(/\/$/,"");function ud(){return Hn}function $f(){return!1}function cd(){return Un}let Hi=null;function dd(){if(typeof document>"u")return null;const a=document.cookie.match(/(?:^|; )csrf=([^;]+)/);return a?decodeURIComponent(a[1]):null}function fs(){return Hi||dd()}function sa(){return!!fs()}function ld(){return{cookie:!!dd(),memory:!!Hi,token:!!fs()}}async function Lf(a){try{const y=await fetch(`${Hn}${Un}/login`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:a})});if(y.ok){try{const c=await y.clone().json();c&&typeof c.csrf=="string"&&(Hi=c.csrf)}catch{}try{await Ri(a)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:auth",{detail:{loggedIn:!0}}))}catch{}}return{ok:y.ok,status:y.status}}catch{return{ok:!1}}}async function fd(a,y="admin"){try{const c=await fetch(`${Hn}${Un}/login-magic/request`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:a,role:y})}),D=c.ok;let M;try{const g=await c.clone().json();g&&typeof g.link=="string"&&(M=g.link)}catch{}return{ok:D,link:M}}catch{return{ok:!1}}}async function Pf(a){try{const y=await fetch(`${Hn}${Un}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:a})});return{ok:y.ok,status:y.status}}catch{return{ok:!1}}}async function Oi(){try{const a=`${Hn}${Un}/schedule`,c=await fetch(a,{credentials:"include"});return c.ok?await c.json():null}catch{return null}}async function md(a){try{const y=fs();if(!y&&!ml)return console.warn("[cloudPost] CSRF token missing; writes are disabled without an authenticated session."),{ok:!1,error:"missing_csrf"};const c=`${Hn}${Un}/schedule`,D={"Content-Type":"application/json"};y&&(D["x-csrf-token"]=y);const M=await fetch(c,{method:"POST",headers:D,credentials:"include",body:JSON.stringify(a)});if(M.ok)return{ok:!0,status:M.status};let g,V;try{if((M.headers.get("content-type")||"").includes("application/json")){const A=await M.json();g=A&&(A.error||A.code||A.message),V=JSON.stringify(A)}else V=await M.text()}catch{}return{ok:!1,status:M.status,error:g,bodyText:V}}catch{return{ok:!1}}}async function _f(a){return!!(await md(a)).ok}async function zi(a){try{const y=fs(),c={"Content-Type":"application/json"};y&&(c["x-csrf-token"]=y);try{if((await fetch(`${Hn}${Un}/v2/agents`,{method:"PATCH",credentials:"include",headers:c,body:JSON.stringify({agents:a.map(g=>({id:g.id,firstName:g.firstName,lastName:g.lastName,hidden:!!g.hidden,tzId:g.tzId,isSupervisor:g.isSupervisor===!0,supervisorId:g.supervisorId??null,notes:g.notes}))})})).ok)return!0}catch{}return(await fetch(`${Hn}${Un}/agents`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify({agents:a})})).ok}catch{return!1}}async function Tf(a){try{const y=fs(),c={"Content-Type":"application/json"};return y&&(c["x-csrf-token"]=y),(await fetch(`${Hn}${Un}/v2/shifts/batch`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify({upserts:a.upserts||[],deletes:a.deletes||[]})})).ok}catch{return!1}}async function Ri(a){try{if((await fetch(`${Hn}${Un}/schedule`,{method:"GET",credentials:"include"})).ok)return}catch{}try{await fetch(`${Hn}${Un}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:a||""})})}catch{}}async function Af(a){try{const y=fs(),c={"Content-Type":"application/json"};y&&(c["x-csrf-token"]=y);const D=await fetch(`${Hn}${Un}/v2/proposals`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify(a)});let M;try{const g=await D.clone().json();g&&typeof g.id=="string"&&(M=g.id)}catch{}return D.ok?{ok:!0,id:M,status:D.status}:{ok:!1,status:D.status}}catch{return{ok:!1}}}async function od(){try{const a=fs(),y={};a&&(y["x-csrf-token"]=a);const c=await fetch(`${Hn}${Un}/v2/proposals`,{method:"GET",credentials:"include",headers:y});if(!c.ok)return{ok:!1,status:c.status};const D=await c.json();return{ok:!0,proposals:Array.isArray(D?.proposals)?D.proposals:[]}}catch{return{ok:!1}}}async function Of(a){try{const y=fs(),c={};y&&(c["x-csrf-token"]=y);const D=await fetch(`${Hn}${Un}/v2/proposals/${encodeURIComponent(a)}`,{method:"GET",credentials:"include",headers:c});return D.ok?{ok:!0,proposal:(await D.json())?.proposal}:{ok:!1,status:D.status}}catch{return{ok:!1}}}const zf=[{id:"system",label:"System",chips:[]},{id:"default-light",label:"Default Light",chips:["#ffffff","#111827"]},{id:"default-dark",label:"Default Dark",chips:["#0a0a0a","#e5e7eb"]},{id:"night-light",label:"Night Light",chips:["#ffffff","#ef4444"]},{id:"night-dark",label:"Night Dark",chips:["#000000","#ef4444"]},{id:"noir-light",label:"Noir Light",chips:["#ffffff","#000000"]},{id:"noir-dark",label:"Noir Dark",chips:["#000000","#ffffff"]},{id:"prism-light",label:"Prism Light",chips:["#f0f9ff","#0ea5e9"]},{id:"prism-dark",label:"Prism Dark",chips:["#0f172a","#a3a3a3"]}];function Rf({dark:a}){const[y,c]=w.useState(!1),D=w.useMemo(()=>{try{return localStorage.getItem("schedule_theme")||"system"}catch{return"system"}},[]),M=g=>{try{window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:g}}))}catch{}c(!1)};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>c(g=>!g),"aria-haspopup":"menu","aria-expanded":y,className:["h-10 px-3 rounded-lg border text-sm font-medium inline-flex items-center gap-2",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),title:"Choose theme","aria-label":"Choose theme",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"4"}),r.jsx("path",{d:"M12 2v2"}),r.jsx("path",{d:"M12 20v2"}),r.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),r.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),r.jsx("path",{d:"M2 12h2"}),r.jsx("path",{d:"M20 12h2"}),r.jsx("path",{d:"m4.93 19.07 1.41-1.41"}),r.jsx("path",{d:"m17.66 6.34 1.41-1.41"})]}),r.jsx("span",{className:"sr-only",children:"Theme"})]}),y&&r.jsx("div",{className:["absolute right-0 mt-2 z-50 w-[320px] rounded-xl p-2 border shadow-lg",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-200"].join(" "),role:"menu",children:r.jsx("div",{className:"grid grid-cols-2 gap-2",children:zf.map(g=>r.jsxs("button",{onClick:()=>M(g.id),className:["flex items-center gap-2 p-2 rounded-lg border text-left",a?"hover:bg-neutral-800 border-neutral-700":"hover:bg-neutral-100 border-neutral-300",D===g.id?"ring-1 ring-blue-500":"",g.id==="system"?"col-span-2":""].join(" "),children:[r.jsx("div",{className:"flex -space-x-1",children:g.chips.map((V,B)=>r.jsx("span",{className:"inline-block w-5 h-5 rounded-full border border-black/10",style:{background:V}},B))}),r.jsx("span",{className:"text-sm",children:g.label})]},g.id))})})]})}function Ff({dark:a,setDark:y,view:c,setView:D,weekStart:M,setWeekStart:g,tz:V,setTz:B,canEdit:A,editMode:fe,setEditMode:ie}){const J=/^\d{4}-\d{2}-\d{2}$/.test(M)&&!Number.isNaN(Dn(M).getTime()),ee=J?Dn(M):ta(new Date),G=jr(ee,6),[h,v]=w.useState(!1),S=w.useRef(null);return w.useEffect(()=>{if(!h)return;const p=O=>{const L=O.target;S.current&&!S.current.contains(L)&&v(!1)},T=O=>{O.key==="Escape"&&v(!1)};return document.addEventListener("mousedown",p),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",T)}},[h]),r.jsx(r.Fragment,{children:r.jsx("header",{className:"mb-1",children:r.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] sm:grid-cols-[1fr_auto_1fr] items-center gap-2 sm:gap-3 pt-0.5 pb-1 sm:pt-1 sm:pb-2",children:[r.jsx("div",{className:"block sm:hidden","aria-hidden":"true",children:r.jsx("div",{className:"h-9 w-9"})}),r.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-2 justify-start",children:[r.jsx("button",{onClick:()=>D("schedule"),"aria-label":"Schedule",title:"Schedule",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="schedule"?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[r.jsx("rect",{x:"3",y:"4.5",width:"18",height:"16",rx:"2"}),r.jsx("path",{d:"M8 3v3"}),r.jsx("path",{d:"M16 3v3"}),r.jsx("path",{d:"M3 9.5h18"}),r.jsx("path",{d:"M8 13h3"}),r.jsx("path",{d:"M8 17h8"})]})}),r.jsx("button",{onClick:()=>D("teams"),"aria-label":"Teams",title:"Teams",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="teams"?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[r.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"}),r.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),r.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),r.jsx("button",{onClick:()=>D("manageV2"),"aria-label":"Manage v2",title:"Manage v2",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="manageV2"?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:r.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})})]}),r.jsxs("div",{className:"text-center whitespace-nowrap overflow-visible leading-tight",children:[r.jsx("div",{className:[a?"text-neutral-400":"text-neutral-600","font-semibold","text-[0.88rem] sm:text-[0.95rem]"].join(" "),children:"Customer Care Team Schedule"}),c==="manageV2"?r.jsx("div",{className:["font-bold tracking-wide",a?"text-red-300":"text-red-600","text-[1.15rem] sm:text-[1.35rem]"].join(" "),style:{letterSpacing:"0.02em"},children:"PORTAL OF POWER"}):r.jsx("div",{className:["font-medium tabular-nums","text-[1.15rem] sm:text-[1.35rem]"].join(" "),style:{letterSpacing:"0.005em"},children:If(ee,G)})]}),r.jsxs("div",{className:"relative flex items-center gap-2 justify-end w-full sm:w-auto",children:[r.jsx("div",{className:"sm:hidden",children:r.jsx("button",{onClick:()=>v(p=>!p),"aria-haspopup":"menu","aria-expanded":h,title:"Menu",className:["inline-flex items-center justify-center h-9 w-9 rounded-lg border",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M21 4H14"}),r.jsx("path",{d:"M10 4H3"}),r.jsx("path",{d:"M18 8V4"}),r.jsx("path",{d:"M6 20V4"}),r.jsx("path",{d:"M21 20H12"}),r.jsx("path",{d:"M8 20H3"}),r.jsx("path",{d:"M12 14H3"}),r.jsx("path",{d:"M18 14H21"}),r.jsx("path",{d:"M12 14V20"})]})})}),h&&r.jsxs("div",{ref:S,className:["absolute right-0 top-full mt-2 z-50 w-[18rem] max-w-[calc(100vw-1rem)] rounded-xl p-3 border shadow-lg",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),role:"menu",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-xs font-semibold opacity-70 mb-1",children:"View"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>{D("schedule"),v(!1)},className:["h-9 rounded-lg border text-sm font-medium",c==="schedule"?a?"bg-neutral-800 border-neutral-600":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700":"border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-label":"Schedule",title:"Schedule",children:"Schedule"}),r.jsx("button",{onClick:()=>{D("manageV2"),v(!1)},className:["h-9 rounded-lg border text-sm font-medium",c==="manageV2"?a?"bg-neutral-800 border-neutral-600":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700":"border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-label":"Manage",title:"Manage",children:"Manage"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Timezone"}),r.jsxs("div",{className:"relative",children:[r.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",a?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M2 12h20"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),r.jsx("select",{className:["border rounded-lg pl-9 pr-2 h-9 text-sm appearance-none w-full",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:V.id,onChange:p=>{const T=En.find(O=>O.id===p.target.value);T&&B(T)},children:En.map(p=>r.jsx("option",{value:p.id,children:fl(p.id)},p.id))})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Week start (Sun)"}),r.jsx("input",{className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:J?M:dn(ee),onChange:p=>{const T=p.target.value;/^\d{4}-\d{2}-\d{2}$/.test(T)?g(T):g(dn(ta(new Date)))},style:{colorScheme:a?"dark":"light"}})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Theme"}),r.jsxs("select",{className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full appearance-none",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),defaultValue:(()=>{try{const p=localStorage.getItem("schedule_theme");return p==="unicorn"?"system":p||"system"}catch{return"system"}})(),onChange:p=>{const T=p.target.value;try{localStorage.setItem("schedule_theme",T)}catch{}window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:T}}))},children:[r.jsx("option",{value:"system",children:"System"}),r.jsx("option",{value:"light",children:"Light"}),r.jsx("option",{value:"dark",children:"Dark"}),r.jsx("option",{value:"night",children:"Night"}),r.jsx("option",{value:"noir",children:"Noir"}),r.jsx("option",{value:"prism",children:"Prism"})]})]})]})]}),r.jsxs("div",{className:"hidden sm:block relative w-auto",children:[r.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",a?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M2 12h20"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),r.jsx("select",{"aria-label":"Timezone",title:"Timezone",className:["border rounded-lg pl-9 pr-2 h-9 sm:h-10 text-sm appearance-none min-w-[4.5rem] w-auto",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:V.id,onChange:p=>{const T=En.find(O=>O.id===p.target.value);T&&B(T)},children:En.map(p=>r.jsx("option",{value:p.id,children:fl(p.id)},p.id))})]}),r.jsx("div",{className:"hidden sm:block relative w-auto",children:r.jsx("input",{"aria-label":"Week start (Sun)",title:"Week start (Sun)",className:["border rounded-lg pl-3 pr-2 h-9 sm:h-10 text-sm w-auto min-w-[9.5rem]",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:J?M:dn(ee),onChange:p=>{const T=p.target.value;/^\d{4}-\d{2}-\d{2}$/.test(T)?g(T):g(dn(ta(new Date)))},style:{colorScheme:a?"dark":"light"}})}),r.jsx("div",{className:"hidden sm:block [&>button]:h-9 sm:[&>button]:h-10",children:r.jsx(Rf,{dark:a})})]})]})})})}function Bf({date:a,dayKey:y,people:c,shifts:D,pto:M,dark:g,tz:V,canEdit:B,editMode:A,onRemove:fe,showHeaderTitle:ie=!0,tasks:Q,compact:J,agents:ee}){const h=w.useRef(null),[v,S]=oe.useState(0),[p,T]=oe.useState(()=>{try{const Y=localStorage.getItem("schedule_theme");return Y==="unicorn"?"system":Y||"system"}catch{return"system"}});oe.useEffect(()=>{(()=>{const Ce=document.querySelector("[data-theme]")?.getAttribute("data-theme")||null;Ce&&T(Ce)})();const K=se=>{const Ce=se;if(Ce?.detail?.value){const xe=Ce.detail.value;T(xe==="unicorn"?"system":xe)}};return window.addEventListener("schedule:set-theme",K),()=>window.removeEventListener("schedule:set-theme",K)},[]),oe.useEffect(()=>{const Y=()=>{h.current&&S(h.current.clientWidth)};return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]);const O=Array.from({length:24},(Y,K)=>K),L=g?"text-neutral-500":"text-neutral-400",je=(()=>{const[Y,K]=oe.useState(typeof window<"u"?window.innerWidth:1280);return oe.useEffect(()=>{const se=()=>K(window.innerWidth);return window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]),Y})(),$e=je>=1024?"lg":je>=768?"md":je>=640?"sm":"xs",We=$e==="lg"?1:$e==="md"?.9:$e==="sm"?.82:.75,Ne=Math.max(12,Math.round(13*We)),ye=$e==="lg"?100:$e==="md"?92:$e==="sm"?84:66;w.useMemo(()=>{try{if(!c||c.length===0)return ye;const K=document.createElement("canvas").getContext("2d");if(!K)return ye;K.font=`500 ${Ne}px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif`;let se=0;for(const xe of c){const He=K.measureText(xe).width;He>se&&(se=He)}return Math.ceil(se+28)}catch{return ye}},[c,Ne,ye]);const Re=Math.round(54*.56*We),ae=Math.max(9,Math.round(11*We)),Fe=12,Ve=ae,X=Math.max(20,Math.round(24*We)),R=6,k=$e==="lg"?1:$e==="md"?2:$e==="sm"?3:4,_=g?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)",U=g?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)",d=k===1?100/(Gl*2):100/Gl,C=oe.useMemo(()=>{const Y=new Map;return c.forEach(K=>{const se=D.filter(Ce=>Ce.person===K).map(Ce=>Oe(Ce.start));se.length&&Y.set(K,Math.min(...se))}),Array.from(Y.entries()).sort((K,se)=>K[1]-se[1]||K[0].localeCompare(se[0])).map(([K])=>K)},[c,D]),Ie=oe.useMemo(()=>{const Y=new Map,K=Math.max(1,C.length);return C.forEach((se,Ce)=>{const xe=Math.round(Ce/K*360);Y.set(se,xe)}),Y},[C]),[Me,Xe]=oe.useState(Date.now());oe.useEffect(()=>{let Y,K;const se=()=>Xe(Date.now()),Ce=()=>{K&&clearInterval(K),Y&&clearTimeout(Y);const ct=6e4-Date.now()%6e4;Y=window.setTimeout(()=>{se(),K=window.setInterval(se,6e4)},ct)},xe=()=>{document.visibilityState==="visible"&&(se(),Ce())};return se(),Ce(),document.addEventListener("visibilitychange",xe),()=>{K&&clearInterval(K),Y&&clearTimeout(Y),document.removeEventListener("visibilitychange",xe)}},[]);const ke=wr(V.id),Z=ke.minutes,ue=dn(a)===ke.ymd,W=Z/1440*100,q=Math.max(2,Math.round(4*We)),Te=Math.max(10,Math.round(14*We)),Ye=oe.useMemo(()=>{const Y=new Map;for(const K of Q||[])Y.set(K.id,K);return Y},[Q]),[ve,gt]=oe.useState({id:null,x:0}),[et,ut]=oe.useState(null),[j,I]=oe.useState(!1),Le=oe.useMemo(()=>{const Y=new Map;for(const K of En)Y.set(K.id,K.offset);return Y},[]),re=Y=>{const K=(Y||"").trim().toLowerCase();return(ee||[]).find(se=>`${se.firstName||""} ${se.lastName||""}`.trim().toLowerCase()===K)},De=Y=>it.indexOf(Y);return r.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",style:{overflowY:"visible"},children:[!J&&r.jsxs("div",{className:["relative sticky top-0 z-40 shadow-sm px-2",g?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].filter(Boolean).join(" "),style:{height:Re,display:"flex",alignItems:"center"},children:[ie&&r.jsxs("div",{className:"absolute left-2 right-2 text-center font-bold",style:{top:Math.max(0,Math.round(6*We)),fontSize:Math.round(13*We),lineHeight:1},children:[y," ",r.jsx("span",{className:["ml-1",L].join(" "),children:dn(a)})]}),p!=="night"&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",children:r.jsx("div",{className:"absolute inset-y-0 left-0",style:{width:`calc(12 * (100% / ${Gl}))`,backgroundColor:g?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"}})}),p!=="night"&&r.jsx("div",{className:"absolute left-2 right-2",style:{bottom:q,height:Te,paddingTop:Math.max(2,Math.round(2*We))},children:O.map((Y,K)=>K%k===0&&r.jsx("div",{className:"absolute text-left pl-0.5 leading-none pointer-events-none",style:{left:`calc(${K} * (100% / ${Gl}))`,width:`calc(100% / ${Gl})`},children:r.jsx("div",{className:["font-bold hour-label tracking-tight",L].join(" "),style:{fontSize:ae},children:Y===0?12:Y>12?Y-12:Y})},K))}),ue&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*We))},children:r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded-md shadow-sm now-pop",g?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${W}%`,fontSize:Ve,willChange:"transform,opacity"},children:Nt(Z)},Z)}),j&&et!=null&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*We))},children:(()=>{const Y=h.current?.getBoundingClientRect().width||1,K=Math.max(0,Math.min(100,et/Y*100)),se=1440,Ce=Math.max(0,Math.min(se-1,Math.round(et/Y*se))),xe=Math.floor(Ce/60).toString().padStart(2,"0"),He=(Ce%60).toString().padStart(2,"0");let ct=0;for(const zt of D){const ce=Oe(zt.start),Pe=Oe(zt.end),te=Pe>ce?Pe:1440;Ce>=ce&&Ce<te&&ct++}return r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",g?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:`${K}%`},children:`${xe}:${He} • ${ct} on deck`})})()})]}),r.jsxs("div",{className:"relative px-2",ref:h,onMouseLeave:()=>{I(!1),ut(null)},onMouseMove:Y=>{const K=h.current;if(!K)return;const se=K.getBoundingClientRect(),Ce=Y.clientX-se.left;if(Ce<0||Ce>se.width){I(!1),ut(null);return}I(!0),ut(Ce)},style:{paddingBottom:8},children:[ue&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-20 pointer-events-none",children:r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",g?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${W}%`}})}),j&&et!=null&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-30 pointer-events-none",children:r.jsx("div",{className:"absolute inset-y-0",style:{left:et,width:1,background:"rgba(59,130,246,0.9)"}})}),C.map(Y=>r.jsxs("div",{className:"relative",style:{height:X+6},children:[p!=="night"&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 pointer-events-none",style:{backgroundImage:`repeating-linear-gradient(to right, ${_} 0, ${_} ${d}%, ${U} ${d}%, ${U} ${d*2}%)`,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}}),D.filter(K=>K.person===Y).sort((K,se)=>Oe(K.start)-Oe(se.start)).map((K,se,Ce)=>{const xe=M.some(we=>we.person===Y&&a>=Dn(we.startDate)&&a<=Dn(we.endDate)),He=Oe(K.start),ct=Oe(K.end),zt=ct>He?ct:1440,ce=He/1440*100,Pe=Math.max(.5,(zt-He)/1440*100),te=Ie.get(Y)??0,lt=`hsla(${te},75%,70%,0.95)`,pt=`hsla(${te},60%,28%,0.95)`,St=`hsl(${te},70%,55%)`,wt=g?"rgba(120,120,120,0.4)":"rgba(180,180,180,0.85)",Wt=g?"rgba(160,160,160,0.55)":"rgba(160,160,160,0.5)",Ht=zt-He,ft=p==="night",Tt=p==="noir";let Qt=xe?wt:g?pt:lt,Ut=xe?Wt:g?St:`hsl(${te},65%,50%)`;ft?(Qt="#000",Ut="rgba(239,68,68,0.55)"):Tt&&(Qt="#000",Ut="rgba(255,255,255,0.35)");const at=(Array.isArray(K.segments)?K.segments:[]).slice().sort((we,rt)=>we.startOffsetMin-rt.startOffsetMin),Vt=at.map(we=>{const rt=Ye.get(we.taskId),vt=He+Math.max(0,Math.min(Ht,we.startOffsetMin)),nt=He+Math.max(0,Math.min(Ht,we.startOffsetMin+we.durationMin));return`${rt?.name||"Task"}: ${Nt(vt)}–${Nt(nt)}`}),_t=`${K.person} • ${K.start}-${K.end}`+(Vt.length?`

Tasks:
${Vt.join(`
`)}`:""),At=D.some(we=>we!==K&&we.person===Y&&(()=>{const rt=He,vt=zt,nt=Oe(we.start),jt=Oe(we.end),Mt=jt>Oe(we.start)?jt:1440;return rt<Mt&&vt>nt})()),tt=At?g?"inset 0 0 0 2px rgba(255,0,0,0.6)":"inset 0 0 0 2px rgba(255,0,0,0.7)":void 0,Rt=ve.id===K.id;return r.jsxs("div",{className:"relative",title:_t+(At?`

Warning: overlaps another shift.`:""),onMouseEnter:()=>gt({id:K.id,x:0}),onMouseLeave:()=>gt({id:null,x:0}),onMouseMove:we=>{const vt=we.currentTarget.getBoundingClientRect(),nt=we.clientX-vt.left,jt=Math.max(8,Math.min(nt,vt.width-8));gt(Mt=>Mt.id===K.id?{id:K.id,x:jt}:Mt)},children:[(()=>{let we,rt=!1;if(p==="prism"&&!xe){rt=!0;const nt=(te+20)%360;we=`linear-gradient(90deg, hsl(${nt} 88% 62% / 0.78), hsl(${(nt+50)%360} 84% 58% / 0.74), hsl(${(nt+100)%360} 82% 62% / 0.78))`}xe&&(we=`linear-gradient(0deg, ${g?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 0%, ${g?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 100%)`);const vt={left:`${ce}%`,width:`${Pe}%`,top:2,height:X,backgroundColor:Qt,boxShadow:`inset 0 0 0 1px ${Ut}`+(tt?`, ${tt}`:""),borderRadius:R,...we?{backgroundImage:we}:{},...rt?{backgroundColor:"rgba(0,0,0,0.08)",backgroundBlendMode:"multiply"}:{},...rt?{backgroundSize:"300% 100%",animation:"prismChip 10s linear infinite",animationDelay:`${te%60/30}s`}:{},transition:"filter 100ms ease, box-shadow 100ms ease",...Rt?{filter:"brightness(1.06)"}:{}};return r.jsx("div",{className:"absolute",style:vt})})(),at.map(we=>{const rt=Math.max(0,Math.min(Ht,we.startOffsetMin)),vt=Math.max(0,Math.min(Ht,we.startOffsetMin+we.durationMin));if(vt<=rt)return null;const nt=(He+rt)/1440*100,jt=(vt-rt)/1440*100,Zt=Ye.get(we.taskId)?.color||(g?St:`hsl(${te},65%,50%)`),Jt=p==="prism"?`linear-gradient(90deg,
                              color-mix(in oklab, ${Zt} 85%, #000 15%) 0%,
                              color-mix(in oklab, ${Zt} 65%, #000 35%) 50%,
                              color-mix(in oklab, ${Zt} 85%, #000 15%) 100%
                            )`:ft?"repeating-linear-gradient(135deg, rgba(239,68,68,0.28) 0 6px, transparent 6px 14px)":Tt?"repeating-linear-gradient(135deg, rgba(255,255,255,0.16) 0 6px, transparent 6px 14px)":`repeating-linear-gradient(135deg, color-mix(in oklab, ${Zt} 40%, ${g?"#0a0a0a":"#ffffff"} 60%) 0 6px, transparent 6px 14px)`,gn={left:`${nt}%`,width:`${jt}%`,top:2,height:X,backgroundImage:Jt,...p==="prism"?{backgroundSize:"300% 100%",animation:"prismChip 12s ease-in-out infinite",backgroundBlendMode:"multiply"}:{},pointerEvents:"none",borderRadius:R,opacity:p==="prism"?.7:ft?.35:Tt?.25:.45};return r.jsx("div",{className:"absolute",style:gn},we.id)}),r.jsx("div",{className:"absolute pointer-events-none",style:{left:`${ce}%`,top:2,width:`${Pe}%`,height:X,boxShadow:`inset 0 0 0 1px ${Ut}`+(tt?`, ${tt}`:"")+(Rt?`, 0 0 0 2px ${Ut}, 0 6px 16px rgba(0,0,0,${g?.5:.25})`:""),borderRadius:R,zIndex:5,transition:"box-shadow 100ms ease"}}),(()=>{const we=v>0?v/1440:0,nt=Ht*we>=60,jt=p==="prism"&&!xe;return r.jsx("div",{className:["absolute flex items-center justify-center px-2 truncate pointer-events-none",xe?"text-neutral-500":jt?"text-white":""].join(" "),style:{left:`${ce}%`,top:2,width:`${Pe}%`,height:X,fontSize:Fe,...jt?{textShadow:"0 1px 1px rgba(0,0,0,0.7), 0 0 6px rgba(0,0,0,0.35)"}:{},transition:"filter 100ms ease",...Rt&&!jt?{filter:"brightness(1.02)"}:{}},children:nt?(Y||"").split(" ")[0]||Y:""})})(),ve.id===K.id&&r.jsxs("div",{className:["absolute z-40 px-2 py-1 rounded-md text-xs shadow-lg border",g?"bg-neutral-900/95 border-neutral-700 text-neutral-100":"bg-white/95 border-neutral-300 text-neutral-900"].join(" "),style:{left:ve.x,top:2,transform:"translate(-50%, calc(-100% - 6px))"},role:"tooltip",children:[r.jsx("div",{className:"font-semibold mb-1",children:Y}),r.jsxs("div",{className:g?"text-neutral-300":"text-neutral-700",children:["Shift: ",K.start,"–",K.end]}),(()=>{const we=re(Y);if(!we||!we.tzId)return null;const rt=Le.get(we.tzId)??0,vt=V.offset,nt=(rt-vt)*60,jt=De(K.day),Mt=De(K.endDay||K.day),Zt=(jt<0?0:jt)*1440+Oe(K.start);let Jt=(Mt<0?jt:Mt)*1440+(K.end==="24:00"?1440:Oe(K.end));Jt<=Zt&&(Jt+=1440);const gn=Zt+nt,fn=Jt+nt,br=it[(Math.floor(gn/1440)%7+7)%7],cr=it[(Math.floor(fn/1440)%7+7)%7],an=(gn%1440+1440)%1440,dr=(fn%1440+1440)%1440;return r.jsxs("div",{className:g?"text-neutral-300":"text-neutral-700",children:["Local: ",br," ",Nt(an),"–",cr," ",Nt(dr)," ",r.jsxs("span",{className:"opacity-70",children:["(",fl(we.tzId),")"]})]})})(),at.length>0&&r.jsx("div",{className:"mt-1",children:r.jsx("ul",{className:"space-y-0.5",children:at.map(we=>{const rt=Ye.get(we.taskId),vt=rt?.color||(g?St:`hsl(${te},65%,50%)`),nt=Nt(He+Math.max(0,Math.min(Ht,we.startOffsetMin))),jt=Nt(He+Math.max(0,Math.min(Ht,we.startOffsetMin+we.durationMin)));return r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-3 h-3 rounded-sm border",style:{background:vt,borderColor:vt}}),r.jsxs("span",{className:"truncate",children:[r.jsx("span",{className:"font-medium",children:rt?.name||"Task"}),r.jsxs("span",{className:"ml-1 "+(g?"text-neutral-300":"text-neutral-700"),children:[nt,"–",jt]})]})]},we.id)})})})]}),A&&fe&&r.jsx("button",{onClick:we=>{we.stopPropagation(),fe(K.id)},title:"Delete shift",className:"absolute -top-1 w-4 h-4 rounded-full leading-[14px] text-[12px] text-center border bg-white/90 hover:bg-white",style:{left:`calc(${ce}% + ${Pe}% - 8px)`},children:"×"})]},K.id)})]},Y))]})]})}function Wf({dark:a,tz:y,dayKey:c,shifts:D,pto:M}){const[g,V]=oe.useState(Date.now());oe.useEffect(()=>{let h,v;const S=()=>V(Date.now()),p=()=>{v&&clearInterval(v),h&&clearTimeout(h);const L=6e4-Date.now()%6e4;h=window.setTimeout(()=>{S(),v=window.setInterval(S,6e4)},L)},T=()=>{document.visibilityState==="visible"&&(S(),p())};return S(),p(),document.addEventListener("visibilitychange",T),()=>{v&&clearInterval(v),h&&clearTimeout(h),document.removeEventListener("visibilitychange",T)}},[]);const B=wr(y.id),A=B.minutes,fe=B.ymd,ie=oe.useMemo(()=>{const h=new Set;for(const v of M||[])v.startDate<=fe&&fe<=v.endDate&&h.add(v.person);return h},[M,fe]),Q=oe.useMemo(()=>{const h=new Map;return D.forEach(v=>{const S=h.get(v.person),p=Oe(v.start);(S==null||p<S)&&h.set(v.person,p)}),Array.from(h.entries()).sort((v,S)=>v[1]-S[1]||v[0].localeCompare(S[0])).map(([v])=>v)},[D]),J=oe.useMemo(()=>{const h=new Map,v=Math.max(1,Q.length);return Q.forEach((S,p)=>{const T=Math.round(p/v*360);h.set(S,T)}),h},[Q]),ee=oe.useMemo(()=>{const h=D.filter(S=>{if(ie.has(S.person))return!1;const p=Oe(S.start),T=Oe(S.end),O=T>p?T:1440;return A>=p&&A<O}),v=new Map;for(const S of h){const p=Oe(S.start),T=Oe(S.end),O=T>p?T:1440,L=v.get(S.person);(!L||O<L.end)&&v.set(S.person,{start:p,end:O,label:`${S.start}–${S.end}`})}return Array.from(v.entries()).sort((S,p)=>S[1].end-p[1].end||S[0].localeCompare(p[0])).map(([S,p])=>({person:S,window:p.label,end:p.end}))},[D,A]),G=h=>{const v=Math.floor(h/60),S=h%60;return v>0&&S>0?`${v}h ${S}m`:v>0?`${v}h`:S>0?`${S}m`:"ending now"};return r.jsxs("section",{className:["rounded-2xl p-3 prism-surface-2 border",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsxs("h2",{className:"text-base font-semibold",children:["On deck",r.jsxs("span",{className:["ml-2 text-sm",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",ee.length,")"]})]}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",Nt(A)]})]}),ee.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on right now."}):r.jsx("ul",{className:"space-y-1",children:ee.map(h=>{const v=J.get(h.person)??0,S=a?28:82,p=a?.22:.35,T=a?.1:.18,O=a?40:62,L=a?50:48,Ee={background:`linear-gradient(90deg, hsla(${v},70%,${S}%,${p}) 0%, hsla(${v},70%,${S}%,${T}) 100%)`,borderColor:`hsl(${v},70%,${O}%)`,borderLeftColor:`hsl(${v},70%,${L}%)`,borderLeftWidth:6,borderStyle:"solid"},je=Math.max(0,h.end-A);return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:Ee,children:[r.jsx("span",{className:"font-medium",children:h.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[h.window," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:["• ",G(je)," left"]})]})]},h.person)})})]})}function Hf({dark:a,tz:y,dayKey:c,shifts:D,pto:M,windowMin:g=120}){const[V,B]=oe.useState(Date.now());oe.useEffect(()=>{let S,p;const T=()=>B(Date.now()),O=()=>{p&&clearInterval(p),S&&clearTimeout(S);const je=6e4-Date.now()%6e4;S=window.setTimeout(()=>{T(),p=window.setInterval(T,6e4)},je)},L=()=>{document.visibilityState==="visible"&&(T(),O())};return T(),O(),document.addEventListener("visibilitychange",L),()=>{p&&clearInterval(p),S&&clearTimeout(S),document.removeEventListener("visibilitychange",L)}},[]);const A=wr(y.id),fe=A.minutes,ie=fe+g,Q=A.ymd,J=oe.useMemo(()=>{const S=new Set;for(const p of M||[])p.startDate<=Q&&Q<=p.endDate&&S.add(p.person);return S},[M,Q]),ee=oe.useMemo(()=>{const S=new Map;return D.forEach(p=>{const T=S.get(p.person),O=Oe(p.start);(T==null||O<T)&&S.set(p.person,O)}),Array.from(S.entries()).sort((p,T)=>p[1]-T[1]||p[0].localeCompare(T[0])).map(([p])=>p)},[D]),G=oe.useMemo(()=>{const S=new Map,p=Math.max(1,ee.length);return ee.forEach((T,O)=>{const L=Math.round(O/p*360);S.set(T,L)}),S},[ee]),h=oe.useMemo(()=>{const S=D.filter(T=>{if(J.has(T.person))return!1;const O=Oe(T.start);return O>fe&&O<=ie}),p=new Map;for(const T of S){const O=Oe(T.start),L=p.get(T.person);(!L||O<L.start)&&p.set(T.person,{start:O,label:T.start})}return Array.from(p.entries()).sort((T,O)=>T[1].start-O[1].start||T[0].localeCompare(O[0])).map(([T,O])=>({person:T,at:O.label,start:O.start}))},[D,fe,ie]),v=S=>{const p=Math.max(0,S),T=Math.floor(p/60),O=p%60;return T>0&&O>0?`${T}h ${O}m`:T>0?`${T}h`:O>0?`${O}m`:"now"};return r.jsxs("section",{className:["rounded-2xl p-3 prism-surface-3 border",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsxs("h2",{className:"text-base font-semibold",children:["Up next",r.jsxs("span",{className:["ml-2 text-sm",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",h.length,")"]})]}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["within 2 hours of ",Nt(fe)]})]}),h.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming starts in this window."}):r.jsx("ul",{className:"space-y-1",children:h.map(S=>{const p=G.get(S.person)??0,T=a?28:82,O=a?.22:.35,L=a?.1:.18,Ee=a?40:62,je=a?50:48,$e={background:`linear-gradient(90deg, hsla(${p},70%,${T}%,${O}) 0%, hsla(${p},70%,${T}%,${L}) 100%)`,borderColor:`hsl(${p},70%,${Ee}%)`,borderLeftColor:`hsl(${p},70%,${je}%)`,borderLeftWidth:6,borderStyle:"solid"},We=Math.max(0,S.start-fe);return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:$e,children:[r.jsx("span",{className:"font-medium",children:S.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[S.at," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:["• in ",v(We)]})]})]},S.person)})})]})}function Uf({dark:a,tz:y,dayKey:c,shifts:D,tasks:M}){const[g,V]=oe.useState(Date.now());oe.useEffect(()=>{let G,h;const v=()=>V(Date.now()),S=()=>{h&&clearInterval(h),G&&clearTimeout(G);const O=6e4-Date.now()%6e4;G=window.setTimeout(()=>{v(),h=window.setInterval(v,6e4)},O)},p=()=>{document.visibilityState==="visible"&&(v(),S())};return v(),S(),document.addEventListener("visibilitychange",p),()=>{h&&clearInterval(h),G&&clearTimeout(G),document.removeEventListener("visibilitychange",p)}},[]);const A=wr(y.id).minutes,fe=oe.useMemo(()=>{const G=new Map;return M.forEach(h=>G.set(h.id,h)),G},[M]),ie=oe.useMemo(()=>{const G=[];for(const h of D){if(!Array.isArray(h.segments)||h.segments.length===0)continue;const v=Oe(h.start);for(const S of h.segments){const p=v+S.startOffsetMin,T=p+S.durationMin;G.push({taskId:S.taskId,person:h.person,start:p,end:T})}}return G.sort((h,v)=>h.start-v.start||h.end-v.end||h.person.localeCompare(v.person))},[D]),Q=oe.useMemo(()=>{const G=new Map;for(const h of ie){const v=G.get(h.taskId)||{onNow:[],nextOne:null};h.start<=A&&A<h.end?v.onNow.push(h):h.start>A&&(!v.nextOne||h.start<v.nextOne.start)&&(v.nextOne=h),G.set(h.taskId,v)}for(const[h,v]of G)v.onNow.sort((S,p)=>S.end-p.end||S.person.localeCompare(p.person)),G.set(h,v);return G},[ie,A]),J=Array.from(Q.entries()).filter(([G,h])=>(h.onNow.length>0||h.nextOne)&&fe.has(G));J.sort((G,h)=>(G[1].onNow.length?0:1)-(h[1].onNow.length?0:1)||G[0].localeCompare(h[0]));const ee=G=>{const h=Math.max(0,G),v=Math.floor(h/60),S=h%60;return v>0&&S>0?`${v}h ${S}m`:v>0?`${v}h`:S>0?`${S}m`:"now"};return r.jsxs("section",{className:["rounded-2xl p-3",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsx("h2",{className:"text-base font-semibold",children:"Posture schedule today"}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",Nt(A)]})]}),J.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No posture coverage configured today."}):r.jsx("div",{className:"space-y-3",children:J.map(([G,h])=>{const v=fe.get(G),S=v.color||"#2563eb";return r.jsxs("div",{className:"rounded-lg p-2",style:{background:a?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:S},"aria-hidden":!0}),r.jsx("div",{className:"font-medium",children:v.name})]}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:[h.onNow.length>0&&r.jsxs("span",{children:["on now ",`(${h.onNow.length})`]}),h.onNow.length>0&&h.nextOne&&r.jsx("span",{className:"mx-1",children:"•"}),h.nextOne&&r.jsxs("span",{children:["next at ",Nt(h.nextOne.start)]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsx("div",{children:h.onNow.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on now."}):r.jsx("ul",{className:"space-y-1",children:h.onNow.map(p=>{const T=Math.max(0,p.end-A),O={borderLeft:`6px solid ${S}`};return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md px-2 py-1",style:O,children:[r.jsx("span",{className:"font-medium",children:p.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[Nt(p.start),"–",Nt(p.end)," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:["• ",ee(T)," left"]})]})]},`${G}-now-${p.person}-${p.start}`)})})}),r.jsx("div",{children:h.nextOne?(()=>{const p=h.nextOne,T=Math.max(0,p.start-A),O={borderLeft:`6px solid ${S}`};return r.jsx("ul",{className:"space-y-1",children:r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md px-2 py-1",style:O,children:[r.jsx("span",{className:"font-medium",children:p.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[Nt(p.start)," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:["• in ",ee(T)]})]})]},`${G}-up-${p.person}-${p.start}`)})})():r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming today."})})]})]},G)})})]})}function Vf({dark:a,tz:y,weekStart:c,agent:D,shifts:M,pto:g,tasks:V,calendarSegs:B,agents:A}){const ie=a?"text-neutral-400":"text-neutral-500",J=(()=>{const[Z,ue]=oe.useState(typeof window<"u"?window.innerWidth:1280);return oe.useEffect(()=>{const W=()=>ue(window.innerWidth);return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),Z})(),ee=J>=1024?"lg":J>=768?"md":J>=640?"sm":"xs",G=ee==="lg"?1:ee==="md"?.9:ee==="sm"?.82:.75,h=ee==="lg"?80:ee==="md"?76:ee==="sm"?70:66,v=Math.round(60*G),S=Math.max(9,Math.round(11*G)),p=Math.max(11,Math.round(12*G)),T=12,O=Math.max(9,Math.round(10*G)),L=Math.max(20,Math.round(24*G)),Ee=ee==="lg"?2:ee==="md"?3:4,je=120,$e=Z=>(Z-je+1440)%1440/1440*100,We=Math.max(1,Math.round(24/Ee)),Ne=`${h}px`,ye=Math.round(30*G),Re=Math.max(12,Math.round(16*G)),ae=Dn(c),Fe=oe.useMemo(()=>Array.from({length:7},(Z,ue)=>{const W=jr(ae,ue);return{key:it[ue],date:W,ymd:dn(W)}}),[c]),Ve=oe.useMemo(()=>Ts(M,y.offset).filter(Z=>Z.person===D),[M,y.offset,D]),X=oe.useMemo(()=>{const Z=new Map;for(const ue of it)Z.set(ue,[]);for(const ue of Ve)Z.get(ue.day).push(ue);for(const[ue,W]of Z)W.sort((q,Te)=>Oe(q.start)-Oe(Te.start));return Z},[Ve]),R=oe.useMemo(()=>{let Z=0;for(const ue of D)Z=(Z+ue.charCodeAt(0))%360;return Z},[D]),[k,_]=oe.useState(Date.now());oe.useEffect(()=>{const Z=setInterval(()=>_(Date.now()),3e4);return()=>clearInterval(Z)},[]);const U=wr(y.id),d=$e(U.minutes),C=U.weekdayShort,Ie=`hsla(${R},75%,70%,0.95)`,Me=`hsla(${R},60%,28%,0.95)`,Xe=`hsl(${R},70%,55%)`,ke=oe.useMemo(()=>{const Z=new Map;for(const ue of V||[])Z.set(ue.id,ue);return Z},[V]);return r.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",children:[r.jsxs("div",{className:"grid sticky top-0 z-30",style:{gridTemplateColumns:`${Ne} 1fr`},children:[r.jsx("div",{className:a?"bg-neutral-900":"bg-white"}),r.jsx("div",{className:["relative",a?"bg-neutral-900":"bg-white"].join(" "),style:{height:v},children:r.jsx("div",{className:"absolute left-0 right-0",style:{top:ye,height:Re},children:Array.from({length:We},(Z,ue)=>ue).map(Z=>{const ue=(2+Z*Ee)%24;return r.jsx("div",{className:"absolute text-left pl-1 leading-none pointer-events-none",style:{left:`calc(${Z} * (100% / ${We}))`,width:`calc(100% / ${We})`},children:r.jsxs("div",{className:["hour-label font-normal opacity-70",ie].join(" "),style:{fontSize:S},children:[ue===0?12:ue>12?ue-12:ue,ue<12?"am":"pm"]})},Z)})})})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"absolute inset-y-0 right-0 z-20 pointer-events-none",style:{left:Ne},children:[r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",a?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${d}%`}}),r.jsx("div",{className:["absolute -translate-x-1/2 -top-5 px-1.5 py-0.5 rounded-md shadow-sm",a?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${d}%`,fontSize:O},children:Nt(U.minutes)})]}),Fe.map(Z=>{const ue=(X.get(Z.key)||[]).map(q=>{const Te=(B||[]).filter(ve=>q.agentId&&ve.agentId===q.agentId||ve.person===D).flatMap(ve=>!ve.endDay||ve.endDay===ve.day?[ve]:[{...ve,day:ve.day,start:ve.start,end:"24:00"},{...ve,day:ve.endDay,start:"00:00",end:ve.end}]).filter(ve=>ve.day===Z.key).map(ve=>({taskId:ve.taskId,start:ve.start,end:ve.end})),Ye=ra(q,Te);return Ye&&Ye.length>0?{...q,segments:Ye}:q}),W=Z.key===C;return r.jsxs("div",{className:"grid",style:{gridTemplateColumns:`${Ne} 1fr`},children:[r.jsx("div",{className:["py-1.5 pr-2 font-medium sticky left-0 z-20 truncate",a?"bg-neutral-900":"bg-white"].join(" "),style:{fontSize:p},children:r.jsx("span",{className:W?a?"text-red-400":"text-red-600":void 0,children:Z.key})}),r.jsx("div",{className:"relative",style:{backgroundImage:`linear-gradient(to right, ${a?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 0, ${a?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 50%, ${a?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 50%, ${a?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 100%)`,backgroundSize:`calc(100%/${We}) 100%`,backgroundRepeat:"repeat-x",backgroundPosition:"0 0"},children:ue.map(q=>{const Te=ur(A||[],q.agentId,q.person),Ye=Oe(q.start),ve=Oe(q.end),gt=ve>Ye?ve:1440,et=(Ye-je+1440)%1440,ut=(gt-je+1440)%1440,j=[];ut>et?j.push({leftPct:et/1440*100,widthPct:Math.max(.5,(ut-et)/1440*100)}):(j.push({leftPct:et/1440*100,widthPct:Math.max(.5,(1440-et)/1440*100)}),ut>0&&j.push({leftPct:0,widthPct:Math.max(.5,ut/1440*100)}));const I=gt-Ye,Le=a?Me:Ie,re=a?Xe:`hsl(${R},65%,50%)`,De=(Array.isArray(q.segments)?q.segments:[]).slice().sort((xe,He)=>xe.startOffsetMin-He.startOffsetMin),Y=[];let K=0;for(const xe of De){const He=Math.max(0,Math.min(I,xe.startOffsetMin)),ct=Math.max(0,Math.min(I,xe.startOffsetMin+xe.durationMin));if(He>K){const zt=Ye+K,ce=Ye+He;Y.push({kind:"base",startOff:K,len:He-K,color:Le,title:`${q.person} • ${Nt(zt)}–${Nt(ce)}`,key:`gap-${K}`})}if(ct>He){const zt=ke.get(xe.taskId),ce=Ye+He,Pe=Ye+ct,te=zt?.color||re,lt=`color-mix(in oklab, ${te} 42%, ${a?"#0a0a0a":"#ffffff"} 58%)`,pt=`color-mix(in oklab, ${te} 70%, ${a?"#ffffff":"#000000"} 30%)`;Y.push({kind:"seg",startOff:He,len:ct-He,color:lt,border:pt,title:`${zt?.name||"Task"} • ${Nt(ce)}–${Nt(Pe)}`,key:`seg-${xe.id}`})}K=Math.max(K,ct)}if(K<I){const xe=Ye+K,He=gt;Y.push({kind:"base",startOff:K,len:I-K,color:Le,title:`${q.person} • ${Nt(xe)}–${Nt(He)}`,key:`gap-${K}`})}const se=Y.filter(xe=>xe.kind==="seg").map(xe=>xe.title.replace(/^.* • /,"")),Ce=`${Te} • ${q.start}-${q.end}`+(se.length?`

Tasks:
${se.join(`
`)}`:"");return r.jsxs("div",{className:"relative",title:Ce,children:[Y.map(xe=>{const He=Ye+xe.startOff,ct=He+xe.len,zt=(He-je+1440)%1440,ce=(ct-je+1440)%1440,Pe=[];if(ce>zt)Pe.push({leftPct:zt/1440*100,widthPct:xe.len/1440*100,key:`one-${xe.key}`});else{const lt=1440-zt,pt=xe.len-lt;Pe.push({leftPct:zt/1440*100,widthPct:lt/1440*100,key:`wrapA-${xe.key}`}),pt>0&&Pe.push({leftPct:0,widthPct:pt/1440*100,key:`wrapB-${xe.key}`})}const te=xe.kind==="seg"&&xe.border?xe.border:re;return Pe.map(lt=>r.jsx("div",{className:"absolute rounded",style:{left:`${lt.leftPct}%`,width:`${lt.widthPct}%`,height:L,backgroundColor:xe.color,boxShadow:`inset 0 0 0 1px ${te}`},title:xe.title},lt.key))}),j.length>0&&r.jsxs("div",{className:"absolute flex items-center justify-center px-2 truncate pointer-events-none",style:{left:`${j[0].leftPct}%`,width:`${j[0].widthPct}%`,height:L,fontSize:T},children:[q.start,"-",q.end]})]},`${q.person}-${q.day}-${q.start}-${q.end}`)})})]},Z.key)})]})]})}function Kf({dark:a,weekStart:y,dayIndex:c,setDayIndex:D,shifts:M,pto:g,tasks:V,calendarSegs:B,tz:A,canEdit:fe,editMode:ie,onRemoveShift:Q,agents:J,slimline:ee}){const G=Dn(y),h=jr(G,c),v=it[c],S=oe.useMemo(()=>{const X=new Set;for(const R of J||[]){const k=[R.firstName||"",R.lastName||""].filter(Boolean).join(" ").trim();k&&R.hidden&&X.add(k)}return X},[J]),p=oe.useMemo(()=>na(M,v,A.offset).sort((_,U)=>Oe(_.start)-Oe(U.start)).filter(_=>!S.has(_.person)).map(_=>{const U=B.filter(C=>C.day===v&&(_.agentId&&C.agentId===_.agentId||C.person===_.person)).map(C=>({taskId:C.taskId,start:C.start,end:C.end})),d=ra(_,U);return d&&d.length>0?{..._,segments:d}:_}),[M,v,A.offset,B,S]),T=oe.useMemo(()=>Array.from(new Set(p.map(X=>X.person))),[p]),O=oe.useMemo(()=>Array.from(new Set(M.map(R=>R.person))).sort().filter(R=>!S.has(R)),[M,S]),[L,Ee]=oe.useState(""),[je,$e]=oe.useState(!1),We=w.useRef(null);oe.useEffect(()=>{if(!je)return;const X=k=>{const _=k.target;We.current&&!We.current.contains(_)&&$e(!1)},R=k=>{k.key==="Escape"&&$e(!1)};return document.addEventListener("mousedown",X),document.addEventListener("keydown",R),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("keydown",R)}},[je]),oe.useEffect(()=>{$e(!1)},[L,c]);const ye=wr(A.id).weekdayShort,Re=oe.useMemo(()=>na(M,ye,A.offset).sort((k,_)=>Oe(k.start)-Oe(_.start)).filter(k=>!S.has(k.person)).map(k=>{const _=B.filter(d=>d.day===ye&&(k.agentId&&d.agentId===k.agentId||d.person===k.person)).map(d=>({taskId:d.taskId,start:d.start,end:d.end})),U=ra(k,_);return U&&U.length>0?{...k,segments:U}:k}),[M,ye,A.offset,B,S]),[ae,Fe]=oe.useState(()=>{const X=wr(A.id),R=X.h%12||12,k=`${String(R).padStart(2,"0")}:${String(X.m).padStart(2,"0")}`,_=X.h>=12?"PM":"AM";return{hhmm:k,ampm:_}});oe.useEffect(()=>{let X,R;const k=()=>{const d=wr(A.id),C=d.h%12||12,Ie=`${String(C).padStart(2,"0")}:${String(d.m).padStart(2,"0")}`,Me=d.h>=12?"PM":"AM";Fe({hhmm:Ie,ampm:Me})},_=()=>{R&&clearInterval(R),X&&clearTimeout(X);const C=6e4-Date.now()%6e4;X=window.setTimeout(()=>{k(),R=window.setInterval(k,6e4)},C)},U=()=>{document.visibilityState==="visible"&&(k(),_())};return k(),_(),document.addEventListener("visibilitychange",U),()=>{R&&clearInterval(R),X&&clearTimeout(X),document.removeEventListener("visibilitychange",U)}},[A.id]);function Ve(X){return X.getDate()}return r.jsxs("section",{className:["rounded-2xl p-2 prism-surface-1",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2 gap-2",children:[r.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 pl-2 order-1",children:[r.jsxs("div",{className:["text-neutral-600","leading-none","text-[1.3rem] sm:text-[1.5rem]"].join(" "),style:{whiteSpace:"nowrap"},children:[h.toLocaleDateString(void 0,{month:"short"})," ",Ve(h)]}),r.jsx("div",{className:["font-bold tabular-nums now-pop leading-none","text-[1.45rem] sm:text-[1.6rem]",a?"text-neutral-300":"text-neutral-700"].join(" "),children:ae.hhmm},ae.hhmm),r.jsxs("div",{className:"flex items-baseline gap-1 leading-none",children:[r.jsx("span",{className:["uppercase tracking-wide",a?"text-neutral-400":"text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:ae.ampm}),r.jsx("span",{className:["uppercase tracking-wide","text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:fl(A.id)})]})]}),L&&r.jsxs("div",{className:"pl-2 font-semibold text-xl sm:text-2xl order-3 sm:order-2",children:[L," ",r.jsxs("span",{className:"opacity-70",children:["Week of ",ea(G)]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 order-2 sm:order-3 w-full sm:w-auto justify-start sm:justify-end",children:[!L&&r.jsx("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:r.jsx("div",{className:"inline-flex gap-1.5 sm:gap-2 whitespace-nowrap pr-0.5 sm:pr-1",children:it.map((X,R)=>{const k=X===ye,_="px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-xl text-xs sm:text-sm border",U=R===c?a?"bg-neutral-800 border-neutral-600 text-white":"bg-blue-600 border-blue-600 text-white":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100",d=k?a?"text-red-400":"text-red-600":"";return r.jsx("button",{onClick:()=>D(R),className:[_,U,d].filter(Boolean).join(" "),children:X},X)})})}),r.jsxs("div",{className:"relative",ref:We,children:[r.jsx("button",{"aria-label":"Choose agent",title:L?`Agent: ${L}`:"Choose agent",onClick:()=>$e(X=>!X),className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),je&&r.jsxs("div",{className:["absolute right-0 mt-2 w-56 sm:w-64 max-w-[calc(100vw-2rem)] sm:max-w-none rounded-xl p-2 border shadow-lg z-50 max-h-[18rem] overflow-auto",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-xs font-medium px-2 pb-1",children:"Agents"}),r.jsx("button",{onClick:()=>{Ee(""),$e(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",a?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:"All"}),O.map(X=>r.jsx("button",{onClick:()=>{Ee(X),$e(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",X===L?a?"bg-neutral-800":"bg-neutral-100":a?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:X},X))]})]}),!L&&r.jsx("button",{"aria-label":ee?"Show off-duty agents":"Hide off-duty agents",title:ee?"Show off-duty agents":"Hide off-duty agents",onClick:()=>{const X=!ee;try{localStorage.setItem("schedule_slimline",X?"1":"0")}catch{}window.dispatchEvent(new CustomEvent("schedule:set-slimline",{detail:{value:X}}))},"aria-pressed":!!ee,className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ee?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),r.jsx("path",{d:"M1 1l22 22"}),r.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]}):r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),!L&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pl-1",children:(()=>{const X=ea(h)===ea(Dn(wr(A.id).ymd)),R=!ee||!X?p:(()=>{const _=wr(A.id),U=it.indexOf(v)*1440+_.minutes,d=_.ymd;return p.filter(C=>{if(g.some(q=>q.person===C.person&&q.startDate<=d&&d<=q.endDate))return!1;const Me=it.indexOf(C.day),Xe=it.indexOf(C.endDay||C.day),ke=(Me<0?0:Me)*1440+Oe(C.start);let Z=(Xe<0?Me:Xe)*1440+(C.end==="24:00"?1440:Oe(C.end));Z<=ke&&(Z+=1440);const ue=U>=ke&&U<Z,W=ke>U&&ke<=U+120;return ue||W?U<=Z+30:!1})})(),k=Array.from(new Set(R.map(_=>_.person)));return r.jsx(Bf,{date:h,dayKey:v,people:!ee||!X?T:k,shifts:R,pto:ee&&X?[]:g,dark:a,tz:A,canEdit:fe,editMode:ie,showHeaderTitle:!1,tasks:V,agents:J,onRemove:_=>{if(!fe){alert("Enter the password in Manage to enable editing.");return}Q(_)}})})()}),r.jsx("div",{className:"pl-1 mt-2"})]}),L?r.jsx("div",{className:"mt-4",children:r.jsx(Vf,{dark:a,tz:A,weekStart:y,agent:L,shifts:M,pto:g,tasks:V,calendarSegs:B,agents:J||[]})}):r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("div",{children:r.jsx(Wf,{dark:a,tz:A,dayKey:ye,shifts:Re,pto:g})}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Hf,{dark:a,tz:A,dayKey:ye,shifts:Re,pto:g}),r.jsx(Uf,{dark:a,tz:A,dayKey:ye,shifts:Re,tasks:V})]})]})]})}function Fi({checked:a,onChange:y,disabled:c,size:D="md",dark:M,className:g,ariaLabel:V}){const B=D==="sm"?"w-8":"w-10",A=D==="sm"?"h-4":"h-6",fe=D==="sm"?"w-3 h-3":"w-5 h-5",ie=D==="sm"?"translate-x-4":"translate-x-5",Q=M?"bg-neutral-700":"bg-neutral-300",J="bg-blue-600",ee=M?"ring-neutral-600":"ring-neutral-300";return r.jsx("button",{type:"button",role:"switch","aria-checked":a,"aria-label":V,disabled:c,onClick:()=>!c&&y(!a),className:["relative inline-flex items-center rounded-full transition-colors focus:outline-none focus:ring-2",B,A,a?J:Q,c?"opacity-50 cursor-not-allowed":"cursor-pointer","focus:ring-offset-0",ee,g||""].join(" "),children:r.jsx("span",{className:["inline-block rounded-full bg-white shadow transform transition-transform",fe,"translate-x-1",a?ie:""].join(" ")})})}function Qf({dark:a,deleteAllStep:y,setDeleteAllStep:c,selectedName:D,agentShiftsLocal:M,captureUndo:g,onDeleteShift:V}){return r.jsxs(r.Fragment,{children:[y===1&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete all shifts?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove all shifts for ",D,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>c(0),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:()=>c(2),className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Continue"})]})]})}),y===2&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Confirm delete all"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["Are you absolutely sure? This will permanently remove ",M.length," shift(s) for ",D,"."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>c(0),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:()=>{g(),M.map(A=>A.id).forEach(A=>V(A)),c(0)},className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete all"})]})]})})]})}function Xf({dark:a,selectedName:y,firstName:c,lastName:D,tzId:M,isSupervisor:g,supervisorId:V,hidden:B,notes:A,agents:fe,selectedIdx:ie,onFirst:Q,onLast:J,onTz:ee,onIsSup:G,onSupId:h,onHidden:v,onNotes:S,onSave:p,onDelete:T}){const O=L=>{switch(L){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return L||"—"}};return r.jsxs("div",{className:["rounded-md p-3 mb-3 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:["text-2xl font-semibold mb-2",B?a?"text-neutral-400":"text-neutral-500":a?"text-neutral-100":"text-neutral-900"].join(" "),children:y||"Select an agent"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"First name"}),r.jsx("input",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:c,onChange:L=>Q(L.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Last name"}),r.jsx("input",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:D,onChange:L=>J(L.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Timezone"}),r.jsx("select",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:M,onChange:L=>ee(L.target.value),children:En.map(L=>r.jsx("option",{value:L.id,children:O(L.id)},L.id))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Reports to"}),r.jsxs("select",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:V,onChange:L=>h(L.target.value),children:[r.jsx("option",{value:"",children:"—"}),fe.filter((L,Ee)=>!!L.isSupervisor&&Ee!==ie).map(L=>{const Ee=`${L.firstName||""} ${L.lastName||""}`.trim(),je=L.id||Ee;return r.jsx("option",{value:je,children:Ee||je},je)})]})]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx(Fi,{ariaLabel:"Supervisor",dark:a,size:"md",checked:g,onChange:L=>G(L)}),r.jsx("span",{children:"Supervisor"})]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx(Fi,{ariaLabel:"Hidden",dark:a,size:"md",checked:B,onChange:L=>v(L)}),r.jsx("span",{children:"Hidden"})]})]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Notes"}),r.jsx("textarea",{rows:10,className:["border rounded px-2 py-1 text-sm h-full",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:A,onChange:L=>S(L.target.value)})]})]}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx("button",{onClick:p,className:["px-3 py-1.5 rounded border text-sm font-medium",a?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:T,className:["px-3 py-1.5 rounded border text-sm",a?"border-neutral-700 text-red-300":"border-neutral-300 text-red-600"].join(" "),children:"Delete"})]})]})}function hd({dark:a,tz:y,weekStart:c,agent:D,shifts:M,pto:g,tasks:V,calendarSegs:B,agents:A,titlePrefix:fe,bandHeight:ie,dayLabelFontPx:Q,onDragAll:J,onDragShift:ee,draggable:G=!0,showDayLabels:h=!0,showWeekLabel:v=!0,framed:S=!0,showNowLine:p=!0,showNowLabel:T=!0,showShiftLabels:O=!0,alwaysShowTimeTags:L=!1,forceOuterTimeTags:Ee=!1,highlightIds:je,showEdgeTimeTagsForHighlights:$e,selectedIds:We,onToggleSelect:Ne,avoidLabelOverlap:ye}){const Re=(()=>{try{return document.querySelector("[data-theme]")?.getAttribute("data-theme")||"system"}catch{return"system"}})(),ae=Re==="night",Fe=Re==="noir",Ve=Re==="prism";function X(ce){let Pe=0;for(let te=0;te<ce.length;te++)Pe=(Pe<<5)-Pe+ce.charCodeAt(te),Pe|=0;return(Pe%360+360)%360}const R=10080,k=Dn(c),_=ce=>it.indexOf(ce),U=a?"text-neutral-400":"text-neutral-500",d=oe.useMemo(()=>Ts(M,y.offset).filter(ce=>ce.person===D),[M,y.offset,D]),C=oe.useMemo(()=>{const ce=new Map;for(const te of d){const lt=_(te.day);if(lt<0)continue;const pt=lt*1440+Oe(te.start);let St;if(te.end==="24:00")St=(lt+1)*1440;else{const Vt=te.endDay||te.day;let _t=_(Vt);_t<0&&(_t=lt),St=_t*1440+Oe(te.end),St<=pt&&(_t<lt?St+=7*1440:St+=1440)}const wt=Math.max(0,Math.min(R,pt)),Wt=Math.max(0,St);if(Wt<=wt)continue;const Ht=`${te.day} ${te.start} – ${te.endDay||te.day} ${te.end}`,ft=Oe(te.start),Tt=te.end==="24:00"?0:Oe(te.end);let Qt;try{const Vt=Math.max(0,St-pt),_t=(B||[]).filter(tt=>te.agentId&&tt.agentId===te.agentId||tt.person===D).flatMap(tt=>!tt.endDay||tt.endDay===tt.day?[tt]:[{...tt,day:tt.day,start:tt.start,end:"24:00"},{...tt,day:tt.endDay,start:"00:00",end:tt.end}]).filter(tt=>tt.day===te.day).map(tt=>({taskId:tt.taskId,start:tt.start,end:tt.end})),At=ra({...te},_t)||[];At&&At.length&&(Qt=At.map(tt=>{const Rt=Math.max(0,Math.min(Vt,tt.startOffsetMin)),we=Math.max(0,Math.min(Vt,tt.startOffsetMin+tt.durationMin));return{taskId:tt.taskId,stOff:Rt,enOff:we}}).filter(tt=>tt.enOff>tt.stOff))}catch{}const Ut={id:te.id,startAbs:wt,endAbs:Wt,title:Ht,key:`${te.person}-${te.id}-${te.day}-${te.start}-${te.end}`,sub:Qt,dayKey:te.day},at=ce.get(te.id)||{id:te.id,key:`${te.person}-${te.id}`,segs:[],earliest:1/0,latest:-1/0,title:Ht};at.segs.push(Ut),at.earliest=Math.min(at.earliest,wt),at.latest=Math.max(at.latest,Wt),at.title=Ht,te.end==="24:00"&&(at.startMin=ft),te.start==="00:00"&&(at.endMin=Tt),te.end!=="24:00"&&te.start!=="00:00"&&(at.startMin==null&&(at.startMin=ft),at.endMin==null&&(at.endMin=Tt)),ce.set(te.id,at)}const Pe=[];for(const[,te]of ce){te.segs.sort((St,wt)=>St.startAbs-wt.startAbs);let lt=te.startMin,pt=te.endMin;lt==null&&te.segs.length>0&&(lt=(te.segs.reduce((wt,Wt)=>Wt.startAbs>wt.startAbs?Wt:wt,te.segs[0]).startAbs%1440+1440)%1440),pt==null&&te.segs.length>0&&(pt=(te.segs.reduce((wt,Wt)=>Wt.endAbs>wt.endAbs?Wt:wt,te.segs[0]).endAbs%1440+1440)%1440),Pe.push({id:te.id,key:te.key,segments:te.segs,earliest:te.earliest,latest:te.latest,title:te.title,startMin:lt,endMin:pt})}return Pe.sort((te,lt)=>te.earliest-lt.earliest),Pe},[d]),Ie=wr(y.id),Me=k,Xe=jr(k,7),ke=new Date(Ie.y,(Ie.mo||1)-1,Ie.d||1),Z=ke>=Me&&ke<Xe,W=(Z?it.indexOf(Ie.weekdayShort)*1440+Ie.minutes:0)/R*100,q=typeof ie=="number"?ie:28,Te=10,Ye=w.useRef(null),[ve,gt]=w.useState(null),et=30,[ut,j]=w.useState(0),[I,Le]=w.useState(!1),[re,De]=w.useState(null),Y=w.useRef(!1);let K=-1/0,se=-1/0;const Ce=48,xe=4;w.useEffect(()=>{const ce=()=>{if(!Ye.current)return;const Pe=Ye.current.getBoundingClientRect();j(Pe.width)};return ce(),window.addEventListener("resize",ce),()=>window.removeEventListener("resize",ce)},[]);const He=ce=>{const Pe=Math.floor(ce/60),te=ce%60,lt=Pe<12,pt=Pe%12||12,St=te===0?"":te===30?":30":`:${te.toString().padStart(2,"0")}`;return`${pt}${St}${lt?"a":"p"}`},ct=ce=>{if(!G||!Ye.current)return;const Pe=Ye.current.getBoundingClientRect(),te=R/Pe.width,lt=-1e9,pt=1e9;Y.current=!1,gt({mode:"all",startX:ce.clientX,pxToMin:te,delta:0,minDelta:lt,maxDelta:pt})},zt=(ce,Pe)=>{if(!G||(Pe.stopPropagation(),!Ye.current))return;const te=Ye.current.getBoundingClientRect(),lt=R/te.width;if(!C.find(at=>at.id===ce))return;let St;if(We){const at=We instanceof Set?new Set(We):new Set(We);at.add(ce),St=at}else St=new Set([ce]);const wt=St||new Set([ce]),Wt=C.filter(at=>!wt.has(at.id)),Ht=R;let ft=1/0,Tt=-1/0;for(const at of C){if(!wt.has(at.id))continue;const Vt=at.earliest,_t=at.latest;let At=1/0,tt=-1/0;for(const Rt of Wt)for(const we of[-1,0,1]){const rt=Rt.earliest+we*Ht,vt=Rt.latest+we*Ht,nt=rt-_t;nt>=0&&(At=Math.min(At,nt));const jt=vt-Vt;jt<=0&&(tt=Math.max(tt,jt))}ft=Math.min(ft,At),Tt=Math.max(Tt,tt)}Number.isFinite(ft)||(ft=1e9),Number.isFinite(Tt)||(Tt=-1e9);const Qt=Tt,Ut=ft;Y.current=!1,gt({mode:"single",id:ce,selectedIds:St,startX:Pe.clientX,pxToMin:lt,delta:0,minDelta:Qt,maxDelta:Ut})};return w.useEffect(()=>{if(!ve)return;const ce=te=>{const lt=(te.clientX-ve.startX)*ve.pxToMin,pt=Math.round(lt/et)*et,St=Math.max(ve.minDelta,Math.min(ve.maxDelta,pt));St!==0&&(Y.current=!0),gt(wt=>wt&&{...wt,delta:St})},Pe=()=>{ve.delta!==0&&(ve.mode==="all"?J?.(ve.delta):ve.mode==="single"&&ve.id&&ee?.(ve.id,ve.delta)),window.removeEventListener("mousemove",ce),window.removeEventListener("mouseup",Pe),gt(null)};return window.addEventListener("mousemove",ce),window.addEventListener("mouseup",Pe),()=>{window.removeEventListener("mousemove",ce),window.removeEventListener("mouseup",Pe)}},[ve,J,ee]),w.useEffect(()=>{const ce=Pe=>{if(!G||Pe.key!=="ArrowLeft"&&Pe.key!=="ArrowRight")return;const te=re,lt=I&&!re;if(!te&&!lt)return;Pe.preventDefault(),Pe.stopPropagation();const pt=Pe.key==="ArrowLeft"?-15:15;te?ee?.(te,pt):lt&&J?.(pt)};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[G,I,re,J,ee]),r.jsxs("div",{className:"w-full",children:[h&&r.jsx("div",{className:"relative h-6",children:it.map((ce,Pe)=>{const te=Pe/7*100,lt=1/7*100;return r.jsx("div",{className:["absolute text-center",U].join(" "),style:{left:`${te}%`,width:`${lt}%`,fontSize:typeof Q=="number"?Q:11},children:ce},ce)})}),r.jsx("div",{className:["relative",S?"rounded-md overflow-hidden":"",S?a?"bg-neutral-950":"bg-neutral-50":""].filter(Boolean).join(" "),style:{height:q,overflow:"visible",marginBottom:0},children:r.jsxs("div",{ref:Ye,className:"absolute inset-y-0",style:{left:0,right:0,paddingLeft:S?6:0,paddingRight:S?6:0},onMouseDown:G?ct:void 0,onMouseEnter:()=>Le(!0),onMouseLeave:()=>{Le(!1),De(null)},children:[Array.from({length:7},(ce,Pe)=>{const te=Pe/7*100,lt=12/24*(100/7);return r.jsx("div",{className:"absolute inset-y-0",style:{left:`${te}%`,width:`${lt}%`,background:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"},"aria-hidden":!0},`am-${Pe}`)}),Array.from({length:8},(ce,Pe)=>{const te=Pe/7*100;return r.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${te}%`,width:1,background:a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"}},`dayline-${Pe}`)}),Array.from({length:29},(ce,Pe)=>Pe).map(ce=>{const Pe=ce/28*100;return r.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${Pe}%`,width:1,background:a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)"}},`h${ce}`)}),C.map(ce=>{const Pe=ve&&ve.mode==="all",te=ve&&ve.mode==="single"&&ve.id===ce.id,lt=ve&&ve.mode==="single"&&ve.selectedIds&&ve.selectedIds.has(ce.id),pt=Pe||te||lt?ve.delta:0,St=a?"rgba(59,130,246,0.64)":"rgba(59,130,246,0.625)",wt=ft=>(ft%1440+1440)%1440,Wt=wt(ce.startMin+pt),Ht=wt(ce.endMin+pt);return ce.segments.flatMap(ft=>{const Tt=ft.startAbs+pt,Qt=ft.endAbs+pt,Ut=Math.max(0,Qt-Tt),at=we=>(we%R+R)%R,Vt=at(Tt),_t=at(Qt),At=(we,rt,vt,nt,jt,Mt)=>{const Zt=we/R*100,Jt=(rt-we)/R*100,gn=(rt-we)/R*ut;`${He(Wt)}${He(Ht)}`;const fn=re===ce.id,br=!!je&&(je instanceof Set?je.has(ce.id):je.includes(ce.id)),cr=ae||Fe?"#000":br?a?"rgba(251,146,60,0.78)":"rgba(251,146,60,0.72)":St,an=!!We&&(We instanceof Set?We.has(ce.id):We.includes(ce.id)),Vn=[fn?S?ae||Fe?"inset 0 0 0 2px rgba(255,255,255,0.35)":a?"inset 0 0 0 2px rgba(255,255,255,0.85)":"inset 0 0 0 2px rgba(0,0,0,0.7)":ae||Fe?"0 0 0 2px rgba(255,255,255,0.35)":a?"0 0 0 2px rgba(255,255,255,0.85)":"0 0 0 2px rgba(0,0,0,0.7)":"",an?ae?"0 0 0 2px rgba(239,68,68,0.65)":Fe?"0 0 0 2px rgba(255,255,255,0.45)":"0 0 0 2px rgba(234,179,8,0.95)":""].filter(Boolean).join(", "),qn=L||Pe||te||fn||$e&&br||an;let E=qn&&nt,me=qn&&jt;if(gn<Ce*1.6&&E&&me&&(we<=R-rt?me=!1:E=!1),ye){const be=we/R*ut,he=rt/R*ut;be<K&&(K=-1/0),he<se-Ce&&(se=-1/0);const _e=Mt?.forceStartOuter||Ee,Ae=Mt?.forceEndOuter||Ee,st=we===0,bt=rt===R,Ft=_e&&st,In=Ae&&bt;if(_e&&E){const Ot=be;if(Ft)K=Ot;else{const jn=K+Ce+xe;Ot<jn?E=!1:K=Ot}}if(Ae&&me){const Ot=he;if(In)se=Ot+Ce;else{const jn=se+xe;Ot<jn?me=!1:se=Ot+Ce}}}const Se=[];if(ft.sub&&V)for(const be of ft.sub){const he=(V||[]).find(st=>st.id===be.taskId),_e=Tt+be.stOff,Ae=Tt+be.enOff;Se.push(`${he?.name||"Task"}: ${Nt(_e%1440)}–${Nt(Ae%1440)}`)}return r.jsxs("div",{className:"absolute inset-y-0",style:(function(){const be={left:`${Zt}%`,width:`${Jt}%`,boxShadow:Vn||void 0};if(Ve){const he=X(ce.id),_e=.42,Ae=88,st=55;be.backgroundColor="#0a0a0a",be.backgroundImage=`linear-gradient(90deg,
                          hsla(${(he+330)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+15)%360},  ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+60)%360},  ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+120)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+180)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+240)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+300)%360}, ${Ae}%, ${st}%, ${_e})
                        )`,be.backgroundBlendMode="multiply",be.backgroundSize="300% 100%",be.animation="prismChip 12s ease-in-out infinite",be.animationDelay=`${-(he%7*.33)}s`}else be.background=cr;return be})(),title:(fe?`${fe} • ${ce.title}`:ce.title)+(Se.length?`

Postures:
${Se.join(`
`)}`:""),onMouseDown:G?be=>zt(ce.id,be):void 0,onMouseEnter:()=>{De(ce.id),Le(!1)},onMouseLeave:()=>{De(null),Le(!0)},onClick:be=>{be.stopPropagation(),!Y.current&&Ne?.(ce.id)},children:[ft.sub&&V&&ft.sub.map((be,he)=>{const _e=Tt+be.stOff,Ae=Tt+be.enOff,st=Math.max(we,Math.min(rt,_e)),bt=Math.max(we,Math.min(rt,Ae));if(bt<=st)return null;const Ft=(st-we)/(rt-we)*100,In=(bt-st)/(rt-we)*100,Ot=(V||[]).find(fr=>fr.id===be.taskId),jn=ae?"rgba(239,68,68,0.28)":Fe?"rgba(255,255,255,0.16)":Ot?.color||"rgba(59,130,246,0.85)",mn=Ot?.color?`linear-gradient(90deg,
                            color-mix(in oklab, ${Ot.color} 85%, #000 15%) 0%,
                            color-mix(in oklab, ${Ot.color} 65%, #000 35%) 50%,
                            color-mix(in oklab, ${Ot.color} 85%, #000 15%) 100%
                          )`:void 0;return r.jsx("div",{className:"absolute inset-y-0 pointer-events-none",style:{left:`${Ft}%`,width:`${In}%`,background:Ve?void 0:jn,backgroundImage:Ve?mn:void 0,backgroundSize:Ve?"300% 100%":void 0,animation:Ve?"prismChip 12s ease-in-out infinite":void 0,backgroundBlendMode:Ve?"multiply":void 0,opacity:Ve?.75:ae?.35:Fe?.25:.9},"aria-hidden":!0},`${vt}-seg-${he}`)}),E&&r.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",Mt?.forceStartOuter||Ee?"-left-1 -translate-x-full":S?"left-1":"-left-1 -translate-x-full","bg-black/70 text-white"].join(" "),children:Nt(Wt)}),me&&r.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",Mt?.forceEndOuter||Ee?"-right-1 translate-x-full":S?"right-1":"-right-1 translate-x-full","bg-black/70 text-white"].join(" "),children:Nt(Ht)})]},vt)};if(Ut<=0)return[];const tt=ft.startAbs===ce.earliest,Rt=ft.endAbs===ce.latest;if(Vt<_t){const we=tt||Vt===0,rt=Rt||_t===R;return[At(Vt,_t,`${ft.key}-p0`,we,rt)]}else{const we=Math.min(R-Vt,Ut),rt=Math.max(0,Ut-we);if(rt>0){const vt=Vt,nt=Vt+we,jt=0,Mt=rt,Zt=Rt||nt===R,Jt=tt||jt===0;return[At(vt,nt,`${ft.key}-p0`,!1,Zt,{forceEndOuter:!0}),At(jt,Mt,`${ft.key}-p1`,Jt,!1,{forceStartOuter:!0})]}else{const vt=Vt,nt=Vt+we,jt=Rt||nt===R;return[At(vt,nt,`${ft.key}-p0`,!1,jt,{forceEndOuter:!0})]}}})}),I&&!re&&r.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:a?"inset 0 0 0 2px rgba(255,255,255,0.35)":"inset 0 0 0 2px rgba(0,0,0,0.35)"}}),Z&&p&&r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0",a?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${W}%`,width:1}}),Z&&T&&r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white whitespace-nowrap",a?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${W}%`,fontSize:Te},children:Nt(Ie.minutes)})]})}),v&&r.jsxs("div",{className:["mt-1 text-xs",U].join(" "),children:[dn(k)," – ",dn(jr(k,6))]})]})}function Yf(a){switch(a){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return a||"—"}}function Jf({dark:a,agents:y,onAddAgent:c,onUpdateAgent:D,onDeleteAgent:M,weekStart:g,tz:V,shifts:B,pto:A,tasks:fe,calendarSegs:ie,onUpdateShift:Q,onDeleteShift:J,onAddShift:ee,selectedIdx:G,onSelectIdx:h}){const[v,S]=w.useState(""),[p,T]=w.useState(""),[O,L]=w.useState(En[0]?.id||"UTC"),[Ee,je]=w.useState(null),[$e,We]=w.useState(""),[Ne,ye]=w.useState(""),[Re,ae]=w.useState(En[0]?.id||"UTC"),[Fe,Ve]=w.useState(!1),[X,R]=w.useState(""),[k,_]=w.useState(""),[U,d]=w.useState(!1),[C,Ie]=w.useState(null),Me=G??C,Xe=E=>{h?h(E):Ie(E)},ke=Me!=null?y[Me]:null,Z=ke?[ke.firstName,ke.lastName].filter(Boolean).join(" "):"";function ue(){Ee!=null&&(D?.(Ee,{firstName:$e.trim(),lastName:Ne.trim(),tzId:Re,hidden:U,isSupervisor:Fe,supervisorId:X||null,notes:k}),je(null))}w.useEffect(()=>{if(Me==null){We(""),ye(""),ae(En[0]?.id||"UTC"),Ve(!1),R(""),_(""),d(!1);return}const E=y[Me];if(!E){We(""),ye(""),ae(En[0]?.id||"UTC"),Ve(!1),R(""),_(""),d(!1);return}We(E.firstName||""),ye(E.lastName||""),ae(E.tzId||En[0]?.id||"UTC"),Ve(!!E.isSupervisor),R(E.supervisorId||""),_(E.notes||""),d(!!E.hidden),je(Me)},[Me,y]);const[W,q]=w.useState(null),Te=w.useRef(null),Ye=w.useMemo(()=>y.map((E,me)=>({a:E,i:me})).sort((E,me)=>{const Se=(E.a.firstName||"").toLowerCase(),be=(me.a.firstName||"").toLowerCase();if(Se!==be)return Se.localeCompare(be);const he=(E.a.lastName||"").toLowerCase(),_e=(me.a.lastName||"").toLowerCase();return he.localeCompare(_e)}),[y]);w.useEffect(()=>{if(!W)return;const E=Ye.findIndex(({a:me})=>`${me.firstName} ${me.lastName}`.trim()===W);E>=0&&Te.current&&Te.current.children[E]?.scrollIntoView({block:"nearest",behavior:"smooth"}),q(null)},[Ye,W]),w.useEffect(()=>{const E=me=>{const Se=me.target,be=(Se?.tagName||"").toLowerCase();if(be==="input"||be==="textarea"||be==="select"||Se?.isContentEditable===!0||me.key!=="ArrowDown"&&me.key!=="ArrowUp"||Ye.length===0)return;me.preventDefault();let _e=Me==null?-1:Ye.findIndex(st=>st.i===Me);me.key==="ArrowDown"?_e=Math.min(Ye.length-1,_e+1):_e=_e<=0?0:_e-1;const Ae=Ye[_e];Ae&&(Xe(Ae.i),setTimeout(()=>{Te.current?.querySelector(`li[data-idx="${Ae.i}"]`)?.scrollIntoView({block:"nearest"})},0))};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[Ye,Me]);const[ve,gt]=w.useState(null),et=ve!=null?y[ve]:null;function ut(){ve!=null&&(M?.(ve),gt(null))}const[j,I]=w.useState([]);w.useEffect(()=>{if(!Z){I([]);return}const E=B.filter(Se=>Se.person===Z),me=new Map(it.map((Se,be)=>[Se,be]));I(E.slice().sort((Se,be)=>me.get(Se.day)-me.get(be.day)||Se.start.localeCompare(be.start)))},[Z,B]);const[Le,re]=w.useState(null),De=w.useCallback(()=>{Z&&re({person:Z,shifts:j.map(E=>({...E}))})},[Z,j]),Y=w.useCallback(()=>{if(!Le)return;const E=Le.person,me=Le.shifts,Se=Z===E?j:B.filter(Ae=>Ae.person===E),be=new Map(me.map(Ae=>[Ae.id,Ae])),he=new Map(Se.map(Ae=>[Ae.id,Ae]));for(const[Ae]of he)be.has(Ae)||J?.(Ae);for(const[,Ae]of be)he.has(Ae.id)||ee?.(Ae);for(const[,Ae]of be){const st=he.get(Ae.id);if(!st)continue;const bt=Ae.endDay,Ft=st.endDay;(Ae.day!==st.day||Ae.start!==st.start||Ae.end!==st.end||bt!==Ft)&&Q?.(Ae.id,{day:Ae.day,start:Ae.start,end:Ae.end,endDay:bt})}const _e=y.findIndex(Ae=>[Ae.firstName,Ae.lastName].filter(Boolean).join(" ")===E);_e>=0&&Xe(_e),I(me.slice()),re(null)},[Le,Z,j,B,J,ee,Q,y]);w.useEffect(()=>{const E=me=>{(me.ctrlKey||me.metaKey)&&!me.shiftKey&&(me.key==="z"||me.key==="Z")&&(me.preventDefault(),Y())};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[Y]);const K=w.useMemo(()=>Z?B.filter(me=>me.person!==Z).concat(j):B,[B,Z,j]),se=(E,me)=>{const[Se,be]=E.split(":").map(bt=>parseInt(bt||"0",10)||0);let he=Se*60+be+me;const _e=1440;he=(he%_e+_e)%_e;const Ae=Math.floor(he/60).toString().padStart(2,"0"),st=(he%60).toString().padStart(2,"0");return`${Ae}:${st}`},Ce=E=>it.indexOf(E),xe=E=>it[(E%7+7)%7],He=E=>{const[me,Se]=E.split(":");return(parseInt(me||"0",10)||0)*60+(parseInt(Se||"0",10)||0)},ct=(E,me)=>{const be=Ce(E.day)*1440+He(E.start),he=E.endDay||E.day,_e=Ce(he)*1440+He(E.end),Ae=_e<=be?_e+1440:_e;let st=be+me,bt=Ae+me;const Ft=Math.floor((st/1440%7+7)%7),In=Math.floor((bt/1440%7+7)%7),Ot=(st%1440+1440)%1440,jn=(bt%1440+1440)%1440,mn=xe(Ft),fr=se("00:00",Ot),bn=se("00:00",jn),Br=xe(In);return{...E,day:mn,start:fr,end:bn,endDay:Br}},zt=(E,me,Se,be)=>Math.max(E,Se)<Math.min(me,be),ce=E=>{const Se=Ce(E.day),be=E.endDay||E.day,he=Ce(be),_e=He(E.start),Ae=He(E.end),st=Se*1440+_e;let bt=he*1440+Ae;return he<Se?bt+=7*1440:he===Se&&bt<=st&&(bt+=1440),{start:st,end:bt}},Pe=E=>{const me=ce(E);return Math.max(0,me.end-me.start)},te=E=>{const me=Math.floor(E/60),Se=E%60;return Se===0?`${me}h`:`${me}h ${Se}m`},lt=w.useMemo(()=>j.reduce((E,me)=>E+Pe(me),0),[j]),pt=j.length*30,St=Math.max(0,lt-pt),wt=(E,me)=>{const Se=ce(E);for(const be of me){if(be.id===E.id)continue;const he=ce(be);if(zt(Se.start,Se.end,he.start,he.end))return!0}return!1},Wt=E=>{if(De(),!Z)return;const me=j.map(Se=>ct(Se,E));for(let Se=0;Se<me.length;Se++)for(let be=Se+1;be<me.length;be++)if(wt(me[Se],me)){alert("Move would cause overlapping shifts for this agent.");return}I(me),me.forEach(Se=>{Q?.(Se.id,{day:Se.day,start:Se.start,end:Se.end,endDay:Se.endDay})})},Ht=(E,me)=>{De();const Se=j,be=Se.findIndex(Ae=>Ae.id===E);if(be<0)return;const he=ct(Se[be],me),_e=Se.map((Ae,st)=>st===be?he:Ae);if(wt(he,_e)){alert("Move would cause overlapping shifts for this agent.");return}I(_e),Q?.(he.id,{day:he.day,start:he.start,end:he.end,endDay:he.endDay})},[ft,Tt]=w.useState(null),[Qt,Ut]=w.useState(null),[at,Vt]=w.useState("Mon"),[_t,At]=w.useState(""),[tt,Rt]=w.useState(""),[we,rt]=w.useState("Mon"),vt=w.useRef(null),nt=w.useRef(null);function jt(E){Tt(E.id),Vt(E.day),At(E.start),Rt(E.end),rt(E.endDay||E.day)}function Mt(){Tt(null)}function Zt(){if(!ft)return;De();const E={...j.find(Se=>Se.id===ft),day:at,start:_t,end:tt,endDay:we},me=j.map(Se=>Se.id===ft?E:Se);if(wt(E,me)){alert("Saved times would overlap another shift for this agent.");return}I(me),Q?.(ft,{day:at,start:_t,end:tt,endDay:we}),Tt(null)}const[Jt,gn]=w.useState(null),fn=Jt?j.find(E=>E.id===Jt):null;function br(){Jt&&(De(),I(E=>E.filter(me=>me.id!==Jt)),J?.(Jt),gn(null))}const[cr,an]=w.useState(0);function dr(E){E.preventDefault();const me=v.trim(),Se=p.trim();!me||!Se||(q(`${me} ${Se}`.trim()),c?.({firstName:me,lastName:Se,tzId:O}),S(""),T(""))}const Ir=E=>it[(it.indexOf(E)+1)%it.length],Vn=E=>{if(E==="24:00")return 1440;const[me,Se]=E.split(":");return(parseInt(me||"0",10)||0)*60+(parseInt(Se||"0",10)||0)};function qn(){if(!ke||!Z)return;De();const E=new Set(j.map(Ot=>Ot.day)),me=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Se=j.length===0?"Mon":me.find(Ot=>!E.has(Ot))||"Mon";let be="08:00",he="16:30";if(j.length>0){const Ot=j[j.length-1];be=Ot.start,he=Ot.end}const _e=he!=="24:00"&&Vn(he)<=Vn(be),Ae=j.length===0?Se:_e?Ir(Se):Se;let Ft={id:globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),person:Z,day:Se,start:be,end:he,endDay:Ae},In=0;for(;wt(Ft,j.concat([{...Ft}]))&&In<20;)Ft={...Ft,start:se(Ft.start,30),end:se(Ft.end,30)},In++;In>=20&&wt(Ft,j.concat([{...Ft}]))&&alert("Could not find a non-overlapping slot for the default shift. Please adjust times after adding."),I(Ot=>Ot.concat([Ft])),Ut(Ft.id),ee?.(Ft)}return w.useEffect(()=>{if(!Qt)return;const E=setTimeout(()=>Ut(null),300);return()=>clearTimeout(E)},[Qt]),r.jsxs("div",{className:["rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[r.jsxs("section",{className:["rounded-lg p-3 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"text-sm font-medium",children:["Agents (",y.length,")"]})}),y.length===0?r.jsx("div",{className:["rounded-md p-2 text-xs",a?"bg-neutral-900 text-neutral-300":"bg-white text-neutral-600"].join(" "),children:"No agents found."}):r.jsxs("div",{className:["rounded-md",""].join(" "),children:[r.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid gap-2",style:{gridTemplateColumns:"200px 1fr 200px 64px"},children:[r.jsx("div",{className:"whitespace-nowrap",children:"Name"}),r.jsx("div",{className:"whitespace-nowrap",children:"Notes"}),r.jsx("div",{className:"text-right whitespace-nowrap",children:"Reports to"}),r.jsx("div",{className:"whitespace-nowrap",children:"TZ"})]}),r.jsx("ul",{ref:Te,className:["max-h-[48vh] overflow-y-auto"].join(" "),children:Ye.map(({a:E,i:me},Se)=>{const be=E.supervisorId,he=be&&y.find(Ae=>Ae.id&&Ae.id===be||`${Ae.firstName||""} ${Ae.lastName||""}`.trim()===be)||null,_e=he?`${he.firstName||""} ${he.lastName||""}`.trim():be||"";return r.jsxs("li",{"data-idx":me,className:["px-2 py-1.5 text-sm leading-6 grid gap-2 items-center cursor-pointer",Me===me?a?"bg-neutral-800":"bg-blue-50":a?"odd:bg-neutral-900":"odd:bg-neutral-100"].join(" "),style:{gridTemplateColumns:"200px 1fr 200px 64px"},onClick:()=>Xe(me),children:[r.jsx("div",{className:[a?"text-neutral-200":"text-neutral-800",E.hidden?"opacity-60":""].join(" "),children:[E.firstName||"—",E.lastName||""].filter(Boolean).join(" ")}),r.jsx("div",{className:["truncate",a?"text-neutral-300":"text-neutral-700"].join(" "),children:(E.notes||"").split(/\r?\n/)[0]||""}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"inline-flex items-center gap-1 justify-end",children:[r.jsx("span",{className:["truncate inline-block",a?"text-neutral-300":"text-neutral-700"].join(" "),children:_e||"—"}),E.isSupervisor&&r.jsxs("svg",{"aria-hidden":!0,className:a?"text-amber-300":"text-amber-600",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("title",{children:"Supervisor"}),r.jsx("path",{d:"M12 2l3 7 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1z"})]})]})}),r.jsx("div",{className:["whitespace-nowrap",a?"text-neutral-300":"text-neutral-700"].join(" "),children:fl(E.tzId||"UTC")})]},`${E.firstName}-${E.lastName}-${me}`)})})]}),r.jsx("div",{className:"mt-2",children:r.jsxs("form",{onSubmit:dr,className:"grid grid-cols-2 md:grid-cols-4 gap-2 items-end",children:[r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"First"}),r.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:v,onChange:E=>S(E.target.value),placeholder:"First name"})]}),r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Last"}),r.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:p,onChange:E=>T(E.target.value),placeholder:"Last name"})]}),r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Timezone"}),r.jsx("select",{className:["border rounded-md px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:O,onChange:E=>L(E.target.value),children:En.map(E=>r.jsx("option",{value:E.id,children:Yf(E.id)},E.id))})]}),r.jsx("div",{className:"col-span-1 flex md:justify-end",children:r.jsx("button",{type:"submit",disabled:!v.trim()||!p.trim(),className:["px-3 py-1.5 rounded-md text-sm font-medium border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add Agent"})})]})})]}),ve!=null&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete agent?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove ",et?.firstName," ",et?.lastName,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>gt(null),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:ut,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),Jt&&fn&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete shift?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove the shift for ",Z," on ",fn.day," ",fn.start,"–",fn.end,fn.endDay&&fn.endDay!==fn.day?r.jsxs(r.Fragment,{children:[" ","ending ",String(fn.endDay)]}):null,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>gn(null),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:br,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),r.jsxs("div",{className:["rounded-lg p-3",a?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[ke&&r.jsx(Xf,{dark:a,selectedName:Z,firstName:$e,lastName:Ne,tzId:Re,isSupervisor:Fe,supervisorId:X,hidden:U,notes:k,agents:y,selectedIdx:Me,onFirst:E=>We(E),onLast:E=>ye(E),onTz:E=>ae(E),onIsSup:E=>Ve(E),onSupId:E=>R(E),onHidden:E=>d(E),onNotes:E=>_(E),onSave:ue,onDelete:()=>Me!=null&&gt(Me)}),r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"text-sm font-medium",children:["Shifts (",j.length,")",j.length>0&&r.jsxs("span",{className:"ml-2 opacity-70",children:["• Total ",te(lt),r.jsxs("span",{"aria-hidden":!0,children:["− ",j.length,"×30m = ",te(St)," billable"]})]})]}),r.jsxs("div",{className:"inline-flex items-center gap-1",children:[r.jsx("button",{title:"Delete all shifts","aria-label":"Delete all shifts",disabled:!ke||j.length===0,onClick:()=>an(1),className:["inline-flex items-center justify-center w-8 h-8 rounded border",a?"border-neutral-800 text-red-300 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-red-600 hover:bg-red-50 disabled:opacity-50"].join(" "),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:r.jsx("path",{d:"M5 12h14"})})}),r.jsx("button",{title:"Add shift","aria-label":"Add shift",disabled:!ke,onClick:qn,className:["inline-flex items-center justify-center w-8 h-8 rounded border",a?"border-neutral-800 text-neutral-200 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-neutral-700 hover:bg-neutral-100 disabled:opacity-50"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]})]}),ke?r.jsxs("div",{children:[r.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid grid-cols-6 gap-2",children:[r.jsx("div",{children:"Start Day"}),r.jsx("div",{children:"Start Time"}),r.jsx("div",{children:"End Day"}),r.jsx("div",{children:"End Time"}),r.jsx("div",{children:"Length"}),r.jsx("div",{className:"text-right",children:"Actions"})]}),r.jsx("ul",{className:"max-h-[36vh] overflow-y-auto",children:j.length===0?r.jsx("li",{className:["px-2 py-6 text-sm",a?"text-neutral-300":"text-neutral-700"].join(" "),children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{children:"No shifts for this agent."}),r.jsx("button",{onClick:()=>{if(!Z)return;const E=["Mon","Tue","Wed","Thu","Fri"],me=()=>globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),Se={person:Z,day:"Mon",start:"08:00",end:"16:30"},be=E.map(he=>({id:me(),...Se,day:he,endDay:he}));I(be),be.forEach(he=>ee?.(he))},className:["px-3 py-1.5 rounded-md text-sm font-medium border",a?"bg-neutral-900 border-neutral-700 text-neutral-100 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),children:"Create standard week (Mon–Fri, 8:00–4:30 PST)"})]})}):j.map(E=>{const me=ke?.tzId||En[0]?.id||"UTC",Se=V.id;let be=null;if(Se!==me){const he={...E,person:E.person},_e=En.find(bt=>bt.id===me)?.offset??0,st=Ts([he],_e)[0];be=st?{startDay:st.day,start:st.start,endDay:st.endDay||st.day,end:st.end}:null}return r.jsx("li",{className:["px-2 py-1.5 text-sm leading-6 grid grid-cols-6 gap-2 items-center",a?"odd:bg-neutral-900":"odd:bg-neutral-100",Qt===E.id?"shift-add-in":""].filter(Boolean).join(" "),children:ft===E.id?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:at,onChange:he=>Vt(he.target.value),children:it.map(he=>r.jsx("option",{value:he,children:he},he))})}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:vt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:_t,onChange:he=>{const _e=he.target.value;At(_e);const Ae=se(_e,510);Rt(Ae);const st=He(Ae)<=He(_e);rt(st?Ir(at):at)}}),r.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",a?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const he=vt.current;he?.showPicker?he.showPicker():he?.focus()},"aria-label":"Open time picker",tabIndex:-1,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),r.jsx("div",{children:r.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:we,onChange:he=>rt(he.target.value),children:it.map(he=>r.jsx("option",{value:he,children:he},he))})}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:nt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:tt,onChange:he=>Rt(he.target.value)}),r.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",a?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const he=nt.current;he?.showPicker?he.showPicker():he?.focus()},"aria-label":"Open time picker",tabIndex:-1,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),r.jsx("div",{className:a?"text-neutral-300":"text-neutral-700",children:te(Pe({...E,day:at,start:_t,end:tt,endDay:we}))}),r.jsxs("div",{className:"inline-flex items-center justify-end gap-1 whitespace-nowrap",children:[r.jsx("button",{onClick:Zt,className:["px-2 py-1 rounded border text-xs",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:Mt,className:["px-2 py-1 rounded border text-xs",a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700"].join(" "),children:"Cancel"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:E.day}),be&&r.jsxs("div",{className:"text-xs opacity-70",children:[be.startDay," ",r.jsxs("span",{className:"opacity-60",children:["(",fl(ke?.tzId||"UTC"),")"]})]})]}),r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:E.start}),be&&r.jsx("div",{className:"text-xs opacity-70",children:be.start})]}),r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:E.endDay||E.day}),be&&r.jsx("div",{className:"text-xs opacity-70",children:be.endDay})]}),r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:E.end}),be&&r.jsx("div",{className:"text-xs opacity-70",children:be.end})]}),r.jsx("div",{className:a?"text-neutral-300":"text-neutral-700",children:te(Pe(E))}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"inline-flex items-center gap-1",children:[r.jsx("button",{title:"Edit","aria-label":"Edit shift",onClick:()=>jt(E),className:["inline-flex items-center justify-center w-7 h-7 rounded border",a?"border-neutral-700 text-neutral-200 hover:bg-neutral-800":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})]})}),r.jsx("button",{title:"Delete","aria-label":"Delete shift",onClick:()=>gn(E.id),className:["inline-flex items-center justify-center w-7 h-7 rounded border",a?"border-neutral-700 text-red-300 hover:bg-neutral-800":"border-neutral-300 text-red-600 hover:bg-red-50"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"}),r.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})})]})},E.id)})})]}):r.jsx("div",{className:"text-sm opacity-70",children:"Select an agent on the left to view and edit their shifts."}),r.jsx(Qf,{dark:a,deleteAllStep:cr,setDeleteAllStep:E=>an(E),selectedName:Z,agentShiftsLocal:j,captureUndo:De,onDeleteShift:E=>J?.(E)})]})]}),r.jsx("div",{className:"mt-3",children:r.jsx("div",{className:["rounded-lg border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:ke?r.jsx("div",{className:"p-2",children:r.jsx(hd,{dark:a,tz:V,weekStart:g,agent:Z,shifts:K,pto:A,tasks:fe,calendarSegs:ie,onDragAll:Wt,onDragShift:Ht,showShiftLabels:!0,showEdgeTimeTagsForHighlights:!0,framed:!0,alwaysShowTimeTags:!0,forceOuterTimeTags:!0,bandHeight:40,dayLabelFontPx:13})}):r.jsx("div",{className:["p-4 text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"Select an agent to show their weekly timeline."})})})]})}function pd({dark:a,calendarSegs:y,tasks:c,agents:D=[],weekStart:M,packed:g=!1,filterTaskId:V,title:B="Weekly posture calendar",subtitle:A}){const fe=w.useMemo(()=>Dn(M),[M]),ie=w.useMemo(()=>it.map((h,v)=>dn(jr(fe,v))),[fe]),Q=420,J=a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",ee=w.useMemo(()=>Array.from({length:25},(h,v)=>v),[]),G=w.useMemo(()=>new Map(c.map(h=>[h.id,h])),[c]);return r.jsxs("div",{className:["mt-3 rounded-xl p-3",a?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:B}),A&&r.jsx("div",{className:"text-xs opacity-70",children:A})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((h,v)=>{const S=ie[v],p=(y||[]).map((L,Ee)=>({...L,_idx:Ee})).flatMap(L=>!L.endDay||L.endDay===L.day?[L]:[{...L,day:L.day,start:L.start,end:"24:00"},{...L,day:L.endDay,start:"00:00",end:L.end}]).filter(L=>L.day===h&&(!V||L.taskId===V)).sort((L,Ee)=>Oe(L.start)-Oe(Ee.start)),T=[],O=p.map(L=>{const Ee=Oe(L.start),je=L.end==="24:00"?1440:Oe(L.end);let $e=0;for($e=0;$e<T.length;$e++)if(Ee>=T[$e]){T[$e]=je;break}return $e===T.length&&T.push(je),{it:L,lane:$e,s:Ee,e:je}});if(g)return r.jsxs("div",{className:["rounded-lg p-2",a?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[r.jsxs("div",{className:"font-medium mb-2 flex items-baseline justify-between",children:[r.jsx("span",{children:h}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(S.slice(8),10)})]}),r.jsx("div",{className:"space-y-1",children:p.map(L=>{const Ee=G.get(L.taskId),je=Ee?.color||"#888",$e=ur(D,L.agentId,L.person);return r.jsxs("div",{className:["group relative rounded-md px-2 py-1",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[r.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:je}}),r.jsx("span",{className:"truncate",children:$e})]}),r.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[L.start,"–",L.end]}),r.jsxs("div",{className:["pointer-events-none absolute -top-6 left-0 z-10 px-1.5 py-0.5 rounded text-[10px] whitespace-nowrap",a?"bg-neutral-800 border border-neutral-700 text-neutral-100":"bg-white border border-neutral-300 text-neutral-900","opacity-0 group-hover:opacity-100 transition-none shadow-sm"].join(" "),children:[Ee?.name||L.taskId," • ",L.start,"–",L.end]})]},`${L._idx}-${L.person}-${L.start}-${L.end}`)})})]},h);{const Ee=100/Math.max(1,T.length);return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:Q},children:[r.jsxs("div",{className:"font-medium mb-2 flex items-baseline justify-between",children:[r.jsx("span",{children:h}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(S.slice(8),10)})]}),r.jsxs("div",{className:"absolute left-2 right-2 bottom-2 top-9",children:[ee.map(je=>{const $e=je/24*100;return r.jsx("div",{className:"absolute left-0 right-0",style:{top:`${$e}%`,height:1},children:r.jsx("div",{style:{borderTop:`1px solid ${J}`}})},je)}),O.map(({it:je,lane:$e,s:We,e:Ne})=>{const ye=We/1440*100,Re=Math.max(1.5,(Ne-We)/1440*100),ae=`calc(${$e*Ee}% + 0px)`,Fe=`calc(${Ee}% - 4px)`,Ve=G.get(je.taskId),X=Ve?.color||"#888",R=ur(D,je.agentId,je.person);return r.jsxs("div",{className:["group relative absolute rounded-md px-2 py-1 overflow-hidden",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:`${ye}%`,height:`${Re}%`,left:ae,width:Fe},children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[r.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:X}}),r.jsx("span",{className:"truncate",children:R})]}),r.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[je.start,"–",je.end]}),r.jsxs("div",{className:["pointer-events-none absolute -top-6 left-0 z-10 px-1.5 py-0.5 rounded text-[10px] whitespace-nowrap",a?"bg-neutral-800 border border-neutral-700 text-neutral-100":"bg-white border border-neutral-300 text-neutral-900","opacity-0 group-hover:opacity-100 transition-none shadow-sm"].join(" "),children:[Ve?.name||je.taskId," • ",je.start,"–",je.end]})]},`${je._idx}-${je.person}-${je.start}-${je.end}`)})]})]},h)}})})]})}function Bi({dark:a,tz:y,weekStart:c,agents:D,shifts:M,pto:g,tasks:V,calendarSegs:B,visibleDays:A=7,scrollChunk:fe,showAllTimeLabels:ie=!1,onDragAll:Q,onDragShift:J,sortMode:ee="start",sortDir:G="asc",highlightIds:h,selectedIds:v,onToggleSelect:S,showNameColumn:p=!0}){const[T,O]=w.useState(null),[L,Ee]=w.useState(!1),je=w.useRef(null),[$e,We]=w.useState(160);w.useEffect(()=>{try{if(!D||D.length===0){We(120);return}const R=D.map(Me=>[Me.firstName,Me.lastName].filter(Boolean).join(" ").trim()).filter(Boolean),_=document.createElement("canvas").getContext("2d");if(!_){We(160);return}_.font="500 13px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif";let U=0;for(const Me of R){const Xe=_.measureText(Me).width;Xe>U&&(U=Xe)}We(Math.max(120,Math.min(260,Math.ceil(U+28))))}catch{We(160)}},[D]),w.useEffect(()=>{try{document.documentElement.style.setProperty("--schedule-name-col-px",`${$e}px`)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:namecol",{detail:{px:$e}}))}catch{}},[$e]);const Ne="shrink-0 text-left pl-1 text-sm truncate",ye=oe.useMemo(()=>{const R=D.map(W=>[W.firstName,W.lastName].filter(Boolean).join(" ")),k=Ts(M,y.offset),_=new Map(it.map((W,q)=>[W,q])),U=W=>{let q=1/0;for(const Te of k){if(Te.person!==W)continue;const Ye=_.get(Te.day)??-1;if(Ye<0)continue;const ve=Ye*1440+Oe(Te.start);ve<q&&(q=ve)}return q},d=W=>{let q=-1/0;for(const Te of k){if(Te.person!==W)continue;const Ye=_.get(Te.day)??0,ve=_.get(Te.endDay||Te.day)??Ye,gt=Ye*1440+Oe(Te.start);let et=ve*1440+Oe(Te.end);et<=gt&&(et+=1440),et>q&&(q=et)}return q},C=W=>{let q=0;for(const Te of k){if(Te.person!==W)continue;const Ye=_.get(Te.day)??0,ve=_.get(Te.endDay||Te.day)??Ye,gt=Ye*1440+Oe(Te.start);let et=ve*1440+Oe(Te.end);et<=gt&&(et+=1440),q+=Math.max(0,et-gt)}return q},Ie=W=>k.filter(q=>q.person===W).length,Me=W=>D.find(q=>[q.firstName,q.lastName].filter(Boolean).join(" ")===W)?.tzId||"",Xe=W=>{let q=1/0;for(const Te of k)if(Te.person===W){const Ye=_.get(Te.day)??1/0;Ye<q&&(q=Ye)}return q},ke=R.map(W=>({name:W,startKey:U(W),startHas:Number.isFinite(U(W)),endKey:d(W),endHas:Number.isFinite(d(W)),totalKey:C(W),countKey:Ie(W),hasShifts:Ie(W)>0,tzKey:Me(W),tzHas:!!Me(W),dayKey:Xe(W),dayHas:Number.isFinite(Xe(W))})),Z=(W,q)=>W.name.localeCompare(q.name),ue=G==="asc"?1:-1;return ee==="name"?ke.sort((W,q)=>ue*Z(W,q)).map(W=>W.name):ee==="tz"?ke.sort((W,q)=>{if(W.tzHas&&!q.tzHas)return-1;if(!W.tzHas&&q.tzHas)return 1;const Te=W.tzKey.localeCompare(q.tzKey)*ue;return Te!==0?Te:Z(W,q)}).map(W=>W.name):ee==="end"?ke.sort((W,q)=>{if(W.endHas&&!q.endHas)return-1;if(!W.endHas&&q.endHas)return 1;const Te=(W.endKey-q.endKey)*ue;return Te!==0?Te:Z(W,q)}).map(W=>W.name):ee==="firstDay"?ke.sort((W,q)=>{if(W.dayHas&&!q.dayHas)return-1;if(!W.dayHas&&q.dayHas)return 1;const Te=(W.dayKey-q.dayKey)*ue;return Te!==0?Te:Z(W,q)}).map(W=>W.name):ee==="count"?ke.sort((W,q)=>{const Te=W.hasShifts,Ye=q.hasShifts;if(Te&&!Ye)return-1;if(!Te&&Ye)return 1;const ve=(W.countKey-q.countKey)*ue;return ve!==0?ve:Z(W,q)}).map(W=>W.name):ee==="total"?ke.sort((W,q)=>{const Te=W.hasShifts,Ye=q.hasShifts;if(Te&&!Ye)return-1;if(!Te&&Ye)return 1;const ve=(W.totalKey-q.totalKey)*ue;return ve!==0?ve:Z(W,q)}).map(W=>W.name):ke.sort((W,q)=>{if(W.startHas&&!q.startHas)return-1;if(!W.startHas&&q.startHas)return 1;const Te=(W.startKey-q.startKey)*ue;return Te!==0?Te:Z(W,q)}).map(W=>W.name)},[D,M,y.offset,ee,G]),Re=Math.min(7,Math.max(1,A||7)),ae=7/Re*100,Fe=28,Ve=oe.useMemo(()=>Ts(M,y.offset),[M,y.offset]),X=R=>{let k=0;for(const _ of Ve){const U=it.indexOf(_.day);if(U<0)continue;const d=U*1440+Oe(_.start);let C=(it.indexOf(_.endDay||_.day)<0?U:it.indexOf(_.endDay||_.day))*1440+Oe(_.end);C<=d&&(C+=1440);const Ie=(d%(7*1440)+7*1440)%(7*1440),Me=(C%(7*1440)+7*1440)%(7*1440),Xe=7*1440,ke=(Z,ue,W)=>Z>=ue&&Z<W;Ie<Me?ke(R,Ie,Me)&&k++:(ke(R,Ie,Xe)||ke(R,0,Me))&&k++}return k};return w.useEffect(()=>{const R=je.current;if(!R)return;const k=Math.max(1,Math.ceil(7/Re)),_=Math.min(k-1,Math.max(0,fe||0)),U=Math.min(R.scrollWidth-R.clientWidth,Math.round(_*R.clientWidth));R.scrollTo({left:U,behavior:"smooth"})},[fe,Re]),r.jsx("div",{className:"space-y-1",children:r.jsxs("div",{className:"flex items-stretch gap-1",children:[p&&r.jsxs("div",{className:"shrink-0",style:{width:$e},children:[r.jsx("div",{className:"h-7 opacity-0 select-none",children:"label"}),ye.length===0?r.jsx("div",{className:"text-sm opacity-70 px-2",children:"No agents."}):ye.map(R=>r.jsx("div",{className:["flex items-center",a?"text-neutral-300":"text-neutral-700"].join(" "),style:{height:Fe},title:R,children:r.jsx("div",{className:Ne,style:{width:$e},children:R})},R))]}),r.jsx("div",{ref:je,className:"flex-1 overflow-x-auto no-scrollbar relative",onMouseLeave:()=>{Ee(!1),O(null)},onMouseMove:R=>{const k=je.current;if(!k)return;const _=k.firstElementChild;if(!_)return;const U=_.getBoundingClientRect(),d=R.clientX-U.left;if(d<0||d>U.width){Ee(!1),O(null);return}Ee(!0),O(d)},children:r.jsxs("div",{style:{width:`${ae}%`},"data-ribbons-inner":"1",children:[r.jsxs("div",{className:"relative h-7",children:[it.map((R,k)=>{const _=k/7*100,U=1/7*100;return r.jsx("div",{"data-day-col":k,className:["absolute text-center",a?"text-neutral-300":"text-neutral-600"].join(" "),style:{left:`${_}%`,width:`${U}%`,fontSize:13,lineHeight:1.5},children:R},R)}),L&&T!=null&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-y-0",style:{left:T,width:1,background:"rgba(59,130,246,0.9)"}}),r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",a?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:T},children:(()=>{const k=je.current?.firstElementChild?.getBoundingClientRect().width||1,_=7*1440,U=Math.max(0,Math.min(_-1,Math.round(T/k*_))),d=Math.floor(U%1440/60).toString().padStart(2,"0"),C=(U%60).toString().padStart(2,"0"),Ie=X(U);return`${d}:${C} • ${Ie} on deck`})()})]})]}),ye.length>0&&ye.map(R=>r.jsx("div",{className:"py-0 m-0",children:r.jsx(hd,{dark:a,tz:y,weekStart:c,agent:R,shifts:M,pto:g,tasks:V,calendarSegs:(B||[]).flatMap(k=>!k.endDay||k.endDay===k.day?[k]:[{...k,day:k.day,start:k.start,end:"24:00"},{...k,day:k.endDay,start:"00:00",end:k.end}]),titlePrefix:R,draggable:!!(Q||J),onDragAll:k=>Q?.(R,k),onDragShift:(k,_)=>J?.(R,k,_),showDayLabels:!1,showWeekLabel:!1,framed:!1,showNowLabel:!1,showShiftLabels:!0,bandHeight:Fe,alwaysShowTimeTags:ie,forceOuterTimeTags:ie,avoidLabelOverlap:ie,highlightIds:h,showEdgeTimeTagsForHighlights:!0,selectedIds:v,onToggleSelect:S})},R))]})})]})})}function Gf({dark:a,tz:y,weekStart:c,agents:D,live:M,proposal:g,highlightLiveIds:V,highlightProposalIds:B,tasks:A,calendarSegs:fe}){return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-semibold mb-2",children:"Live"}),r.jsx(Bi,{dark:a,tz:y,weekStart:c,agents:D,shifts:M.shifts,pto:M.pto||[],tasks:A||[],calendarSegs:fe||[],visibleDays:7,showAllTimeLabels:!1,highlightIds:V,sortMode:"start",sortDir:"asc",showNameColumn:!0})]}),r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-semibold mb-2",children:"Proposal"}),r.jsx(Bi,{dark:a,tz:y,weekStart:c,agents:D,shifts:g.shifts,pto:g.pto||[],tasks:A||[],calendarSegs:fe||[],visibleDays:7,showAllTimeLabels:!1,highlightIds:B,sortMode:"start",sortDir:"asc",showNameColumn:!1})]})]}),r.jsx("div",{className:"text-[10px] opacity-70",children:"Visual highlights indicate changed items (added/removed/modified)."})]})}function Zf({dark:a,tz:y,weekStart:c,shifts:D,visibleAgentNames:M,visibleDays:g=7,scrollChunk:V=0}){const[B,A]=w.useState(()=>{try{const Ne=localStorage.getItem("coverage_heatmap_collapsed");return Ne==="1"?!0:Ne!=="0"}catch{return!0}});w.useEffect(()=>{try{localStorage.setItem("coverage_heatmap_collapsed",B?"1":"0")}catch{}try{window.dispatchEvent(new CustomEvent("coverage:collapsed",{detail:{value:B}}))}catch{}},[B]);const fe=w.useMemo(()=>new Set(M),[M]),ie=w.useMemo(()=>Ts(D,y.offset).filter(Ne=>fe.has(Ne.person)),[D,y.offset,fe]),Q=w.useMemo(()=>{const Ne=Array.from({length:7},()=>new Array(24).fill(0));for(const ye of ie){const Re=it.indexOf(ye.day);if(Re<0)continue;const ae=Oe(ye.start),Fe=Oe(ye.end),Ve=Fe>ae?Fe:1440;for(let X=0;X<24;X++){const R=X*60,k=(X+1)*60;Math.max(ae,R)<Math.min(Ve,k)&&Ne[Re][X]++}}return Ne},[ie]),J=w.useMemo(()=>Q.reduce((Ne,ye)=>Math.max(Ne,...ye),0),[Q]),ee=w.useMemo(()=>{const Ne=[];for(let d=0;d<7;d++)for(let C=0;C<24;C++)Ne.push({dIdx:d,h:C,v:Q[d][C]});let ye=1/0,Re=0;for(const d of Ne)d.v<ye&&(ye=d.v),d.v>Re&&(Re=d.v);const ae=Re>0?Ne.filter(d=>d.v===Re):[],Fe=Ne.filter(d=>d.v===ye),Ve=Ne.filter(d=>d.v===0).length,X=Ne.reduce((d,C)=>d+C.v,0),R=Ne.length?X/Ne.length:0,k=Array.from({length:7},(d,C)=>Q[C].reduce((Ie,Me)=>Ie+Me,0)),_=k.reduce((d,C,Ie)=>C>(k[d]??-1/0)?Ie:d,0),U=k.reduce((d,C,Ie)=>C<(k[d]??1/0)?Ie:d,0);return{pts:Ne,minCount:Number.isFinite(ye)?ye:0,maxCount:Re,maxPts:ae,minPts:Fe,zeroHours:Ve,avg:R,bestDayIdx:_,worstDayIdx:U,dayTotals:k}},[Q]),G=Ne=>{if(J<=0)return a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)";const ye=Ne/J,Re=[[0,0,0],[239,68,68],[250,204,21]],ae=ye<=.5?0:1,Fe=ye<=.5?ye/.5:(ye-.5)/.5,Ve=Re[ae],X=Re[ae+1]||Re[ae],R=Math.round(Ve[0]*(1-Fe)+X[0]*Fe),k=Math.round(Ve[1]*(1-Fe)+X[1]*Fe),_=Math.round(Ve[2]*(1-Fe)+X[2]*Fe);return`rgba(${R},${k},${_},${a?.9:.95})`},h=Math.min(7,Math.max(1,g||7)),v=7/h*100,S=w.useRef(null);w.useEffect(()=>{const Ne=S.current;if(!Ne)return;const ye=Math.max(1,Math.ceil(7/h)),Re=Math.min(ye-1,Math.max(0,V||0)),ae=Math.min(Ne.scrollWidth-Ne.clientWidth,Math.round(Re*Ne.clientWidth));Ne.scrollTo({left:ae,behavior:"smooth"})},[V,h]);const p=7,T=1,[O,L]=w.useState(()=>{try{const Ne=getComputedStyle(document.documentElement).getPropertyValue("--schedule-name-col-px"),ye=parseInt(Ne||"160",10);return Number.isFinite(ye)?ye:160}catch{return 160}}),[Ee,je]=w.useState(null),[$e,We]=w.useState(null);return w.useEffect(()=>{const Ne=Fe=>{try{const Ve=Fe.detail?.px;typeof Ve=="number"&&L(Ve)}catch{}};window.addEventListener("schedule:namecol",Ne);const ye=document.querySelector('[data-ribbons-inner="1"]'),Re=()=>{if(ye){je(ye.scrollWidth||ye.clientWidth);try{const Fe=ye.getBoundingClientRect(),Ve=Array.from(ye.querySelectorAll("[data-day-col]"));if(Ve.length===7){const X=Ve.map(R=>{const k=R.getBoundingClientRect();return{left:k.left-Fe.left,width:k.width}});We(X)}}catch{}}};Re();const ae="ResizeObserver"in window?new window.ResizeObserver(()=>Re()):null;return ae&&ye&&ae.observe(ye),()=>{try{ae&&ye&&ae.unobserve(ye)}catch{}window.removeEventListener("schedule:namecol",Ne)}},[g]),r.jsx("div",{className:["sticky bottom-0 z-30",a?"bg-neutral-950/92":"bg-white/95","backdrop-blur","border-t",a?"border-neutral-800":"border-neutral-200"].join(" "),children:r.jsxs("div",{className:"px-2 py-1.5",children:[r.jsx("div",{className:"relative h-6",children:r.jsxs("div",{className:["absolute left-2 top-1/2 -translate-y-1/2 flex items-center gap-2 text-xs font-medium",a?"text-neutral-200":"text-neutral-700"].join(" "),children:[r.jsx("span",{children:"Coverage"}),r.jsx("button",{onClick:()=>A(Ne=>!Ne),"aria-expanded":!B,className:["inline-flex items-center justify-center w-6 h-6 rounded-full border",a?"bg-neutral-900 border-neutral-700 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),title:B?"Expand":"Collapse",children:r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:B?r.jsx("polyline",{points:"18 15 12 9 6 15"}):r.jsx("polyline",{points:"6 9 12 15 18 9"})})}),(()=>{const Ne=ae=>ae===0?"12a":ae<12?`${ae}a`:ae===12?"12p":`${ae-12}p`,ye=ee.maxPts.slice(0,3).map(ae=>`${it[ae.dIdx]} ${Ne(ae.h)}`).join(", "),Re=ee.minPts.slice(0,3).map(ae=>`${it[ae.dIdx]} ${Ne(ae.h)}`).join(", ");return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("span",{className:["px-1.5 py-0.5 rounded border",a?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:ye?`Max at: ${ye}`:"No data",children:["Max ",ee.maxCount]}),r.jsxs("span",{className:["px-1.5 py-0.5 rounded border",a?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:Re?`Min at: ${Re}`:"No data",children:["Min ",ee.minCount]}),r.jsxs("span",{className:["px-1.5 py-0.5 rounded border hidden sm:inline",a?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:"Avg across all hours",children:["Avg ",ee.avg.toFixed(1)]})]})})()]})}),!B&&r.jsxs("div",{className:"flex items-stretch gap-1 mt-1",children:[r.jsxs("div",{className:"shrink-0",style:{width:O},children:[r.jsx("div",{className:"h-[20px]"}),r.jsx("div",{className:"relative",style:{height:p*24+T*23},children:[0,6,12,18,24].map(Ne=>{const ye=p*24+T*23,Re=Ne===24?ye:Ne*(p+T)+p/2,ae=Ne===24?"-translate-y-[100%]":"-translate-y-1/2",Fe=Ne===0?"12a":Ne<12?`${Ne}a`:Ne===12?"12p":`${Ne-12}p`;return r.jsx("div",{className:["absolute right-2 text-right text-[10px]",ae,a?"text-neutral-400":"text-neutral-500"].join(" "),style:{top:Re},children:Fe},Ne)})})]}),r.jsx("div",{ref:S,className:"flex-1 overflow-x-auto no-scrollbar",children:r.jsx("div",{style:Ee?{width:Ee}:{width:`${v}%`},children:r.jsx("div",{className:"relative",style:{height:p*24+T*23},children:it.map((Ne,ye)=>{const Re=$e?$e[ye]?.left:Ee?ye*(Ee/7):void 0,ae=$e?$e[ye]?.width:Ee?Ee/7:void 0;return r.jsx("div",{className:"absolute inset-y-0",style:$e||Ee?{left:Re,width:ae}:{left:`${ye/7*100}%`,width:`${1/7*100}%`},children:Array.from({length:24},(Fe,Ve)=>Ve).map(Fe=>{const Ve=Fe*(p+T),X=Q[ye][Fe],R=`${Ne} — ${String(Fe).padStart(2,"0")}:00 to ${String(Fe+1).padStart(2,"0")}:00 • ${X} on deck`;return r.jsx("div",{className:"w-full",style:{position:"absolute",top:Ve,height:p,backgroundColor:G(X),borderRadius:2},title:R},Fe)})},Ne)})})})})]})]})})}function qf({tasks:a,onCreate:y,onUpdate:c,onArchive:D,onDelete:M,dark:g,selectedId:V,onSelect:B}){const[A,fe]=w.useState({name:"",color:"#2563eb"}),ie=w.useMemo(()=>a.filter(O=>!O.archived),[a]),[Q,J]=w.useState(null),[ee,G]=w.useState(""),[h,v]=w.useState("#2563eb");function S(O){J(O.id),G(O.name),v(O.color)}function p(){J(null)}function T(O){ee.trim()&&(c({id:O,name:ee.trim(),color:h}),J(null))}return r.jsxs("section",{className:["rounded-xl p-3",g?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[r.jsx("div",{className:["border rounded-xl overflow-auto",g?"border-neutral-800":"border-neutral-300"].join(" "),children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:g?"bg-neutral-900":"bg-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Color"}),r.jsx("th",{className:"px-3 py-2 text-left w-36",children:"Actions"})]})}),r.jsx("tbody",{className:g?"divide-y divide-neutral-800":"divide-y divide-neutral-200",children:ie.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"px-3 py-6 text-center opacity-70",children:"No postures configured."})}):ie.map(O=>r.jsx("tr",{onClick:()=>B?.(O.id),className:[g?"hover:bg-neutral-900 cursor-pointer":"hover:bg-neutral-50 cursor-pointer",V===O.id?g?"bg-neutral-900 ring-1 ring-blue-500/40":"bg-blue-50 ring-1 ring-blue-500/40":""].join(" "),children:Q===O.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("input",{className:["w-full border rounded px-2 py-1",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ee,onChange:L=>G(L.target.value)})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("input",{type:"color",className:["w-10 h-8 border rounded",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:h,onChange:L=>v(L.target.value)})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>T(O.id),className:["px-2 py-1 rounded border text-xs",g?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:p,className:["px-2 py-1 rounded border text-xs",g?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-1.5 font-medium",children:O.name}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("span",{className:"inline-block w-5 h-5 rounded border align-middle",style:{background:O.color}})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsxs("div",{className:"flex gap-2",onClick:L=>L.stopPropagation(),children:[r.jsx("button",{onClick:()=>S(O),className:["px-2 py-1 rounded border text-xs",g?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),r.jsx("button",{onClick:()=>c({...O,archived:!0}),className:["px-2 py-1 rounded border text-xs",g?"border-neutral-700":"border-neutral-300"].join(" "),children:"Remove"}),r.jsx("button",{onClick:()=>{M&&confirm(`Delete posture "${O.name}"? This cannot be undone.`)&&M(O.id)},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})})]})},O.id))})]})}),r.jsxs("form",{className:"mt-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",onSubmit:O=>{O.preventDefault();const L=A.name.trim();L&&(y({...A,name:L}),fe({name:"",color:"#2563eb"}))},children:[r.jsxs("label",{className:"text-sm flex flex-col md:col-span-3",children:[r.jsx("span",{className:"mb-1",children:"Name"}),r.jsx("input",{className:["w-full border rounded-xl px-3 py-2",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:A.name,onChange:O=>fe({...A,name:O.target.value}),placeholder:"e.g., Support Inbox"})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Color"}),r.jsx("input",{type:"color",className:["w-full border rounded-xl h-10",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:A.color,onChange:O=>fe({...A,color:O.target.value}),"aria-label":"Posture color"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx("button",{type:"submit",disabled:!A.name.trim(),className:["h-10 rounded-xl border font-medium px-4 w-full md:w-auto",A.name.trim()?g?"bg-neutral-800 border-neutral-700 hover:bg-neutral-700":"bg-blue-600 border-blue-600 text-white hover:bg-blue-500":g?"bg-neutral-900 border-neutral-800 opacity-60":"bg-neutral-200 border-neutral-300 text-neutral-500 cursor-not-allowed"].join(" "),children:"Add Posture"})})]})]})}function e0({dark:a,agents:y,onAddAgent:c,onUpdateAgent:D,onDeleteAgent:M,weekStart:g,tz:V,shifts:B,pto:A,overrides:fe,tasks:ie,calendarSegs:Q,onUpdateShift:J,onDeleteShift:ee,onAddShift:G,setTasks:h,setCalendarSegs:v,setPto:S,setOverrides:p}){const[T,O]=w.useState(!1),[L,Ee]=w.useState(""),[je,$e]=w.useState(""),We=w.useRef(null),[Ne,ye]=w.useState(null),Re=w.useCallback((u,m="success")=>{ye({text:u,kind:m}),We.current!=null&&(window.clearTimeout(We.current),We.current=null),We.current=window.setTimeout(()=>ye(null),3e3)},[]);w.useEffect(()=>{sa()&&(O(!0),$e(""))},[]);const ae=w.useMemo(()=>ud(),[]),Fe=w.useMemo(()=>cd(),[]),Ve=w.useMemo(()=>$f(),[]),[X,R]=w.useState(y);w.useEffect(()=>{R(y)},[y]);const k=["Agents","Shifts","Postures","PTO & Overrides","Proposals"],[_,U]=w.useState("Agents"),[d,C]=w.useState(!1),[Ie,Me]=w.useState("start"),[Xe,ke]=w.useState("asc"),Z=w.useMemo(()=>`schedule2.v2.shifts.includeHidden.${g}.${V.id}`,[g,V.id]),[ue,W]=w.useState(()=>{try{const u=localStorage.getItem(Z);return u?u==="1":!1}catch{return!1}});w.useEffect(()=>{try{localStorage.setItem(Z,ue?"1":"0")}catch{}},[ue,Z]);const q=w.useMemo(()=>`schedule2.v2.shifts.daysVisible.${g}.${V.id}`,[g,V.id]),[Te,Ye]=w.useState(()=>{try{const u=localStorage.getItem(q),m=u?parseInt(u,10):7;return Number.isFinite(m)&&m>=1&&m<=7?m:7}catch{return 7}});w.useEffect(()=>{try{localStorage.setItem(q,String(Te))}catch{}},[Te,q]);const[ve,gt]=w.useState(0);w.useEffect(()=>{gt(0)},[Te,g]),w.useEffect(()=>{if(_!=="Proposals")return;let u=!1;return(async()=>{pt(!0);const m=await od();if(u)return;pt(!1),m.ok?te(m.proposals||[]):te([]);const F=await Oi();u||Tt(F)})(),()=>{u=!0}},[_]);const[et,ut]=w.useState(B),[j,I]=w.useState(A),[Le,re]=w.useState(fe),[De,Y]=w.useState(!1),[K,se]=w.useState(!1),[Ce,xe]=w.useState("https://team-schedule-api.bsteward.workers.dev/v1/schedule"),[He,ct]=w.useState(""),[zt,ce]=w.useState(""),[Pe,te]=w.useState([]),[lt,pt]=w.useState(!1),[St,wt]=w.useState(""),[Wt,Ht]=w.useState(null),[ft,Tt]=w.useState(null),[Qt,Ut]=w.useState(""),[at,Vt]=w.useState(!1),_t=w.useRef(!1),At=w.useMemo(()=>`schedule2.v2.unpublished.${g}.${V.id}`,[g,V.id]),tt=w.useMemo(()=>`schedule2.v2.draft.${g}.${V.id}`,[g,V.id]);w.useEffect(()=>{De||ut(B)},[B,De]),w.useEffect(()=>{De||I(A)},[A,De]),w.useEffect(()=>{try{const u=localStorage.getItem(At);if(u){const F=JSON.parse(u);Array.isArray(F?.shifts)&&ut(F.shifts),Array.isArray(F?.pto)&&I(F.pto),Array.isArray(F?.overrides)&&re(F.overrides),(Array.isArray(F?.shifts)||Array.isArray(F?.pto)||Array.isArray(F?.overrides))&&(Y(!0),_t.current=!1);return}const m=localStorage.getItem(tt);if(m){const F=JSON.parse(m),H={schema:1,weekStart:g,tzId:V.id,updatedAt:new Date().toISOString()};if(Array.isArray(F?.shifts)&&(ut(F.shifts),H.shifts=F.shifts),Array.isArray(F?.pto)&&(I(F.pto),H.pto=F.pto),Array.isArray(F?.overrides)&&(re(F.overrides),H.overrides=F.overrides),H.shifts||H.pto||H.overrides){Y(!0),_t.current=!1;try{localStorage.setItem(At,JSON.stringify(H))}catch{}}try{localStorage.removeItem(tt)}catch{}}}catch{}},[At,tt]),w.useEffect(()=>{if(!De)return;const u=setTimeout(()=>{try{localStorage.setItem(At,JSON.stringify({schema:1,weekStart:g,tzId:V.id,shifts:et,pto:j,overrides:Le,updatedAt:new Date().toISOString()}))}catch{}},300);return()=>clearTimeout(u)},[De,et,j,Le,At,g,V.id]);const[Rt,we]=w.useState(new Set),[rt,vt]=w.useState(new Set),[nt,jt]=w.useState([]),[Mt,Zt]=w.useState([]),Jt=nt.length>0,gn=Mt.length>0;function fn(u,m){return u.id===m.id&&u.day===m.day&&u.start===m.start&&u.end===m.end&&u.endDay===m.endDay}function br(u,m){if(u.length!==m.length)return!1;const F=new Map(u.map(H=>[H.id,H]));for(const H of m){const pe=F.get(H.id);if(!pe||!fn(pe,H))return!1}return!0}const cr=w.useCallback(u=>{u.length!==0&&(!De&&br(et,B)&&(_t.current=!0),jt(m=>{const F=m.concat([u]);return F.length>10&&F.shift(),F}),Zt([]),Y(!0))},[De,et,B]),an=w.useCallback(()=>{if(nt.length===0)return;const u=nt[nt.length-1],m=u.map(({id:H})=>{const pe=et.find(Ge=>Ge.id===H);return pe?{id:H,patch:{day:pe.day,start:pe.start,end:pe.end,endDay:pe.endDay}}:{id:H,patch:{}}});ut(H=>H.map(pe=>{const Ge=u.find(mt=>mt.id===pe.id);return Ge?{...pe,...Ge.patch}:pe})),we(H=>{const pe=new Set(H);return u.forEach(({id:Ge})=>pe.delete(Ge)),pe}),jt(H=>H.slice(0,-1)),Zt(H=>H.concat([m])),Y(!0),nt.length-1===0&&_t.current&&(ut(B),Y(!1),_t.current=!1)},[nt,et,B]),dr=w.useCallback(()=>{if(Mt.length===0)return;const u=Mt[Mt.length-1],m=u.map(({id:F})=>{const H=et.find(pe=>pe.id===F);return H?{id:F,patch:{day:H.day,start:H.start,end:H.end,endDay:H.endDay}}:{id:F,patch:{}}});ut(F=>F.map(H=>{const pe=u.find(Ge=>Ge.id===H.id);return pe?{...H,...pe.patch}:H})),we(F=>{const H=new Set(F);return u.forEach(({id:pe})=>H.add(pe)),H}),Zt(F=>F.slice(0,-1)),jt(F=>F.concat([m])),Y(!0)},[Mt,et]),Ir=w.useMemo(()=>{try{const u=Array.isArray(et)?et:[],m=[];for(const b of u){const Ke=Oe(b.start),ht=b.end==="24:00"?1440:Oe(b.end);if(typeof b.endDay=="string"?b.endDay!==b.day:ht<Ke&&b.end!=="24:00"){const Et=b.endDay||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(b.day)+1)%7];m.push({...b,end:"24:00",endDay:Et}),m.push({...b,day:Et,start:"00:00",end:b.end,endDay:Et})}else m.push(b)}const F=Array.isArray(Le)?Le:[];if(F.length===0)return m;const H=Dn(g),pe=jr(H,6),Ge=b=>b>=dn(H)&&b<=dn(pe),mt=b=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][b.getDay()],$t=(b,Ke)=>jr(b,Ke),yt=b=>dn(b),kt=new Set,dt=(b,Ke,ht,Ct)=>{const Et=Pt=>Math.max(0,Math.min(1440,Pt)),rn=Et(ht),tn=Et(Ct);if(tn>rn)for(let Pt=m.length-1;Pt>=0;Pt--){const Bt=m[Pt];if(Bt.person!==b||Bt.day!==Ke)continue;const Nn=Oe(Bt.start),_n=Bt.end==="24:00"?1440:Oe(Bt.end),Tn=Math.max(Nn,rn),An=Math.min(_n,tn);if(!(An>Tn))continue;const $n=Tn-Nn,Ml=_n-An;m.splice(Pt,1);const Hs=(Us,Lr,ca)=>{const kl=Lr>=1440?"24:00":`${String(Math.floor(Lr/60)).padStart(2,"0")}:${String(Lr%60).padStart(2,"0")}`,lo=`${String(Math.floor(Us/60)).padStart(2,"0")}:${String(Us%60).padStart(2,"0")}`,Jr={...Bt,id:`${Bt.id}${ca}`,start:lo,end:kl};return kl!=="24:00"&&Jr.endDay&&Jr.endDay!==Jr.day&&delete Jr.endDay,Jr};Ml>0&&m.splice(Pt,0,Hs(An,_n,"-b")),$n>0&&m.splice(Pt,0,Hs(Nn,Tn,"-a"))}},ln=(b,Ke,ht)=>{let Ct=new Date(b);const Et=new Date(Ke);for(;Ct<=Et;){const rn=yt(Ct);if(Ge(rn)){const tn=mt(Ct);if(ht.start&&ht.end){for(let Pt=m.length-1;Pt>=0;Pt--){const Bt=m[Pt];Bt.person===ht.person&&Bt.day===tn&&m.splice(Pt,1)}if(!kt.has(rn)){const Pt=ht.start,Bt=ht.end,Nn=Oe(Pt),_n=Oe(Bt),Tn=_n<=Nn&&Bt!=="24:00",An=Tn?mt($t(Ct,1)):void 0;if(m.push({id:`ov:${ht.id}:${rn}`,person:ht.person,agentId:dl(X,ht.person),day:tn,start:Pt,end:Bt,...An?{endDay:An}:{}}),Tn){const $n=mt($t(Ct,1)),Ml=Math.max(_n%1440,480);dt(ht.person,$n,0,Ml);const Hs=dn($t(Ct,1));kt.add(Hs)}}}else{let Pt=null;for(const Bt of m)if(Bt.person===ht.person&&Bt.day===tn){const Nn=Oe(Bt.start);(Pt==null||Nn<Pt)&&(Pt=Nn)}Pt!=null&&dt(ht.person,tn,Pt,Pt+480)}}Ct=$t(Ct,1)}};for(const b of F){let Ke=Dn(b.startDate),ht=Dn(b.endDate);if(b.recurrence?.rule==="weekly"){const Ct=b.recurrence.until?Dn(b.recurrence.until):null;let Et=0;for(;ht<H&&Et<200&&(Ke=$t(Ke,7),ht=$t(ht,7),Et++,!(Ct&&Ke>Ct)););for(;Ke<=pe&&(!Ct||Ke<=Ct);)ln(Ke,ht,b),Ke=$t(Ke,7),ht=$t(ht,7)}else ln(Ke,ht,b)}return m}catch{return et}},[et,Le,g,X]);w.useEffect(()=>{if(_!=="Shifts")return;nt.length===0&&Mt.length===0&&Rt.size===0&&ut(B)},[_,B,nt,Mt,Rt]),w.useEffect(()=>{const u=m=>{if(_!=="Shifts")return;const F=(m.ctrlKey||m.metaKey)&&!m.shiftKey&&(m.key==="z"||m.key==="Z"),H=(m.ctrlKey||m.metaKey)&&m.shiftKey&&(m.key==="z"||m.key==="Z")||(m.ctrlKey||m.metaKey)&&(m.key==="y"||m.key==="Y");F?(m.preventDefault(),an()):H&&(m.preventDefault(),dr()),m.key==="Escape"&&vt(new Set)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[_,an,dr]);const Vn=w.useMemo(()=>{const u=new Set;for(const m of X){const F=`${m.firstName} ${m.lastName}`.trim();F&&u.add(F)}for(const m of B)m.person&&u.add(m.person);for(const m of Q)m.person&&u.add(m.person);for(const m of A)m.person&&u.add(m.person);return Array.from(u).sort()},[X,B,Q,A]),qn=w.useMemo(()=>ie.filter(u=>!u.archived),[ie]),[E,me]=w.useState(""),[Se,be]=w.useState("Mon"),[he,_e]=w.useState("09:00"),[Ae,st]=w.useState("10:00"),[bt,Ft]=w.useState(""),[In,Ot]=w.useState("Mon");w.useEffect(()=>{!bt&&qn[0]&&Ft(qn[0].id)},[qn,bt]);const[jn,mn]=w.useState(null),[fr,bn]=w.useState(""),[Br,Zl]=w.useState("Mon"),[hl,ms]=w.useState("09:00"),[Wr,Hr]=w.useState("10:00"),[Ur,ql]=w.useState(""),[pl,As]=w.useState("Mon"),[hs,Os]=w.useState(""),[Nr,eo]=w.useState(""),[Vr,It]=w.useState(""),[xl,gl]=w.useState(""),[Kn,to]=w.useState(""),[zs,yl]=w.useState(null),[Kr,Qr]=w.useState(""),[Qn,er]=w.useState(""),[Xn,$r]=w.useState(""),[Xr,tr]=w.useState(""),la=u=>{yl(u),Qr(u.person),er(u.startDate),$r(u.endDate),tr(u.notes||"")},vl=()=>{yl(null),Qr(""),er(""),$r(""),tr("")},[Sr,oa]=w.useState(""),[ps,Rs]=w.useState(""),[xs,aa]=w.useState(""),[nr,gs]=w.useState(""),[Yn,ys]=w.useState(""),[no,ia]=w.useState(""),[Fs,Bs]=w.useState(""),[vs,ro]=w.useState(!1),[mr,wl]=w.useState(""),[Mr,jl]=w.useState(null);w.useEffect(()=>{Mr!=null&&(Mr<0||Mr>=X.length)&&jl(X.length>0?0:null)},[Mr,X]);function ws(){ut(B),Y(!1),jt([]),Zt([]),we(new Set),_t.current=!1;try{localStorage.removeItem(At)}catch{}}async function Ws(){const u=X.map(F=>({id:F.id||Math.random().toString(36).slice(2),firstName:F.firstName||"",lastName:F.lastName||"",tzId:F.tzId,hidden:!!F.hidden,isSupervisor:!!F.isSupervisor,supervisorId:F.supervisorId??null,notes:F.notes})),m=await md({shifts:et,pto:j,overrides:Le,calendarSegs:Q,agents:u,updatedAt:new Date().toISOString()});if(m.ok){Y(!1),Re("Published to live.","success"),_t.current=!1,we(new Set);try{localStorage.removeItem(At)}catch{}S(()=>j),p(()=>Le)}else m.status===404||m.error==="missing_site_session"||(m.bodyText||"").includes("missing_site_session")?(await Ri(),Re("Publish failed: missing or expired site session. Please sign in to view and then try again.","error")):m.status===401?Re("Publish failed: not signed in as admin (401).","error"):m.status===403?Re("Publish failed: CSRF mismatch (403). Try reloading and signing in again.","error"):m.status===409?Re("Publish failed: conflict (409). Refresh to load latest, then retry.","error"):Re(`Failed to publish. ${m.status?`HTTP ${m.status}`:""} ${m.error?`— ${m.error}`:""}`,"error")}async function so(){const u=prompt("Proposal title",new Date().toLocaleString())||new Date().toLocaleString(),m=X.map(H=>({id:H.id||Math.random().toString(36).slice(2),firstName:H.firstName||"",lastName:H.lastName||"",tzId:H.tzId,hidden:!!H.hidden,isSupervisor:!!H.isSupervisor,supervisorId:H.supervisorId??null,notes:H.notes}));(await Af({title:u,weekStart:g,tzId:V.id,shifts:et,pto:j,overrides:Le,calendarSegs:Q,agents:m})).ok?Re("Proposal created.","success"):Re("Failed to create proposal.","error")}function yn(u=[],m=[],F){const H=new Map(u.map(yt=>[yt.id,yt])),pe=new Map(m.map(yt=>[yt.id,yt])),Ge=[],mt=[],$t=[];for(const[yt,kt]of pe){const dt=H.get(yt);dt?F(dt,kt)||$t.push({before:dt,after:kt}):Ge.push(kt)}for(const[yt,kt]of H)pe.has(yt)||mt.push(kt);return{added:Ge,removed:mt,changed:$t}}const Yr=(u,m)=>u&&m&&u.id===m.id&&u.person===m.person&&u.day===m.day&&u.start===m.start&&u.end===m.end&&(u.endDay||"")===(m.endDay||""),bl=(u,m)=>u&&m&&u.id===m.id&&u.person===m.person&&u.startDate===m.startDate&&u.endDate===m.endDate&&(u.notes||"")===(m.notes||""),js=(u,m)=>u&&m&&u.id===m.id&&u.person===m.person&&u.startDate===m.startDate&&u.endDate===m.endDate&&(u.start||"")===(m.start||"")&&(u.end||"")===(m.end||"")&&(u.endDay||"")===(m.endDay||"")&&(u.kind||"")===(m.kind||"")&&(u.notes||"")===(m.notes||"");async function ua(u){wt(u),Ht(null),Ut("");const m=await Of(u);if(!m.ok||!m.proposal){Ut("Failed to load proposal");return}Ht(m.proposal)}const Nl=w.useCallback(u=>{c?.(u),R(m=>m.concat([{firstName:u.firstName,lastName:u.lastName,tzId:u.tzId,hidden:!1}]))},[c]),Sl=w.useCallback((u,m)=>{D?.(u,m),R(F=>F.map((H,pe)=>pe===u?m:H))},[D]),bs=w.useCallback(u=>{M?.(u),R(m=>m.filter((F,H)=>H!==u))},[M]);return T?r.jsxs("section",{className:["rounded-2xl p-3 space-y-3",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:k.map(u=>{const m=_===u;return r.jsx("button",{onClick:()=>U(u),className:["px-3 py-1.5 rounded-lg text-sm border",m?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"bg-neutral-900 border-neutral-800 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-200 text-neutral-700 hover:bg-neutral-100"].join(" "),children:u},u)})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",disabled:!De,onClick:ws,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",De?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]}),r.jsx("span",{children:"Discard"})]})}),r.jsx("button",{onClick:Ws,className:"px-3 py-1.5 rounded-xl border font-semibold bg-blue-600 border-blue-600 text-white hover:bg-blue-500 shrink-0",title:"Publish working changes to live","aria-label":"Publish",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"}),r.jsx("path",{d:"M16 5h2a2 2 0 0 1 2 2v2"})]}),r.jsx("span",{children:"Publish"})]})})]})]}),_==="Shifts"&&r.jsxs("div",{className:["flex flex-wrap items-center justify-between gap-2 sm:gap-3 text-xs rounded-xl px-2 py-2 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"flex min-w-0 items-center gap-2 sm:gap-3",children:r.jsx("span",{className:["inline-flex items-center px-2 py-1 rounded-xl border font-medium",De?a?"bg-neutral-900 border-amber-600 text-amber-400":"bg-white border-amber-500 text-amber-700":a?"bg-neutral-900 border-neutral-800 text-neutral-400":"bg-white border-neutral-200 text-neutral-500"].join(" "),children:De?"Unpublished changes":"Live"})}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Sort ribbons",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h14"}),r.jsx("path",{d:"M7 12h10"}),r.jsx("path",{d:"M11 18h6"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[9.5rem] sm:w-[11rem] appearance-none",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Ie,onChange:u=>Me(u.target.value),"aria-label":"Sort ribbons",children:[r.jsx("option",{value:"start",children:"Earliest start"}),r.jsx("option",{value:"end",children:"Latest end"}),r.jsx("option",{value:"count",children:"Shift count"}),r.jsx("option",{value:"total",children:"Total minutes"}),r.jsx("option",{value:"firstDay",children:"First day"}),r.jsx("option",{value:"tz",children:"Timezone"}),r.jsx("option",{value:"name",children:"Name (A–Z)"})]}),r.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(a?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),r.jsx("button",{type:"button",onClick:()=>ke(u=>u==="asc"?"desc":"asc"),"aria-pressed":Xe==="desc",title:Xe==="asc"?"Ascending":"Descending",className:["ml-1 px-2.5 py-1.5 rounded-xl border font-medium",a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:Xe==="asc"?r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 19V5"}),r.jsx("path",{d:"m5 12 7-7 7 7"})]}):r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"m19 12-7 7-7-7"})]})})]}),r.jsx("button",{type:"button",onClick:()=>W(u=>!u),"aria-pressed":ue,title:ue?"Hide off-duty agents":"Show off-duty agents",className:["px-2.5 py-1.5 rounded-xl border font-medium",ue?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ue?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),r.jsx("path",{d:"M1 1l22 22"}),r.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]})})}),r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Visible days",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),r.jsx("path",{d:"M16 2v4"}),r.jsx("path",{d:"M8 2v4"}),r.jsx("path",{d:"M3 10h18"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[6rem] appearance-none",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Te,onChange:u=>Ye(Math.max(1,Math.min(7,parseInt(u.target.value,10)||7))),"aria-label":"Visible days",children:Array.from({length:7},(u,m)=>m+1).map(u=>r.jsxs("option",{value:u,children:[u," day",u===1?"":"s"]},u))}),r.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(a?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),Te<7&&r.jsxs("div",{className:"inline-flex items-center gap-1 ml-1",role:"group","aria-label":"Scroll days",children:[r.jsx("button",{type:"button",onClick:()=>gt(u=>Math.max(0,u-1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Earlier days","aria-label":"Earlier days",disabled:ve<=0,children:r.jsx("svg",{"aria-hidden":!0,className:ve<=0?a?"text-neutral-600":"text-neutral-400":a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"15 18 9 12 15 6"})})}),r.jsx("button",{type:"button",onClick:()=>gt(u=>Math.min(Math.max(1,Math.ceil(7/Te))-1,u+1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Later days","aria-label":"Later days",disabled:ve>=Math.max(1,Math.ceil(7/Te))-1,children:r.jsx("svg",{"aria-hidden":!0,className:ve>=Math.max(1,Math.ceil(7/Te))-1?a?"text-neutral-600":"text-neutral-400":a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]}),r.jsx("button",{type:"button",onClick:()=>C(u=>!u),"aria-pressed":d,title:"Toggle time labels",className:["px-2.5 py-1.5 rounded-xl border font-medium",d?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Undo / Redo",children:[r.jsx("button",{type:"button",disabled:!Jt,onClick:an,className:["px-2.5 py-1.5 rounded-xl border font-medium",Jt?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Undo (Ctrl/Cmd+Z)",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"9 14 4 9 9 4"}),r.jsx("path",{d:"M20 20a8 8 0 0 0-7-12H4"})]})}),r.jsx("button",{type:"button",disabled:!gn,onClick:dr,className:["px-2.5 py-1.5 rounded-xl border font-medium",gn?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"15 14 20 9 15 4"}),r.jsx("path",{d:"M4 20a8 8 0 0 1 7-12h9"})]})})]}),r.jsx("button",{type:"button",onClick:so,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Create a proposal from current changes","aria-label":"Create proposal",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]}),r.jsx("span",{children:"Proposal"})]})}),r.jsx("button",{type:"button",onClick:()=>{se(u=>!u),ce("")},className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Import shifts/PTO/postures from a legacy JSON URL or paste","aria-label":"Import",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"}),r.jsx("polyline",{points:"8 17 12 21 16 17"})]})}),r.jsx("button",{disabled:!De,onClick:ws,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",De?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]})})]})]}),_==="Proposals"&&r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:"Proposals"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>{pt(!0),od().then(u=>{pt(!1),te(u.ok?u.proposals||[]:[])})},className:["px-2.5 py-1.5 rounded-xl border text-xs",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),children:"Refresh"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-medium mb-2",children:"List"}),r.jsxs("div",{className:"flex flex-col gap-1 max-h-56 overflow-auto",children:[lt&&r.jsx("div",{className:"text-xs opacity-70",children:"Loading…"}),!lt&&Pe.length===0&&r.jsx("div",{className:"text-xs opacity-70",children:"No proposals"}),Pe.map(u=>r.jsxs("button",{onClick:()=>ua(u.id),className:["text-left px-2 py-1 rounded-lg border text-xs",St===u.id?a?"bg-neutral-800 border-neutral-700":"bg-neutral-100 border-neutral-300":a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:[r.jsx("div",{className:"font-medium truncate",children:u.title||u.id}),r.jsxs("div",{className:"opacity-70 truncate",children:[u.status," • ",new Date((u.updatedAt||0)*1e3).toLocaleString()]})]},u.id))]})]}),r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-xs font-medium",children:"Diff"}),r.jsx("button",{type:"button",onClick:()=>Vt(u=>!u),className:["px-2.5 py-1 rounded-lg border text-[11px]",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-pressed":at,children:at?"Hide visual":"Show visual"})]}),Qt&&r.jsx("div",{className:"text-xs text-red-600 dark:text-red-300",children:Qt}),Wt&&ft&&(()=>{const u=Wt.patch||{},m={shifts:ft?.shifts||[],pto:ft?.pto||[],overrides:ft?.overrides||[]},F=yn(m.shifts,u.shifts||[],Yr),H=yn(m.pto,u.pto||[],bl),pe=yn(m.overrides,u.overrides||[],js),Ge=({kind:b})=>r.jsx("span",{className:["text-[10px] px-1.5 py-0.5 rounded border",b==="added"?a?"bg-green-900/30 border-green-800 text-green-300":"bg-green-50 border-green-200 text-green-700":b==="removed"?a?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700":a?"bg-amber-900/30 border-amber-800 text-amber-300":"bg-amber-50 border-amber-200 text-amber-700"].join(" "),children:b}),mt=({text:b,kind:Ke})=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Ge,{kind:Ke}),r.jsx("div",{className:"truncate",title:b,children:b})]}),$t=b=>`${b.person||""} — ${b.day||""} ${b.start||""}–${b.end||""}${b.endDay&&b.endDay!==b.day?` (${b.endDay})`:""}`,yt=b=>`${b.person||""} — ${b.startDate||""} → ${b.endDate||""}${b.notes?` (${b.notes})`:""}`,kt=b=>`${b.person||""} — ${b.startDate||""} → ${b.endDate||""}${b.start?` ${b.start}`:""}${b.end?`–${b.end}`:""}${b.endDay?` (${b.endDay})`:""}${b.kind?` [${b.kind}]`:""}${b.notes?` (${b.notes})`:""}`,dt=new Set([...F.removed.map(b=>b.id),...F.changed.map(b=>b.before?.id).filter(Boolean)]),ln=new Set([...F.added.map(b=>b.id),...F.changed.map(b=>b.after?.id).filter(Boolean)]);return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"Shifts"}),r.jsxs("div",{className:"space-y-1",children:[F.added.map(b=>r.jsx(mt,{kind:"added",text:$t(b)},"a-"+b.id)),F.removed.map(b=>r.jsx(mt,{kind:"removed",text:$t(b)},"r-"+b.id)),F.changed.map(({before:b,after:Ke})=>r.jsx(mt,{kind:"changed",text:`${$t(b)} → ${$t(Ke)}`},"c-"+Ke.id)),F.added.length+F.removed.length+F.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"PTO"}),r.jsxs("div",{className:"space-y-1",children:[H.added.map(b=>r.jsx(mt,{kind:"added",text:yt(b)},"pa-"+b.id)),H.removed.map(b=>r.jsx(mt,{kind:"removed",text:yt(b)},"pr-"+b.id)),H.changed.map(({before:b,after:Ke})=>r.jsx(mt,{kind:"changed",text:`${yt(b)} → ${yt(Ke)}`},"pc-"+Ke.id)),H.added.length+H.removed.length+H.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"Overrides"}),r.jsxs("div",{className:"space-y-1",children:[pe.added.map(b=>r.jsx(mt,{kind:"added",text:kt(b)},"oa-"+b.id)),pe.removed.map(b=>r.jsx(mt,{kind:"removed",text:kt(b)},"or-"+b.id)),pe.changed.map(({before:b,after:Ke})=>r.jsx(mt,{kind:"changed",text:`${kt(b)} → ${kt(Ke)}`},"oc-"+Ke.id)),pe.added.length+pe.removed.length+pe.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),at&&r.jsx("div",{className:"pt-2 border-t border-neutral-800/30",children:r.jsx(Gf,{dark:a,tz:V,weekStart:g,agents:X,live:{shifts:m.shifts,pto:m.pto},proposal:{shifts:u.shifts||[],pto:u.pto||[]},highlightLiveIds:dt,highlightProposalIds:ln,tasks:ie,calendarSegs:Q})})]})})(),(!Wt||!ft)&&r.jsx("div",{className:"text-xs opacity-60",children:"Select a proposal to see its diff"})]})]})]}),K&&r.jsxs("div",{className:["mt-2 rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-sm font-semibold mb-2",children:"Import legacy data"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"From URL"}),r.jsx("input",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ce,onChange:u=>xe(u.target.value),placeholder:"https://…/schedule.json"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:async()=>{ce("");try{const u=await fetch(Ce,{credentials:"omit"});if(!u.ok){ce(`Fetch failed: ${u.status}`);return}const m=await u.json();if(!Array.isArray(m.shifts)){ce("Invalid JSON: missing shifts[]");return}const F=m.shifts.map((H,pe)=>({id:H.id||`imp-${pe}-${Math.random().toString(36).slice(2)}`,person:H.person,day:H.day,start:H.start,end:H.end,endDay:H.endDay}));ut(F),Array.isArray(m.pto)&&I(m.pto),Array.isArray(m.overrides)&&re(m.overrides),Array.isArray(m.calendarSegs)&&v(H=>m.calendarSegs),Y(!0),ce(`Imported ${F.length} shifts${Array.isArray(m.pto)?`, ${m.pto.length} PTO`:""}${Array.isArray(m.overrides)?`, ${m.overrides.length} overrides`:""}${Array.isArray(m.calendarSegs)?`, ${m.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(u){ce(u?.message||"Import failed")}},children:"Fetch"}),r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>{ct(u=>u.trim()?u:`{
  "shifts": [],
  "pto": [],
  "calendarSegs": []
}`)},children:"Paste JSON…"})]}),r.jsx("div",{className:"md:col-span-3",children:He!==""&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("textarea",{className:["w-full h-40 border rounded-xl p-2 font-mono text-xs",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:He,onChange:u=>ct(u.target.value)}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{ce("");try{const u=JSON.parse(He);if(!Array.isArray(u.shifts)){ce("Invalid JSON: missing shifts[]");return}const m=u.shifts.map((F,H)=>({id:F.id||`imp-${H}-${Math.random().toString(36).slice(2)}`,person:F.person,day:F.day,start:F.start,end:F.end,endDay:F.endDay}));ut(m),Array.isArray(u.calendarSegs)&&v(u.calendarSegs),Array.isArray(u.pto)&&I(u.pto),Array.isArray(u.overrides)&&re(u.overrides),Y(!0),ce(`Imported ${m.length} shifts${Array.isArray(u.pto)?`, ${u.pto.length} PTO`:""}${Array.isArray(u.overrides)?`, ${u.overrides.length} overrides`:""}${Array.isArray(u.calendarSegs)?`, ${u.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(u){ce(u?.message||"Invalid JSON")}},children:"Load"}),r.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>ct(""),children:"Clear"})]})]})}),zt&&r.jsx("div",{className:["md:col-span-3 text-sm",zt.startsWith("Imported")?a?"text-green-300":"text-green-700":a?"text-red-300":"text-red-700"].join(" "),children:zt}),r.jsx("div",{className:"md:col-span-3 text-xs opacity-70",children:"Note: After import, click Publish to write the data to live. Agents list will update automatically from shift names."})]})]}),_==="Agents"?r.jsx(Jf,{dark:a,agents:X,onAddAgent:Nl,onUpdateAgent:Sl,onDeleteAgent:bs,weekStart:g,tz:V,shifts:B,pto:A,tasks:ie,calendarSegs:Q,onUpdateShift:(u,m)=>{J?.(u,m),nt.length===0&&Mt.length===0&&ut(H=>H.map(pe=>pe.id===u?{...pe,...m}:pe))},onDeleteShift:u=>{ee?.(u),nt.length===0&&Mt.length===0&&ut(F=>F.filter(H=>H.id!==u))},onAddShift:u=>{G?.(u),nt.length===0&&Mt.length===0&&ut(F=>F.some(H=>H.id===u.id)?F:F.concat([u]))},selectedIdx:Mr,onSelectIdx:u=>jl(u)}):_==="Shifts"?r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx(Bi,{dark:a,tz:V,weekStart:g,agents:ue?X:X.filter(u=>!u.hidden),shifts:Ir,pto:A,tasks:void 0,calendarSegs:void 0,visibleDays:Te,scrollChunk:ve,showAllTimeLabels:d,sortMode:Ie,sortDir:Xe,highlightIds:Rt,selectedIds:rt,onToggleSelect:u=>{vt(m=>{const F=new Set(m);return F.has(u)?F.delete(u):F.add(u),F})},onDragAll:(u,m)=>{const F=et.filter(b=>b.person===u),H=F.map(b=>({id:b.id,patch:{day:b.day,start:b.start,end:b.end,endDay:b.endDay}}));cr(H);const pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ge=b=>pe.indexOf(b),mt=b=>pe[(b%7+7)%7],$t=b=>{const[Ke,ht]=b.split(":").map(Number);return(Ke||0)*60+(ht||0)},yt=(b,Ke)=>{const[ht,Ct]=b.split(":").map(Number),Et=((ht||0)*60+(Ct||0)+Ke+10080)%1440,rn=Math.floor(Et/60).toString().padStart(2,"0"),tn=(Et%60).toString().padStart(2,"0");return`${rn}:${tn}`},kt=F.map(b=>{const Ke=Ge(b.day),ht=Ge(b.endDay||b.day),Ct=Ke*1440+$t(b.start);let Et=ht*1440+$t(b.end);Et<=Ct&&(Et+=1440);let rn=Ct+m,tn=Et+m;const Pt=Math.floor((rn/1440%7+7)%7),Bt=Math.floor((tn/1440%7+7)%7),Nn=(rn%1440+1440)%1440,_n=(tn%1440+1440)%1440;return{...b,day:mt(Pt),start:yt("00:00",Nn),end:yt("00:00",_n),endDay:mt(Bt)}}),dt=new Set(Rt),ln=new Map(kt.map(b=>[b.id,b]));ut(b=>b.map(Ke=>ln.get(Ke.id)||Ke)),kt.forEach(b=>dt.add(b.id)),we(dt),Y(!0)},onDragShift:(u,m,F)=>{const H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pe=b=>H.indexOf(b),Ge=b=>H[(b%7+7)%7],mt=b=>{const[Ke,ht]=b.split(":").map(Number);return(Ke||0)*60+(ht||0)},$t=(b,Ke)=>{const[ht,Ct]=b.split(":").map(Number),Et=((ht||0)*60+(Ct||0)+Ke+10080)%1440,rn=Math.floor(Et/60).toString().padStart(2,"0"),tn=(Et%60).toString().padStart(2,"0");return`${rn}:${tn}`},yt=new Set(rt);yt.add(m);const kt=et.filter(b=>yt.has(b.id));if(kt.length===0)return;if(kt.length===1){const b=kt[0];cr([{id:b.id,patch:{day:b.day,start:b.start,end:b.end,endDay:b.endDay}}]);const Ke=pe(b.day),ht=pe(b.endDay||b.day),Ct=Ke*1440+mt(b.start);let Et=ht*1440+mt(b.end);Et<=Ct&&(Et+=1440);const rn=Ct+F,tn=Et+F,Pt=Math.floor((rn/1440%7+7)%7),Bt=Math.floor((tn/1440%7+7)%7),Nn=(rn%1440+1440)%1440,_n=(tn%1440+1440)%1440,Tn={day:Ge(Pt),start:$t("00:00",Nn),end:$t("00:00",_n),endDay:Ge(Bt)};ut(An=>An.map($n=>$n.id===b.id?{...$n,...Tn}:$n)),we(An=>{const $n=new Set(An);return $n.add(b.id),$n}),Y(!0);return}const dt=kt.map(b=>({id:b.id,patch:{day:b.day,start:b.start,end:b.end,endDay:b.endDay}}));cr(dt);const ln=new Set(Rt);for(const b of kt){const Ke=pe(b.day),ht=pe(b.endDay||b.day),Ct=Ke*1440+mt(b.start);let Et=ht*1440+mt(b.end);Et<=Ct&&(Et+=1440);const rn=Ct+F,tn=Et+F,Pt=Math.floor((rn/1440%7+7)%7),Bt=Math.floor((tn/1440%7+7)%7),Nn=(rn%1440+1440)%1440,_n=(tn%1440+1440)%1440,Tn={...b,day:Ge(Pt),start:$t("00:00",Nn),end:$t("00:00",_n),endDay:Ge(Bt)};ut(An=>An.map($n=>$n.id===Tn.id?Tn:$n)),ln.add(Tn.id)}we(ln),Y(!0)}}),(()=>{const u=(ue?X:X.filter(m=>!m.hidden)).map(m=>[m.firstName,m.lastName].filter(Boolean).join(" ").trim()).filter(Boolean);return r.jsx(Zf,{dark:a,tz:V,weekStart:g,shifts:Ir,visibleAgentNames:u,visibleDays:Te,scrollChunk:ve})})()]}):_==="Postures"?r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[r.jsxs("div",{className:"md:col-span-1 space-y-3",children:[r.jsx(qf,{tasks:ie,onCreate:u=>h(m=>m.concat([{...u,id:ds()}])),onUpdate:u=>h(m=>m.map(F=>F.id===u.id?u:F)),onArchive:u=>h(m=>m.map(F=>F.id===u?{...F,archived:!0}:F)),onDelete:u=>{h(m=>m.filter(F=>F.id!==u)),v(m=>m.filter(F=>F.taskId!==u))},dark:a,selectedId:bt,onSelect:u=>Ft(u)}),r.jsxs("div",{className:["rounded-xl p-3 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Assign posture to agent"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:E,onChange:u=>me(u.target.value),children:[r.jsx("option",{value:"",children:"—"}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Day"}),r.jsx("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Se,onChange:u=>be(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:he,onChange:u=>_e(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ae,onChange:u=>st(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"End Day"}),r.jsx("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:In,onChange:u=>Ot(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]})]}),r.jsx("button",{onClick:()=>{if(!E)return alert("Choose an agent");if(!bt)return alert("Choose a posture");const u=Oe(he),m=Oe(Ae);if(In===Se&&!(m>u))return alert("End must be after start (or choose a later End Day)");na(B,Se,V.offset).filter(H=>H.person===E).some(H=>{const pe=Oe(H.start),Ge=H.end==="24:00"?1440:Oe(H.end);return u<Ge&&m>pe}),v(H=>H.concat([{person:E,agentId:dl(X,E),day:Se,endDay:In,start:he,end:Ae,taskId:bt}]))},className:["h-10 rounded-xl border font-medium px-4",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add assignment"})]})]})]}),r.jsxs("div",{className:"md:col-span-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-medium",children:"Assigned postures"}),bt&&r.jsxs("div",{className:"text-xs opacity-70",children:["Filtered to: ",ie.find(u=>u.id===bt)?.name||bt]})]}),(()=>{const u=new Map(it.map((pe,Ge)=>[pe,Ge])),m=Q.map((pe,Ge)=>({...pe,_idx:Ge})),F=ie.filter(pe=>!pe.archived&&(!bt||pe.id===bt)),H=[];for(const pe of F){const Ge=m.filter(yt=>yt.taskId===pe.id);if(Ge.length===0)continue;const mt=new Map;for(const yt of Ge){const kt=mt.get(yt.person)||[];kt.push(yt),mt.set(yt.person,kt)}const $t=Array.from(mt.keys()).sort();H.push(r.jsxs("div",{className:["rounded-xl border overflow-hidden",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:["px-3 py-2 flex items-center justify-between rounded-t-xl",a?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:pe.color||"#888"}}),r.jsx("span",{className:"font-medium text-sm",children:pe.name})]}),r.jsxs("span",{className:"text-xs opacity-70",children:[Ge.length," item",Ge.length===1?"":"s"]})]}),r.jsx("div",{className:"divide-y "+(a?"divide-neutral-800":"divide-neutral-200"),children:$t.map(yt=>{const kt=mt.get(yt).slice().sort((dt,ln)=>{const b=(u.get(dt.day)??0)-(u.get(ln.day)??0);if(b!==0)return b;const Ke=Oe(dt.start)-Oe(ln.start);return Ke!==0?Ke:dt.end.localeCompare(ln.end)});return r.jsxs("details",{children:[r.jsxs("summary",{className:["px-3 py-1.5 cursor-pointer select-none flex items-center justify-between",a?"hover:bg-neutral-900":"hover:bg-neutral-50"].join(" "),children:[r.jsx("span",{className:"text-sm",children:ur(X,kt[0]?.agentId,yt)}),r.jsxs("span",{className:"text-xs opacity-70",children:[kt.length," shift",kt.length===1?"":"s"]})]}),r.jsx("div",{className:"px-3 py-1.5 space-y-1",children:kt.map(dt=>r.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"w-[12ch] opacity-70",children:[dt.day,dt.endDay&&dt.endDay!==dt.day?` → ${dt.endDay}`:""]}),r.jsxs("span",{className:"w-[11ch] tabular-nums",children:[dt.start,"–",dt.end]})]}),r.jsxs("div",{className:"shrink-0 flex gap-1.5",children:[r.jsx("button",{onClick:()=>{mn(dt._idx),bn(dt.person),Zl(dt.day),ms(dt.start),Hr(dt.end),ql(dt.taskId),As(dt.endDay||dt.day)},className:["px-2 py-1 rounded border text-xs",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),r.jsx("button",{onClick:()=>{confirm("Remove this assignment?")&&v(ln=>ln.filter((b,Ke)=>Ke!==dt._idx))},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})]},`${dt._idx}-${dt.day}-${dt.start}-${dt.end}`))})]},yt)})})]},pe.id))}return H.length===0?r.jsx("div",{className:"text-sm opacity-70",children:"No assigned postures."}):r.jsx("div",{className:"space-y-3 h-[28rem] overflow-auto pr-1",children:H})})(),jn!=null&&r.jsxs("div",{className:["rounded-xl p-3 border",a?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit assignment"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:fr,onChange:u=>bn(u.target.value),children:Vn.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Day"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Br,onChange:u=>Zl(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:hl,onChange:u=>ms(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Wr,onChange:u=>Hr(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End Day"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:pl,onChange:u=>As(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Posture"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ur,onChange:u=>ql(u.target.value),children:ie.filter(u=>!u.archived).map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))})]}),r.jsxs("div",{className:"md:col-span-6 flex gap-2",children:[r.jsx("button",{onClick:()=>{if(jn==null)return;if(!fr.trim())return alert("Choose an agent");if(!Ur)return alert("Choose a posture");const u=Oe(hl),m=Oe(Wr);if(pl===Br&&!(m>u))return alert("End must be after start (or choose a later End Day)");na(B,Br,V.offset).filter(H=>H.person===fr).some(H=>{const pe=Oe(H.start),Ge=H.end==="24:00"?1440:Oe(H.end);return u<Ge&&m>pe}),v(H=>H.map((pe,Ge)=>Ge===jn?{person:fr.trim(),agentId:dl(X,fr.trim()),day:Br,endDay:pl,start:hl,end:Wr,taskId:Ur}:pe)),mn(null)},className:["px-3 py-1.5 rounded border text-sm",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:()=>mn(null),className:["px-3 py-1.5 rounded border text-sm",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})]})]})]})]}),r.jsx("div",{className:"mt-3 space-y-3",children:qn.filter(u=>Q.some(m=>m.taskId===u.id)).sort((u,m)=>u.name.localeCompare(m.name)).map(u=>r.jsx(pd,{dark:a,weekStart:g,calendarSegs:Q,tasks:ie,agents:X,filterTaskId:u.id,packed:!0,title:`Weekly ${u.name} calendar`},u.id))})]}):_==="PTO & Overrides"?r.jsxs("div",{children:[r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:"Weekly PTO calendar"}),r.jsx("div",{className:"text-xs opacity-70",children:"Full-day entries by person"})]}),(()=>{const F=Dn(g),H=it.map((pe,Ge)=>dn(jr(F,Ge)));return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((pe,Ge)=>{const mt=H[Ge],$t=j.filter(b=>(!Kn||b.person===Kn)&&b.startDate<=mt&&b.endDate>=mt).slice().sort((b,Ke)=>b.person.localeCompare(Ke.person)||b.startDate.localeCompare(Ke.startDate)),yt=new Map;let kt=0;const dt=$t.map(b=>{let Ke=yt.get(b.person);return Ke==null&&(Ke=kt++,yt.set(b.person,Ke)),{p:b,lane:Ke}});Math.max(dt.length,1);const ln=Math.min(220,Math.max(dt.length*28+28,120));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:ln},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:pe}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(mt.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:dt.map(({p:b,lane:Ke})=>{const ht=Ke*28,Ct=ur(X,b.agentId,b.person);return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 h-[22px] flex items-center justify-between",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:ht},title:`${Ct} • ${b.startDate} → ${b.endDate}`,children:[r.jsx("span",{className:"truncate",children:Ct}),b.notes&&r.jsx("span",{className:"ml-2 text-[11px] opacity-70 truncate",children:b.notes})]},`${b.id}-${mt}`)})})]},pe)})})})()]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start",children:r.jsxs("div",{className:"space-y-3 flex-1 min-w-0",children:[r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Add PTO"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end mb-3",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:hs,onChange:u=>Os(u.target.value),children:[r.jsx("option",{value:"",children:"—"}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Nr,onChange:u=>eo(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Vr,onChange:u=>It(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"Notes"}),r.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:xl,onChange:u=>gl(u.target.value)})]}),r.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",a?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(!hs)return alert("Choose an agent");if(!Nr||!Vr)return alert("Choose start and end dates");if(Vr<Nr)return alert("End date must be on/after start date");const u={id:ds(),person:hs,agentId:dl(X,hs),startDate:Nr,endDate:Vr,notes:xl||void 0};I(m=>m.concat([u])),Os(""),eo(""),It(""),gl(""),Y(!0)},children:"Add PTO"}),r.jsxs("div",{className:"ml-auto inline-flex items-center gap-2",children:[r.jsx("span",{className:a?"text-neutral-300":"text-neutral-700",children:"Filter"}),r.jsxs("select",{className:["border rounded-xl px-2 py-1",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:Kn,onChange:u=>to(u.target.value),children:[r.jsx("option",{value:"",children:"All"}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]})]})]}),null,(()=>{const u=j.filter(H=>!Kn||H.person===Kn).slice().sort((H,pe)=>H.person.localeCompare(pe.person)||H.startDate.localeCompare(pe.startDate));if(u.length===0)return r.jsx("div",{className:"text-sm opacity-70",children:"No PTO entries."});const m=new Map;for(const H of u){const pe=m.get(H.person)||[];pe.push(H),m.set(H.person,pe)}const F=Array.from(m.keys()).sort();return r.jsx("div",{className:"space-y-3",children:F.map(H=>{const pe=m.get(H).slice().sort((Ge,mt)=>Ge.startDate.localeCompare(mt.startDate));return r.jsxs("details",{className:["rounded-xl border overflow-hidden",a?"border-neutral-800":"border-neutral-200"].join(" "),open:!0,children:[r.jsxs("summary",{className:["px-3 py-2 cursor-pointer select-none flex items-center justify-between",a?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsx("span",{className:"text-sm font-medium",children:ur(X,pe[0]?.agentId,H)}),r.jsxs("span",{className:"text-xs opacity-70",children:[pe.length," item",pe.length===1?"":"s"]})]}),r.jsx("div",{className:"divide-y "+(a?"divide-neutral-800":"divide-neutral-200"),children:pe.map(Ge=>r.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"tabular-nums",children:[Ge.startDate," → ",Ge.endDate]}),Ge.notes&&r.jsx("span",{className:"opacity-70 max-w-[40ch] truncate",children:Ge.notes})]}),r.jsxs("div",{className:"shrink-0 inline-flex gap-1.5",children:[r.jsx("button",{className:["px-2 py-1 rounded border text-xs",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>la(Ge),children:"Edit"}),r.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete PTO?")&&I(mt=>mt.filter($t=>$t.id!==Ge.id))},children:"Delete"})]})]},Ge.id))})]},H)})})})(),zs&&r.jsxs("div",{className:["rounded-xl p-3 border",a?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit PTO"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Kr,onChange:u=>Qr(u.target.value),children:Vn.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Qn,onChange:u=>er(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Xn,onChange:u=>$r(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"Notes"}),r.jsx("input",{type:"text",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Xr,onChange:u=>tr(u.target.value)})]}),r.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[r.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(zs){if(!Kr.trim())return alert("Choose an agent");if(!Qn||!Xn)return alert("Choose start/end");if(Xn<Qn)return alert("End date must be on/after start date");I(u=>u.map(m=>m.id===zs.id?{...m,person:Kr.trim(),agentId:dl(X,Kr.trim()),startDate:Qn,endDate:Xn,notes:Xr||void 0}:m)),vl(),Y(!0)}},children:"Save"}),r.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:vl,children:"Cancel"})]})]})]})]}),r.jsx("div",{className:"space-y-3 flex-1 min-w-0",children:r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Add Overrides"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Sr,onChange:u=>oa(u.target.value),children:[r.jsx("option",{value:"",children:"—"}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Start date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ps,onChange:u=>Rs(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"End date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:xs,onChange:u=>aa(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Start time (optional)"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:nr,onChange:u=>{const m=u.target.value,F=(pe,Ge)=>Nt(((Oe(pe)+Ge)%1440+1440)%1440),H=nr?F(nr,510):null;if(gs(m),m){const pe=F(m,510);(!Yn||H&&Yn===H)&&ys(pe)}}})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"End time (optional)"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Yn,onChange:u=>ys(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Kind"}),r.jsx("input",{type:"text",placeholder:"e.g., Swap, Half-day",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:no,onChange:u=>ia(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Notes"}),r.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Fs,onChange:u=>Bs(u.target.value)})]}),r.jsxs("div",{className:"flex items-end gap-3 md:col-span-2",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx(Fi,{ariaLabel:"Weekly recurrence",dark:a,size:"md",checked:vs,onChange:u=>ro(u)}),r.jsx("span",{className:"text-sm",children:"Weekly recurrence"})]}),vs&&r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"opacity-80",children:"Until"}),r.jsx("input",{type:"date",className:["border rounded-xl px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:mr,onChange:u=>wl(u.target.value)})]}),r.jsx("button",{className:["ml-auto h-10 rounded-xl px-4 border font-medium","bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),onClick:()=>{if(!Sr)return alert("Choose an agent");if(!ps||!xs)return alert("Choose start and end dates");if(xs<ps)return alert("End date must be on/after start date");if(nr&&!Yn||!nr&&Yn)return alert("Provide both start and end times, or leave both blank");const u={id:ds(),person:Sr,agentId:dl(X,Sr),startDate:ps,endDate:xs,start:nr||void 0,end:Yn||void 0,kind:no||void 0,notes:Fs||void 0,recurrence:vs?{rule:"weekly",until:mr||void 0}:void 0};re(m=>m.concat([u])),Y(!0)},children:"Add Override"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Overrides"}),Le.filter(u=>!Kn||u.person===Kn).length===0?r.jsx("div",{className:"text-sm opacity-70",children:"No overrides."}):r.jsx("ul",{className:"divide-y divide-neutral-700/30",children:Le.filter(u=>!Kn||u.person===Kn).slice().sort((u,m)=>u.person.localeCompare(m.person)||u.startDate.localeCompare(m.startDate)).map(u=>r.jsxs("li",{className:"py-1.5 flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:u.person}),r.jsxs("span",{className:"opacity-70",children:[" • ",u.startDate," → ",u.endDate]}),u.start&&u.end&&r.jsxs("span",{className:"opacity-70",children:[" • ",u.start,"–",u.end]}),u.kind&&r.jsxs("span",{className:"ml-1 opacity-70",children:["• ",u.kind]}),u.recurrence?.rule==="weekly"&&r.jsxs("span",{className:"ml-1 text-xs opacity-80",children:["(weekly",u.recurrence.until?` until ${u.recurrence.until}`:"",")"]}),u.notes&&r.jsx("span",{className:"ml-2 text-xs opacity-70",children:u.notes})]}),r.jsx("div",{className:"shrink-0",children:r.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete override?")&&(re(m=>m.filter(F=>F.id!==u.id)),Y(!0))},children:"Delete"})})]},u.id))})]})]})})]})})]}):null,Ne&&r.jsx("div",{className:"fixed right-4 bottom-4 z-50",children:r.jsx("div",{role:"status","aria-live":"polite",className:["min-w-[220px] max-w-[360px] px-3 py-2 rounded-xl border shadow-md text-sm",Ne.kind==="success"?a?"bg-neutral-800 border-green-700 text-green-300":"bg-white border-green-500 text-green-700":a?"bg-neutral-800 border-red-700 text-red-300":"bg-white border-red-500 text-red-700"].join(" "),children:Ne.text})})]}):r.jsx("section",{className:["rounded-2xl p-6",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:r.jsxs("div",{className:"max-w-md mx-auto space-y-3",children:[r.jsx("div",{className:"text-lg font-semibold",children:"Protected — Manage Data"}),r.jsx("p",{className:"text-sm opacity-80",children:"Sign in to your session."}),r.jsx("form",{onSubmit:u=>{u.preventDefault(),(async()=>{const m=await Lf(L);if(m.ok){try{await Ri(L)}catch{}if(ld(),sa()){O(!0),$e("");try{localStorage.setItem("schedule_admin_unlocked","1")}catch{}try{zi(y.map(F=>({id:F.id||Math.random().toString(36).slice(2),firstName:F.firstName||"",lastName:F.lastName||"",tzId:F.tzId,hidden:!!F.hidden,isSupervisor:!!F.isSupervisor,supervisorId:F.supervisorId??null,notes:F.notes})))}catch{}}else O(!1),$e("Signed in, but CSRF missing. Check cookie Domain/Path and SameSite; reload and try again.")}else $e(m.status===401?"Incorrect password":"Login failed")})()},children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"password",autoFocus:!0,className:["flex-1 border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:L,onChange:u=>Ee(u.target.value),placeholder:"Password"}),r.jsx("button",{type:"submit",className:["rounded-xl px-4 py-2 font-medium border",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Sign in"})]})}),je&&r.jsx("div",{className:["text-sm",a?"text-red-300":"text-red-600"].join(" "),children:je}),r.jsxs("div",{className:"pt-3 border-t border-neutral-700/30 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Or email me a magic link"}),r.jsx(t0,{dark:a})]}),r.jsx("div",{className:"text-xs opacity-70",children:"Your API should set a session cookie and CSRF token on success."}),r.jsxs("div",{className:"text-xs opacity-60 mt-2",children:[r.jsxs("div",{children:["API base: ",r.jsx("code",{children:ae})]}),r.jsxs("div",{children:["API path: ",r.jsx("code",{children:Fe})]}),r.jsxs("div",{children:["Dev proxy: ",Ve?"on (local only)":"off"]}),(()=>{const u=ld();return r.jsxs("div",{children:[r.jsxs("div",{children:["CSRF token available: ",u.token?"yes":"no"]}),r.jsxs("div",{className:"opacity-75",children:["• cookie readable: ",u.cookie?"yes":"no","; • memory: ",u.memory?"yes":"no"]})]})})()]})]})})}function t0({dark:a}){const[y,c]=w.useState(""),[D,M]=w.useState(""),[g,V]=w.useState(void 0);return r.jsxs("form",{onSubmit:B=>{B.preventDefault(),(async()=>{M(""),V(void 0);const A=await fd(y,"admin");A.ok?A.link?(V(A.link),M("Dev mode: click the link below to sign in.")):M("Check your inbox for the sign-in link."):M("Failed to request link. Check email format and try again.")})()},children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"email",required:!0,className:["flex-1 border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:y,onChange:B=>c(B.target.value),placeholder:"you@company.com"}),r.jsx("button",{type:"submit",className:["rounded-xl px-3 py-2 text-sm font-medium border",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Email link"})]}),D&&r.jsx("div",{className:"text-xs mt-2 opacity-80",children:D}),g&&r.jsx("div",{className:"mt-2 text-xs break-all",children:r.jsx("a",{className:"underline",href:g,target:"_blank",rel:"noreferrer",children:g})})]})}function n0({dark:a,weekStart:y,pto:c,agents:D,title:M="Weekly PTO calendar",subtitle:g="Full-day entries by person"}){const A=Dn(y),fe=it.map((ie,Q)=>dn(jr(A,Q)));return r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:M}),r.jsx("div",{className:"text-xs opacity-70",children:g})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((ie,Q)=>{const J=fe[Q],ee=(c||[]).filter(p=>p.startDate<=J&&p.endDate>=J).slice().sort((p,T)=>{const O=ur(D,p.agentId,p.person),L=ur(D,T.agentId,T.person);return O.localeCompare(L)||p.startDate.localeCompare(T.startDate)}),G=new Map;let h=0;const v=ee.map(p=>{const T=ur(D,p.agentId,p.person);let O=G.get(T);return O==null&&(O=h++,G.set(T,O)),{p,lane:O,disp:T}}),S=Math.min(280,Math.max(v.length*50+28,140));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:S},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:ie}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(J.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:v.map(({p,lane:T,disp:O},L)=>{const Ee=T*50;return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 py-1",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:Ee},title:`${O} • ${p.startDate} → ${p.endDate}${p.notes?" — "+p.notes:""}`,children:[r.jsx("div",{className:"text-[13px] leading-snug break-words",children:O}),p.notes&&r.jsx("div",{className:"text-[11px] opacity-80 leading-snug break-words",children:p.notes})]},`${p.id}-${L}`)})})]},ie)})})]})}function r0({dark:a,weekStart:y,overrides:c,agents:D,title:M="Weekly Overrides calendar",subtitle:g="Presence indicates any override on that day"}){const A=Dn(y),fe=it.map((ie,Q)=>dn(jr(A,Q)));return r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:M}),r.jsx("div",{className:"text-xs opacity-70",children:g})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((ie,Q)=>{const J=fe[Q],ee=(c||[]).filter(p=>p.startDate<=J&&p.endDate>=J).slice().sort((p,T)=>{const O=ur(D,p.agentId,p.person),L=ur(D,T.agentId,T.person);return O.localeCompare(L)||p.startDate.localeCompare(T.startDate)}),G=new Map;let h=0;const v=ee.map(p=>{const T=ur(D,p.agentId,p.person);let O=G.get(T);O==null&&(O=h++,G.set(T,O));const L=p.start&&p.end?`${p.start}–${p.end}${p.endDay?" "+p.endDay:""}`:"",Ee=[p.kind,L].filter(Boolean).join(" • ");return{o:p,lane:O,disp:T,note:Ee}}),S=Math.min(280,Math.max(v.length*50+28,140));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:S},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:ie}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(J.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:v.map(({o:p,lane:T,disp:O,note:L},Ee)=>{const je=T*50,$e=`${O} • ${p.startDate} → ${p.endDate}${L?" — "+L:""}`;return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 py-1",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:je},title:$e,children:[r.jsx("div",{className:"text-[13px] leading-snug break-words",children:O}),L&&r.jsx("div",{className:"text-[11px] opacity-80 leading-snug break-words",children:L})]},`${p.id}-${Ee}`)})})]},ie)})})]})}function s0({dark:a,weekStart:y,agents:c,pto:D,overrides:M,tasks:g,calendarSegs:V}){const B=h=>`${h?.firstName||""} ${h?.lastName||""}`.trim(),A=h=>(h||"").trim().toLowerCase();w.useMemo(()=>c||[],[c]);const fe=w.useMemo(()=>(c||[]).filter(h=>!!h.isSupervisor),[c]),ie=w.useMemo(()=>{const h=new Map;for(const v of c||[]){if(!v.isSupervisor)continue;const S=A(B(v)),p=v.id&&String(v.id)||S;p&&(h.set(p,p),S&&h.set(S,p))}return h},[c]),Q=w.useMemo(()=>{const h=new Map;for(const v of fe){const S=A(B(v)),p=v.id&&String(v.id)||S;p&&(h.has(p)||h.set(p,[]))}for(const v of c||[]){const S=v.supervisorId||"";if(!S)continue;const p=ie.get(S)||ie.get(A(S));p&&h.has(p)&&h.get(p).push(v)}return h},[c,fe,ie]),J=w.useMemo(()=>(c||[]).filter(h=>{if(h.isSupervisor)return!1;const v=h.supervisorId||"";if(!v)return!0;const S=ie.get(v)||ie.get(A(v));return!S||!Q.has(S)}),[c,ie,Q]);w.useMemo(()=>{const h=new Map;for(const v of c)v.id&&h.set(v.id,v);return h},[c]),w.useMemo(()=>{const h=new Map;for(const v of c){const S=B(v).toLowerCase();S&&h.set(S,v)}return h},[c]);const ee="inline-flex items-center gap-2 px-2 py-1 rounded border text-sm",G=a?"border-neutral-700 bg-neutral-900 text-neutral-100":"border-neutral-300 bg-white text-neutral-900";return r.jsxs("section",{className:["rounded-2xl p-3",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:["text-lg font-semibold mb-2",a?"text-neutral-200":"text-neutral-900"].join(" "),children:"Teams"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("div",{className:"flex items-start gap-3 min-w-full pb-1",children:[(()=>{const h=fe.slice().sort((v,S)=>B(v).localeCompare(B(S)));return h.length===0?r.jsx("div",{className:[ee,G].join(" "),children:"No supervisors yet"}):h.map(v=>{const S=v.id&&String(v.id)||A(B(v)),p=(S?Q.get(S)||[]:[]).slice().sort((O,L)=>B(O).localeCompare(B(L))),T=!!v.hidden;return r.jsxs("div",{className:["shrink-0 w-56 md:w-64 rounded-xl p-2 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:["font-medium",T?a?"text-neutral-400":"text-neutral-500":a?"text-neutral-100":"text-neutral-900"].join(" "),children:B(v)||v.id}),r.jsx("span",{className:["text-xs px-1.5 py-0.5 rounded border",a?"border-neutral-700 text-neutral-300":"border-neutral-300 text-neutral-600"].join(" "),children:p.length})]}),p.length>0?r.jsx("ul",{className:"space-y-1",children:p.map(O=>r.jsx("li",{className:["px-2 py-1 rounded border text-sm text-left",a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:B(O)||O.id},O.id||B(O)))}):r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-500"].join(" "),children:"No direct reports"})]},v.id||B(v))})})(),J.length>0&&r.jsxs("div",{className:["shrink-0 w-56 md:w-64 rounded-xl p-2 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:["font-medium mb-2",a?"text-neutral-100":"text-neutral-900"].join(" "),children:"Unassigned"}),r.jsx("ul",{className:"space-y-1",children:J.slice().sort((h,v)=>B(h).localeCompare(B(v))).map(h=>r.jsx("li",{className:["px-2 py-1 rounded border text-sm text-left",a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:B(h)||h.id},h.id||B(h)))})]})]})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:["text-lg font-semibold mb-2",a?"text-neutral-200":"text-neutral-900"].join(" "),children:"Calendars"}),r.jsx(n0,{dark:a,weekStart:y,pto:D,agents:c}),r.jsx(r0,{dark:a,weekStart:y,overrides:M||[],agents:c}),(()=>{const h=(g||[]).filter(v=>!v.archived).filter(v=>(V||[]).some(S=>S.taskId===v.id)).sort((v,S)=>(v.name||"").localeCompare(S.name||""));return h.length===0?null:h.map(v=>r.jsx(pd,{dark:a,weekStart:y,calendarSegs:V,tasks:g,agents:c,filterTaskId:v.id,packed:!0,title:`Weekly ${v.name} calendar`},v.id))})()]})]})}function l0(){const a=Array.from({length:40},(D,M)=>`Agent${M+1}`),y=[],c=[{id:ds(),person:"Agent5",startDate:"2025-08-21",endDate:"2025-08-23",notes:"Vacation"},{id:ds(),person:"Agent12",startDate:"2025-08-22",endDate:"2025-08-22",notes:"Appt"}];for(const D of it){if(D==="Sat"||D==="Sun")continue;let M=0;const g=[];let V=360;for(;V<=1050;)g.push(V),V+=120+Math.floor(Math.random()*61);for(const B of g){const A=2+Math.floor(Math.random()*2);for(let fe=0;fe<A;fe++){const ie=a[M%a.length];M++;const Q=B,J=B+510;if(J<=1440)y.push({id:ds(),person:ie,day:D,start:Nt(Q),end:Nt(J)});else{const ee=J-1440,G=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=G[(G.indexOf(D)+1)%7];y.push({id:ds(),person:ie,day:D,start:Nt(Q),end:"24:00",endDay:h}),y.push({id:ds(),person:ie,day:h,start:"00:00",end:Nt(ee),endDay:h})}}}}return{shifts:y,pto:c}}const Ti=l0(),ad="no".toLowerCase()==="yes",o0="no".toLowerCase()==="yes";function a0(){const[a,y]=oe.useState(!1),[c,D]=oe.useState(""),[M,g]=oe.useState("");oe.useEffect(()=>{(async()=>{try{const j=ud(),I=cd(),Le=`${j}${I}/schedule`,re=await fetch(Le,{method:"GET",credentials:"include"});y(re.ok)}catch{y(!1)}})()},[]);const V=j=>{const I=(j||"").toLowerCase();return I.includes("teams")?"teams":I.includes("manage2")||I.includes("manage")?"manageV2":"schedule"},[B,A]=oe.useState(()=>V(window.location.hash)),[fe,ie]=oe.useState(()=>dn(ta(new Date))),[Q,J]=oe.useState(()=>new Date().getDay()),[ee,G]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_theme")||"system";if(j.includes("-")){const I=j.split("-")[0];return I==="light"||I==="dark"?"default":I}return j==="light"||j==="dark"?"default":j==="night"||j==="noir"||j==="prism"?j:"system"}catch{return"system"}}),[h,v]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_theme"),I=j==="unicorn"?"system":j;return I==="light"?!1:I==="dark"||I==="night"||I==="noir"?!0:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch{return!0}});oe.useEffect(()=>{const j=I=>{const re=I?.detail?.value;if(!re)return;if(re==="system"){G("system"),v(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);try{localStorage.setItem("schedule_theme","system")}catch{}return}let De=re,Y="dark";if(re.includes("-")){const K=re.split("-");De=K[0],Y=K[1]==="light"?"light":"dark"}(De==="light"||De==="dark")&&(Y=De,De="default"),De!=="default"&&De!=="night"&&De!=="noir"&&De!=="prism"&&(De="default"),G(De),v(Y==="dark");try{localStorage.setItem("schedule_theme",`${De}-${Y}`)}catch{}};return window.addEventListener("schedule:set-theme",j),()=>window.removeEventListener("schedule:set-theme",j)},[]),oe.useEffect(()=>{if(!window.matchMedia)return;const j=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>{try{localStorage.getItem("schedule_theme")==="system"&&v(j.matches)}catch{}};return j.addEventListener?j.addEventListener("change",I):j.addListener&&j.addListener(I),()=>{j.removeEventListener?j.removeEventListener("change",I):j.removeListener&&j.removeListener(I)}},[]);const S=oe.useMemo(()=>ee==="system"?"default":ee,[ee]),p=oe.useMemo(()=>{const j="min-h-screen w-full";return S==="night"?h?`${j} bg-black text-red-400`:`${j} bg-black text-red-600`:S==="noir"?`${j} bg-black text-white`:S==="prism"?h?`${j} bg-black text-neutral-100`:`${j} bg-sky-50 text-sky-800`:h?`${j} bg-neutral-950 text-neutral-100`:`${j} bg-neutral-100 text-neutral-900`},[S,h]),[T,O]=oe.useState(ad?Ti.shifts:[]),[L,Ee]=oe.useState(ad?Ti.pto:[]),[je,$e]=oe.useState([]),[We,Ne]=oe.useState(En[0]),[ye,Re]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_slimline");return j===null?!1:j==="1"}catch{return!1}});oe.useEffect(()=>{try{localStorage.setItem("schedule_slimline",ye?"1":"0")}catch{}},[ye]),oe.useEffect(()=>{const j=I=>{const Le=I;Le&&typeof Le.detail?.value=="boolean"&&Re(Le.detail.value)};return window.addEventListener("schedule:set-slimline",j),()=>window.removeEventListener("schedule:set-slimline",j)},[]);const[ae,Fe]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_agents_v2_v1");if(j){const I=JSON.parse(j);if(Array.isArray(I))return I}}catch{}return[]}),[Ve,X]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_tasks");if(j){const I=JSON.parse(j);if(Array.isArray(I))return I}}catch{}return[]}),[R,k]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_calendarSegs");if(j){const I=JSON.parse(j);if(Array.isArray(I))return I}}catch{}return[]}),[_,U]=oe.useState(!1),d=w.useRef(new Set),[C,Ie]=oe.useState(!1),[Me,Xe]=oe.useState(!1),[ke,Z]=oe.useState(()=>{try{const j=localStorage.getItem("schedule_draft_v1");if(j){const I=JSON.parse(j);if(I&&I.meta&&I.data)return I}}catch{}return null}),ue=!!ke,W=j=>{try{j?localStorage.setItem("schedule_draft_v1",JSON.stringify(j)):localStorage.removeItem("schedule_draft_v1")}catch{}},q=j=>{ue?Z(I=>{if(!I)return I;const Le=j(I.data.shifts),re={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,shifts:Le}};return W(re),re}):O(j)},Te=j=>{ue?Z(I=>{if(!I)return I;const Le=j(I.data.pto),re={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,pto:Le}};return W(re),re}):Ee(j)},Ye=j=>{ue?Z(I=>{if(!I)return I;const Le=j(I.data.calendarSegs),re={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,calendarSegs:Le}};return W(re),re}):k(j)};oe.useEffect(()=>{(async()=>Ie(sa()))()},[B]),oe.useEffect(()=>{const j=I=>{const Le=!!sa();if(Ie(Le),Le){const re=ae.map(De=>({id:De.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:De.firstName||"",lastName:De.lastName||"",tzId:De.tzId,hidden:!!De.hidden,isSupervisor:De.isSupervisor===!0,supervisorId:De.supervisorId??null,notes:De.notes}));zi(re)}};return window.addEventListener("schedule:auth",j),()=>window.removeEventListener("schedule:auth",j)},[ae]),oe.useEffect(()=>{(async()=>{if(!a)return;const j=await Oi();if(j){if(O(j.shifts),Ee(j.pto),Array.isArray(j.calendarSegs)&&k(j.calendarSegs),Array.isArray(j.overrides)&&$e(j.overrides),Array.isArray(j.agents)){const I=j.agents;Fe(I);try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(I))}catch{}}try{d.current=new Set((j.shifts||[]).map(I=>I.id).filter(Boolean))}catch{}U(!0)}})()},[a]),oe.useEffect(()=>{const j=()=>A(V(window.location.hash));return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),oe.useEffect(()=>{if(B==="manageV2")(window.location.hash||"").toLowerCase().startsWith("#manage2")||(window.location.hash="#manage2");else if(B==="teams")(window.location.hash||"").toLowerCase().startsWith("#teams")||(window.location.hash="#teams");else if(window.location.hash)try{history.replaceState(null,"",window.location.pathname+window.location.search)}catch{}},[B]),oe.useEffect(()=>{Ve.length===0&&X([{id:"support",name:"Support Inbox",color:"#2563eb"},{id:"meetings",name:"Meetings",color:"#16a34a"}])},[]),oe.useEffect(()=>{try{localStorage.setItem("schedule_tasks",JSON.stringify(Ve))}catch{}},[Ve]),oe.useEffect(()=>{try{localStorage.setItem("schedule_calendarSegs",JSON.stringify(R))}catch{}},[R]),oe.useEffect(()=>{try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(ae))}catch{}},[ae]),oe.useEffect(()=>{ae.length!==0&&(ae.every(j=>!!j.id)||Fe(j=>j.map(I=>I.id?I:{...I,id:crypto.randomUUID?.()||Math.random().toString(36).slice(2)})))},[ae]);const ve=j=>`${j.firstName||""} ${j.lastName||""}`.trim(),gt=j=>(j||"").trim().toLowerCase(),et=j=>{const I=(j||"").trim().toLowerCase();return I?ae.find(re=>ve(re).toLowerCase()===I)?.id:void 0};oe.useEffect(()=>{if(!_||!C||ue)return;const j=setTimeout(async()=>{const I=T.map(re=>re.agentId?re:{...re,agentId:et(re.person)});let Le=[];try{const re=d.current;if(re&&re.size>0){const De=new Set(I.map(Y=>Y.id).filter(Boolean));Le=Array.from(re).filter(Y=>!De.has(Y))}}catch{}try{if(await Tf({upserts:I,deletes:Le}))try{d.current=new Set(I.map(De=>De.id).filter(Boolean))}catch{}else if(o0){const De=L.map(se=>se.agentId?se:{...se,agentId:et(se.person)}),Y=je.map(se=>se.agentId?se:{...se,agentId:et(se.person)}),K=ae.map(se=>({id:se.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:se.firstName||"",lastName:se.lastName||"",tzId:se.tzId,hidden:!!se.hidden,isSupervisor:se.isSupervisor===!0,supervisorId:se.supervisorId??null,notes:se.notes}));await _f({shifts:I,pto:De,overrides:Y,calendarSegs:R,agents:K,updatedAt:new Date().toISOString()})}}catch{}},600);return()=>clearTimeout(j)},[T,L,R,ae,_,C,ue]),oe.useEffect(()=>{if(!_||!C)return;const j=setTimeout(()=>{zi(ae.map(I=>({id:I.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:I.firstName||"",lastName:I.lastName||"",tzId:I.tzId,hidden:!!I.hidden,isSupervisor:I.isSupervisor===!0,supervisorId:I.supervisorId??null,notes:I.notes})))},600);return()=>clearTimeout(j)},[ae,_,C]);const ut=w.useRef({shifts:"",pto:"",overrides:"",cal:"",agents:""});return oe.useEffect(()=>{if(B!=="schedule"||!a)return;let j=!1;const I=async()=>{const re=await Oi();if(!re||j)return;const De=JSON.stringify(re.shifts||[]),Y=JSON.stringify(re.pto||[]),K=JSON.stringify(Array.isArray(re.calendarSegs)?re.calendarSegs:[]),se=JSON.stringify(Array.isArray(re.overrides)?re.overrides:[]),Ce=JSON.stringify(Array.isArray(re.agents)?re.agents:[]);if(De!==ut.current.shifts&&(O(re.shifts),ut.current.shifts=De),Y!==ut.current.pto&&(Ee(re.pto),ut.current.pto=Y),K!==ut.current.cal&&(k(re.calendarSegs||[]),ut.current.cal=K),se!==ut.current.overrides&&($e(re.overrides||[]),ut.current.overrides=se),Ce!==ut.current.agents&&Array.isArray(re.agents)){Fe(re.agents),ut.current.agents=Ce;try{localStorage.setItem("schedule_agents_v2_v1",Ce)}catch{}}try{d.current=new Set((re.shifts||[]).map(xe=>xe.id).filter(Boolean))}catch{}};I();const Le=setInterval(I,300*1e3);return()=>{j=!0,clearInterval(Le)}},[B,a]),oe.useEffect(()=>{if(!_||!ae||ae.length===0)return;const j=new Map;for(const se of ae){const Ce=`${(se.firstName||"").trim()} ${(se.lastName||"").trim()}`.trim();se.id&&Ce&&j.set(se.id,Ce)}let I=!1;const Le=T.map(se=>{if(se&&se.agentId){const Ce=j.get(se.agentId);if(Ce&&Ce!==se.person)return I=!0,{...se,person:Ce}}return se});I&&O(Le);let re=!1;const De=L.map(se=>{const Ce=se.agentId;if(Ce){const xe=j.get(Ce);if(xe&&xe!==se.person)return re=!0,{...se,person:xe}}return se});re&&Ee(De);let Y=!1;const K=R.map(se=>{const Ce=se.agentId;if(Ce){const xe=j.get(Ce);if(xe&&xe!==se.person)return Y=!0,{...se,person:xe}}return se});Y&&k(K)},[_,ae,T,L,R]),oe.useMemo(()=>Array.from(new Set(T.map(j=>j.person))).sort(),[T]),oe.useEffect(()=>{if(!_)return;const j=Ce=>Ce.map(xe=>`${xe.firstName} ${xe.lastName}`.trim()).sort(),I=Ce=>Array.from(new Set(Ce)).sort(),Le=j(ae),re=I(Ti.shifts.map(Ce=>Ce.person)),De=I(T.map(Ce=>Ce.person)),Y=ae.length===0,se=((Ce,xe)=>Ce.length===xe.length&&Ce.every((He,ct)=>He===xe[ct]))(Le,re);if(Y||se){const Ce=De.map(xe=>{const He=xe.split(" ");return{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:He[0]||xe,lastName:He.slice(1).join(" ")||"",tzId:En[0]?.id,hidden:!1}});Fe(Ce)}},[_,T,ae]),a?_?r.jsx(u0,{dark:h,children:r.jsx("div",{className:p,"data-theme":S,children:r.jsxs("div",{className:"max-w-full mx-auto p-2 md:p-4 space-y-4",children:[r.jsx(Ff,{dark:h,setDark:v,view:B,setView:A,weekStart:fe,setWeekStart:ie,tz:We,setTz:Ne,canEdit:C,editMode:Me,setEditMode:Xe}),B==="schedule"?r.jsx(Kf,{dark:h,weekStart:fe,dayIndex:Q,setDayIndex:J,shifts:T,pto:L,tasks:Ve,calendarSegs:R,tz:We,canEdit:C,editMode:Me,onRemoveShift:j=>O(I=>I.filter(Le=>Le.id!==j)),agents:ae,slimline:ye}):B==="teams"?r.jsx(s0,{dark:h,weekStart:fe,agents:ae,pto:ue?ke.data.pto:L,overrides:ue?ke.data.overrides:je,tasks:Ve,calendarSegs:ue?ke.data.calendarSegs:R}):r.jsx(e0,{dark:h,agents:ae,onAddAgent:j=>{const I=`${(j.firstName||"").trim()} ${(j.lastName||"").trim()}`.trim();if(!I){alert("Enter a first and/or last name");return}if(ae.some(re=>gt(ve(re))===gt(I))){alert("An agent with that name already exists.");return}Fe(re=>re.concat([{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:j.firstName,lastName:j.lastName,tzId:j.tzId,hidden:!1}]))},onUpdateAgent:(j,I)=>{const Le=ae[j];if(!Le)return;const re=ve(Le),De=(I.firstName||"").trim(),Y=(I.lastName||"").trim(),K=`${De} ${Y}`.trim();if(!K){alert("Enter a first and/or last name");return}if(ae.some((Ce,xe)=>xe!==j&&gt(ve(Ce))===gt(K))){alert("An agent with that name already exists.");return}if(gt(K)!==gt(re)){const Ce=Le.id,xe=He=>He||Ce;q(He=>He.map(ct=>ct.person===re?{...ct,person:K,agentId:xe(ct.agentId)}:ct)),Te(He=>He.map(ct=>ct.person===re?{...ct,person:K,agentId:xe(ct.agentId)}:ct)),Ye(He=>He.map(ct=>ct.person===re?{...ct,person:K,agentId:xe(ct.agentId)}:ct))}Fe(Ce=>Ce.map((xe,He)=>He===j?{...xe,firstName:De,lastName:Y,tzId:I.tzId||xe.tzId,hidden:I.hidden!=null?I.hidden:xe.hidden,isSupervisor:I.isSupervisor!=null?!!I.isSupervisor:xe.isSupervisor,supervisorId:I.supervisorId!==void 0?I.supervisorId??null:xe.supervisorId,notes:I.notes!==void 0?I.notes:xe.notes}:xe))},onDeleteAgent:j=>Fe(I=>{const Le=I[j];if(!Le)return I.filter((Y,K)=>K!==j);const re=Le.id,De=I.filter((Y,K)=>K!==j);return re?De.map(Y=>Y.supervisorId===re?{...Y,supervisorId:null}:Y):De}),weekStart:fe,tz:We,shifts:ue?ke.data.shifts:T,pto:ue?ke.data.pto:L,overrides:ue?ke.data.overrides:je,tasks:Ve,calendarSegs:ue?ke.data.calendarSegs:R,onUpdateShift:(j,I)=>q(Le=>Le.map(re=>re.id===j?{...re,...I}:re)),onDeleteShift:j=>q(I=>I.filter(Le=>Le.id!==j)),onAddShift:j=>q(I=>I.concat([{...j,agentId:j.agentId||et(j.person)}])),setTasks:X,setCalendarSegs:Ye,setPto:Te,setOverrides:j=>{ue?Z(I=>{if(!I)return I;const Le=j(I.data.overrides),re={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,overrides:Le}};return W(re),re}):$e(j)}})]})})}):r.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:r.jsx("div",{className:"max-w-md mx-auto p-6",children:r.jsxs("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-lg font-semibold",children:"Loading schedule…"}),r.jsx("p",{className:"text-sm opacity-80",children:"Fetching the latest data."})]})})}):r.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:r.jsx("div",{className:"max-w-md mx-auto p-6",children:r.jsxs("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-lg font-semibold",children:"Protected — Enter Site Password"}),r.jsx("p",{className:"text-sm opacity-80",children:"Sign in to view the schedule."}),r.jsx("form",{onSubmit:I=>{I.preventDefault(),(async()=>{const{ok:Le,status:re}=await Pf(c);if(Le){y(!0),g("");try{localStorage.setItem("site_unlocked_hint","1")}catch{}}else g(re===401?"Incorrect password":re===403?"Forbidden by server policy":re===404?"API endpoint not found":"Network error. Is the API running?")})()},children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"password",autoFocus:!0,className:"flex-1 border rounded-xl px-3 py-2 bg-neutral-900 border-neutral-700",value:c,onChange:I=>D(I.target.value),placeholder:"Password"}),r.jsx("button",{type:"submit",className:"rounded-xl px-4 py-2 font-medium border bg-neutral-800 border-neutral-700",children:"Sign in"})]})}),M&&r.jsx("div",{className:"text-sm text-red-300",children:M}),r.jsxs("div",{className:"pt-3 border-t border-neutral-800 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Or email me a magic link"}),r.jsx(i0,{dark:!0,role:"site"})]})]})})})}function i0({dark:a,role:y}){const[c,D]=w.useState(""),[M,g]=w.useState(""),[V,B]=w.useState(void 0);return r.jsxs("form",{onSubmit:A=>{A.preventDefault(),(async()=>{g(""),B(void 0);const fe=await fd(c,y);fe.ok?fe.link?(B(fe.link),g("Dev mode: click the link below to sign in.")):g("Check your inbox for the sign-in link."):g("Failed to request link. Check email format and try again.")})()},children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"email",required:!0,className:["flex-1 border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:c,onChange:A=>D(A.target.value),placeholder:"you@company.com"}),r.jsx("button",{type:"submit",className:["rounded-xl px-3 py-2 text-sm font-medium border",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Email link"})]}),M&&r.jsx("div",{className:"text-xs mt-2 opacity-80",children:M}),V&&r.jsx("div",{className:"mt-2 text-xs break-all",children:r.jsx("a",{className:"underline",href:V,target:"_blank",rel:"noreferrer",children:V})})]})}class u0 extends w.Component{state={hasError:!1,err:void 0};static getDerivedStateFromError(y){return{hasError:!0,err:y}}componentDidCatch(y,c){console.error("App error",y,c)}componentDidMount(){window.addEventListener("error",y=>{console.error("Window error",y.error||y.message)}),window.addEventListener("unhandledrejection",y=>{console.error("Unhandled rejection",y.reason)})}render(){if(this.state.hasError){const{dark:y}=this.props;return r.jsx("div",{className:y?"min-h-screen w-full bg-neutral-950 text-neutral-100":"min-h-screen w-full bg-neutral-100 text-neutral-900",children:r.jsx("div",{className:"max-w-3xl mx-auto p-4",children:r.jsxs("div",{className:["rounded-xl p-4 border",y?"bg-red-900/30 border-red-800 text-red-200":"bg-red-50 border-red-200 text-red-900"].join(" "),children:[r.jsx("div",{className:"font-semibold mb-2",children:"A runtime error occurred"}),r.jsx("div",{className:"text-xs whitespace-pre-wrap break-all",children:String(this.state.err?.message||this.state.err||"Unknown error")}),r.jsx("div",{className:"text-xs opacity-80 mt-2",children:"Check the developer console for details."})]})})})}return this.props.children}}Df.createRoot(document.getElementById("root")).render(r.jsx(w.StrictMode,{children:r.jsx(a0,{})}));
