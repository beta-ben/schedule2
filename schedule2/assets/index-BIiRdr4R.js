(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))p(x);new MutationObserver(x=>{for(const h of x)if(h.type==="childList")for(const S of h.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&p(S)}).observe(document,{childList:!0,subtree:!0});function c(x){const h={};return x.integrity&&(h.integrity=x.integrity),x.referrerPolicy&&(h.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?h.credentials="include":x.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function p(x){if(x.ep)return;x.ep=!0;const h=c(x);fetch(x.href,h)}})();function wd(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Pi={exports:{}},Xl={},_i={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd;function Ff(){if(nd)return gt;nd=1;var o=Symbol.for("react.element"),f=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),S=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),G=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),T=Symbol.iterator;function W(d){return d===null||typeof d!="object"?null:(d=T&&d[T]||d["@@iterator"],typeof d=="function"?d:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xe=Object.assign,Y={};function Z(d,C,ie){this.props=d,this.context=C,this.refs=Y,this.updater=ie||te}Z.prototype.isReactComponent={},Z.prototype.setState=function(d,C){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,C,"setState")},Z.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function V(){}V.prototype=Z.prototype;function M(d,C,ie){this.props=d,this.context=C,this.refs=Y,this.updater=ie||te}var A=M.prototype=new V;A.constructor=M,xe(A,Z.prototype),A.isPureReactComponent=!0;var j=Array.isArray,R=Object.prototype.hasOwnProperty,le={current:null},he={key:!0,ref:!0,__self:!0,__source:!0};function z(d,C,ie){var Ee,Fe={},Le=null,pe=null;if(C!=null)for(Ee in C.ref!==void 0&&(pe=C.ref),C.key!==void 0&&(Le=""+C.key),C)R.call(C,Ee)&&!he.hasOwnProperty(Ee)&&(Fe[Ee]=C[Ee]);var ge=arguments.length-2;if(ge===1)Fe.children=ie;else if(1<ge){for(var O=Array(ge),se=0;se<ge;se++)O[se]=arguments[se+2];Fe.children=O}if(d&&d.defaultProps)for(Ee in ge=d.defaultProps,ge)Fe[Ee]===void 0&&(Fe[Ee]=ge[Ee]);return{$$typeof:o,type:d,key:Le,ref:pe,props:Fe,_owner:le.current}}function ee(d,C){return{$$typeof:o,type:d.type,key:C,ref:d.ref,props:d.props,_owner:d._owner}}function H(d){return typeof d=="object"&&d!==null&&d.$$typeof===o}function K(d){var C={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(ie){return C[ie]})}var je=/\/+/g;function Q(d,C){return typeof d=="object"&&d!==null&&d.key!=null?K(""+d.key):C.toString(36)}function ue(d,C,ie,Ee,Fe){var Le=typeof d;(Le==="undefined"||Le==="boolean")&&(d=null);var pe=!1;if(d===null)pe=!0;else switch(Le){case"string":case"number":pe=!0;break;case"object":switch(d.$$typeof){case o:case f:pe=!0}}if(pe)return pe=d,Fe=Fe(pe),d=Ee===""?"."+Q(pe,0):Ee,j(Fe)?(ie="",d!=null&&(ie=d.replace(je,"$&/")+"/"),ue(Fe,C,ie,"",function(se){return se})):Fe!=null&&(H(Fe)&&(Fe=ee(Fe,ie+(!Fe.key||pe&&pe.key===Fe.key?"":(""+Fe.key).replace(je,"$&/")+"/")+d)),C.push(Fe)),1;if(pe=0,Ee=Ee===""?".":Ee+":",j(d))for(var ge=0;ge<d.length;ge++){Le=d[ge];var O=Ee+Q(Le,ge);pe+=ue(Le,C,ie,O,Fe)}else if(O=W(d),typeof O=="function")for(d=O.call(d),ge=0;!(Le=d.next()).done;)Le=Le.value,O=Ee+Q(Le,ge++),pe+=ue(Le,C,ie,O,Fe);else if(Le==="object")throw C=String(d),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.");return pe}function $e(d,C,ie){if(d==null)return d;var Ee=[],Fe=0;return ue(d,Ee,"","",function(Le){return C.call(ie,Le,Fe++)}),Ee}function oe(d){if(d._status===-1){var C=d._result;C=C(),C.then(function(ie){(d._status===0||d._status===-1)&&(d._status=1,d._result=ie)},function(ie){(d._status===0||d._status===-1)&&(d._status=2,d._result=ie)}),d._status===-1&&(d._status=0,d._result=C)}if(d._status===1)return d._result.default;throw d._result}var X={current:null},w={transition:null},L={ReactCurrentDispatcher:X,ReactCurrentBatchConfig:w,ReactCurrentOwner:le};function F(){throw Error("act(...) is not supported in production builds of React.")}return gt.Children={map:$e,forEach:function(d,C,ie){$e(d,function(){C.apply(this,arguments)},ie)},count:function(d){var C=0;return $e(d,function(){C++}),C},toArray:function(d){return $e(d,function(C){return C})||[]},only:function(d){if(!H(d))throw Error("React.Children.only expected to receive a single React element child.");return d}},gt.Component=Z,gt.Fragment=c,gt.Profiler=x,gt.PureComponent=M,gt.StrictMode=p,gt.Suspense=E,gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,gt.act=F,gt.cloneElement=function(d,C,ie){if(d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+d+".");var Ee=xe({},d.props),Fe=d.key,Le=d.ref,pe=d._owner;if(C!=null){if(C.ref!==void 0&&(Le=C.ref,pe=le.current),C.key!==void 0&&(Fe=""+C.key),d.type&&d.type.defaultProps)var ge=d.type.defaultProps;for(O in C)R.call(C,O)&&!he.hasOwnProperty(O)&&(Ee[O]=C[O]===void 0&&ge!==void 0?ge[O]:C[O])}var O=arguments.length-2;if(O===1)Ee.children=ie;else if(1<O){ge=Array(O);for(var se=0;se<O;se++)ge[se]=arguments[se+2];Ee.children=ge}return{$$typeof:o,type:d.type,key:Fe,ref:Le,props:Ee,_owner:pe}},gt.createContext=function(d){return d={$$typeof:S,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},d.Provider={$$typeof:h,_context:d},d.Consumer=d},gt.createElement=z,gt.createFactory=function(d){var C=z.bind(null,d);return C.type=d,C},gt.createRef=function(){return{current:null}},gt.forwardRef=function(d){return{$$typeof:$,render:d}},gt.isValidElement=H,gt.lazy=function(d){return{$$typeof:J,_payload:{_status:-1,_result:d},_init:oe}},gt.memo=function(d,C){return{$$typeof:G,type:d,compare:C===void 0?null:C}},gt.startTransition=function(d){var C=w.transition;w.transition={};try{d()}finally{w.transition=C}},gt.unstable_act=F,gt.useCallback=function(d,C){return X.current.useCallback(d,C)},gt.useContext=function(d){return X.current.useContext(d)},gt.useDebugValue=function(){},gt.useDeferredValue=function(d){return X.current.useDeferredValue(d)},gt.useEffect=function(d,C){return X.current.useEffect(d,C)},gt.useId=function(){return X.current.useId()},gt.useImperativeHandle=function(d,C,ie){return X.current.useImperativeHandle(d,C,ie)},gt.useInsertionEffect=function(d,C){return X.current.useInsertionEffect(d,C)},gt.useLayoutEffect=function(d,C){return X.current.useLayoutEffect(d,C)},gt.useMemo=function(d,C){return X.current.useMemo(d,C)},gt.useReducer=function(d,C,ie){return X.current.useReducer(d,C,ie)},gt.useRef=function(d){return X.current.useRef(d)},gt.useState=function(d){return X.current.useState(d)},gt.useSyncExternalStore=function(d,C,ie){return X.current.useSyncExternalStore(d,C,ie)},gt.useTransition=function(){return X.current.useTransition()},gt.version="18.3.1",gt}var rd;function Ki(){return rd||(rd=1,_i.exports=Ff()),_i.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sd;function Bf(){if(sd)return Xl;sd=1;var o=Ki(),f=Symbol.for("react.element"),c=Symbol.for("react.fragment"),p=Object.prototype.hasOwnProperty,x=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function S($,E,G){var J,T={},W=null,te=null;G!==void 0&&(W=""+G),E.key!==void 0&&(W=""+E.key),E.ref!==void 0&&(te=E.ref);for(J in E)p.call(E,J)&&!h.hasOwnProperty(J)&&(T[J]=E[J]);if($&&$.defaultProps)for(J in E=$.defaultProps,E)T[J]===void 0&&(T[J]=E[J]);return{$$typeof:f,type:$,key:W,ref:te,props:T,_owner:x.current}}return Xl.Fragment=c,Xl.jsx=S,Xl.jsxs=S,Xl}var ld;function Uf(){return ld||(ld=1,Pi.exports=Bf()),Pi.exports}var r=Uf(),ce=Ki();const y=wd(ce);var ea={},Ti={exports:{}},Rn={},Ai={exports:{}},Oi={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od;function Hf(){return od||(od=1,(function(o){function f(w,L){var F=w.length;w.push(L);e:for(;0<F;){var d=F-1>>>1,C=w[d];if(0<x(C,L))w[d]=L,w[F]=C,F=d;else break e}}function c(w){return w.length===0?null:w[0]}function p(w){if(w.length===0)return null;var L=w[0],F=w.pop();if(F!==L){w[0]=F;e:for(var d=0,C=w.length,ie=C>>>1;d<ie;){var Ee=2*(d+1)-1,Fe=w[Ee],Le=Ee+1,pe=w[Le];if(0>x(Fe,F))Le<C&&0>x(pe,Fe)?(w[d]=pe,w[Le]=F,d=Le):(w[d]=Fe,w[Ee]=F,d=Ee);else if(Le<C&&0>x(pe,F))w[d]=pe,w[Le]=F,d=Le;else break e}}return L}function x(w,L){var F=w.sortIndex-L.sortIndex;return F!==0?F:w.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;o.unstable_now=function(){return h.now()}}else{var S=Date,$=S.now();o.unstable_now=function(){return S.now()-$}}var E=[],G=[],J=1,T=null,W=3,te=!1,xe=!1,Y=!1,Z=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(w){for(var L=c(G);L!==null;){if(L.callback===null)p(G);else if(L.startTime<=w)p(G),L.sortIndex=L.expirationTime,f(E,L);else break;L=c(G)}}function j(w){if(Y=!1,A(w),!xe)if(c(E)!==null)xe=!0,oe(R);else{var L=c(G);L!==null&&X(j,L.startTime-w)}}function R(w,L){xe=!1,Y&&(Y=!1,V(z),z=-1),te=!0;var F=W;try{for(A(L),T=c(E);T!==null&&(!(T.expirationTime>L)||w&&!K());){var d=T.callback;if(typeof d=="function"){T.callback=null,W=T.priorityLevel;var C=d(T.expirationTime<=L);L=o.unstable_now(),typeof C=="function"?T.callback=C:T===c(E)&&p(E),A(L)}else p(E);T=c(E)}if(T!==null)var ie=!0;else{var Ee=c(G);Ee!==null&&X(j,Ee.startTime-L),ie=!1}return ie}finally{T=null,W=F,te=!1}}var le=!1,he=null,z=-1,ee=5,H=-1;function K(){return!(o.unstable_now()-H<ee)}function je(){if(he!==null){var w=o.unstable_now();H=w;var L=!0;try{L=he(!0,w)}finally{L?Q():(le=!1,he=null)}}else le=!1}var Q;if(typeof M=="function")Q=function(){M(je)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,$e=ue.port2;ue.port1.onmessage=je,Q=function(){$e.postMessage(null)}}else Q=function(){Z(je,0)};function oe(w){he=w,le||(le=!0,Q())}function X(w,L){z=Z(function(){w(o.unstable_now())},L)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(w){w.callback=null},o.unstable_continueExecution=function(){xe||te||(xe=!0,oe(R))},o.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<w?Math.floor(1e3/w):5},o.unstable_getCurrentPriorityLevel=function(){return W},o.unstable_getFirstCallbackNode=function(){return c(E)},o.unstable_next=function(w){switch(W){case 1:case 2:case 3:var L=3;break;default:L=W}var F=W;W=L;try{return w()}finally{W=F}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(w,L){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var F=W;W=w;try{return L()}finally{W=F}},o.unstable_scheduleCallback=function(w,L,F){var d=o.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?d+F:d):F=d,w){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=F+C,w={id:J++,callback:L,priorityLevel:w,startTime:F,expirationTime:C,sortIndex:-1},F>d?(w.sortIndex=F,f(G,w),c(E)===null&&w===c(G)&&(Y?(V(z),z=-1):Y=!0,X(j,F-d))):(w.sortIndex=C,f(E,w),xe||te||(xe=!0,oe(R))),w},o.unstable_shouldYield=K,o.unstable_wrapCallback=function(w){var L=W;return function(){var F=W;W=L;try{return w.apply(this,arguments)}finally{W=F}}}})(Oi)),Oi}var ad;function Wf(){return ad||(ad=1,Ai.exports=Hf()),Ai.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id;function Vf(){if(id)return Rn;id=1;var o=Ki(),f=Wf();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,x={};function h(e,t){S(e,t),S(e+"Capture",t)}function S(e,t){for(x[e]=t,e=0;e<t.length;e++)p.add(t[e])}var $=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,G=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J={},T={};function W(e){return E.call(T,e)?!0:E.call(J,e)?!1:G.test(e)?T[e]=!0:(J[e]=!0,!1)}function te(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xe(e,t,n,s){if(t===null||typeof t>"u"||te(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Y(e,t,n,s,l,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Z[e]=new Y(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Z[t]=new Y(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Z[e]=new Y(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Z[e]=new Y(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Z[e]=new Y(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){Z[e]=new Y(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){Z[e]=new Y(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){Z[e]=new Y(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){Z[e]=new Y(e,5,!1,e.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(V,M);Z[t]=new Y(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(V,M);Z[t]=new Y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(V,M);Z[t]=new Y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){Z[e]=new Y(e,1,!1,e.toLowerCase(),null,!1,!1)}),Z.xlinkHref=new Y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){Z[e]=new Y(e,1,!1,e.toLowerCase(),null,!0,!0)});function A(e,t,n,s){var l=Z.hasOwnProperty(t)?Z[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xe(t,n,l,s)&&(n=null),s||l===null?W(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,s=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var j=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),le=Symbol.for("react.portal"),he=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),K=Symbol.for("react.context"),je=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),X=Symbol.for("react.offscreen"),w=Symbol.iterator;function L(e){return e===null||typeof e!="object"?null:(e=w&&e[w]||e["@@iterator"],typeof e=="function"?e:null)}var F=Object.assign,d;function C(e){if(d===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);d=t&&t[1]||""}return`
`+d+e}var ie=!1;function Ee(e,t){if(!e||ie)return"";ie=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(B){var s=B}Reflect.construct(e,[],t)}else{try{t.call()}catch(B){s=B}e.call(t.prototype)}else{try{throw Error()}catch(B){s=B}e()}}catch(B){if(B&&s&&typeof B.stack=="string"){for(var l=B.stack.split(`
`),a=s.stack.split(`
`),i=l.length-1,m=a.length-1;1<=i&&0<=m&&l[i]!==a[m];)m--;for(;1<=i&&0<=m;i--,m--)if(l[i]!==a[m]){if(i!==1||m!==1)do if(i--,m--,0>m||l[i]!==a[m]){var g=`
`+l[i].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=i&&0<=m);break}}}finally{ie=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?C(e):""}function Fe(e){switch(e.tag){case 5:return C(e.type);case 16:return C("Lazy");case 13:return C("Suspense");case 19:return C("SuspenseList");case 0:case 2:case 15:return e=Ee(e.type,!1),e;case 11:return e=Ee(e.type.render,!1),e;case 1:return e=Ee(e.type,!0),e;default:return""}}function Le(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case he:return"Fragment";case le:return"Portal";case ee:return"Profiler";case z:return"StrictMode";case Q:return"Suspense";case ue:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case K:return(e.displayName||"Context")+".Consumer";case H:return(e._context.displayName||"Context")+".Provider";case je:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $e:return t=e.displayName||null,t!==null?t:Le(e.type)||"Memo";case oe:t=e._payload,e=e._init;try{return Le(e(t))}catch{}}return null}function pe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(t);case 8:return t===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ge(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function O(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function se(e){var t=O(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Te(e){e._valueTracker||(e._valueTracker=se(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=O(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ie(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ct(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Je(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ge(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nt(e,t){t=t.checked,t!=null&&A(e,"checked",t,!1)}function Ct(e,t){nt(e,t);var n=ge(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xe(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xe(e,t.type,ge(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Et(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xe(e,t,n){(t!=="number"||Ie(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yt=Array.isArray;function pt(e,t,n,s){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ye(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(c(92));if(yt(n)){if(1<n.length)throw Error(c(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function We(e,t){var n=ge(t.value),s=ge(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function N(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function k(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?k(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var fe,Ue=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function q(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var we={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U=["Webkit","ms","Moz","O"];Object.keys(we).forEach(function(e){U.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),we[t]=we[e]})});function De(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||we.hasOwnProperty(e)&&we[e]?(""+t).trim():t+"px"}function Ke(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=De(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,l):e[n]=l}}var st=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function et(e,t){if(t){if(st[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function vt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mt=null;function ft(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pt=null,Bt=null,Rt=null;function ut(e){if(e=_l(e)){if(typeof Pt!="function")throw Error(c(280));var t=e.stateNode;t&&(t=po(t),Pt(e.stateNode,e.type,t))}}function zt(e){Bt?Rt?Rt.push(e):Rt=[e]:Bt=e}function $t(){if(Bt){var e=Bt,t=Rt;if(Rt=Bt=null,ut(e),t)for(e=0;e<t.length;e++)ut(t[e])}}function _t(e,t){return e(t)}function tt(){}var At=!1;function Ce(e,t,n){if(At)return e(t,n);At=!0;try{return _t(e,t,n)}finally{At=!1,(Bt!==null||Rt!==null)&&(tt(),$t())}}function lt(e,t){var n=e.stateNode;if(n===null)return null;var s=po(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var jt=!1;if($)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{jt=!1}function Nt(e,t,n,s,l,a,i,m,g){var B=Array.prototype.slice.call(arguments,3);try{t.apply(n,B)}catch(me){this.onError(me)}}var St=!1,Kt=null,Wt=!1,cn=null,sn={onError:function(e){St=!0,Kt=e}};function xr(e,t,n,s,l,a,i,m,g){St=!1,Kt=null,Nt.apply(sn,arguments)}function sr(e,t,n,s,l,a,i,m,g){if(xr.apply(this,arguments),St){if(St){var B=Kt;St=!1,Kt=null}else throw Error(c(198));Wt||(Wt=!0,cn=B)}}function en(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Mr(e){if(en(e)!==e)throw Error(c(188))}function zn(e){var t=e.alternate;if(!t){if(t=en(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,s=t;;){var l=n.return;if(l===null)break;var a=l.alternate;if(a===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return Mr(l),e;if(a===s)return Mr(l),t;a=a.sibling}throw Error(c(188))}if(n.return!==s.return)n=l,s=a;else{for(var i=!1,m=l.child;m;){if(m===n){i=!0,n=l,s=a;break}if(m===s){i=!0,s=l,n=a;break}m=m.sibling}if(!i){for(m=a.child;m;){if(m===n){i=!0,n=a,s=l;break}if(m===s){i=!0,s=a,n=l;break}m=m.sibling}if(!i)throw Error(c(189))}}if(n.alternate!==s)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function Qn(e){return e=zn(e),e!==null?I(e):null}function I(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=I(e);if(t!==null)return t;e=e.sibling}return null}var Me=f.unstable_scheduleCallback,Oe=f.unstable_cancelCallback,Pe=f.unstable_shouldYield,ke=f.unstable_requestPaint,_e=f.unstable_now,Ae=f.unstable_getCurrentPriorityLevel,ot=f.unstable_ImmediatePriority,Lt=f.unstable_UserBlockingPriority,Ot=f.unstable_NormalPriority,kn=f.unstable_LowPriority,Tt=f.unstable_IdlePriority,yn=null,ln=null;function or(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(yn,e,void 0,(e.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:hl,Tr=Math.log,eo=Math.LN2;function hl(e){return e>>>=0,e===0?32:31-(Tr(e)/eo|0)|0}var as=64,Ar=4194304;function Or(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Rr(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var m=i&~l;m!==0?s=Or(m):(a&=i,a!==0&&(s=Or(a)))}else i=n&~l,i!==0?s=Or(i):a!==0&&(s=Or(a));if(s===0)return 0;if(t!==0&&t!==s&&(t&l)===0&&(l=s&-s,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-vn(t),l=1<<n,s|=e[n],t&=~l;return s}function to(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-vn(a),m=1<<i,g=l[i];g===-1?((m&n)===0||(m&s)!==0)&&(l[i]=to(m,t)):g<=t&&(e.expiredLanes|=m),a&=~m}}function Rs(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function is(){var e=as;return as<<=1,(as&4194240)===0&&(as=64),e}function zs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=n}function no(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-vn(n),a=1<<l;t[l]=0,s[l]=-1,e[l]=-1,n&=~a}}function zr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-vn(n),l=1<<s;l&t|e[s]&t&&(e[s]|=t),n&=~l}}var Mt=0;function xl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var gl,Fn,ro,Fs,yl,Fr=!1,Br=[],Bn=null,Yn=null,Un=null,kr=new Map,Ur=new Map,Xn=[],ia="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vl(e,t){switch(e){case"focusin":case"focusout":Bn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":kr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(t.pointerId)}}function yr(e,t,n,s,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[l]},t!==null&&(t=_l(t),t!==null&&Fn(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function ua(e,t,n,s,l){switch(t){case"focusin":return Bn=yr(Bn,e,t,n,s,l),!0;case"dragenter":return Yn=yr(Yn,e,t,n,s,l),!0;case"mouseover":return Un=yr(Un,e,t,n,s,l),!0;case"pointerover":var a=l.pointerId;return kr.set(a,yr(kr.get(a)||null,e,t,n,s,l)),!0;case"gotpointercapture":return a=l.pointerId,Ur.set(a,yr(Ur.get(a)||null,e,t,n,s,l)),!0}return!1}function us(e){var t=bs(e.target);if(t!==null){var n=en(t);if(n!==null){if(t=n.tag,t===13){if(t=lr(n),t!==null){e.blockedOn=t,yl(e.priority,function(){ro(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ms(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);mt=s,n.target.dispatchEvent(s),mt=null}else return t=_l(n),t!==null&&Fn(t),e.blockedOn=n,!1;t.shift()}return!0}function cs(e,t,n){Bs(e)&&n.delete(t)}function ca(){Fr=!1,Bn!==null&&Bs(Bn)&&(Bn=null),Yn!==null&&Bs(Yn)&&(Yn=null),Un!==null&&Bs(Un)&&(Un=null),kr.forEach(cs),Ur.forEach(cs)}function Gn(e,t){e.blockedOn===t&&(e.blockedOn=null,Fr||(Fr=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,ca)))}function ds(e){function t(l){return Gn(l,e)}if(0<Br.length){Gn(Br[0],e);for(var n=1;n<Br.length;n++){var s=Br[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Bn!==null&&Gn(Bn,e),Yn!==null&&Gn(Yn,e),Un!==null&&Gn(Un,e),kr.forEach(t),Ur.forEach(t),n=0;n<Xn.length;n++)s=Xn[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)us(n),n.blockedOn===null&&Xn.shift()}var Hn=j.ReactCurrentBatchConfig,fs=!0;function so(e,t,n,s){var l=Mt,a=Hn.transition;Hn.transition=null;try{Mt=1,Us(e,t,n,s)}finally{Mt=l,Hn.transition=a}}function da(e,t,n,s){var l=Mt,a=Hn.transition;Hn.transition=null;try{Mt=4,Us(e,t,n,s)}finally{Mt=l,Hn.transition=a}}function Us(e,t,n,s){if(fs){var l=ms(e,t,n,s);if(l===null)Na(e,t,s,Hs,n),vl(e,s);else if(ua(l,e,t,n,s))s.stopPropagation();else if(vl(e,s),t&4&&-1<ia.indexOf(e)){for(;l!==null;){var a=_l(l);if(a!==null&&gl(a),a=ms(e,t,n,s),a===null&&Na(e,t,s,Hs,n),a===l)break;l=a}l!==null&&s.stopPropagation()}else Na(e,t,s,null,n)}}var Hs=null;function ms(e,t,n,s){if(Hs=null,e=ft(s),e=bs(e),e!==null)if(t=en(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lr(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hs=e,null}function lo(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ae()){case ot:return 1;case Lt:return 4;case Ot:case kn:return 16;case Tt:return 536870912;default:return 16}default:return 16}}var ar=null,wl=null,vr=null;function jl(){if(vr)return vr;var e,t=wl,n=t.length,s,l="value"in ar?ar.value:ar.textContent,a=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===l[a-s];s++);return vr=l.slice(e,1<s?1-s:void 0)}function hs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function oo(){return!1}function dn(e){function t(n,s,l,a,i){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(n=e[m],this[m]=n?n(a):a[m]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ws:oo,this.isPropagationStopped=oo,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=dn(Hr),ps=F({},Hr,{view:0,detail:0}),fa=dn(ps),Nl,Sl,xs,u=F({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jt,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xs&&(xs&&e.type==="mousemove"?(Nl=e.screenX-xs.screenX,Sl=e.screenY-xs.screenY):Sl=Nl=0,xs=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),v=dn(u),ne=F({},u,{dataTransfer:0}),re=dn(ne),Se=F({},ps,{relatedTarget:0}),Ge=dn(Se),xt=F({},Hr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qt=dn(xt),wt=F({},Hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dt=dn(wt),ht=F({},Hr,{data:0}),fn=dn(ht),P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mn[e])?!!t[e]:!1}function Jt(){return hn}var $n=F({},ps,{key:function(e){if(e.key){var t=P[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jt,charCode:function(e){return e.type==="keypress"?hs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ln=dn($n),gs=F({},u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wr=dn(gs),ys=F({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jt}),vs=dn(ys),ws=F({},Hr,{propertyName:0,elapsedTime:0,pseudoElement:0}),js=dn(ws),ir=F({},u,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pd=dn(ir),_d=[9,13,27,32],ma=$&&"CompositionEvent"in window,Ml=null;$&&"documentMode"in document&&(Ml=document.documentMode);var Td=$&&"TextEvent"in window&&!Ml,Yi=$&&(!ma||Ml&&8<Ml&&11>=Ml),Xi=" ",Gi=!1;function Ji(e,t){switch(e){case"keyup":return _d.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vs=!1;function Ad(e,t){switch(e){case"compositionend":return Zi(t);case"keypress":return t.which!==32?null:(Gi=!0,Xi);case"textInput":return e=t.data,e===Xi&&Gi?null:e;default:return null}}function Od(e,t){if(Vs)return e==="compositionend"||!ma&&Ji(e,t)?(e=jl(),vr=wl=ar=null,Vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yi&&t.locale!=="ko"?null:t.data;default:return null}}var Rd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Rd[e.type]:t==="textarea"}function eu(e,t,n,s){zt(s),t=fo(t,"onChange"),0<t.length&&(n=new bl("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var kl=null,Cl=null;function zd(e){yu(e,0)}function ao(e){var t=Gs(e);if(Ye(t))return e}function Fd(e,t){if(e==="change")return t}var tu=!1;if($){var ha;if($){var pa="oninput"in document;if(!pa){var nu=document.createElement("div");nu.setAttribute("oninput","return;"),pa=typeof nu.oninput=="function"}ha=pa}else ha=!1;tu=ha&&(!document.documentMode||9<document.documentMode)}function ru(){kl&&(kl.detachEvent("onpropertychange",su),Cl=kl=null)}function su(e){if(e.propertyName==="value"&&ao(Cl)){var t=[];eu(t,Cl,e,ft(e)),Ce(zd,t)}}function Bd(e,t,n){e==="focusin"?(ru(),kl=t,Cl=n,kl.attachEvent("onpropertychange",su)):e==="focusout"&&ru()}function Ud(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(Cl)}function Hd(e,t){if(e==="click")return ao(t)}function Wd(e,t){if(e==="input"||e==="change")return ao(t)}function Vd(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ur=typeof Object.is=="function"?Object.is:Vd;function El(e,t){if(ur(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!E.call(t,l)||!ur(e[l],t[l]))return!1}return!0}function lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ou(e,t){var n=lu(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lu(n)}}function au(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?au(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iu(){for(var e=window,t=Ie();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ie(e.document)}return t}function xa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kd(e){var t=iu(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&au(n.ownerDocument.documentElement,n)){if(s!==null&&xa(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,a=Math.min(s.start,l);s=s.end===void 0?a:Math.min(s.end,l),!e.extend&&a>s&&(l=s,s=a,a=l),l=ou(n,a);var i=ou(n,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Qd=$&&"documentMode"in document&&11>=document.documentMode,Ks=null,ga=null,Dl=null,ya=!1;function uu(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ya||Ks==null||Ks!==Ie(s)||(s=Ks,"selectionStart"in s&&xa(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Dl&&El(Dl,s)||(Dl=s,s=fo(ga,"onSelect"),0<s.length&&(t=new bl("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ks)))}function io(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qs={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionend:io("Transition","TransitionEnd")},va={},cu={};$&&(cu=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function uo(e){if(va[e])return va[e];if(!Qs[e])return e;var t=Qs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in cu)return va[e]=t[n];return e}var du=uo("animationend"),fu=uo("animationiteration"),mu=uo("animationstart"),hu=uo("transitionend"),pu=new Map,xu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(e,t){pu.set(e,t),h(t,[e])}for(var wa=0;wa<xu.length;wa++){var ja=xu[wa],Yd=ja.toLowerCase(),Xd=ja[0].toUpperCase()+ja.slice(1);Vr(Yd,"on"+Xd)}Vr(du,"onAnimationEnd"),Vr(fu,"onAnimationIteration"),Vr(mu,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(hu,"onTransitionEnd"),S("onMouseEnter",["mouseout","mouseover"]),S("onMouseLeave",["mouseout","mouseover"]),S("onPointerEnter",["pointerout","pointerover"]),S("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function gu(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,sr(s,t,void 0,e),e.currentTarget=null}function yu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],l=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var m=s[i],g=m.instance,B=m.currentTarget;if(m=m.listener,g!==a&&l.isPropagationStopped())break e;gu(l,m,B),a=g}else for(i=0;i<s.length;i++){if(m=s[i],g=m.instance,B=m.currentTarget,m=m.listener,g!==a&&l.isPropagationStopped())break e;gu(l,m,B),a=g}}}if(Wt)throw e=cn,Wt=!1,cn=null,e}function Ut(e,t){var n=t[Da];n===void 0&&(n=t[Da]=new Set);var s=e+"__bubble";n.has(s)||(vu(t,e,2,!1),n.add(s))}function ba(e,t,n){var s=0;t&&(s|=4),vu(n,e,s,t)}var co="_reactListening"+Math.random().toString(36).slice(2);function $l(e){if(!e[co]){e[co]=!0,p.forEach(function(n){n!=="selectionchange"&&(Gd.has(n)||ba(n,!1,e),ba(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[co]||(t[co]=!0,ba("selectionchange",!1,t))}}function vu(e,t,n,s){switch(lo(t)){case 1:var l=so;break;case 4:l=da;break;default:l=Us}n=l.bind(null,t,n,e),l=void 0,!jt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Na(e,t,n,s,l){var a=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var m=s.stateNode.containerInfo;if(m===l||m.nodeType===8&&m.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var g=i.tag;if((g===3||g===4)&&(g=i.stateNode.containerInfo,g===l||g.nodeType===8&&g.parentNode===l))return;i=i.return}for(;m!==null;){if(i=bs(m),i===null)return;if(g=i.tag,g===5||g===6){s=a=i;continue e}m=m.parentNode}}s=s.return}Ce(function(){var B=a,me=ft(n),ve=[];e:{var de=pu.get(e);if(de!==void 0){var ze=bl,He=e;switch(e){case"keypress":if(hs(n)===0)break e;case"keydown":case"keyup":ze=Ln;break;case"focusin":He="focus",ze=Ge;break;case"focusout":He="blur",ze=Ge;break;case"beforeblur":case"afterblur":ze=Ge;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=v;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=re;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=vs;break;case du:case fu:case mu:ze=Qt;break;case hu:ze=js;break;case"scroll":ze=fa;break;case"wheel":ze=Pd;break;case"copy":case"cut":case"paste":ze=Dt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Wr}var Ve=(t&4)!==0,Zt=!Ve&&e==="scroll",D=Ve?de!==null?de+"Capture":null:de;Ve=[];for(var b=B,_;b!==null;){_=b;var Ne=_.stateNode;if(_.tag===5&&Ne!==null&&(_=Ne,D!==null&&(Ne=lt(b,D),Ne!=null&&Ve.push(Ll(b,Ne,_)))),Zt)break;b=b.return}0<Ve.length&&(de=new ze(de,He,null,n,me),ve.push({event:de,listeners:Ve}))}}if((t&7)===0){e:{if(de=e==="mouseover"||e==="pointerover",ze=e==="mouseout"||e==="pointerout",de&&n!==mt&&(He=n.relatedTarget||n.fromElement)&&(bs(He)||He[Cr]))break e;if((ze||de)&&(de=me.window===me?me:(de=me.ownerDocument)?de.defaultView||de.parentWindow:window,ze?(He=n.relatedTarget||n.toElement,ze=B,He=He?bs(He):null,He!==null&&(Zt=en(He),He!==Zt||He.tag!==5&&He.tag!==6)&&(He=null)):(ze=null,He=B),ze!==He)){if(Ve=v,Ne="onMouseLeave",D="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=Wr,Ne="onPointerLeave",D="onPointerEnter",b="pointer"),Zt=ze==null?de:Gs(ze),_=He==null?de:Gs(He),de=new Ve(Ne,b+"leave",ze,n,me),de.target=Zt,de.relatedTarget=_,Ne=null,bs(me)===B&&(Ve=new Ve(D,b+"enter",He,n,me),Ve.target=_,Ve.relatedTarget=Zt,Ne=Ve),Zt=Ne,ze&&He)t:{for(Ve=ze,D=He,b=0,_=Ve;_;_=Ys(_))b++;for(_=0,Ne=D;Ne;Ne=Ys(Ne))_++;for(;0<b-_;)Ve=Ys(Ve),b--;for(;0<_-b;)D=Ys(D),_--;for(;b--;){if(Ve===D||D!==null&&Ve===D.alternate)break t;Ve=Ys(Ve),D=Ys(D)}Ve=null}else Ve=null;ze!==null&&wu(ve,de,ze,Ve,!1),He!==null&&Zt!==null&&wu(ve,Zt,He,Ve,!0)}}e:{if(de=B?Gs(B):window,ze=de.nodeName&&de.nodeName.toLowerCase(),ze==="select"||ze==="input"&&de.type==="file")var Qe=Fd;else if(qi(de))if(tu)Qe=Wd;else{Qe=Ud;var Ze=Bd}else(ze=de.nodeName)&&ze.toLowerCase()==="input"&&(de.type==="checkbox"||de.type==="radio")&&(Qe=Hd);if(Qe&&(Qe=Qe(e,B))){eu(ve,Qe,n,me);break e}Ze&&Ze(e,de,B),e==="focusout"&&(Ze=de._wrapperState)&&Ze.controlled&&de.type==="number"&&Xe(de,"number",de.value)}switch(Ze=B?Gs(B):window,e){case"focusin":(qi(Ze)||Ze.contentEditable==="true")&&(Ks=Ze,ga=B,Dl=null);break;case"focusout":Dl=ga=Ks=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,uu(ve,n,me);break;case"selectionchange":if(Qd)break;case"keydown":case"keyup":uu(ve,n,me)}var qe;if(ma)e:{switch(e){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Vs?Ji(e,n)&&(at="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(at="onCompositionStart");at&&(Yi&&n.locale!=="ko"&&(Vs||at!=="onCompositionStart"?at==="onCompositionEnd"&&Vs&&(qe=jl()):(ar=me,wl="value"in ar?ar.value:ar.textContent,Vs=!0)),Ze=fo(B,at),0<Ze.length&&(at=new fn(at,e,null,n,me),ve.push({event:at,listeners:Ze}),qe?at.data=qe:(qe=Zi(n),qe!==null&&(at.data=qe)))),(qe=Td?Ad(e,n):Od(e,n))&&(B=fo(B,"onBeforeInput"),0<B.length&&(me=new fn("onBeforeInput","beforeinput",null,n,me),ve.push({event:me,listeners:B}),me.data=qe))}yu(ve,t)})}function Ll(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fo(e,t){for(var n=t+"Capture",s=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=lt(e,n),a!=null&&s.unshift(Ll(e,a,l)),a=lt(e,t),a!=null&&s.push(Ll(e,a,l))),e=e.return}return s}function Ys(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function wu(e,t,n,s,l){for(var a=t._reactName,i=[];n!==null&&n!==s;){var m=n,g=m.alternate,B=m.stateNode;if(g!==null&&g===s)break;m.tag===5&&B!==null&&(m=B,l?(g=lt(n,a),g!=null&&i.unshift(Ll(n,g,m))):l||(g=lt(n,a),g!=null&&i.push(Ll(n,g,m)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Jd=/\r\n?/g,Zd=/\u0000|\uFFFD/g;function ju(e){return(typeof e=="string"?e:""+e).replace(Jd,`
`).replace(Zd,"")}function mo(e,t,n){if(t=ju(t),ju(e)!==t&&n)throw Error(c(425))}function ho(){}var Sa=null,Ma=null;function ka(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ca=typeof setTimeout=="function"?setTimeout:void 0,qd=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,ef=typeof queueMicrotask=="function"?queueMicrotask:typeof bu<"u"?function(e){return bu.resolve(null).then(e).catch(tf)}:Ca;function tf(e){setTimeout(function(){throw e})}function Ea(e,t){var n=t,s=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){e.removeChild(l),ds(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);ds(t)}function Kr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Xs=Math.random().toString(36).slice(2),wr="__reactFiber$"+Xs,Pl="__reactProps$"+Xs,Cr="__reactContainer$"+Xs,Da="__reactEvents$"+Xs,nf="__reactListeners$"+Xs,rf="__reactHandles$"+Xs;function bs(e){var t=e[wr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cr]||n[wr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nu(e);e!==null;){if(n=e[wr])return n;e=Nu(e)}return t}e=n,n=e.parentNode}return null}function _l(e){return e=e[wr]||e[Cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function po(e){return e[Pl]||null}var Ia=[],Js=-1;function Qr(e){return{current:e}}function Ht(e){0>Js||(e.current=Ia[Js],Ia[Js]=null,Js--)}function Ft(e,t){Js++,Ia[Js]=e.current,e.current=t}var Yr={},wn=Qr(Yr),Pn=Qr(!1),Ns=Yr;function Zs(e,t){var n=e.type.contextTypes;if(!n)return Yr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in n)l[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function _n(e){return e=e.childContextTypes,e!=null}function xo(){Ht(Pn),Ht(wn)}function Su(e,t,n){if(wn.current!==Yr)throw Error(c(168));Ft(wn,t),Ft(Pn,n)}function Mu(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(c(108,pe(e)||"Unknown",l));return F({},n,s)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yr,Ns=wn.current,Ft(wn,e),Ft(Pn,Pn.current),!0}function ku(e,t,n){var s=e.stateNode;if(!s)throw Error(c(169));n?(e=Mu(e,t,Ns),s.__reactInternalMemoizedMergedChildContext=e,Ht(Pn),Ht(wn),Ft(wn,e)):Ht(Pn),Ft(Pn,n)}var Er=null,yo=!1,$a=!1;function Cu(e){Er===null?Er=[e]:Er.push(e)}function sf(e){yo=!0,Cu(e)}function Xr(){if(!$a&&Er!==null){$a=!0;var e=0,t=Mt;try{var n=Er;for(Mt=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Er=null,yo=!1}catch(l){throw Er!==null&&(Er=Er.slice(e+1)),Me(ot,Xr),l}finally{Mt=t,$a=!1}}return null}var qs=[],el=0,vo=null,wo=0,Jn=[],Zn=0,Ss=null,Dr=1,Ir="";function Ms(e,t){qs[el++]=wo,qs[el++]=vo,vo=e,wo=t}function Eu(e,t,n){Jn[Zn++]=Dr,Jn[Zn++]=Ir,Jn[Zn++]=Ss,Ss=e;var s=Dr;e=Ir;var l=32-vn(s)-1;s&=~(1<<l),n+=1;var a=32-vn(t)+l;if(30<a){var i=l-l%5;a=(s&(1<<i)-1).toString(32),s>>=i,l-=i,Dr=1<<32-vn(t)+l|n<<l|s,Ir=a+e}else Dr=1<<a|n<<l|s,Ir=e}function La(e){e.return!==null&&(Ms(e,1),Eu(e,1,0))}function Pa(e){for(;e===vo;)vo=qs[--el],qs[el]=null,wo=qs[--el],qs[el]=null;for(;e===Ss;)Ss=Jn[--Zn],Jn[Zn]=null,Ir=Jn[--Zn],Jn[Zn]=null,Dr=Jn[--Zn],Jn[Zn]=null}var Wn=null,Vn=null,Vt=!1,cr=null;function Du(e,t){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Iu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wn=e,Vn=Kr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wn=e,Vn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ss!==null?{id:Dr,overflow:Ir}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wn=e,Vn=null,!0):!1;default:return!1}}function _a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ta(e){if(Vt){var t=Vn;if(t){var n=t;if(!Iu(e,t)){if(_a(e))throw Error(c(418));t=Kr(n.nextSibling);var s=Wn;t&&Iu(e,t)?Du(s,n):(e.flags=e.flags&-4097|2,Vt=!1,Wn=e)}}else{if(_a(e))throw Error(c(418));e.flags=e.flags&-4097|2,Vt=!1,Wn=e}}}function $u(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wn=e}function jo(e){if(e!==Wn)return!1;if(!Vt)return $u(e),Vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ka(e.type,e.memoizedProps)),t&&(t=Vn)){if(_a(e))throw Lu(),Error(c(418));for(;t;)Du(e,t),t=Kr(t.nextSibling)}if($u(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vn=Kr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vn=null}}else Vn=Wn?Kr(e.stateNode.nextSibling):null;return!0}function Lu(){for(var e=Vn;e;)e=Kr(e.nextSibling)}function tl(){Vn=Wn=null,Vt=!1}function Aa(e){cr===null?cr=[e]:cr.push(e)}var lf=j.ReactCurrentBatchConfig;function Tl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var s=n.stateNode}if(!s)throw Error(c(147,e));var l=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var m=l.refs;i===null?delete m[a]:m[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Pu(e){var t=e._init;return t(e._payload)}function _u(e){function t(D,b){if(e){var _=D.deletions;_===null?(D.deletions=[b],D.flags|=16):_.push(b)}}function n(D,b){if(!e)return null;for(;b!==null;)t(D,b),b=b.sibling;return null}function s(D,b){for(D=new Map;b!==null;)b.key!==null?D.set(b.key,b):D.set(b.index,b),b=b.sibling;return D}function l(D,b){return D=rs(D,b),D.index=0,D.sibling=null,D}function a(D,b,_){return D.index=_,e?(_=D.alternate,_!==null?(_=_.index,_<b?(D.flags|=2,b):_):(D.flags|=2,b)):(D.flags|=1048576,b)}function i(D){return e&&D.alternate===null&&(D.flags|=2),D}function m(D,b,_,Ne){return b===null||b.tag!==6?(b=Ci(_,D.mode,Ne),b.return=D,b):(b=l(b,_),b.return=D,b)}function g(D,b,_,Ne){var Qe=_.type;return Qe===he?me(D,b,_.props.children,Ne,_.key):b!==null&&(b.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===oe&&Pu(Qe)===b.type)?(Ne=l(b,_.props),Ne.ref=Tl(D,b,_),Ne.return=D,Ne):(Ne=Ko(_.type,_.key,_.props,null,D.mode,Ne),Ne.ref=Tl(D,b,_),Ne.return=D,Ne)}function B(D,b,_,Ne){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Ei(_,D.mode,Ne),b.return=D,b):(b=l(b,_.children||[]),b.return=D,b)}function me(D,b,_,Ne,Qe){return b===null||b.tag!==7?(b=Ps(_,D.mode,Ne,Qe),b.return=D,b):(b=l(b,_),b.return=D,b)}function ve(D,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ci(""+b,D.mode,_),b.return=D,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case R:return _=Ko(b.type,b.key,b.props,null,D.mode,_),_.ref=Tl(D,null,b),_.return=D,_;case le:return b=Ei(b,D.mode,_),b.return=D,b;case oe:var Ne=b._init;return ve(D,Ne(b._payload),_)}if(yt(b)||L(b))return b=Ps(b,D.mode,_,null),b.return=D,b;bo(D,b)}return null}function de(D,b,_,Ne){var Qe=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return Qe!==null?null:m(D,b,""+_,Ne);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case R:return _.key===Qe?g(D,b,_,Ne):null;case le:return _.key===Qe?B(D,b,_,Ne):null;case oe:return Qe=_._init,de(D,b,Qe(_._payload),Ne)}if(yt(_)||L(_))return Qe!==null?null:me(D,b,_,Ne,null);bo(D,_)}return null}function ze(D,b,_,Ne,Qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number")return D=D.get(_)||null,m(b,D,""+Ne,Qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case R:return D=D.get(Ne.key===null?_:Ne.key)||null,g(b,D,Ne,Qe);case le:return D=D.get(Ne.key===null?_:Ne.key)||null,B(b,D,Ne,Qe);case oe:var Ze=Ne._init;return ze(D,b,_,Ze(Ne._payload),Qe)}if(yt(Ne)||L(Ne))return D=D.get(_)||null,me(b,D,Ne,Qe,null);bo(b,Ne)}return null}function He(D,b,_,Ne){for(var Qe=null,Ze=null,qe=b,at=b=0,un=null;qe!==null&&at<_.length;at++){qe.index>at?(un=qe,qe=null):un=qe.sibling;var kt=de(D,qe,_[at],Ne);if(kt===null){qe===null&&(qe=un);break}e&&qe&&kt.alternate===null&&t(D,qe),b=a(kt,b,at),Ze===null?Qe=kt:Ze.sibling=kt,Ze=kt,qe=un}if(at===_.length)return n(D,qe),Vt&&Ms(D,at),Qe;if(qe===null){for(;at<_.length;at++)qe=ve(D,_[at],Ne),qe!==null&&(b=a(qe,b,at),Ze===null?Qe=qe:Ze.sibling=qe,Ze=qe);return Vt&&Ms(D,at),Qe}for(qe=s(D,qe);at<_.length;at++)un=ze(qe,D,at,_[at],Ne),un!==null&&(e&&un.alternate!==null&&qe.delete(un.key===null?at:un.key),b=a(un,b,at),Ze===null?Qe=un:Ze.sibling=un,Ze=un);return e&&qe.forEach(function(ss){return t(D,ss)}),Vt&&Ms(D,at),Qe}function Ve(D,b,_,Ne){var Qe=L(_);if(typeof Qe!="function")throw Error(c(150));if(_=Qe.call(_),_==null)throw Error(c(151));for(var Ze=Qe=null,qe=b,at=b=0,un=null,kt=_.next();qe!==null&&!kt.done;at++,kt=_.next()){qe.index>at?(un=qe,qe=null):un=qe.sibling;var ss=de(D,qe,kt.value,Ne);if(ss===null){qe===null&&(qe=un);break}e&&qe&&ss.alternate===null&&t(D,qe),b=a(ss,b,at),Ze===null?Qe=ss:Ze.sibling=ss,Ze=ss,qe=un}if(kt.done)return n(D,qe),Vt&&Ms(D,at),Qe;if(qe===null){for(;!kt.done;at++,kt=_.next())kt=ve(D,kt.value,Ne),kt!==null&&(b=a(kt,b,at),Ze===null?Qe=kt:Ze.sibling=kt,Ze=kt);return Vt&&Ms(D,at),Qe}for(qe=s(D,qe);!kt.done;at++,kt=_.next())kt=ze(qe,D,at,kt.value,Ne),kt!==null&&(e&&kt.alternate!==null&&qe.delete(kt.key===null?at:kt.key),b=a(kt,b,at),Ze===null?Qe=kt:Ze.sibling=kt,Ze=kt);return e&&qe.forEach(function(zf){return t(D,zf)}),Vt&&Ms(D,at),Qe}function Zt(D,b,_,Ne){if(typeof _=="object"&&_!==null&&_.type===he&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case R:e:{for(var Qe=_.key,Ze=b;Ze!==null;){if(Ze.key===Qe){if(Qe=_.type,Qe===he){if(Ze.tag===7){n(D,Ze.sibling),b=l(Ze,_.props.children),b.return=D,D=b;break e}}else if(Ze.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===oe&&Pu(Qe)===Ze.type){n(D,Ze.sibling),b=l(Ze,_.props),b.ref=Tl(D,Ze,_),b.return=D,D=b;break e}n(D,Ze);break}else t(D,Ze);Ze=Ze.sibling}_.type===he?(b=Ps(_.props.children,D.mode,Ne,_.key),b.return=D,D=b):(Ne=Ko(_.type,_.key,_.props,null,D.mode,Ne),Ne.ref=Tl(D,b,_),Ne.return=D,D=Ne)}return i(D);case le:e:{for(Ze=_.key;b!==null;){if(b.key===Ze)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(D,b.sibling),b=l(b,_.children||[]),b.return=D,D=b;break e}else{n(D,b);break}else t(D,b);b=b.sibling}b=Ei(_,D.mode,Ne),b.return=D,D=b}return i(D);case oe:return Ze=_._init,Zt(D,b,Ze(_._payload),Ne)}if(yt(_))return He(D,b,_,Ne);if(L(_))return Ve(D,b,_,Ne);bo(D,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(D,b.sibling),b=l(b,_),b.return=D,D=b):(n(D,b),b=Ci(_,D.mode,Ne),b.return=D,D=b),i(D)):n(D,b)}return Zt}var nl=_u(!0),Tu=_u(!1),No=Qr(null),So=null,rl=null,Oa=null;function Ra(){Oa=rl=So=null}function za(e){var t=No.current;Ht(No),e._currentValue=t}function Fa(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function sl(e,t){So=e,Oa=rl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Tn=!0),e.firstContext=null)}function qn(e){var t=e._currentValue;if(Oa!==e)if(e={context:e,memoizedValue:t,next:null},rl===null){if(So===null)throw Error(c(308));rl=e,So.dependencies={lanes:0,firstContext:e}}else rl=rl.next=e;return t}var ks=null;function Ba(e){ks===null?ks=[e]:ks.push(e)}function Au(e,t,n,s){var l=t.interleaved;return l===null?(n.next=n,Ba(t)):(n.next=l.next,l.next=n),t.interleaved=n,$r(e,s)}function $r(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gr=!1;function Ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ou(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Jr(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(bt&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,$r(e,n)}return l=s.interleaved,l===null?(t.next=t,Ba(s)):(t.next=l.next,l.next=t),s.interleaved=t,$r(e,n)}function Mo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,zr(e,n)}}function Ru(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?l=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?l=a=t:a=a.next=t}else l=a=t;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ko(e,t,n,s){var l=e.updateQueue;Gr=!1;var a=l.firstBaseUpdate,i=l.lastBaseUpdate,m=l.shared.pending;if(m!==null){l.shared.pending=null;var g=m,B=g.next;g.next=null,i===null?a=B:i.next=B,i=g;var me=e.alternate;me!==null&&(me=me.updateQueue,m=me.lastBaseUpdate,m!==i&&(m===null?me.firstBaseUpdate=B:m.next=B,me.lastBaseUpdate=g))}if(a!==null){var ve=l.baseState;i=0,me=B=g=null,m=a;do{var de=m.lane,ze=m.eventTime;if((s&de)===de){me!==null&&(me=me.next={eventTime:ze,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var He=e,Ve=m;switch(de=t,ze=n,Ve.tag){case 1:if(He=Ve.payload,typeof He=="function"){ve=He.call(ze,ve,de);break e}ve=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ve.payload,de=typeof He=="function"?He.call(ze,ve,de):He,de==null)break e;ve=F({},ve,de);break e;case 2:Gr=!0}}m.callback!==null&&m.lane!==0&&(e.flags|=64,de=l.effects,de===null?l.effects=[m]:de.push(m))}else ze={eventTime:ze,lane:de,tag:m.tag,payload:m.payload,callback:m.callback,next:null},me===null?(B=me=ze,g=ve):me=me.next=ze,i|=de;if(m=m.next,m===null){if(m=l.shared.pending,m===null)break;de=m,m=de.next,de.next=null,l.lastBaseUpdate=de,l.shared.pending=null}}while(!0);if(me===null&&(g=ve),l.baseState=g,l.firstBaseUpdate=B,l.lastBaseUpdate=me,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Ds|=i,e.lanes=i,e.memoizedState=ve}}function zu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(c(191,l));l.call(s)}}}var Al={},jr=Qr(Al),Ol=Qr(Al),Rl=Qr(Al);function Cs(e){if(e===Al)throw Error(c(174));return e}function Ha(e,t){switch(Ft(Rl,t),Ft(Ol,e),Ft(jr,Al),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:be(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=be(t,e)}Ht(jr),Ft(jr,t)}function ll(){Ht(jr),Ht(Ol),Ht(Rl)}function Fu(e){Cs(Rl.current);var t=Cs(jr.current),n=be(t,e.type);t!==n&&(Ft(Ol,e),Ft(jr,n))}function Wa(e){Ol.current===e&&(Ht(jr),Ht(Ol))}var Yt=Qr(0);function Co(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=[];function Ka(){for(var e=0;e<Va.length;e++)Va[e]._workInProgressVersionPrimary=null;Va.length=0}var Eo=j.ReactCurrentDispatcher,Qa=j.ReactCurrentBatchConfig,Es=0,Xt=null,tn=null,on=null,Do=!1,zl=!1,Fl=0,of=0;function jn(){throw Error(c(321))}function Ya(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Xa(e,t,n,s,l,a){if(Es=a,Xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eo.current=e===null||e.memoizedState===null?df:ff,e=n(s,l),zl){a=0;do{if(zl=!1,Fl=0,25<=a)throw Error(c(301));a+=1,on=tn=null,t.updateQueue=null,Eo.current=mf,e=n(s,l)}while(zl)}if(Eo.current=Lo,t=tn!==null&&tn.next!==null,Es=0,on=tn=Xt=null,Do=!1,t)throw Error(c(300));return e}function Ga(){var e=Fl!==0;return Fl=0,e}function br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?Xt.memoizedState=on=e:on=on.next=e,on}function er(){if(tn===null){var e=Xt.alternate;e=e!==null?e.memoizedState:null}else e=tn.next;var t=on===null?Xt.memoizedState:on.next;if(t!==null)on=t,tn=e;else{if(e===null)throw Error(c(310));tn=e,e={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},on===null?Xt.memoizedState=on=e:on=on.next=e}return on}function Bl(e,t){return typeof t=="function"?t(e):t}function Ja(e){var t=er(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var s=tn,l=s.baseQueue,a=n.pending;if(a!==null){if(l!==null){var i=l.next;l.next=a.next,a.next=i}s.baseQueue=l=a,n.pending=null}if(l!==null){a=l.next,s=s.baseState;var m=i=null,g=null,B=a;do{var me=B.lane;if((Es&me)===me)g!==null&&(g=g.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),s=B.hasEagerState?B.eagerState:e(s,B.action);else{var ve={lane:me,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};g===null?(m=g=ve,i=s):g=g.next=ve,Xt.lanes|=me,Ds|=me}B=B.next}while(B!==null&&B!==a);g===null?i=s:g.next=m,ur(s,t.memoizedState)||(Tn=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=g,n.lastRenderedState=s}if(e=n.interleaved,e!==null){l=e;do a=l.lane,Xt.lanes|=a,Ds|=a,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Za(e){var t=er(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var s=n.dispatch,l=n.pending,a=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do a=e(a,i.action),i=i.next;while(i!==l);ur(a,t.memoizedState)||(Tn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function Bu(){}function Uu(e,t){var n=Xt,s=er(),l=t(),a=!ur(s.memoizedState,l);if(a&&(s.memoizedState=l,Tn=!0),s=s.queue,qa(Vu.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||on!==null&&on.memoizedState.tag&1){if(n.flags|=2048,Ul(9,Wu.bind(null,n,s,l,t),void 0,null),an===null)throw Error(c(349));(Es&30)!==0||Hu(n,t,l)}return l}function Hu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Xt.updateQueue,t===null?(t={lastEffect:null,stores:null},Xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wu(e,t,n,s){t.value=n,t.getSnapshot=s,Ku(t)&&Qu(e)}function Vu(e,t,n){return n(function(){Ku(t)&&Qu(e)})}function Ku(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch{return!0}}function Qu(e){var t=$r(e,1);t!==null&&hr(t,e,1,-1)}function Yu(e){var t=br();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:e},t.queue=e,e=e.dispatch=cf.bind(null,Xt,e),[t.memoizedState,e]}function Ul(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Xt.updateQueue,t===null?(t={lastEffect:null,stores:null},Xt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Xu(){return er().memoizedState}function Io(e,t,n,s){var l=br();Xt.flags|=e,l.memoizedState=Ul(1|t,n,void 0,s===void 0?null:s)}function $o(e,t,n,s){var l=er();s=s===void 0?null:s;var a=void 0;if(tn!==null){var i=tn.memoizedState;if(a=i.destroy,s!==null&&Ya(s,i.deps)){l.memoizedState=Ul(t,n,a,s);return}}Xt.flags|=e,l.memoizedState=Ul(1|t,n,a,s)}function Gu(e,t){return Io(8390656,8,e,t)}function qa(e,t){return $o(2048,8,e,t)}function Ju(e,t){return $o(4,2,e,t)}function Zu(e,t){return $o(4,4,e,t)}function qu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ec(e,t,n){return n=n!=null?n.concat([e]):null,$o(4,4,qu.bind(null,t,e),n)}function ei(){}function tc(e,t){var n=er();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ya(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function nc(e,t){var n=er();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Ya(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function rc(e,t,n){return(Es&21)===0?(e.baseState&&(e.baseState=!1,Tn=!0),e.memoizedState=n):(ur(n,t)||(n=is(),Xt.lanes|=n,Ds|=n,e.baseState=!0),t)}function af(e,t){var n=Mt;Mt=n!==0&&4>n?n:4,e(!0);var s=Qa.transition;Qa.transition={};try{e(!1),t()}finally{Mt=n,Qa.transition=s}}function sc(){return er().memoizedState}function uf(e,t,n){var s=ts(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},lc(e))oc(t,n);else if(n=Au(e,t,n,s),n!==null){var l=En();hr(n,e,s,l),ac(n,t,s)}}function cf(e,t,n){var s=ts(e),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(lc(e))oc(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,m=a(i,n);if(l.hasEagerState=!0,l.eagerState=m,ur(m,i)){var g=t.interleaved;g===null?(l.next=l,Ba(t)):(l.next=g.next,g.next=l),t.interleaved=l;return}}catch{}finally{}n=Au(e,t,l,s),n!==null&&(l=En(),hr(n,e,s,l),ac(n,t,s))}}function lc(e){var t=e.alternate;return e===Xt||t!==null&&t===Xt}function oc(e,t){zl=Do=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ac(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,zr(e,n)}}var Lo={readContext:qn,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},df={readContext:qn,useCallback:function(e,t){return br().memoizedState=[e,t===void 0?null:t],e},useContext:qn,useEffect:Gu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Io(4194308,4,qu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=br();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=br();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=uf.bind(null,Xt,e),[s.memoizedState,e]},useRef:function(e){var t=br();return e={current:e},t.memoizedState=e},useState:Yu,useDebugValue:ei,useDeferredValue:function(e){return br().memoizedState=e},useTransition:function(){var e=Yu(!1),t=e[0];return e=af.bind(null,e[1]),br().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Xt,l=br();if(Vt){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),an===null)throw Error(c(349));(Es&30)!==0||Hu(s,t,n)}l.memoizedState=n;var a={value:n,getSnapshot:t};return l.queue=a,Gu(Vu.bind(null,s,a,e),[e]),s.flags|=2048,Ul(9,Wu.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=br(),t=an.identifierPrefix;if(Vt){var n=Ir,s=Dr;n=(s&~(1<<32-vn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Fl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=of++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ff={readContext:qn,useCallback:tc,useContext:qn,useEffect:qa,useImperativeHandle:ec,useInsertionEffect:Ju,useLayoutEffect:Zu,useMemo:nc,useReducer:Ja,useRef:Xu,useState:function(){return Ja(Bl)},useDebugValue:ei,useDeferredValue:function(e){var t=er();return rc(t,tn.memoizedState,e)},useTransition:function(){var e=Ja(Bl)[0],t=er().memoizedState;return[e,t]},useMutableSource:Bu,useSyncExternalStore:Uu,useId:sc,unstable_isNewReconciler:!1},mf={readContext:qn,useCallback:tc,useContext:qn,useEffect:qa,useImperativeHandle:ec,useInsertionEffect:Ju,useLayoutEffect:Zu,useMemo:nc,useReducer:Za,useRef:Xu,useState:function(){return Za(Bl)},useDebugValue:ei,useDeferredValue:function(e){var t=er();return tn===null?t.memoizedState=e:rc(t,tn.memoizedState,e)},useTransition:function(){var e=Za(Bl)[0],t=er().memoizedState;return[e,t]},useMutableSource:Bu,useSyncExternalStore:Uu,useId:sc,unstable_isNewReconciler:!1};function dr(e,t){if(e&&e.defaultProps){t=F({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ti(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:F({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Po={isMounted:function(e){return(e=e._reactInternals)?en(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=En(),l=ts(e),a=Lr(s,l);a.payload=t,n!=null&&(a.callback=n),t=Jr(e,a,l),t!==null&&(hr(t,e,l,s),Mo(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=En(),l=ts(e),a=Lr(s,l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Jr(e,a,l),t!==null&&(hr(t,e,l,s),Mo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=En(),s=ts(e),l=Lr(n,s);l.tag=2,t!=null&&(l.callback=t),t=Jr(e,l,s),t!==null&&(hr(t,e,s,n),Mo(t,e,s))}};function ic(e,t,n,s,l,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,i):t.prototype&&t.prototype.isPureReactComponent?!El(n,s)||!El(l,a):!0}function uc(e,t,n){var s=!1,l=Yr,a=t.contextType;return typeof a=="object"&&a!==null?a=qn(a):(l=_n(t)?Ns:wn.current,s=t.contextTypes,a=(s=s!=null)?Zs(e,l):Yr),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Po,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function cc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function ni(e,t,n,s){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Ua(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=qn(a):(a=_n(t)?Ns:wn.current,l.context=Zs(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ti(e,t,a,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Po.enqueueReplaceState(l,l.state,null),ko(e,n,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ol(e,t){try{var n="",s=t;do n+=Fe(s),s=s.return;while(s);var l=n}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function ri(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function si(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hf=typeof WeakMap=="function"?WeakMap:Map;function dc(e,t,n){n=Lr(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Fo||(Fo=!0,vi=s),si(e,t)},n}function fc(e,t,n){n=Lr(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;n.payload=function(){return s(l)},n.callback=function(){si(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){si(e,t),typeof s!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function mc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new hf;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(n)||(l.add(n),e=Ef.bind(null,e,t,n),t.then(e,e))}function hc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pc(e,t,n,s,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Lr(-1,1),t.tag=2,Jr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var pf=j.ReactCurrentOwner,Tn=!1;function Cn(e,t,n,s){t.child=e===null?Tu(t,null,n,s):nl(t,e.child,n,s)}function xc(e,t,n,s,l){n=n.render;var a=t.ref;return sl(t,l),s=Xa(e,t,n,s,a,l),n=Ga(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Pr(e,t,l)):(Vt&&n&&La(t),t.flags|=1,Cn(e,t,s,l),t.child)}function gc(e,t,n,s,l){if(e===null){var a=n.type;return typeof a=="function"&&!ki(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,yc(e,t,a,s,l)):(e=Ko(n.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,(e.lanes&l)===0){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:El,n(i,s)&&e.ref===t.ref)return Pr(e,t,l)}return t.flags|=1,e=rs(a,s),e.ref=t.ref,e.return=t,t.child=e}function yc(e,t,n,s,l){if(e!==null){var a=e.memoizedProps;if(El(a,s)&&e.ref===t.ref)if(Tn=!1,t.pendingProps=s=a,(e.lanes&l)!==0)(e.flags&131072)!==0&&(Tn=!0);else return t.lanes=e.lanes,Pr(e,t,l)}return li(e,t,n,s,l)}function vc(e,t,n){var s=t.pendingProps,l=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ft(il,Kn),Kn|=n;else{if((n&1073741824)===0)return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ft(il,Kn),Kn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Ft(il,Kn),Kn|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,Ft(il,Kn),Kn|=s;return Cn(e,t,l,n),t.child}function wc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function li(e,t,n,s,l){var a=_n(n)?Ns:wn.current;return a=Zs(t,a),sl(t,l),n=Xa(e,t,n,s,a,l),s=Ga(),e!==null&&!Tn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Pr(e,t,l)):(Vt&&s&&La(t),t.flags|=1,Cn(e,t,n,l),t.child)}function jc(e,t,n,s,l){if(_n(n)){var a=!0;go(t)}else a=!1;if(sl(t,l),t.stateNode===null)To(e,t),uc(t,n,s),ni(t,n,s,l),s=!0;else if(e===null){var i=t.stateNode,m=t.memoizedProps;i.props=m;var g=i.context,B=n.contextType;typeof B=="object"&&B!==null?B=qn(B):(B=_n(n)?Ns:wn.current,B=Zs(t,B));var me=n.getDerivedStateFromProps,ve=typeof me=="function"||typeof i.getSnapshotBeforeUpdate=="function";ve||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(m!==s||g!==B)&&cc(t,i,s,B),Gr=!1;var de=t.memoizedState;i.state=de,ko(t,s,i,l),g=t.memoizedState,m!==s||de!==g||Pn.current||Gr?(typeof me=="function"&&(ti(t,n,me,s),g=t.memoizedState),(m=Gr||ic(t,n,m,s,de,g,B))?(ve||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=g),i.props=s,i.state=g,i.context=B,s=m):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Ou(e,t),m=t.memoizedProps,B=t.type===t.elementType?m:dr(t.type,m),i.props=B,ve=t.pendingProps,de=i.context,g=n.contextType,typeof g=="object"&&g!==null?g=qn(g):(g=_n(n)?Ns:wn.current,g=Zs(t,g));var ze=n.getDerivedStateFromProps;(me=typeof ze=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(m!==ve||de!==g)&&cc(t,i,s,g),Gr=!1,de=t.memoizedState,i.state=de,ko(t,s,i,l);var He=t.memoizedState;m!==ve||de!==He||Pn.current||Gr?(typeof ze=="function"&&(ti(t,n,ze,s),He=t.memoizedState),(B=Gr||ic(t,n,B,s,de,He,g)||!1)?(me||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,He,g),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,He,g)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||m===e.memoizedProps&&de===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&de===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=He),i.props=s,i.state=He,i.context=g,s=B):(typeof i.componentDidUpdate!="function"||m===e.memoizedProps&&de===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&de===e.memoizedState||(t.flags|=1024),s=!1)}return oi(e,t,n,s,a,l)}function oi(e,t,n,s,l,a){wc(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&ku(t,n,!1),Pr(e,t,a);s=t.stateNode,pf.current=t;var m=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=nl(t,e.child,null,a),t.child=nl(t,null,m,a)):Cn(e,t,m,a),t.memoizedState=s.state,l&&ku(t,n,!0),t.child}function bc(e){var t=e.stateNode;t.pendingContext?Su(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Su(e,t.context,!1),Ha(e,t.containerInfo)}function Nc(e,t,n,s,l){return tl(),Aa(l),t.flags|=256,Cn(e,t,n,s),t.child}var ai={dehydrated:null,treeContext:null,retryLane:0};function ii(e){return{baseLanes:e,cachePool:null,transitions:null}}function Sc(e,t,n){var s=t.pendingProps,l=Yt.current,a=!1,i=(t.flags&128)!==0,m;if((m=i)||(m=e!==null&&e.memoizedState===null?!1:(l&2)!==0),m?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ft(Yt,l&1),e===null)return Ta(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=s.children,e=s.fallback,a?(s=t.mode,a=t.child,i={mode:"hidden",children:i},(s&1)===0&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Qo(i,s,0,null),e=Ps(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ii(n),t.memoizedState=ai,e):ui(t,i));if(l=e.memoizedState,l!==null&&(m=l.dehydrated,m!==null))return xf(e,t,i,s,m,l,n);if(a){a=s.fallback,i=t.mode,l=e.child,m=l.sibling;var g={mode:"hidden",children:s.children};return(i&1)===0&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=g,t.deletions=null):(s=rs(l,g),s.subtreeFlags=l.subtreeFlags&14680064),m!==null?a=rs(m,a):(a=Ps(a,i,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,i=e.child.memoizedState,i=i===null?ii(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=ai,s}return a=e.child,e=a.sibling,s=rs(a,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function ui(e,t){return t=Qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _o(e,t,n,s){return s!==null&&Aa(s),nl(t,e.child,null,n),e=ui(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xf(e,t,n,s,l,a,i){if(n)return t.flags&256?(t.flags&=-257,s=ri(Error(c(422))),_o(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,l=t.mode,s=Qo({mode:"visible",children:s.children},l,0,null),a=Ps(a,l,i,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,(t.mode&1)!==0&&nl(t,e.child,null,i),t.child.memoizedState=ii(i),t.memoizedState=ai,a);if((t.mode&1)===0)return _o(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var m=s.dgst;return s=m,a=Error(c(419)),s=ri(a,s,void 0),_o(e,t,i,s)}if(m=(i&e.childLanes)!==0,Tn||m){if(s=an,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(s.suspendedLanes|i))!==0?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,$r(e,l),hr(s,e,l,-1))}return Mi(),s=ri(Error(c(421))),_o(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Df.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Vn=Kr(l.nextSibling),Wn=t,Vt=!0,cr=null,e!==null&&(Jn[Zn++]=Dr,Jn[Zn++]=Ir,Jn[Zn++]=Ss,Dr=e.id,Ir=e.overflow,Ss=t),t=ui(t,s.children),t.flags|=4096,t)}function Mc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Fa(e.return,t,n)}function ci(e,t,n,s,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=l)}function kc(e,t,n){var s=t.pendingProps,l=s.revealOrder,a=s.tail;if(Cn(e,t,s.children,n),s=Yt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Mc(e,n,t);else if(e.tag===19)Mc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ft(Yt,s),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Co(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ci(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Co(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ci(t,!0,n,null,a);break;case"together":ci(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function To(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ds|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=rs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=rs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gf(e,t,n){switch(t.tag){case 3:bc(t),tl();break;case 5:Fu(t);break;case 1:_n(t.type)&&go(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;Ft(No,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ft(Yt,Yt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Sc(e,t,n):(Ft(Yt,Yt.current&1),e=Pr(e,t,n),e!==null?e.sibling:null);Ft(Yt,Yt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return kc(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ft(Yt,Yt.current),s)break;return null;case 22:case 23:return t.lanes=0,vc(e,t,n)}return Pr(e,t,n)}var Cc,di,Ec,Dc;Cc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},di=function(){},Ec=function(e,t,n,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,Cs(jr.current);var a=null;switch(n){case"input":l=ct(e,l),s=ct(e,s),a=[];break;case"select":l=F({},l,{value:void 0}),s=F({},s,{value:void 0}),a=[];break;case"textarea":l=ye(e,l),s=ye(e,s),a=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ho)}et(n,s);var i;n=null;for(B in l)if(!s.hasOwnProperty(B)&&l.hasOwnProperty(B)&&l[B]!=null)if(B==="style"){var m=l[B];for(i in m)m.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(x.hasOwnProperty(B)?a||(a=[]):(a=a||[]).push(B,null));for(B in s){var g=s[B];if(m=l?.[B],s.hasOwnProperty(B)&&g!==m&&(g!=null||m!=null))if(B==="style")if(m){for(i in m)!m.hasOwnProperty(i)||g&&g.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in g)g.hasOwnProperty(i)&&m[i]!==g[i]&&(n||(n={}),n[i]=g[i])}else n||(a||(a=[]),a.push(B,n)),n=g;else B==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,m=m?m.__html:void 0,g!=null&&m!==g&&(a=a||[]).push(B,g)):B==="children"?typeof g!="string"&&typeof g!="number"||(a=a||[]).push(B,""+g):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(x.hasOwnProperty(B)?(g!=null&&B==="onScroll"&&Ut("scroll",e),a||m===g||(a=[])):(a=a||[]).push(B,g))}n&&(a=a||[]).push("style",n);var B=a;(t.updateQueue=B)&&(t.flags|=4)}},Dc=function(e,t,n,s){n!==s&&(t.flags|=4)};function Hl(e,t){if(!Vt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function bn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function yf(e,t,n){var s=t.pendingProps;switch(Pa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(t),null;case 1:return _n(t.type)&&xo(),bn(t),null;case 3:return s=t.stateNode,ll(),Ht(Pn),Ht(wn),Ka(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(jo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,cr!==null&&(bi(cr),cr=null))),di(e,t),bn(t),null;case 5:Wa(t);var l=Cs(Rl.current);if(n=t.type,e!==null&&t.stateNode!=null)Ec(e,t,n,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(c(166));return bn(t),null}if(e=Cs(jr.current),jo(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[wr]=t,s[Pl]=a,e=(t.mode&1)!==0,n){case"dialog":Ut("cancel",s),Ut("close",s);break;case"iframe":case"object":case"embed":Ut("load",s);break;case"video":case"audio":for(l=0;l<Il.length;l++)Ut(Il[l],s);break;case"source":Ut("error",s);break;case"img":case"image":case"link":Ut("error",s),Ut("load",s);break;case"details":Ut("toggle",s);break;case"input":Je(s,a),Ut("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ut("invalid",s);break;case"textarea":ae(s,a),Ut("invalid",s)}et(n,a),l=null;for(var i in a)if(a.hasOwnProperty(i)){var m=a[i];i==="children"?typeof m=="string"?s.textContent!==m&&(a.suppressHydrationWarning!==!0&&mo(s.textContent,m,e),l=["children",m]):typeof m=="number"&&s.textContent!==""+m&&(a.suppressHydrationWarning!==!0&&mo(s.textContent,m,e),l=["children",""+m]):x.hasOwnProperty(i)&&m!=null&&i==="onScroll"&&Ut("scroll",s)}switch(n){case"input":Te(s),Et(s,a,!0);break;case"textarea":Te(s),N(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=ho)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=k(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[wr]=t,e[Pl]=s,Cc(e,t,!1,!1),t.stateNode=e;e:{switch(i=vt(n,s),n){case"dialog":Ut("cancel",e),Ut("close",e),l=s;break;case"iframe":case"object":case"embed":Ut("load",e),l=s;break;case"video":case"audio":for(l=0;l<Il.length;l++)Ut(Il[l],e);l=s;break;case"source":Ut("error",e),l=s;break;case"img":case"image":case"link":Ut("error",e),Ut("load",e),l=s;break;case"details":Ut("toggle",e),l=s;break;case"input":Je(e,s),l=ct(e,s),Ut("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=F({},s,{value:void 0}),Ut("invalid",e);break;case"textarea":ae(e,s),l=ye(e,s),Ut("invalid",e);break;default:l=s}et(n,l),m=l;for(a in m)if(m.hasOwnProperty(a)){var g=m[a];a==="style"?Ke(e,g):a==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&Ue(e,g)):a==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&q(e,g):typeof g=="number"&&q(e,""+g):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(x.hasOwnProperty(a)?g!=null&&a==="onScroll"&&Ut("scroll",e):g!=null&&A(e,a,g,i))}switch(n){case"input":Te(e),Et(e,s,!1);break;case"textarea":Te(e),N(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ge(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?pt(e,!!s.multiple,a,!1):s.defaultValue!=null&&pt(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=ho)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bn(t),null;case 6:if(e&&t.stateNode!=null)Dc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(n=Cs(Rl.current),Cs(jr.current),jo(t)){if(s=t.stateNode,n=t.memoizedProps,s[wr]=t,(a=s.nodeValue!==n)&&(e=Wn,e!==null))switch(e.tag){case 3:mo(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mo(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[wr]=t,t.stateNode=s}return bn(t),null;case 13:if(Ht(Yt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&Vn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Lu(),tl(),t.flags|=98560,a=!1;else if(a=jo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(c(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(c(317));a[wr]=t}else tl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bn(t),a=!1}else cr!==null&&(bi(cr),cr=null),a=!0;if(!a)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Yt.current&1)!==0?nn===0&&(nn=3):Mi())),t.updateQueue!==null&&(t.flags|=4),bn(t),null);case 4:return ll(),di(e,t),e===null&&$l(t.stateNode.containerInfo),bn(t),null;case 10:return za(t.type._context),bn(t),null;case 17:return _n(t.type)&&xo(),bn(t),null;case 19:if(Ht(Yt),a=t.memoizedState,a===null)return bn(t),null;if(s=(t.flags&128)!==0,i=a.rendering,i===null)if(s)Hl(a,!1);else{if(nn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Co(e),i!==null){for(t.flags|=128,Hl(a,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ft(Yt,Yt.current&1|2),t.child}e=e.sibling}a.tail!==null&&_e()>ul&&(t.flags|=128,s=!0,Hl(a,!1),t.lanes=4194304)}else{if(!s)if(e=Co(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Vt)return bn(t),null}else 2*_e()-a.renderingStartTime>ul&&n!==1073741824&&(t.flags|=128,s=!0,Hl(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=_e(),t.sibling=null,n=Yt.current,Ft(Yt,s?n&1|2:n&1),t):(bn(t),null);case 22:case 23:return Si(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Kn&1073741824)!==0&&(bn(t),t.subtreeFlags&6&&(t.flags|=8192)):bn(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function vf(e,t){switch(Pa(t),t.tag){case 1:return _n(t.type)&&xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ll(),Ht(Pn),Ht(wn),Ka(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Wa(t),null;case 13:if(Ht(Yt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ht(Yt),null;case 4:return ll(),null;case 10:return za(t.type._context),null;case 22:case 23:return Si(),null;case 24:return null;default:return null}}var Ao=!1,Nn=!1,wf=typeof WeakSet=="function"?WeakSet:Set,Be=null;function al(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Gt(e,t,s)}else n.current=null}function fi(e,t,n){try{n()}catch(s){Gt(e,t,s)}}var Ic=!1;function jf(e,t){if(Sa=fs,e=iu(),xa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,m=-1,g=-1,B=0,me=0,ve=e,de=null;t:for(;;){for(var ze;ve!==n||l!==0&&ve.nodeType!==3||(m=i+l),ve!==a||s!==0&&ve.nodeType!==3||(g=i+s),ve.nodeType===3&&(i+=ve.nodeValue.length),(ze=ve.firstChild)!==null;)de=ve,ve=ze;for(;;){if(ve===e)break t;if(de===n&&++B===l&&(m=i),de===a&&++me===s&&(g=i),(ze=ve.nextSibling)!==null)break;ve=de,de=ve.parentNode}ve=ze}n=m===-1||g===-1?null:{start:m,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ma={focusedElem:e,selectionRange:n},fs=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var He=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ve=He.memoizedProps,Zt=He.memoizedState,D=t.stateNode,b=D.getSnapshotBeforeUpdate(t.elementType===t.type?Ve:dr(t.type,Ve),Zt);D.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(Ne){Gt(t,t.return,Ne)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return He=Ic,Ic=!1,He}function Wl(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&fi(t,n,a)}l=l.next}while(l!==s)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function mi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function $c(e){var t=e.alternate;t!==null&&(e.alternate=null,$c(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wr],delete t[Pl],delete t[Da],delete t[nf],delete t[rf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lc(e){return e.tag===5||e.tag===3||e.tag===4}function Pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ho));else if(s!==4&&(e=e.child,e!==null))for(hi(e,t,n),e=e.sibling;e!==null;)hi(e,t,n),e=e.sibling}function pi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}var pn=null,fr=!1;function Zr(e,t,n){for(n=n.child;n!==null;)_c(e,t,n),n=n.sibling}function _c(e,t,n){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(yn,n)}catch{}switch(n.tag){case 5:Nn||al(n,t);case 6:var s=pn,l=fr;pn=null,Zr(e,t,n),pn=s,fr=l,pn!==null&&(fr?(e=pn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):pn.removeChild(n.stateNode));break;case 18:pn!==null&&(fr?(e=pn,n=n.stateNode,e.nodeType===8?Ea(e.parentNode,n):e.nodeType===1&&Ea(e,n),ds(e)):Ea(pn,n.stateNode));break;case 4:s=pn,l=fr,pn=n.stateNode.containerInfo,fr=!0,Zr(e,t,n),pn=s,fr=l;break;case 0:case 11:case 14:case 15:if(!Nn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var a=l,i=a.destroy;a=a.tag,i!==void 0&&((a&2)!==0||(a&4)!==0)&&fi(n,t,i),l=l.next}while(l!==s)}Zr(e,t,n);break;case 1:if(!Nn&&(al(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(m){Gt(n,t,m)}Zr(e,t,n);break;case 21:Zr(e,t,n);break;case 22:n.mode&1?(Nn=(s=Nn)||n.memoizedState!==null,Zr(e,t,n),Nn=s):Zr(e,t,n);break;default:Zr(e,t,n)}}function Tc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wf),t.forEach(function(s){var l=If.bind(null,e,s);n.has(s)||(n.add(s),s.then(l,l))})}}function mr(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var a=e,i=t,m=i;e:for(;m!==null;){switch(m.tag){case 5:pn=m.stateNode,fr=!1;break e;case 3:pn=m.stateNode.containerInfo,fr=!0;break e;case 4:pn=m.stateNode.containerInfo,fr=!0;break e}m=m.return}if(pn===null)throw Error(c(160));_c(a,i,l),pn=null,fr=!1;var g=l.alternate;g!==null&&(g.return=null),l.return=null}catch(B){Gt(l,t,B)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ac(t,e),t=t.sibling}function Ac(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mr(t,e),Nr(e),s&4){try{Wl(3,e,e.return),Oo(3,e)}catch(Ve){Gt(e,e.return,Ve)}try{Wl(5,e,e.return)}catch(Ve){Gt(e,e.return,Ve)}}break;case 1:mr(t,e),Nr(e),s&512&&n!==null&&al(n,n.return);break;case 5:if(mr(t,e),Nr(e),s&512&&n!==null&&al(n,n.return),e.flags&32){var l=e.stateNode;try{q(l,"")}catch(Ve){Gt(e,e.return,Ve)}}if(s&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,m=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{m==="input"&&a.type==="radio"&&a.name!=null&&nt(l,a),vt(m,i);var B=vt(m,a);for(i=0;i<g.length;i+=2){var me=g[i],ve=g[i+1];me==="style"?Ke(l,ve):me==="dangerouslySetInnerHTML"?Ue(l,ve):me==="children"?q(l,ve):A(l,me,ve,B)}switch(m){case"input":Ct(l,a);break;case"textarea":We(l,a);break;case"select":var de=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var ze=a.value;ze!=null?pt(l,!!a.multiple,ze,!1):de!==!!a.multiple&&(a.defaultValue!=null?pt(l,!!a.multiple,a.defaultValue,!0):pt(l,!!a.multiple,a.multiple?[]:"",!1))}l[Pl]=a}catch(Ve){Gt(e,e.return,Ve)}}break;case 6:if(mr(t,e),Nr(e),s&4){if(e.stateNode===null)throw Error(c(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(Ve){Gt(e,e.return,Ve)}}break;case 3:if(mr(t,e),Nr(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ds(t.containerInfo)}catch(Ve){Gt(e,e.return,Ve)}break;case 4:mr(t,e),Nr(e);break;case 13:mr(t,e),Nr(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(yi=_e())),s&4&&Tc(e);break;case 22:if(me=n!==null&&n.memoizedState!==null,e.mode&1?(Nn=(B=Nn)||me,mr(t,e),Nn=B):mr(t,e),Nr(e),s&8192){if(B=e.memoizedState!==null,(e.stateNode.isHidden=B)&&!me&&(e.mode&1)!==0)for(Be=e,me=e.child;me!==null;){for(ve=Be=me;Be!==null;){switch(de=Be,ze=de.child,de.tag){case 0:case 11:case 14:case 15:Wl(4,de,de.return);break;case 1:al(de,de.return);var He=de.stateNode;if(typeof He.componentWillUnmount=="function"){s=de,n=de.return;try{t=s,He.props=t.memoizedProps,He.state=t.memoizedState,He.componentWillUnmount()}catch(Ve){Gt(s,n,Ve)}}break;case 5:al(de,de.return);break;case 22:if(de.memoizedState!==null){zc(ve);continue}}ze!==null?(ze.return=de,Be=ze):zc(ve)}me=me.sibling}e:for(me=null,ve=e;;){if(ve.tag===5){if(me===null){me=ve;try{l=ve.stateNode,B?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(m=ve.stateNode,g=ve.memoizedProps.style,i=g!=null&&g.hasOwnProperty("display")?g.display:null,m.style.display=De("display",i))}catch(Ve){Gt(e,e.return,Ve)}}}else if(ve.tag===6){if(me===null)try{ve.stateNode.nodeValue=B?"":ve.memoizedProps}catch(Ve){Gt(e,e.return,Ve)}}else if((ve.tag!==22&&ve.tag!==23||ve.memoizedState===null||ve===e)&&ve.child!==null){ve.child.return=ve,ve=ve.child;continue}if(ve===e)break e;for(;ve.sibling===null;){if(ve.return===null||ve.return===e)break e;me===ve&&(me=null),ve=ve.return}me===ve&&(me=null),ve.sibling.return=ve.return,ve=ve.sibling}}break;case 19:mr(t,e),Nr(e),s&4&&Tc(e);break;case 21:break;default:mr(t,e),Nr(e)}}function Nr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Lc(n)){var s=n;break e}n=n.return}throw Error(c(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(q(l,""),s.flags&=-33);var a=Pc(e);pi(e,a,l);break;case 3:case 4:var i=s.stateNode.containerInfo,m=Pc(e);hi(e,m,i);break;default:throw Error(c(161))}}catch(g){Gt(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bf(e,t,n){Be=e,Oc(e)}function Oc(e,t,n){for(var s=(e.mode&1)!==0;Be!==null;){var l=Be,a=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||Ao;if(!i){var m=l.alternate,g=m!==null&&m.memoizedState!==null||Nn;m=Ao;var B=Nn;if(Ao=i,(Nn=g)&&!B)for(Be=l;Be!==null;)i=Be,g=i.child,i.tag===22&&i.memoizedState!==null?Fc(l):g!==null?(g.return=i,Be=g):Fc(l);for(;a!==null;)Be=a,Oc(a),a=a.sibling;Be=l,Ao=m,Nn=B}Rc(e)}else(l.subtreeFlags&8772)!==0&&a!==null?(a.return=l,Be=a):Rc(e)}}function Rc(e){for(;Be!==null;){var t=Be;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Nn||Oo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Nn)if(n===null)s.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:dr(t.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&zu(t,a,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zu(t,i,n)}break;case 5:var m=t.stateNode;if(n===null&&t.flags&4){n=m;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var B=t.alternate;if(B!==null){var me=B.memoizedState;if(me!==null){var ve=me.dehydrated;ve!==null&&ds(ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Nn||t.flags&512&&mi(t)}catch(de){Gt(t,t.return,de)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function zc(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function Fc(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Oo(4,t)}catch(g){Gt(t,n,g)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(g){Gt(t,l,g)}}var a=t.return;try{mi(t)}catch(g){Gt(t,a,g)}break;case 5:var i=t.return;try{mi(t)}catch(g){Gt(t,i,g)}}}catch(g){Gt(t,t.return,g)}if(t===e){Be=null;break}var m=t.sibling;if(m!==null){m.return=t.return,Be=m;break}Be=t.return}}var Nf=Math.ceil,Ro=j.ReactCurrentDispatcher,xi=j.ReactCurrentOwner,tr=j.ReactCurrentBatchConfig,bt=0,an=null,qt=null,xn=0,Kn=0,il=Qr(0),nn=0,Vl=null,Ds=0,zo=0,gi=0,Kl=null,An=null,yi=0,ul=1/0,_r=null,Fo=!1,vi=null,qr=null,Bo=!1,es=null,Uo=0,Ql=0,wi=null,Ho=-1,Wo=0;function En(){return(bt&6)!==0?_e():Ho!==-1?Ho:Ho=_e()}function ts(e){return(e.mode&1)===0?1:(bt&2)!==0&&xn!==0?xn&-xn:lf.transition!==null?(Wo===0&&(Wo=is()),Wo):(e=Mt,e!==0||(e=window.event,e=e===void 0?16:lo(e.type)),e)}function hr(e,t,n,s){if(50<Ql)throw Ql=0,wi=null,Error(c(185));gr(e,n,s),((bt&2)===0||e!==an)&&(e===an&&((bt&2)===0&&(zo|=n),nn===4&&ns(e,xn)),On(e,s),n===1&&bt===0&&(t.mode&1)===0&&(ul=_e()+500,yo&&Xr()))}function On(e,t){var n=e.callbackNode;pl(e,t);var s=Rr(e,e===an?xn:0);if(s===0)n!==null&&Oe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Oe(n),t===1)e.tag===0?sf(Uc.bind(null,e)):Cu(Uc.bind(null,e)),ef(function(){(bt&6)===0&&Xr()}),n=null;else{switch(xl(s)){case 1:n=ot;break;case 4:n=Lt;break;case 16:n=Ot;break;case 536870912:n=Tt;break;default:n=Ot}n=Gc(n,Bc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bc(e,t){if(Ho=-1,Wo=0,(bt&6)!==0)throw Error(c(327));var n=e.callbackNode;if(cl()&&e.callbackNode!==n)return null;var s=Rr(e,e===an?xn:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Vo(e,s);else{t=s;var l=bt;bt|=2;var a=Wc();(an!==e||xn!==t)&&(_r=null,ul=_e()+500,$s(e,t));do try{kf();break}catch(m){Hc(e,m)}while(!0);Ra(),Ro.current=a,bt=l,qt!==null?t=0:(an=null,xn=0,t=nn)}if(t!==0){if(t===2&&(l=Rs(e),l!==0&&(s=l,t=ji(e,l))),t===1)throw n=Vl,$s(e,0),ns(e,s),On(e,_e()),n;if(t===6)ns(e,s);else{if(l=e.current.alternate,(s&30)===0&&!Sf(l)&&(t=Vo(e,s),t===2&&(a=Rs(e),a!==0&&(s=a,t=ji(e,a))),t===1))throw n=Vl,$s(e,0),ns(e,s),On(e,_e()),n;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(c(345));case 2:Ls(e,An,_r);break;case 3:if(ns(e,s),(s&130023424)===s&&(t=yi+500-_e(),10<t)){if(Rr(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){En(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ca(Ls.bind(null,e,An,_r),t);break}Ls(e,An,_r);break;case 4:if(ns(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-vn(s);a=1<<i,i=t[i],i>l&&(l=i),s&=~a}if(s=l,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nf(s/1960))-s,10<s){e.timeoutHandle=Ca(Ls.bind(null,e,An,_r),s);break}Ls(e,An,_r);break;case 5:Ls(e,An,_r);break;default:throw Error(c(329))}}}return On(e,_e()),e.callbackNode===n?Bc.bind(null,e):null}function ji(e,t){var n=Kl;return e.current.memoizedState.isDehydrated&&($s(e,t).flags|=256),e=Vo(e,t),e!==2&&(t=An,An=n,t!==null&&bi(t)),e}function bi(e){An===null?An=e:An.push.apply(An,e)}function Sf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],a=l.getSnapshot;l=l.value;try{if(!ur(a(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ns(e,t){for(t&=~gi,t&=~zo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vn(t),s=1<<n;e[n]=-1,t&=~s}}function Uc(e){if((bt&6)!==0)throw Error(c(327));cl();var t=Rr(e,0);if((t&1)===0)return On(e,_e()),null;var n=Vo(e,t);if(e.tag!==0&&n===2){var s=Rs(e);s!==0&&(t=s,n=ji(e,s))}if(n===1)throw n=Vl,$s(e,0),ns(e,t),On(e,_e()),n;if(n===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ls(e,An,_r),On(e,_e()),null}function Ni(e,t){var n=bt;bt|=1;try{return e(t)}finally{bt=n,bt===0&&(ul=_e()+500,yo&&Xr())}}function Is(e){es!==null&&es.tag===0&&(bt&6)===0&&cl();var t=bt;bt|=1;var n=tr.transition,s=Mt;try{if(tr.transition=null,Mt=1,e)return e()}finally{Mt=s,tr.transition=n,bt=t,(bt&6)===0&&Xr()}}function Si(){Kn=il.current,Ht(il)}function $s(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,qd(n)),qt!==null)for(n=qt.return;n!==null;){var s=n;switch(Pa(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&xo();break;case 3:ll(),Ht(Pn),Ht(wn),Ka();break;case 5:Wa(s);break;case 4:ll();break;case 13:Ht(Yt);break;case 19:Ht(Yt);break;case 10:za(s.type._context);break;case 22:case 23:Si()}n=n.return}if(an=e,qt=e=rs(e.current,null),xn=Kn=t,nn=0,Vl=null,gi=zo=Ds=0,An=Kl=null,ks!==null){for(t=0;t<ks.length;t++)if(n=ks[t],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,a=n.pending;if(a!==null){var i=a.next;a.next=l,s.next=i}n.pending=s}ks=null}return e}function Hc(e,t){do{var n=qt;try{if(Ra(),Eo.current=Lo,Do){for(var s=Xt.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Do=!1}if(Es=0,on=tn=Xt=null,zl=!1,Fl=0,xi.current=null,n===null||n.return===null){nn=1,Vl=t,qt=null;break}e:{var a=e,i=n.return,m=n,g=t;if(t=xn,m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var B=g,me=m,ve=me.tag;if((me.mode&1)===0&&(ve===0||ve===11||ve===15)){var de=me.alternate;de?(me.updateQueue=de.updateQueue,me.memoizedState=de.memoizedState,me.lanes=de.lanes):(me.updateQueue=null,me.memoizedState=null)}var ze=hc(i);if(ze!==null){ze.flags&=-257,pc(ze,i,m,a,t),ze.mode&1&&mc(a,B,t),t=ze,g=B;var He=t.updateQueue;if(He===null){var Ve=new Set;Ve.add(g),t.updateQueue=Ve}else He.add(g);break e}else{if((t&1)===0){mc(a,B,t),Mi();break e}g=Error(c(426))}}else if(Vt&&m.mode&1){var Zt=hc(i);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),pc(Zt,i,m,a,t),Aa(ol(g,m));break e}}a=g=ol(g,m),nn!==4&&(nn=2),Kl===null?Kl=[a]:Kl.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var D=dc(a,g,t);Ru(a,D);break e;case 1:m=g;var b=a.type,_=a.stateNode;if((a.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qr===null||!qr.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var Ne=fc(a,m,t);Ru(a,Ne);break e}}a=a.return}while(a!==null)}Kc(n)}catch(Qe){t=Qe,qt===n&&n!==null&&(qt=n=n.return);continue}break}while(!0)}function Wc(){var e=Ro.current;return Ro.current=Lo,e===null?Lo:e}function Mi(){(nn===0||nn===3||nn===2)&&(nn=4),an===null||(Ds&268435455)===0&&(zo&268435455)===0||ns(an,xn)}function Vo(e,t){var n=bt;bt|=2;var s=Wc();(an!==e||xn!==t)&&(_r=null,$s(e,t));do try{Mf();break}catch(l){Hc(e,l)}while(!0);if(Ra(),bt=n,Ro.current=s,qt!==null)throw Error(c(261));return an=null,xn=0,nn}function Mf(){for(;qt!==null;)Vc(qt)}function kf(){for(;qt!==null&&!Pe();)Vc(qt)}function Vc(e){var t=Xc(e.alternate,e,Kn);e.memoizedProps=e.pendingProps,t===null?Kc(e):qt=t,xi.current=null}function Kc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=yf(n,t,Kn),n!==null){qt=n;return}}else{if(n=vf(n,t),n!==null){n.flags&=32767,qt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nn=6,qt=null;return}}if(t=t.sibling,t!==null){qt=t;return}qt=t=e}while(t!==null);nn===0&&(nn=5)}function Ls(e,t,n){var s=Mt,l=tr.transition;try{tr.transition=null,Mt=1,Cf(e,t,n,s)}finally{tr.transition=l,Mt=s}return null}function Cf(e,t,n,s){do cl();while(es!==null);if((bt&6)!==0)throw Error(c(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(no(e,a),e===an&&(qt=an=null,xn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Bo||(Bo=!0,Gc(Ot,function(){return cl(),null})),a=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||a){a=tr.transition,tr.transition=null;var i=Mt;Mt=1;var m=bt;bt|=4,xi.current=null,jf(e,n),Ac(n,e),Kd(Ma),fs=!!Sa,Ma=Sa=null,e.current=n,bf(n),ke(),bt=m,Mt=i,tr.transition=a}else e.current=n;if(Bo&&(Bo=!1,es=e,Uo=l),a=e.pendingLanes,a===0&&(qr=null),or(n.stateNode),On(e,_e()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],s(l.value,{componentStack:l.stack,digest:l.digest});if(Fo)throw Fo=!1,e=vi,vi=null,e;return(Uo&1)!==0&&e.tag!==0&&cl(),a=e.pendingLanes,(a&1)!==0?e===wi?Ql++:(Ql=0,wi=e):Ql=0,Xr(),null}function cl(){if(es!==null){var e=xl(Uo),t=tr.transition,n=Mt;try{if(tr.transition=null,Mt=16>e?16:e,es===null)var s=!1;else{if(e=es,es=null,Uo=0,(bt&6)!==0)throw Error(c(331));var l=bt;for(bt|=4,Be=e.current;Be!==null;){var a=Be,i=a.child;if((Be.flags&16)!==0){var m=a.deletions;if(m!==null){for(var g=0;g<m.length;g++){var B=m[g];for(Be=B;Be!==null;){var me=Be;switch(me.tag){case 0:case 11:case 15:Wl(8,me,a)}var ve=me.child;if(ve!==null)ve.return=me,Be=ve;else for(;Be!==null;){me=Be;var de=me.sibling,ze=me.return;if($c(me),me===B){Be=null;break}if(de!==null){de.return=ze,Be=de;break}Be=ze}}}var He=a.alternate;if(He!==null){var Ve=He.child;if(Ve!==null){He.child=null;do{var Zt=Ve.sibling;Ve.sibling=null,Ve=Zt}while(Ve!==null)}}Be=a}}if((a.subtreeFlags&2064)!==0&&i!==null)i.return=a,Be=i;else e:for(;Be!==null;){if(a=Be,(a.flags&2048)!==0)switch(a.tag){case 0:case 11:case 15:Wl(9,a,a.return)}var D=a.sibling;if(D!==null){D.return=a.return,Be=D;break e}Be=a.return}}var b=e.current;for(Be=b;Be!==null;){i=Be;var _=i.child;if((i.subtreeFlags&2064)!==0&&_!==null)_.return=i,Be=_;else e:for(i=b;Be!==null;){if(m=Be,(m.flags&2048)!==0)try{switch(m.tag){case 0:case 11:case 15:Oo(9,m)}}catch(Qe){Gt(m,m.return,Qe)}if(m===i){Be=null;break e}var Ne=m.sibling;if(Ne!==null){Ne.return=m.return,Be=Ne;break e}Be=m.return}}if(bt=l,Xr(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(yn,e)}catch{}s=!0}return s}finally{Mt=n,tr.transition=t}}return!1}function Qc(e,t,n){t=ol(n,t),t=dc(e,t,1),e=Jr(e,t,1),t=En(),e!==null&&(gr(e,1,t),On(e,t))}function Gt(e,t,n){if(e.tag===3)Qc(e,e,n);else for(;t!==null;){if(t.tag===3){Qc(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qr===null||!qr.has(s))){e=ol(n,e),e=fc(t,e,1),t=Jr(t,e,1),e=En(),t!==null&&(gr(t,1,e),On(t,e));break}}t=t.return}}function Ef(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=En(),e.pingedLanes|=e.suspendedLanes&n,an===e&&(xn&n)===n&&(nn===4||nn===3&&(xn&130023424)===xn&&500>_e()-yi?$s(e,0):gi|=n),On(e,t)}function Yc(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ar,Ar<<=1,(Ar&130023424)===0&&(Ar=4194304)));var n=En();e=$r(e,t),e!==null&&(gr(e,t,n),On(e,n))}function Df(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yc(e,n)}function If(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(c(314))}s!==null&&s.delete(t),Yc(e,n)}var Xc;Xc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pn.current)Tn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Tn=!1,gf(e,t,n);Tn=(e.flags&131072)!==0}else Tn=!1,Vt&&(t.flags&1048576)!==0&&Eu(t,wo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;To(e,t),e=t.pendingProps;var l=Zs(t,wn.current);sl(t,n),l=Xa(null,t,s,e,l,n);var a=Ga();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_n(s)?(a=!0,go(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ua(t),l.updater=Po,t.stateNode=l,l._reactInternals=t,ni(t,s,e,n),t=oi(null,t,s,!0,a,n)):(t.tag=0,Vt&&a&&La(t),Cn(null,t,l,n),t=t.child),t;case 16:s=t.elementType;e:{switch(To(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=Lf(s),e=dr(s,e),l){case 0:t=li(null,t,s,e,n);break e;case 1:t=jc(null,t,s,e,n);break e;case 11:t=xc(null,t,s,e,n);break e;case 14:t=gc(null,t,s,dr(s.type,e),n);break e}throw Error(c(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:dr(s,l),li(e,t,s,l,n);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:dr(s,l),jc(e,t,s,l,n);case 3:e:{if(bc(t),e===null)throw Error(c(387));s=t.pendingProps,a=t.memoizedState,l=a.element,Ou(e,t),ko(t,s,null,n);var i=t.memoizedState;if(s=i.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=ol(Error(c(423)),t),t=Nc(e,t,s,n,l);break e}else if(s!==l){l=ol(Error(c(424)),t),t=Nc(e,t,s,n,l);break e}else for(Vn=Kr(t.stateNode.containerInfo.firstChild),Wn=t,Vt=!0,cr=null,n=Tu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),s===l){t=Pr(e,t,n);break e}Cn(e,t,s,n)}t=t.child}return t;case 5:return Fu(t),e===null&&Ta(t),s=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,i=l.children,ka(s,l)?i=null:a!==null&&ka(s,a)&&(t.flags|=32),wc(e,t),Cn(e,t,i,n),t.child;case 6:return e===null&&Ta(t),null;case 13:return Sc(e,t,n);case 4:return Ha(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=nl(t,null,s,n):Cn(e,t,s,n),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:dr(s,l),xc(e,t,s,l,n);case 7:return Cn(e,t,t.pendingProps,n),t.child;case 8:return Cn(e,t,t.pendingProps.children,n),t.child;case 12:return Cn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,a=t.memoizedProps,i=l.value,Ft(No,s._currentValue),s._currentValue=i,a!==null)if(ur(a.value,i)){if(a.children===l.children&&!Pn.current){t=Pr(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var m=a.dependencies;if(m!==null){i=a.child;for(var g=m.firstContext;g!==null;){if(g.context===s){if(a.tag===1){g=Lr(-1,n&-n),g.tag=2;var B=a.updateQueue;if(B!==null){B=B.shared;var me=B.pending;me===null?g.next=g:(g.next=me.next,me.next=g),B.pending=g}}a.lanes|=n,g=a.alternate,g!==null&&(g.lanes|=n),Fa(a.return,n,t),m.lanes|=n;break}g=g.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(c(341));i.lanes|=n,m=i.alternate,m!==null&&(m.lanes|=n),Fa(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Cn(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,sl(t,n),l=qn(l),s=s(l),t.flags|=1,Cn(e,t,s,n),t.child;case 14:return s=t.type,l=dr(s,t.pendingProps),l=dr(s.type,l),gc(e,t,s,l,n);case 15:return yc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:dr(s,l),To(e,t),t.tag=1,_n(s)?(e=!0,go(t)):e=!1,sl(t,n),uc(t,s,l),ni(t,s,l,n),oi(null,t,s,!0,e,n);case 19:return kc(e,t,n);case 22:return vc(e,t,n)}throw Error(c(156,t.tag))};function Gc(e,t){return Me(e,t)}function $f(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(e,t,n,s){return new $f(e,t,n,s)}function ki(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lf(e){if(typeof e=="function")return ki(e)?1:0;if(e!=null){if(e=e.$$typeof,e===je)return 11;if(e===$e)return 14}return 2}function rs(e,t){var n=e.alternate;return n===null?(n=nr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ko(e,t,n,s,l,a){var i=2;if(s=e,typeof e=="function")ki(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case he:return Ps(n.children,l,a,t);case z:i=8,l|=8;break;case ee:return e=nr(12,n,t,l|2),e.elementType=ee,e.lanes=a,e;case Q:return e=nr(13,n,t,l),e.elementType=Q,e.lanes=a,e;case ue:return e=nr(19,n,t,l),e.elementType=ue,e.lanes=a,e;case X:return Qo(n,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H:i=10;break e;case K:i=9;break e;case je:i=11;break e;case $e:i=14;break e;case oe:i=16,s=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=nr(i,n,t,l),t.elementType=e,t.type=s,t.lanes=a,t}function Ps(e,t,n,s){return e=nr(7,e,s,t),e.lanes=n,e}function Qo(e,t,n,s){return e=nr(22,e,s,t),e.elementType=X,e.lanes=n,e.stateNode={isHidden:!1},e}function Ci(e,t,n){return e=nr(6,e,null,t),e.lanes=n,e}function Ei(e,t,n){return t=nr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Pf(e,t,n,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zs(0),this.expirationTimes=zs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zs(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Di(e,t,n,s,l,a,i,m,g){return e=new Pf(e,t,n,m,g),t===1?(t=1,a===!0&&(t|=8)):t=0,a=nr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ua(a),e}function _f(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Jc(e){if(!e)return Yr;e=e._reactInternals;e:{if(en(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_n(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var n=e.type;if(_n(n))return Mu(e,n,t)}return t}function Zc(e,t,n,s,l,a,i,m,g){return e=Di(n,s,!0,e,l,a,i,m,g),e.context=Jc(null),n=e.current,s=En(),l=ts(n),a=Lr(s,l),a.callback=t??null,Jr(n,a,l),e.current.lanes=l,gr(e,l,s),On(e,s),e}function Yo(e,t,n,s){var l=t.current,a=En(),i=ts(l);return n=Jc(n),t.context===null?t.context=n:t.pendingContext=n,t=Lr(a,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Jr(l,t,i),e!==null&&(hr(e,l,i,a),Mo(e,l,i)),i}function Xo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ii(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}function Tf(){return null}var ed=typeof reportError=="function"?reportError:function(e){console.error(e)};function $i(e){this._internalRoot=e}Go.prototype.render=$i.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));Yo(e,t,null,null)},Go.prototype.unmount=$i.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Is(function(){Yo(null,e,null,null)}),t[Cr]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&us(e)}};function Li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function td(){}function Af(e,t,n,s,l){if(l){if(typeof s=="function"){var a=s;s=function(){var B=Xo(i);a.call(B)}}var i=Zc(t,s,e,0,null,!1,!1,"",td);return e._reactRootContainer=i,e[Cr]=i.current,$l(e.nodeType===8?e.parentNode:e),Is(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var m=s;s=function(){var B=Xo(g);m.call(B)}}var g=Di(e,0,!1,null,null,!1,!1,"",td);return e._reactRootContainer=g,e[Cr]=g.current,$l(e.nodeType===8?e.parentNode:e),Is(function(){Yo(t,g,n,s)}),g}function Zo(e,t,n,s,l){var a=n._reactRootContainer;if(a){var i=a;if(typeof l=="function"){var m=l;l=function(){var g=Xo(i);m.call(g)}}Yo(t,i,e,l)}else i=Af(n,t,e,l,s);return Xo(i)}gl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Or(t.pendingLanes);n!==0&&(zr(t,n|1),On(t,_e()),(bt&6)===0&&(ul=_e()+500,Xr()))}break;case 13:Is(function(){var s=$r(e,1);if(s!==null){var l=En();hr(s,e,1,l)}}),Ii(e,1)}},Fn=function(e){if(e.tag===13){var t=$r(e,134217728);if(t!==null){var n=En();hr(t,e,134217728,n)}Ii(e,134217728)}},ro=function(e){if(e.tag===13){var t=ts(e),n=$r(e,t);if(n!==null){var s=En();hr(n,e,t,s)}Ii(e,t)}},Fs=function(){return Mt},yl=function(e,t){var n=Mt;try{return Mt=e,t()}finally{Mt=n}},Pt=function(e,t,n){switch(t){case"input":if(Ct(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var l=po(s);if(!l)throw Error(c(90));Ye(s),Ct(s,l)}}}break;case"textarea":We(e,n);break;case"select":t=n.value,t!=null&&pt(e,!!n.multiple,t,!1)}},_t=Ni,tt=Is;var Of={usingClientEntryPoint:!1,Events:[_l,Gs,po,zt,$t,Ni]},Yl={findFiberByHostInstance:bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rf={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Qn(e),e===null?null:e.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||Tf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{yn=qo.inject(Rf),ln=qo}catch{}}return Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Of,Rn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Li(t))throw Error(c(200));return _f(e,t,null,n)},Rn.createRoot=function(e,t){if(!Li(e))throw Error(c(299));var n=!1,s="",l=ed;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Di(e,1,!1,null,null,n,!1,s,l),e[Cr]=t.current,$l(e.nodeType===8?e.parentNode:e),new $i(t)},Rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=Qn(t),e=e===null?null:e.stateNode,e},Rn.flushSync=function(e){return Is(e)},Rn.hydrate=function(e,t,n){if(!Jo(t))throw Error(c(200));return Zo(null,e,t,!0,n)},Rn.hydrateRoot=function(e,t,n){if(!Li(e))throw Error(c(405));var s=n!=null&&n.hydratedSources||null,l=!1,a="",i=ed;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Zc(t,null,e,1,n??null,l,!1,a,i),e[Cr]=t.current,$l(e),s)for(e=0;e<s.length;e++)n=s[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Go(t)},Rn.render=function(e,t,n){if(!Jo(t))throw Error(c(200));return Zo(null,e,t,!1,n)},Rn.unmountComponentAtNode=function(e){if(!Jo(e))throw Error(c(40));return e._reactRootContainer?(Is(function(){Zo(null,null,e,!1,function(){e._reactRootContainer=null,e[Cr]=null})}),!0):!1},Rn.unstable_batchedUpdates=Ni,Rn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Jo(n))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return Zo(e,t,n,!1,s)},Rn.version="18.3.1-next-f1338f8080-20240426",Rn}var ud;function Kf(){if(ud)return Ti.exports;ud=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(f){console.error(f)}}return o(),Ti.exports=Vf(),Ti.exports}var cd;function Qf(){if(cd)return ea;cd=1;var o=Kf();return ea.createRoot=o.createRoot,ea.hydrateRoot=o.hydrateRoot,ea}var Yf=Qf();const Xf=wd(Yf),it=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Sn=[{id:"America/Los_Angeles",label:"PT",offset:0,name:"Pacific Time"},{id:"America/Denver",label:"MT",offset:1,name:"Mountain Time"},{id:"America/Chicago",label:"CT",offset:2,name:"Central Time"},{id:"America/New_York",label:"ET",offset:3,name:"Eastern Time"}],Gl=24,Zl=["Morning Meeting","Midday Meeting","Afternoon Meeting"];function ls(){return Math.random().toString(36).slice(2,9)}function Re(o){const[f,c]=o.split(":").map(Number);return f*60+(c||0)}function It(o){const f=(o%1440+1440)%1440,c=Math.floor(f/60),p=f%60;return`${String(c).padStart(2,"0")}:${String(p).padStart(2,"0")}`}function jd(o,f="24h"){const c=(o%1440+1440)%1440;if(f==="12h"){const p=Math.floor(c/60),x=c%60,h=p>=12?"PM":"AM";return`${p%12===0?12:p%12}:${String(x).padStart(2,"0")} ${h}`}return It(c)}function gn(o){const[f,c,p]=o.split("-").map(Number);return new Date(f,c-1,p)}function Mn(o,f){const c=new Date(o);return c.setDate(o.getDate()+f),c}function rn(o){return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`}function ta(o){return o.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function Gf(o,f){const c=o.getFullYear(),p=f.getFullYear(),x=o.getMonth(),h=f.getMonth(),S=o.getDate(),$=f.getDate(),E=o.toLocaleString(void 0,{month:"short"}),G=f.toLocaleString(void 0,{month:"short"});return c===p&&x===h&&S===$?ta(o):c===p&&x===h?`${E} ${S}${$}, ${c}`:c===p?`${E} ${S}  ${G} ${$}, ${c}`:`${E} ${S}, ${c}  ${G} ${$}, ${p}`}function na(o){const c=0-o.getDay(),p=new Date(o);return p.setDate(o.getDate()+c),p.setHours(0,0,0,0),p}function pr(o){try{const c=new Intl.DateTimeFormat("en-US",{timeZone:o,hour:"2-digit",minute:"2-digit",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"}).formatToParts(new Date),p=W=>c.find(te=>te.type===W)?.value||"",x=parseInt(p("hour")||"0",10),h=parseInt(p("minute")||"0",10),S=parseInt(p("year")||"0",10),$=parseInt(p("month")||"0",10),E=parseInt(p("day")||"0",10),G=(p("weekday")||"").slice(0,3),J=(x*60+h)%1440,T=`${S}-${String($).padStart(2,"0")}-${String(E).padStart(2,"0")}`;return{minutes:J,ymd:T,weekdayShort:G,h:x,m:h,y:S,mo:$,d:E}}catch{const f=new Date,c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][f.getDay()];return{minutes:f.getHours()*60+f.getMinutes(),ymd:rn(f),weekdayShort:c,h:f.getHours(),m:f.getMinutes(),y:f.getFullYear(),mo:f.getMonth()+1,d:f.getDate()}}}function fl(o,f=new Date){try{const x=new Intl.DateTimeFormat("en-US",{timeZone:o,timeZoneName:"short",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(f).find(h=>h.type==="timeZoneName")?.value;if(x&&/[A-Z]{2,4}/.test(x))return x}catch{}try{const x=new Intl.DateTimeFormat("en-US",{timeZone:o,timeZoneName:"shortOffset"}).formatToParts(f).find(h=>h.type==="timeZoneName")?.value;if(x)return x}catch{}return"UTC"}function Fi(o,f){return(o%f+f)%f}function dd(o,f){const c=it.indexOf(o),p=Fi(c+f,7);return it[p]}function As(o,f){const c=[],p=f*60;for(const x of o){const h=Re(x.start),S=x.end==="24:00"?1440:Re(x.end),$=typeof x.endDay=="string"?x.endDay!==x.day:S<h&&x.end!=="24:00",E=x.end==="24:00"?1440-h:$?1440-h+S:S-h,G=h+E,J=h+p,T=G+p,W=Math.floor(J/1440),te=Math.floor((T-1)/1440),xe=Fi(J,1440),Y=Fi(T,1440),Z=dd(x.day,W),V=dd(x.day,te);W===te?c.push({...x,day:Z,start:It(xe),end:T-J===1440?"24:00":It(Y)}):(c.push({...x,day:Z,start:It(xe),end:"24:00",endDay:V}),c.push({...x,day:V,start:"00:00",end:It(Y),endDay:V}))}return c}function ra(o,f,c){return As(o,c).filter(x=>x.day===f)}function rr(o,f,c){if(f){const p=o.find(x=>x.id&&x.id===f);if(p){const x=`${p.firstName||""} ${p.lastName||""}`.trim();if(x)return x}}return(c||"").trim()}function dl(o,f){const c=(f||"").trim().toLowerCase();return c?o.find(x=>`${x.firstName||""} ${x.lastName||""}`.trim().toLowerCase()===c)?.id:void 0}function sa(o,f){const c=Re(o.start),p=Re(o.end),h=(p>c?p:1440)-c,S=o.segments||[],$=f.map(T=>{const W=Re(T.start),te=Re(T.end),xe=Math.max(0,Math.min(h,W-c)),Y=Math.max(0,Math.min(h,te-c)),Z=Math.max(0,Y-xe);return Z>0?{taskId:T.taskId,startOffsetMin:xe,durationMin:Z}:null}).filter(Boolean),E=new Array(h).fill(null);for(const T of $)for(let W=T.startOffsetMin;W<T.startOffsetMin+T.durationMin&&W<h;W++)E[W]==null&&(E[W]={taskId:T.taskId,source:"cal"});for(const T of S)for(let W=T.startOffsetMin;W<T.startOffsetMin+T.durationMin&&W<h;W++)E[W]={taskId:T.taskId,source:"manual"};const G=[];let J=0;for(;J<h;){const T=E[J];if(!T){J++;continue}const W=J,te=T.taskId;let xe=J+1;for(;xe<h&&E[xe]&&E[xe].taskId===te&&E[xe].source===T.source;)xe++;G.push({id:`${o.id}-${te}-${W}`,shiftId:o.id,taskId:te,startOffsetMin:W,durationMin:xe-W}),J=xe}return G}const la=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Jf(o){const f=[];for(const c of o){const p=Re(c.start),x=c.end==="24:00"?1440:Re(c.end);if(typeof c.endDay=="string"?c.endDay!==c.day:x<p&&c.end!=="24:00"){const S=la.indexOf(c.day),$=c.endDay||la[(S+1)%7];f.push({...c,end:"24:00",endDay:$}),f.push({...c,day:$,start:"00:00",end:c.end,endDay:$})}else f.push(c)}return f}function fd(o){return Math.max(0,Math.min(1440,o))}function md(o){const f=Math.floor(o/60),c=o%60;return`${String(f).padStart(2,"0")}:${String(c).padStart(2,"0")}`}function hd(o,f,c,p){const x=c>=1440?"24:00":md(c),h=md(f),S={...o,id:`${o.id}${p}`,start:h,end:x};return x!=="24:00"&&S.endDay&&S.endDay!==S.day&&delete S.endDay,S}function bd(o,f,c,p,x){const h=fd(p),S=fd(x);if(S>h)for(let $=o.length-1;$>=0;$--){const E=o[$];if(E.person!==f||E.day!==c)continue;const G=Re(E.start),J=E.end==="24:00"?1440:Re(E.end),T=Math.max(G,h),W=Math.min(J,S);if(!(W>T))continue;const te=T-G,xe=J-W;o.splice($,1),xe>0&&o.splice($,0,hd(E,W,J,"-b")),te>0&&o.splice($,0,hd(E,G,T,"-a"))}}function Zf(o,f){const{override:c,ymd:p,day:x,start:h,end:S,endDay:$,agents:E}=f;o.push({id:`ov:${c.id}:${p}`,person:c.person,agentId:dl(E,c.person),day:x,start:h,end:S,...$?{endDay:$}:{}})}function qf(o,f,c){let p=null;for(const x of o)if(x.person===f.person&&x.day===c){const h=Re(x.start);(p==null||h<p)&&(p=h)}p!=null&&bd(o,f.person,c,p,p+480)}function e0(o,f,c){const{current:p,nextDay:x,ymd:h,day:S,agents:$,skipAddForYmd:E}=c;for(let Y=o.length-1;Y>=0;Y--){const Z=o[Y];Z.person===f.person&&Z.day===S&&o.splice(Y,1)}if(E.has(h))return;const G=f.start,J=f.end,T=Re(G),W=Re(J),te=W<=T&&J!=="24:00";if(Zf(o,{override:f,ymd:h,day:S,start:G,end:J,endDay:te?x:void 0,agents:$}),te){const Y=Math.max(W%1440,480);bd(o,f.person,x,0,Y);const Z=rn(Mn(p,1));E.add(Z)}}function pd(o){const{start:f,end:c,ov:p,pieces:x,week0:h,week6:S,agents:$,skipAddForYmd:E}=o,G=W=>W>=rn(h)&&W<=rn(S);let J=new Date(f);const T=new Date(c);for(;J<=T;){const W=rn(J);if(G(W)){const te=la[J.getDay()];if(p.start&&p.end){const xe=la[(J.getDay()+1)%7];e0(x,p,{current:J,nextDay:xe,ymd:W,day:te,agents:$,skipAddForYmd:E})}else qf(x,p,te)}J=Mn(J,1)}}function Nd(o,f,c,p){const x=Array.isArray(o)?o:[],h=Jf(x),S=Array.isArray(f)?f:[];if(S.length===0)return h;const $=gn(c),E=Mn($,6),G=new Set;for(const J of S){let T=gn(J.startDate),W=gn(J.endDate);if(J.recurrence?.rule==="weekly"){const te=J.recurrence.until?gn(J.recurrence.until):null;let xe=0;for(;W<$&&xe<200&&(T=Mn(T,7),W=Mn(W,7),xe++,!(te&&T>te)););for(;T<=E&&(!te||T<=te);)pd({start:T,end:W,ov:J,pieces:h,week0:$,week6:E,agents:p,skipAddForYmd:G}),T=Mn(T,7),W=Mn(W,7)}else pd({start:T,end:W,ov:J,pieces:h,week0:$,week6:E,agents:p,skipAddForYmd:G})}return h}const t0=()=>crypto.randomUUID?.()||Math.random().toString(36).slice(2);function n0(o){if(typeof o=="string"){const f=o.trim();return f.length===0?null:f}if(o===null)return null}function r0(o,f={}){const c=f.generateId??t0,p=o.id?String(o.id):c(),x=n0(o.meetingCohort),h={id:p,firstName:o.firstName||"",lastName:o.lastName||"",tzId:o.tzId,hidden:!!o.hidden,isSupervisor:o.isSupervisor===!0,supervisorId:o.supervisorId??null,notes:o.notes};return x!==void 0&&(h.meetingCohort=x),h}function Ts(o,f){return o.map(c=>r0(c,f))}async function s0(o,f,c){const p=Ts(o,c);return f(p)}const Os="",Dn="".replace(/\/$/,""),In="/api".replace(/\/$/,""),l0=!1,o0=new Set([404,405,501]);let _s=null,Jl=null;function Sr(){_s=!1}function ml(o){return typeof o=="number"&&o0.has(o)}async function ql(){if(_s===!0)return!0;if(_s===!1)return!1;if(Jl)return Jl;const o=`${Dn}${In}/v2/agents?__probe=1`;return Jl=(async()=>{try{const f=await fetch(o,{method:"GET",credentials:"include",headers:{accept:"application/json"}});ml(f.status)?_s=!1:_s=!0}catch{_s=!1}finally{Jl=null}return _s===!0})(),Jl}function Sd(){return Dn}function a0(){return l0}function Md(){return In}let Qi=null;function kd(){if(typeof document>"u")return null;const o=document.cookie.match(/(?:^|; )csrf=([^;]+)/);return o?decodeURIComponent(o[1]):null}function os(){return Qi||kd()}function oa(){return!!os()}function xd(){return{cookie:!!kd(),memory:!!Qi,token:!!os()}}async function i0(o){try{const f=await fetch(`${Dn}${In}/login`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:o})});if(f.ok){try{const c=await f.clone().json();c&&typeof c.csrf=="string"&&(Qi=c.csrf)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:auth",{detail:{loggedIn:!0}}))}catch{}}return{ok:f.ok,status:f.status}}catch{return{ok:!1}}}async function Cd(o,f="admin"){try{const c=await fetch(`${Dn}${In}/login-magic/request`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:o,role:f})}),p=c.ok;let x;try{const h=await c.clone().json();h&&typeof h.link=="string"&&(x=h.link)}catch{}return{ok:p,link:x}}catch{return{ok:!1}}}async function u0(o){try{const f=await fetch(`${Dn}${In}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:o})});return{ok:f.ok,status:f.status}}catch{return{ok:!1}}}async function Bi(){try{const o=`${Dn}${In}/schedule`,c=await fetch(o,{credentials:"include"});return c.ok?await c.json():null}catch{return null}}async function Ed(o){try{const f=os();if(!f&&!Os)return console.warn("[cloudPost] CSRF token missing; writes are disabled without an authenticated session."),{ok:!1,error:"missing_csrf"};const c=`${Dn}${In}/schedule`,p={"Content-Type":"application/json"};f&&(p["x-csrf-token"]=f);const x=await fetch(c,{method:"POST",headers:p,credentials:"include",body:JSON.stringify(o)});if(x.ok)return{ok:!0,status:x.status};let h,S;try{if((x.headers.get("content-type")||"").includes("application/json")){const E=await x.json();h=E&&(E.error||E.code||E.message),S=JSON.stringify(E)}else S=await x.text()}catch{}return{ok:!1,status:x.status,error:h,bodyText:S}}catch{return{ok:!1}}}async function c0(o){return!!(await Ed(o)).ok}async function Ui(o){try{const f=os(),c={"Content-Type":"application/json"};f&&(c["x-csrf-token"]=f);const p=Ts(o);if(await ql())try{const S=await fetch(`${Dn}${In}/v2/agents`,{method:"PATCH",credentials:"include",headers:c,body:JSON.stringify({agents:p})});if(S.ok)return!0;ml(S.status)&&Sr()}catch{Sr()}return(await fetch(`${Dn}${In}/agents`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify({agents:p})})).ok}catch{return!1}}async function d0(o){try{const f=os(),c={"Content-Type":"application/json"};if(f&&(c["x-csrf-token"]=f),await ql())try{const p=await fetch(`${Dn}${In}/v2/shifts/batch`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify({upserts:o.upserts||[],deletes:o.deletes||[]})});if(p.ok)return!0;ml(p.status)&&Sr()}catch{Sr()}return!1}catch{return!1}}async function gd(o){try{if((await fetch(`${Dn}${In}/schedule`,{method:"GET",credentials:"include"})).ok)return!0}catch{}if(o&&o.length>=3)try{if((await fetch(`${Dn}${In}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:o})})).ok)return!0}catch{}return!1}async function f0(o){if(!await ql())return{ok:!1,status:404,error:"unsupported"};try{const f=os(),c={"Content-Type":"application/json"};f&&(c["x-csrf-token"]=f);const p=await fetch(`${Dn}${In}/v2/proposals`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify(o)});let x;try{const h=await p.clone().json();h&&typeof h.id=="string"&&(x=h.id)}catch{}return p.ok?{ok:!0,id:x,status:p.status}:(ml(p.status)&&Sr(),{ok:!1,status:p.status})}catch{return Sr(),{ok:!1}}}async function yd(){if(!await ql())return{ok:!1,status:404};try{const o=os(),f={};o&&(f["x-csrf-token"]=o);const c=await fetch(`${Dn}${In}/v2/proposals`,{method:"GET",credentials:"include",headers:f});if(!c.ok)return ml(c.status)&&Sr(),{ok:!1,status:c.status};const p=await c.json();return{ok:!0,proposals:Array.isArray(p?.proposals)?p.proposals:[]}}catch{return Sr(),{ok:!1}}}async function m0(o){if(!await ql())return{ok:!1,status:404};try{const f=os(),c={};f&&(c["x-csrf-token"]=f);const p=await fetch(`${Dn}${In}/v2/proposals/${encodeURIComponent(o)}`,{method:"GET",credentials:"include",headers:c});return p.ok?{ok:!0,proposal:(await p.json())?.proposal}:(ml(p.status)&&Sr(),{ok:!1,status:p.status})}catch{return Sr(),{ok:!1}}}const h0=[{id:"system",label:"System",chips:[]},{id:"default-light",label:"Default Light",chips:["#ffffff","#111827"]},{id:"default-dark",label:"Default Dark",chips:["#0a0a0a","#e5e7eb"]},{id:"night-light",label:"Night Light",chips:["#ffffff","#ef4444"]},{id:"night-dark",label:"Night Dark",chips:["#000000","#ef4444"]},{id:"noir-light",label:"Noir Light",chips:["#ffffff","#000000"]},{id:"noir-dark",label:"Noir Dark",chips:["#000000","#ffffff"]},{id:"prism-light",label:"Prism Light",chips:["#f0f9ff","#0ea5e9"]},{id:"prism-dark",label:"Prism Dark",chips:["#0f172a","#a3a3a3"]}];function p0({dark:o}){const[f,c]=y.useState(!1),p=y.useMemo(()=>{try{return localStorage.getItem("schedule_theme")||"system"}catch{return"system"}},[]),x=h=>{try{window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:h}}))}catch{}c(!1)};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>c(h=>!h),"aria-haspopup":"menu","aria-expanded":f,className:["h-10 px-3 rounded-lg border text-sm font-medium inline-flex items-center gap-2",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),title:"Choose theme","aria-label":"Choose theme",children:[r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"4"}),r.jsx("path",{d:"M12 2v2"}),r.jsx("path",{d:"M12 20v2"}),r.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),r.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),r.jsx("path",{d:"M2 12h2"}),r.jsx("path",{d:"M20 12h2"}),r.jsx("path",{d:"m4.93 19.07 1.41-1.41"}),r.jsx("path",{d:"m17.66 6.34 1.41-1.41"})]}),r.jsx("span",{className:"sr-only",children:"Theme"})]}),f&&r.jsx("div",{className:["absolute right-0 mt-2 z-50 w-[320px] rounded-xl p-2 border shadow-lg",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-200"].join(" "),role:"menu",children:r.jsx("div",{className:"grid grid-cols-2 gap-2",children:h0.map(h=>r.jsxs("button",{onClick:()=>x(h.id),className:["flex items-center gap-2 p-2 rounded-lg border text-left",o?"hover:bg-neutral-800 border-neutral-700":"hover:bg-neutral-100 border-neutral-300",p===h.id?"ring-1 ring-blue-500":"",h.id==="system"?"col-span-2":""].join(" "),children:[r.jsx("div",{className:"flex -space-x-1",children:h.chips.map((S,$)=>r.jsx("span",{className:"inline-block w-5 h-5 rounded-full border border-black/10",style:{background:S}},$))}),r.jsx("span",{className:"text-sm",children:h.label})]},h.id))})})]})}function x0({dark:o,setDark:f,view:c,setView:p,weekStart:x,setWeekStart:h,tz:S,setTz:$,canEdit:E,editMode:G,setEditMode:J}){const W=/^\d{4}-\d{2}-\d{2}$/.test(x)&&!Number.isNaN(gn(x).getTime()),te=W?gn(x):na(new Date),xe=Mn(te,6),[Y,Z]=y.useState(!1),V=y.useRef(null);return y.useEffect(()=>{if(!Y)return;const M=j=>{const R=j.target;V.current&&!V.current.contains(R)&&Z(!1)},A=j=>{j.key==="Escape"&&Z(!1)};return document.addEventListener("mousedown",M),document.addEventListener("keydown",A),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("keydown",A)}},[Y]),r.jsx(r.Fragment,{children:r.jsx("header",{className:"mb-1",children:r.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] sm:grid-cols-[1fr_auto_1fr] items-center gap-2 sm:gap-3 pt-0.5 pb-1 sm:pt-1 sm:pb-2",children:[r.jsx("div",{className:"block sm:hidden","aria-hidden":"true",children:r.jsx("div",{className:"h-9 w-9"})}),r.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-2 justify-start",children:[r.jsx("button",{onClick:()=>p("schedule"),"aria-label":"Schedule",title:"Schedule",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="schedule"?o?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[r.jsx("rect",{x:"3",y:"4.5",width:"18",height:"16",rx:"2"}),r.jsx("path",{d:"M8 3v3"}),r.jsx("path",{d:"M16 3v3"}),r.jsx("path",{d:"M3 9.5h18"}),r.jsx("path",{d:"M8 13h3"}),r.jsx("path",{d:"M8 17h8"})]})}),r.jsx("button",{onClick:()=>p("teams"),"aria-label":"Teams",title:"Teams",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="teams"?o?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[r.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"}),r.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),r.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),r.jsx("button",{onClick:()=>p("manageV2"),"aria-label":"Manage v2",title:"Manage v2",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="manageV2"?o?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:r.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})})]}),r.jsxs("div",{className:"text-center whitespace-nowrap overflow-visible leading-tight",children:[r.jsx("div",{className:[o?"text-neutral-400":"text-neutral-600","font-semibold","text-[0.88rem] sm:text-[0.95rem]"].join(" "),children:"Customer Care Team Schedule"}),c==="manageV2"?r.jsx("div",{className:["font-bold tracking-wide",o?"text-red-300":"text-red-600","text-[1.15rem] sm:text-[1.35rem]"].join(" "),style:{letterSpacing:"0.02em"},children:"PORTAL OF POWER"}):r.jsx("div",{className:["font-medium tabular-nums","text-[1.15rem] sm:text-[1.35rem]"].join(" "),style:{letterSpacing:"0.005em"},children:Gf(te,xe)})]}),r.jsxs("div",{className:"relative flex items-center gap-2 justify-end w-full sm:w-auto",children:[r.jsx("div",{className:"sm:hidden",children:r.jsx("button",{onClick:()=>Z(M=>!M),"aria-haspopup":"menu","aria-expanded":Y,title:"Menu",className:["inline-flex items-center justify-center h-9 w-9 rounded-lg border",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M21 4H14"}),r.jsx("path",{d:"M10 4H3"}),r.jsx("path",{d:"M18 8V4"}),r.jsx("path",{d:"M6 20V4"}),r.jsx("path",{d:"M21 20H12"}),r.jsx("path",{d:"M8 20H3"}),r.jsx("path",{d:"M12 14H3"}),r.jsx("path",{d:"M18 14H21"}),r.jsx("path",{d:"M12 14V20"})]})})}),Y&&r.jsxs("div",{ref:V,className:["absolute right-0 top-full mt-2 z-50 w-[18rem] max-w-[calc(100vw-1rem)] rounded-xl p-3 border shadow-lg",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),role:"menu",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-xs font-semibold opacity-70 mb-1",children:"View"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>{p("schedule"),Z(!1)},className:["h-9 rounded-lg border text-sm font-medium",c==="schedule"?o?"bg-neutral-800 border-neutral-600":"bg-white border-blue-600 text-blue-600":o?"border-neutral-700":"border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-label":"Schedule",title:"Schedule",children:"Schedule"}),r.jsx("button",{onClick:()=>{p("manageV2"),Z(!1)},className:["h-9 rounded-lg border text-sm font-medium",c==="manageV2"?o?"bg-neutral-800 border-neutral-600":"bg-white border-blue-600 text-blue-600":o?"border-neutral-700":"border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-label":"Manage",title:"Manage",children:"Manage"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Timezone"}),r.jsxs("div",{className:"relative",children:[r.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",o?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M2 12h20"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),r.jsx("select",{className:["border rounded-lg pl-9 pr-2 h-9 text-sm appearance-none w-full",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:S.id,onChange:M=>{const A=Sn.find(j=>j.id===M.target.value);A&&$(A)},children:Sn.map(M=>r.jsx("option",{value:M.id,children:fl(M.id)},M.id))})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Week start (Sun)"}),r.jsx("input",{className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:W?x:rn(te),onChange:M=>{const A=M.target.value;/^\d{4}-\d{2}-\d{2}$/.test(A)?h(A):h(rn(na(new Date)))},style:{colorScheme:o?"dark":"light"}})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Theme"}),r.jsxs("select",{className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full appearance-none",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),defaultValue:(()=>{try{const M=localStorage.getItem("schedule_theme");return M==="unicorn"?"system":M||"system"}catch{return"system"}})(),onChange:M=>{const A=M.target.value;try{localStorage.setItem("schedule_theme",A)}catch{}window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:A}}))},children:[r.jsx("option",{value:"system",children:"System"}),r.jsx("option",{value:"light",children:"Light"}),r.jsx("option",{value:"dark",children:"Dark"}),r.jsx("option",{value:"night",children:"Night"}),r.jsx("option",{value:"noir",children:"Noir"}),r.jsx("option",{value:"prism",children:"Prism"})]})]})]})]}),r.jsxs("div",{className:"hidden sm:block relative w-auto",children:[r.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",o?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M2 12h20"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),r.jsx("select",{"aria-label":"Timezone",title:"Timezone",className:["border rounded-lg pl-9 pr-2 h-9 sm:h-10 text-sm appearance-none min-w-[4.5rem] w-auto",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:S.id,onChange:M=>{const A=Sn.find(j=>j.id===M.target.value);A&&$(A)},children:Sn.map(M=>r.jsx("option",{value:M.id,children:fl(M.id)},M.id))})]}),r.jsx("div",{className:"hidden sm:block relative w-auto",children:r.jsx("input",{"aria-label":"Week start (Sun)",title:"Week start (Sun)",className:["border rounded-lg pl-3 pr-2 h-9 sm:h-10 text-sm w-auto min-w-[9.5rem]",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:W?x:rn(te),onChange:M=>{const A=M.target.value;/^\d{4}-\d{2}-\d{2}$/.test(A)?h(A):h(rn(na(new Date)))},style:{colorScheme:o?"dark":"light"}})}),r.jsx("div",{className:"hidden sm:block [&>button]:h-9 sm:[&>button]:h-10",children:r.jsx(p0,{dark:o})})]})]})})})}function Hi(o){const f=Re(o.start),c=o.end==="24:00"?1440:Re(o.end),p=o.endDay;return(typeof p=="string"?p!==o.day:c<=f&&o.end!=="24:00")?[{day:o.day,startMin:f,endMin:1440},{day:p||w0(o.day),startMin:0,endMin:c}]:[{day:o.day,startMin:f,endMin:c}]}function Dd(o,f){const c=Hi(o),p=Hi(f);for(const x of c)for(const h of p)if(x.day===h.day&&v0(x.startMin,x.endMin,h.startMin,h.endMin))return!0;return!1}function g0(o,f){for(const c of f)if(c.id!==o.id&&Dd(o,c))return!0;return!1}function y0(o){return Hi(o).reduce((c,p)=>c+(p.endMin-p.startMin),0)}function v0(o,f,c,p){return o<p&&f>c}function w0(o){const f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return f[(f.indexOf(o)+1)%7]}function j0({date:o,dayKey:f,people:c,shifts:p,pto:x,dark:h,tz:S,canEdit:$,editMode:E,onRemove:G,showHeaderTitle:J=!0,tasks:T,compact:W,agents:te}){const Y=y.useRef(null),[Z,V]=ce.useState(0),[M,A]=ce.useState(()=>{try{const ye=localStorage.getItem("schedule_theme");return ye==="unicorn"?"system":ye||"system"}catch{return"system"}});ce.useEffect(()=>{(()=>{const N=document.querySelector("[data-theme]")?.getAttribute("data-theme")||null;N&&A(N)})();const ae=We=>{const N=We;if(N?.detail?.value){const k=N.detail.value;A(k==="unicorn"?"system":k)}};return window.addEventListener("schedule:set-theme",ae),()=>window.removeEventListener("schedule:set-theme",ae)},[]),ce.useEffect(()=>{const ye=()=>{Y.current&&V(Y.current.clientWidth)};return ye(),window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[]);const j=Array.from({length:24},(ye,ae)=>ae),R=h?"text-neutral-500":"text-neutral-400",he=(()=>{const[ye,ae]=ce.useState(typeof window<"u"?window.innerWidth:1280);return ce.useEffect(()=>{const We=()=>ae(window.innerWidth);return window.addEventListener("resize",We),()=>window.removeEventListener("resize",We)},[]),ye})(),z=he>=1024?"lg":he>=768?"md":he>=640?"sm":"xs",ee=z==="lg"?1:z==="md"?.9:z==="sm"?.82:.75,H=Math.max(12,Math.round(13*ee)),K=z==="lg"?100:z==="md"?92:z==="sm"?84:66;y.useMemo(()=>{try{if(!c||c.length===0)return K;const ae=document.createElement("canvas").getContext("2d");if(!ae)return K;ae.font=`500 ${H}px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif`;let We=0;for(const k of c){const be=ae.measureText(k).width;be>We&&(We=be)}return Math.ceil(We+28)}catch{return K}},[c,H,K]);const je=Math.round(54*.56*ee),Q=Math.max(9,Math.round(11*ee)),ue=12,$e=Q,oe=Math.max(20,Math.round(24*ee)),X=6,w=z==="lg"?1:z==="md"?2:z==="sm"?3:4,L=h?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)",F=h?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)",d=w===1?100/(Gl*2):100/Gl,C=ce.useMemo(()=>{const ye=new Map;return c.forEach(ae=>{const We=p.filter(N=>N.person===ae).map(N=>Re(N.start));We.length&&ye.set(ae,Math.min(...We))}),Array.from(ye.entries()).sort((ae,We)=>ae[1]-We[1]||ae[0].localeCompare(We[0])).map(([ae])=>ae)},[c,p]),ie=ce.useMemo(()=>{const ye=new Map,ae=Math.max(1,C.length);return C.forEach((We,N)=>{const k=Math.round(N/ae*360);ye.set(We,k)}),ye},[C]),[Ee,Fe]=ce.useState(Date.now());ce.useEffect(()=>{let ye,ae;const We=()=>Fe(Date.now()),N=()=>{ae&&clearInterval(ae),ye&&clearTimeout(ye);const fe=6e4-Date.now()%6e4;ye=window.setTimeout(()=>{We(),ae=window.setInterval(We,6e4)},fe)},k=()=>{document.visibilityState==="visible"&&(We(),N())};return We(),N(),document.addEventListener("visibilitychange",k),()=>{ae&&clearInterval(ae),ye&&clearTimeout(ye),document.removeEventListener("visibilitychange",k)}},[]);const Le=pr(S.id),pe=Le.minutes,ge=rn(o)===Le.ymd,O=pe/1440*100,se=Math.max(2,Math.round(4*ee)),Te=Math.max(10,Math.round(14*ee)),Ye=ce.useMemo(()=>{const ye=new Map;for(const ae of T||[])ye.set(ae.id,ae);return ye},[T]),[Ie,ct]=ce.useState({id:null,x:0}),[Je,nt]=ce.useState(null),[Ct,Et]=ce.useState(!1),Xe=ce.useMemo(()=>{const ye=new Map;for(const ae of Sn)ye.set(ae.id,ae.offset);return ye},[]),yt=ye=>{const ae=(ye||"").trim().toLowerCase();return(te||[]).find(We=>`${We.firstName||""} ${We.lastName||""}`.trim().toLowerCase()===ae)},pt=ye=>it.indexOf(ye);return r.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",style:{overflowY:"visible"},children:[!W&&r.jsxs("div",{className:["relative sticky top-0 z-40 shadow-sm px-2",h?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].filter(Boolean).join(" "),style:{height:je,display:"flex",alignItems:"center"},children:[J&&r.jsxs("div",{className:"absolute left-2 right-2 text-center font-bold",style:{top:Math.max(0,Math.round(6*ee)),fontSize:Math.round(13*ee),lineHeight:1},children:[f," ",r.jsx("span",{className:["ml-1",R].join(" "),children:rn(o)})]}),M!=="night"&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",children:r.jsx("div",{className:"absolute inset-y-0 left-0",style:{width:`calc(12 * (100% / ${Gl}))`,backgroundColor:h?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"}})}),M!=="night"&&r.jsx("div",{className:"absolute left-2 right-2",style:{bottom:se,height:Te,paddingTop:Math.max(2,Math.round(2*ee))},children:j.map((ye,ae)=>ae%w===0&&r.jsx("div",{className:"absolute text-left pl-0.5 leading-none pointer-events-none",style:{left:`calc(${ae} * (100% / ${Gl}))`,width:`calc(100% / ${Gl})`},children:r.jsx("div",{className:["font-bold hour-label tracking-tight",R].join(" "),style:{fontSize:Q},children:ye===0?12:ye>12?ye-12:ye})},ae))}),ge&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*ee))},children:r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded-md shadow-sm now-pop",h?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${O}%`,fontSize:$e,willChange:"transform,opacity"},children:It(pe)},pe)}),Ct&&Je!=null&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*ee))},children:(()=>{const ye=Y.current?.getBoundingClientRect().width||1,ae=Math.max(0,Math.min(100,Je/ye*100)),We=1440,N=Math.max(0,Math.min(We-1,Math.round(Je/ye*We))),k=Math.floor(N/60).toString().padStart(2,"0"),be=(N%60).toString().padStart(2,"0");let fe=0;for(const Ue of p){const q=Re(Ue.start),we=Re(Ue.end),U=we>q?we:1440;N>=q&&N<U&&fe++}return r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",h?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:`${ae}%`},children:`${k}:${be}  ${fe} on deck`})})()})]}),r.jsxs("div",{className:"relative px-2",ref:Y,onMouseLeave:()=>{Et(!1),nt(null)},onMouseMove:ye=>{const ae=Y.current;if(!ae)return;const We=ae.getBoundingClientRect(),N=ye.clientX-We.left;if(N<0||N>We.width){Et(!1),nt(null);return}Et(!0),nt(N)},style:{paddingBottom:8},children:[ge&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-20 pointer-events-none",children:r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",h?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${O}%`}})}),Ct&&Je!=null&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-30 pointer-events-none",children:r.jsx("div",{className:"absolute inset-y-0",style:{left:Je,width:1,background:"rgba(59,130,246,0.9)"}})}),C.map(ye=>r.jsxs("div",{className:"relative",style:{height:oe+6},children:[M!=="night"&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 pointer-events-none",style:{backgroundImage:`repeating-linear-gradient(to right, ${L} 0, ${L} ${d}%, ${F} ${d}%, ${F} ${d*2}%)`,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}}),p.filter(ae=>ae.person===ye).sort((ae,We)=>Re(ae.start)-Re(We.start)).map((ae,We,N)=>{const k=x.some(Ce=>Ce.person===ye&&o>=gn(Ce.startDate)&&o<=gn(Ce.endDate)),be=Re(ae.start),fe=Re(ae.end),Ue=fe>be?fe:1440,q=be/1440*100,we=Math.max(.5,(Ue-be)/1440*100),U=ie.get(ye)??0,De=`hsla(${U},75%,70%,0.95)`,Ke=`hsla(${U},60%,28%,0.95)`,st=`hsl(${U},70%,55%)`,et=h?"rgba(120,120,120,0.4)":"rgba(180,180,180,0.85)",vt=h?"rgba(160,160,160,0.55)":"rgba(160,160,160,0.5)",mt=Ue-be,ft=M==="night",Pt=M==="noir";let Bt=k?et:h?Ke:De,Rt=k?vt:h?st:`hsl(${U},65%,50%)`;ft?(Bt="#000",Rt="rgba(239,68,68,0.55)"):Pt&&(Bt="#000",Rt="rgba(255,255,255,0.35)");const ut=(Array.isArray(ae.segments)?ae.segments:[]).slice().sort((Ce,lt)=>Ce.startOffsetMin-lt.startOffsetMin),zt=ut.map(Ce=>{const lt=Ye.get(Ce.taskId),jt=be+Math.max(0,Math.min(mt,Ce.startOffsetMin)),rt=be+Math.max(0,Math.min(mt,Ce.startOffsetMin+Ce.durationMin));return`${lt?.name||"Task"}: ${It(jt)}${It(rt)}`}),$t=`${ae.person}  ${ae.start}-${ae.end}`+(zt.length?`

Tasks:
${zt.join(`
`)}`:""),_t=p.some(Ce=>Ce!==ae&&Ce.person===ye&&Dd(ae,Ce)),tt=_t?h?"inset 0 0 0 2px rgba(255,0,0,0.6)":"inset 0 0 0 2px rgba(255,0,0,0.7)":void 0,At=Ie.id===ae.id;return r.jsxs("div",{className:"relative",title:$t+(_t?`

Warning: overlaps another shift.`:""),onMouseEnter:()=>ct({id:ae.id,x:0}),onMouseLeave:()=>ct({id:null,x:0}),onMouseMove:Ce=>{const jt=Ce.currentTarget.getBoundingClientRect(),rt=Ce.clientX-jt.left,Nt=Math.max(8,Math.min(rt,jt.width-8));ct(St=>St.id===ae.id?{id:ae.id,x:Nt}:St)},children:[(()=>{let Ce,lt=!1;if(M==="prism"&&!k){lt=!0;const rt=(U+20)%360;Ce=`linear-gradient(90deg, hsl(${rt} 88% 62% / 0.78), hsl(${(rt+50)%360} 84% 58% / 0.74), hsl(${(rt+100)%360} 82% 62% / 0.78))`}k&&(Ce=`linear-gradient(0deg, ${h?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 0%, ${h?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 100%)`);const jt={left:`${q}%`,width:`${we}%`,top:2,height:oe,backgroundColor:Bt,boxShadow:`inset 0 0 0 1px ${Rt}`+(tt?`, ${tt}`:""),borderRadius:X,...Ce?{backgroundImage:Ce}:{},...lt?{backgroundColor:"rgba(0,0,0,0.08)",backgroundBlendMode:"multiply"}:{},...lt?{backgroundSize:"300% 100%",animation:"prismChip 10s linear infinite",animationDelay:`${U%60/30}s`}:{},transition:"filter 100ms ease, box-shadow 100ms ease",...At?{filter:"brightness(1.06)"}:{}};return r.jsx("div",{className:"absolute",style:jt})})(),ut.map(Ce=>{const lt=Math.max(0,Math.min(mt,Ce.startOffsetMin)),jt=Math.max(0,Math.min(mt,Ce.startOffsetMin+Ce.durationMin));if(jt<=lt)return null;const rt=(be+lt)/1440*100,Nt=(jt-lt)/1440*100,Kt=Ye.get(Ce.taskId)?.color||(h?st:`hsl(${U},65%,50%)`),Wt=M==="prism"?`linear-gradient(90deg,
                              color-mix(in oklab, ${Kt} 85%, #000 15%) 0%,
                              color-mix(in oklab, ${Kt} 65%, #000 35%) 50%,
                              color-mix(in oklab, ${Kt} 85%, #000 15%) 100%
                            )`:ft?"repeating-linear-gradient(135deg, rgba(239,68,68,0.28) 0 6px, transparent 6px 14px)":Pt?"repeating-linear-gradient(135deg, rgba(255,255,255,0.16) 0 6px, transparent 6px 14px)":`repeating-linear-gradient(135deg, color-mix(in oklab, ${Kt} 40%, ${h?"#0a0a0a":"#ffffff"} 60%) 0 6px, transparent 6px 14px)`,cn={left:`${rt}%`,width:`${Nt}%`,top:2,height:oe,backgroundImage:Wt,...M==="prism"?{backgroundSize:"300% 100%",animation:"prismChip 12s ease-in-out infinite",backgroundBlendMode:"multiply"}:{},pointerEvents:"none",borderRadius:X,opacity:M==="prism"?.7:ft?.35:Pt?.25:.45};return r.jsx("div",{className:"absolute",style:cn},Ce.id)}),r.jsx("div",{className:"absolute pointer-events-none",style:{left:`${q}%`,top:2,width:`${we}%`,height:oe,boxShadow:`inset 0 0 0 1px ${Rt}`+(tt?`, ${tt}`:"")+(At?`, 0 0 0 2px ${Rt}, 0 6px 16px rgba(0,0,0,${h?.5:.25})`:""),borderRadius:X,zIndex:5,transition:"box-shadow 100ms ease"}}),(()=>{const Ce=Z>0?Z/1440:0,rt=mt*Ce>=60,Nt=M==="prism"&&!k;return r.jsx("div",{className:["absolute flex items-center justify-center px-2 truncate pointer-events-none",k?"text-neutral-500":Nt?"text-white":""].join(" "),style:{left:`${q}%`,top:2,width:`${we}%`,height:oe,fontSize:ue,...Nt?{textShadow:"0 1px 1px rgba(0,0,0,0.7), 0 0 6px rgba(0,0,0,0.35)"}:{},transition:"filter 100ms ease",...At&&!Nt?{filter:"brightness(1.02)"}:{}},children:rt?(ye||"").split(" ")[0]||ye:""})})(),Ie.id===ae.id&&r.jsxs("div",{className:["absolute z-40 px-2 py-1 rounded-md text-xs shadow-lg border",h?"bg-neutral-900/95 border-neutral-700 text-neutral-100":"bg-white/95 border-neutral-300 text-neutral-900"].join(" "),style:{left:Ie.x,top:2,transform:"translate(-50%, calc(-100% - 6px))"},role:"tooltip",children:[r.jsx("div",{className:"font-semibold mb-1",children:ye}),r.jsxs("div",{className:h?"text-neutral-300":"text-neutral-700",children:["Shift: ",ae.start,"",ae.end]}),(()=>{const Ce=yt(ye);if(!Ce||!Ce.tzId)return null;const lt=Xe.get(Ce.tzId)??0,jt=S.offset,rt=(lt-jt)*60,Nt=pt(ae.day),St=pt(ae.endDay||ae.day),Kt=(Nt<0?0:Nt)*1440+Re(ae.start);let Wt=(St<0?Nt:St)*1440+(ae.end==="24:00"?1440:Re(ae.end));Wt<=Kt&&(Wt+=1440);const cn=Kt+rt,sn=Wt+rt,xr=it[(Math.floor(cn/1440)%7+7)%7],sr=it[(Math.floor(sn/1440)%7+7)%7],en=(cn%1440+1440)%1440,lr=(sn%1440+1440)%1440;return r.jsxs("div",{className:h?"text-neutral-300":"text-neutral-700",children:["Local: ",xr," ",It(en),"",sr," ",It(lr)," ",r.jsxs("span",{className:"opacity-70",children:["(",fl(Ce.tzId),")"]})]})})(),ut.length>0&&r.jsx("div",{className:"mt-1",children:r.jsx("ul",{className:"space-y-0.5",children:ut.map(Ce=>{const lt=Ye.get(Ce.taskId),jt=lt?.color||(h?st:`hsl(${U},65%,50%)`),rt=It(be+Math.max(0,Math.min(mt,Ce.startOffsetMin))),Nt=It(be+Math.max(0,Math.min(mt,Ce.startOffsetMin+Ce.durationMin)));return r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-3 h-3 rounded-sm border",style:{background:jt,borderColor:jt}}),r.jsxs("span",{className:"truncate",children:[r.jsx("span",{className:"font-medium",children:lt?.name||"Task"}),r.jsxs("span",{className:"ml-1 "+(h?"text-neutral-300":"text-neutral-700"),children:[rt,"",Nt]})]})]},Ce.id)})})})]}),E&&G&&r.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),G(ae.id)},title:"Delete shift",className:"absolute -top-1 w-4 h-4 rounded-full leading-[14px] text-[12px] text-center border bg-white/90 hover:bg-white",style:{left:`calc(${q}% + ${we}% - 8px)`},children:""})]},ae.id)})]},ye))]})]})}function b0({dark:o,tz:f,dayKey:c,shifts:p,pto:x}){const[h,S]=ce.useState(Date.now());ce.useEffect(()=>{let Y,Z;const V=()=>S(Date.now()),M=()=>{Z&&clearInterval(Z),Y&&clearTimeout(Y);const R=6e4-Date.now()%6e4;Y=window.setTimeout(()=>{V(),Z=window.setInterval(V,6e4)},R)},A=()=>{document.visibilityState==="visible"&&(V(),M())};return V(),M(),document.addEventListener("visibilitychange",A),()=>{Z&&clearInterval(Z),Y&&clearTimeout(Y),document.removeEventListener("visibilitychange",A)}},[]);const $=pr(f.id),E=$.minutes,G=$.ymd,J=ce.useMemo(()=>{const Y=new Set;for(const Z of x||[])Z.startDate<=G&&G<=Z.endDate&&Y.add(Z.person);return Y},[x,G]),T=ce.useMemo(()=>{const Y=new Map;return p.forEach(Z=>{const V=Y.get(Z.person),M=Re(Z.start);(V==null||M<V)&&Y.set(Z.person,M)}),Array.from(Y.entries()).sort((Z,V)=>Z[1]-V[1]||Z[0].localeCompare(V[0])).map(([Z])=>Z)},[p]),W=ce.useMemo(()=>{const Y=new Map,Z=Math.max(1,T.length);return T.forEach((V,M)=>{const A=Math.round(M/Z*360);Y.set(V,A)}),Y},[T]),te=ce.useMemo(()=>{const Y=p.filter(V=>{if(J.has(V.person))return!1;const M=Re(V.start),A=Re(V.end),j=A>M?A:1440;return E>=M&&E<j}),Z=new Map;for(const V of Y){const M=Re(V.start),A=Re(V.end),j=A>M?A:1440,R=Z.get(V.person);(!R||j<R.end)&&Z.set(V.person,{start:M,end:j,label:`${V.start}${V.end}`})}return Array.from(Z.entries()).sort((V,M)=>V[1].end-M[1].end||V[0].localeCompare(M[0])).map(([V,M])=>({person:V,window:M.label,end:M.end}))},[p,E]),xe=Y=>{const Z=Math.floor(Y/60),V=Y%60;return Z>0&&V>0?`${Z}h ${V}m`:Z>0?`${Z}h`:V>0?`${V}m`:"ending now"};return r.jsxs("section",{className:["rounded-2xl p-3 prism-surface-2 border",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsxs("h2",{className:"text-base font-semibold",children:["On deck",r.jsxs("span",{className:["ml-2 text-sm",o?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",te.length,")"]})]}),r.jsxs("div",{className:["text-xs",o?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",It(E)]})]}),te.length===0?r.jsx("div",{className:["text-sm",o?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on right now."}):r.jsx("ul",{className:"space-y-1",children:te.map(Y=>{const Z=W.get(Y.person)??0,V=o?28:82,M=o?.22:.35,A=o?.1:.18,j=o?40:62,R=o?50:48,le={background:`linear-gradient(90deg, hsla(${Z},70%,${V}%,${M}) 0%, hsla(${Z},70%,${V}%,${A}) 100%)`,borderColor:`hsl(${Z},70%,${j}%)`,borderLeftColor:`hsl(${Z},70%,${R}%)`,borderLeftWidth:6,borderStyle:"solid"},he=Math.max(0,Y.end-E);return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:le,children:[r.jsx("span",{className:"font-medium",children:Y.person}),r.jsxs("span",{className:o?"text-neutral-300":"text-neutral-700",children:[Y.window," ",r.jsxs("span",{className:o?"text-neutral-400":"text-neutral-500",children:[" ",xe(he)," left"]})]})]},Y.person)})})]})}function N0({dark:o,tz:f,dayKey:c,shifts:p,pto:x,windowMin:h=120}){const[S,$]=ce.useState(Date.now());ce.useEffect(()=>{let V,M;const A=()=>$(Date.now()),j=()=>{M&&clearInterval(M),V&&clearTimeout(V);const he=6e4-Date.now()%6e4;V=window.setTimeout(()=>{A(),M=window.setInterval(A,6e4)},he)},R=()=>{document.visibilityState==="visible"&&(A(),j())};return A(),j(),document.addEventListener("visibilitychange",R),()=>{M&&clearInterval(M),V&&clearTimeout(V),document.removeEventListener("visibilitychange",R)}},[]);const E=pr(f.id),G=E.minutes,J=G+h,T=E.ymd,W=ce.useMemo(()=>{const V=new Set;for(const M of x||[])M.startDate<=T&&T<=M.endDate&&V.add(M.person);return V},[x,T]),te=ce.useMemo(()=>{const V=new Map;return p.forEach(M=>{const A=V.get(M.person),j=Re(M.start);(A==null||j<A)&&V.set(M.person,j)}),Array.from(V.entries()).sort((M,A)=>M[1]-A[1]||M[0].localeCompare(A[0])).map(([M])=>M)},[p]),xe=ce.useMemo(()=>{const V=new Map,M=Math.max(1,te.length);return te.forEach((A,j)=>{const R=Math.round(j/M*360);V.set(A,R)}),V},[te]),Y=ce.useMemo(()=>{const V=p.filter(A=>{if(W.has(A.person))return!1;const j=Re(A.start);return j>G&&j<=J}),M=new Map;for(const A of V){const j=Re(A.start),R=M.get(A.person);(!R||j<R.start)&&M.set(A.person,{start:j,label:A.start})}return Array.from(M.entries()).sort((A,j)=>A[1].start-j[1].start||A[0].localeCompare(j[0])).map(([A,j])=>({person:A,at:j.label,start:j.start}))},[p,G,J]),Z=V=>{const M=Math.max(0,V),A=Math.floor(M/60),j=M%60;return A>0&&j>0?`${A}h ${j}m`:A>0?`${A}h`:j>0?`${j}m`:"now"};return r.jsxs("section",{className:["rounded-2xl p-3 prism-surface-3 border",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsxs("h2",{className:"text-base font-semibold",children:["Up next",r.jsxs("span",{className:["ml-2 text-sm",o?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",Y.length,")"]})]}),r.jsxs("div",{className:["text-xs",o?"text-neutral-400":"text-neutral-500"].join(" "),children:["within 2 hours of ",It(G)]})]}),Y.length===0?r.jsx("div",{className:["text-sm",o?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming starts in this window."}):r.jsx("ul",{className:"space-y-1",children:Y.map(V=>{const M=xe.get(V.person)??0,A=o?28:82,j=o?.22:.35,R=o?.1:.18,le=o?40:62,he=o?50:48,z={background:`linear-gradient(90deg, hsla(${M},70%,${A}%,${j}) 0%, hsla(${M},70%,${A}%,${R}) 100%)`,borderColor:`hsl(${M},70%,${le}%)`,borderLeftColor:`hsl(${M},70%,${he}%)`,borderLeftWidth:6,borderStyle:"solid"},ee=Math.max(0,V.start-G);return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:z,children:[r.jsx("span",{className:"font-medium",children:V.person}),r.jsxs("span",{className:o?"text-neutral-300":"text-neutral-700",children:[V.at," ",r.jsxs("span",{className:o?"text-neutral-400":"text-neutral-500",children:[" in ",Z(ee)]})]})]},V.person)})})]})}const S0={timeFormat:"24h",setTimeFormat:()=>{},formatTime:o=>jd(o,"24h")},Id=y.createContext(S0);function M0({value:o,children:f}){return r.jsx(Id.Provider,{value:o,children:f})}function k0(){return y.useContext(Id)}function C0({dark:o,tz:f,dayKey:c,shifts:p,tasks:x}){const[h,S]=ce.useState(Date.now());ce.useEffect(()=>{let z,ee;const H=()=>S(Date.now()),K=()=>{ee&&clearInterval(ee),z&&clearTimeout(z);const ue=6e4-Date.now()%6e4;z=window.setTimeout(()=>{H(),ee=window.setInterval(H,6e4)},ue)},je=()=>{document.visibilityState==="visible"&&(H(),K())};return H(),K(),document.addEventListener("visibilitychange",je),()=>{ee&&clearInterval(ee),z&&clearTimeout(z),document.removeEventListener("visibilitychange",je)}},[]);const E=pr(f.id).minutes,{formatTime:G}=k0(),J=ce.useMemo(()=>{const z=new Map;return x.forEach(ee=>z.set(ee.id,ee)),z},[x]),T=ce.useMemo(()=>{const z=[];for(const ee of p){if(!Array.isArray(ee.segments)||ee.segments.length===0)continue;const H=Re(ee.start);for(const K of ee.segments){const je=H+K.startOffsetMin,Q=je+K.durationMin;z.push({taskId:K.taskId,person:ee.person,start:je,end:Q})}}return z.sort((ee,H)=>ee.start-H.start||ee.end-H.end||ee.person.localeCompare(H.person))},[p]),W=ce.useMemo(()=>{const z=new Map;for(const H of T){const K=z.get(H.taskId);K?K.push(H):z.set(H.taskId,[H])}const ee=[];for(const[H,K]of z.entries()){const je=K.slice().sort((w,L)=>w.start-L.start||w.end-L.end||w.person.localeCompare(L.person)),Q=[],ue=[],$e=[];let oe=null,X=Number.POSITIVE_INFINITY;for(const w of je){const L=Math.max(0,Math.min(1440,w.start)),F=Math.max(L,Math.min(1440,w.end));if(F<=L)continue;w.start<X&&(X=w.start),w.start<=E&&E<w.end?$e.push(w):w.start>E&&(!oe||w.start<oe.start)&&(oe=w);let d=0;for(;d<Q.length&&!(L>=Q[d]-.5);d++);d===Q.length?Q.push(F):Q[d]=F,ue.push({...w,lane:d,startClamped:L,endClamped:F})}ue.length>0&&ee.push({taskId:H,placed:ue,laneCount:Math.max(1,Q.length||1),onNow:$e.sort((w,L)=>w.end-L.end||w.person.localeCompare(L.person)),nextOne:oe,earliest:Number.isFinite(X)?X:Number.POSITIVE_INFINITY})}return ee.sort((H,K)=>{const je=H.onNow.length>0?0:1,Q=K.onNow.length>0?0:1;if(je!==Q)return je-Q;const ue=H.nextOne?0:1,$e=K.nextOne?0:1;if(ue!==$e)return ue-$e;if(H.earliest!==K.earliest)return H.earliest-K.earliest;const oe=J.get(H.taskId)?.name||H.taskId,X=J.get(K.taskId)?.name||K.taskId;return oe.localeCompare(X)}),ee},[T,E,J]),te=ce.useMemo(()=>Array.from({length:25},(z,ee)=>ee),[]),xe=Math.max(0,Math.min(100,E/1440*100)),Y=520,Z=16,V=o?"text-neutral-400":"text-neutral-500",M=o?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)",A=o?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)",j=E>=0&&E<=1440,R=o?"rgba(239,68,68,0.75)":"rgba(220,38,38,0.75)",le=o?"rgba(239,68,68,0.9)":"rgba(220,38,38,0.9)",he="#fff";return r.jsxs("section",{className:["rounded-2xl p-3",o?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsx("h2",{className:"text-base font-semibold",children:"Posture schedule today"}),r.jsxs("div",{className:["text-xs",V].join(" "),children:["as of ",G(E)]})]}),W.length===0?r.jsx("div",{className:["text-sm",o?"text-neutral-400":"text-neutral-600"].join(" "),children:"No posture coverage configured today."}):r.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))"},children:W.map(z=>{const ee=J.get(z.taskId),H=ee?.color||"#2563eb",K=Math.max(1,z.laneCount),je=Array.from({length:K},()=>[]);return z.placed.forEach(Q=>{Q.lane>=0&&Q.lane<K&&je[Q.lane].push(Q)}),r.jsxs("div",{className:"rounded-lg p-2",style:{background:A},children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:H},"aria-hidden":!0}),r.jsx("div",{className:"font-medium",children:ee?.name||z.taskId})]}),r.jsxs("div",{className:"mt-2 rounded-lg border px-3 pb-3 pt-4",style:{height:Y,background:o?"rgba(0,0,0,0.35)":"rgba(255,255,255,0.9)",borderColor:M,position:"relative"},children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none",children:te.map(Q=>{if(Q===0||Q===24)return null;const ue=Q/24*Y,oe=Q%6===0?o?"rgba(255,255,255,0.18)":"rgba(0,0,0,0.2)":o?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)";return r.jsx("div",{className:"absolute left-0 right-0",style:{top:ue,height:1,backgroundColor:oe}},`grid-${Q}`)})}),j&&r.jsxs("div",{className:"absolute left-0 right-0 pointer-events-none",style:{top:`${xe}%`,transform:"translateY(-1px)"},children:[r.jsx("div",{className:"h-[2px]",style:{backgroundColor:R}}),r.jsx("div",{className:"absolute left-0 -translate-x-1/2 -translate-y-1/2 px-1.5 py-0.5 rounded text-[10px] font-medium shadow-sm",style:{backgroundColor:le,color:he},children:G(E)})]}),r.jsx("div",{className:"relative h-full",style:{display:"grid",gridTemplateColumns:`repeat(${K}, minmax(0, 1fr))`,columnGap:Z},children:je.map((Q,ue)=>{const $e=Q.length>0;return r.jsxs("div",{className:"relative",style:{height:Y},children:[!$e&&r.jsx("div",{className:["absolute inset-x-2 top-1/2 -translate-y-1/2 text-[11px] text-center",V].join(" "),children:"No coverage"}),Q.map(oe=>{const X=oe.startClamped/1440*Y,w=Math.max(6,(oe.endClamped-oe.startClamped)/1440*Y),L=oe.startClamped<=E&&E<oe.endClamped,F={left:0,right:0,top:X,height:w,borderLeft:`4px solid ${H}`,borderRadius:8,border:o?"1px solid rgba(255,255,255,0.18)":"1px solid rgba(0,0,0,0.12)",background:o?"rgba(17,24,39,0.88)":"rgba(255,255,255,0.98)",boxShadow:o?"0 2px 6px rgba(0,0,0,0.45)":"0 2px 6px rgba(15,23,42,0.12)",padding:"6px 8px",position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"};L&&(F.boxShadow=o?`0 0 0 2px ${H} inset`:`0 0 0 2px ${H} inset`);const d=w>=36,C=w>=22,ie=`${oe.person}  ${G(oe.startClamped)}${G(oe.endClamped)}`;return r.jsxs("div",{className:o?"text-neutral-100 text-[11px] leading-tight":"text-neutral-900 text-[11px] leading-tight",style:F,title:ie,children:[C?r.jsx("span",{className:"font-medium truncate",children:oe.person}):r.jsx("span",{className:"font-medium",children:""}),d&&r.jsxs("span",{className:o?"text-neutral-300":"text-neutral-600",children:[G(oe.startClamped),"",G(oe.endClamped)]})]},`${oe.person}-${oe.startClamped}-${oe.endClamped}-${oe.lane}`)})]},`lane-${ue}`)})})]})]},z.taskId)})})]})}function E0({dark:o,tz:f,weekStart:c,agent:p,shifts:x,pto:h,tasks:S,calendarSegs:$,agents:E}){const J=o?"text-neutral-400":"text-neutral-500",W=(()=>{const[pe,ge]=ce.useState(typeof window<"u"?window.innerWidth:1280);return ce.useEffect(()=>{const O=()=>ge(window.innerWidth);return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),pe})(),te=W>=1024?"lg":W>=768?"md":W>=640?"sm":"xs",xe=te==="lg"?1:te==="md"?.9:te==="sm"?.82:.75,Y=te==="lg"?80:te==="md"?76:te==="sm"?70:66,Z=Math.round(60*xe),V=Math.max(9,Math.round(11*xe)),M=Math.max(11,Math.round(12*xe)),A=12,j=Math.max(9,Math.round(10*xe)),R=Math.max(20,Math.round(24*xe)),le=te==="lg"?2:te==="md"?3:4,he=120,z=pe=>(pe-he+1440)%1440/1440*100,ee=Math.max(1,Math.round(24/le)),H=`${Y}px`,K=Math.round(30*xe),je=Math.max(12,Math.round(16*xe)),Q=gn(c),ue=ce.useMemo(()=>Array.from({length:7},(pe,ge)=>{const O=Mn(Q,ge);return{key:it[ge],date:O,ymd:rn(O)}}),[c]),$e=ce.useMemo(()=>As(x,f.offset).filter(pe=>pe.person===p),[x,f.offset,p]),oe=ce.useMemo(()=>{const pe=new Map;for(const ge of it)pe.set(ge,[]);for(const ge of $e)pe.get(ge.day).push(ge);for(const[ge,O]of pe)O.sort((se,Te)=>Re(se.start)-Re(Te.start));return pe},[$e]),X=ce.useMemo(()=>{let pe=0;for(const ge of p)pe=(pe+ge.charCodeAt(0))%360;return pe},[p]),[w,L]=ce.useState(Date.now());ce.useEffect(()=>{const pe=setInterval(()=>L(Date.now()),3e4);return()=>clearInterval(pe)},[]);const F=pr(f.id),d=z(F.minutes),C=F.weekdayShort,ie=`hsla(${X},75%,70%,0.95)`,Ee=`hsla(${X},60%,28%,0.95)`,Fe=`hsl(${X},70%,55%)`,Le=ce.useMemo(()=>{const pe=new Map;for(const ge of S||[])pe.set(ge.id,ge);return pe},[S]);return r.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",children:[r.jsxs("div",{className:"grid sticky top-0 z-30",style:{gridTemplateColumns:`${H} 1fr`},children:[r.jsx("div",{className:o?"bg-neutral-900":"bg-white"}),r.jsx("div",{className:["relative",o?"bg-neutral-900":"bg-white"].join(" "),style:{height:Z},children:r.jsx("div",{className:"absolute left-0 right-0",style:{top:K,height:je},children:Array.from({length:ee},(pe,ge)=>ge).map(pe=>{const ge=(2+pe*le)%24;return r.jsx("div",{className:"absolute text-left pl-1 leading-none pointer-events-none",style:{left:`calc(${pe} * (100% / ${ee}))`,width:`calc(100% / ${ee})`},children:r.jsxs("div",{className:["hour-label font-normal opacity-70",J].join(" "),style:{fontSize:V},children:[ge===0?12:ge>12?ge-12:ge,ge<12?"am":"pm"]})},pe)})})})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"absolute inset-y-0 right-0 z-20 pointer-events-none",style:{left:H},children:[r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",o?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${d}%`}}),r.jsx("div",{className:["absolute -translate-x-1/2 -top-5 px-1.5 py-0.5 rounded-md shadow-sm",o?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${d}%`,fontSize:j},children:It(F.minutes)})]}),ue.map(pe=>{const ge=(oe.get(pe.key)||[]).map(se=>{const Te=($||[]).filter(Ie=>se.agentId&&Ie.agentId===se.agentId||Ie.person===p).flatMap(Ie=>!Ie.endDay||Ie.endDay===Ie.day?[Ie]:[{...Ie,day:Ie.day,start:Ie.start,end:"24:00"},{...Ie,day:Ie.endDay,start:"00:00",end:Ie.end}]).filter(Ie=>Ie.day===pe.key).map(Ie=>({taskId:Ie.taskId,start:Ie.start,end:Ie.end})),Ye=sa(se,Te);return Ye&&Ye.length>0?{...se,segments:Ye}:se}),O=pe.key===C;return r.jsxs("div",{className:"grid",style:{gridTemplateColumns:`${H} 1fr`},children:[r.jsx("div",{className:["py-1.5 pr-2 font-medium sticky left-0 z-20 truncate",o?"bg-neutral-900":"bg-white"].join(" "),style:{fontSize:M},children:r.jsx("span",{className:O?o?"text-red-400":"text-red-600":void 0,children:pe.key})}),r.jsx("div",{className:"relative",style:{backgroundImage:`linear-gradient(to right, ${o?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 0, ${o?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 50%, ${o?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 50%, ${o?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 100%)`,backgroundSize:`calc(100%/${ee}) 100%`,backgroundRepeat:"repeat-x",backgroundPosition:"0 0"},children:ge.map(se=>{const Te=rr(E||[],se.agentId,se.person),Ye=Re(se.start),Ie=Re(se.end),ct=Ie>Ye?Ie:1440,Je=(Ye-he+1440)%1440,nt=(ct-he+1440)%1440,Ct=[];nt>Je?Ct.push({leftPct:Je/1440*100,widthPct:Math.max(.5,(nt-Je)/1440*100)}):(Ct.push({leftPct:Je/1440*100,widthPct:Math.max(.5,(1440-Je)/1440*100)}),nt>0&&Ct.push({leftPct:0,widthPct:Math.max(.5,nt/1440*100)}));const Et=ct-Ye,Xe=o?Ee:ie,yt=o?Fe:`hsl(${X},65%,50%)`,pt=(Array.isArray(se.segments)?se.segments:[]).slice().sort((k,be)=>k.startOffsetMin-be.startOffsetMin),ye=[];let ae=0;for(const k of pt){const be=Math.max(0,Math.min(Et,k.startOffsetMin)),fe=Math.max(0,Math.min(Et,k.startOffsetMin+k.durationMin));if(be>ae){const Ue=Ye+ae,q=Ye+be;ye.push({kind:"base",startOff:ae,len:be-ae,color:Xe,title:`${se.person}  ${It(Ue)}${It(q)}`,key:`gap-${ae}`})}if(fe>be){const Ue=Le.get(k.taskId),q=Ye+be,we=Ye+fe,U=Ue?.color||yt,De=`color-mix(in oklab, ${U} 42%, ${o?"#0a0a0a":"#ffffff"} 58%)`,Ke=`color-mix(in oklab, ${U} 70%, ${o?"#ffffff":"#000000"} 30%)`;ye.push({kind:"seg",startOff:be,len:fe-be,color:De,border:Ke,title:`${Ue?.name||"Task"}  ${It(q)}${It(we)}`,key:`seg-${k.id}`})}ae=Math.max(ae,fe)}if(ae<Et){const k=Ye+ae,be=ct;ye.push({kind:"base",startOff:ae,len:Et-ae,color:Xe,title:`${se.person}  ${It(k)}${It(be)}`,key:`gap-${ae}`})}const We=ye.filter(k=>k.kind==="seg").map(k=>k.title.replace(/^.*  /,"")),N=`${Te}  ${se.start}-${se.end}`+(We.length?`

Tasks:
${We.join(`
`)}`:"");return r.jsxs("div",{className:"relative",title:N,children:[ye.map(k=>{const be=Ye+k.startOff,fe=be+k.len,Ue=(be-he+1440)%1440,q=(fe-he+1440)%1440,we=[];if(q>Ue)we.push({leftPct:Ue/1440*100,widthPct:k.len/1440*100,key:`one-${k.key}`});else{const De=1440-Ue,Ke=k.len-De;we.push({leftPct:Ue/1440*100,widthPct:De/1440*100,key:`wrapA-${k.key}`}),Ke>0&&we.push({leftPct:0,widthPct:Ke/1440*100,key:`wrapB-${k.key}`})}const U=k.kind==="seg"&&k.border?k.border:yt;return we.map(De=>r.jsx("div",{className:"absolute rounded",style:{left:`${De.leftPct}%`,width:`${De.widthPct}%`,height:R,backgroundColor:k.color,boxShadow:`inset 0 0 0 1px ${U}`},title:k.title},De.key))}),Ct.length>0&&r.jsxs("div",{className:"absolute flex items-center justify-center px-2 truncate pointer-events-none",style:{left:`${Ct[0].leftPct}%`,width:`${Ct[0].widthPct}%`,height:R,fontSize:A},children:[se.start,"-",se.end]})]},`${se.person}-${se.day}-${se.start}-${se.end}`)})})]},pe.key)})]})]})}function D0({dark:o,weekStart:f,dayIndex:c,setDayIndex:p,shifts:x,pto:h,overrides:S,tasks:$,calendarSegs:E,tz:G,canEdit:J,editMode:T,onRemoveShift:W,agents:te,slimline:xe}){const Y=y.useMemo(()=>Nd(x,S||[],f,te||[]),[x,S,f,te]),Z=gn(f),V=Mn(Z,c),M=it[c],A=ce.useMemo(()=>{const w=new Set;for(const L of te||[]){const F=[L.firstName||"",L.lastName||""].filter(Boolean).join(" ").trim();F&&L.hidden&&w.add(F)}return w},[te]),j=ce.useMemo(()=>ra(Y,M,G.offset).sort((d,C)=>Re(d.start)-Re(C.start)).filter(d=>!A.has(d.person)).map(d=>{const C=E.filter(Ee=>Ee.day===M&&(d.agentId&&Ee.agentId===d.agentId||Ee.person===d.person)).map(Ee=>({taskId:Ee.taskId,start:Ee.start,end:Ee.end})),ie=sa(d,C);return ie&&ie.length>0?{...d,segments:ie}:d}),[Y,M,G.offset,E,A]),R=ce.useMemo(()=>Array.from(new Set(j.map(w=>w.person))),[j]),le=ce.useMemo(()=>Array.from(new Set(Y.map(L=>L.person))).sort().filter(L=>!A.has(L)),[Y,A]),[he,z]=ce.useState(""),[ee,H]=ce.useState(!1),K=y.useRef(null);ce.useEffect(()=>{if(!ee)return;const w=F=>{const d=F.target;K.current&&!K.current.contains(d)&&H(!1)},L=F=>{F.key==="Escape"&&H(!1)};return document.addEventListener("mousedown",w),document.addEventListener("keydown",L),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",L)}},[ee]),ce.useEffect(()=>{H(!1)},[he,c]);const Q=pr(G.id).weekdayShort,ue=ce.useMemo(()=>ra(Y,Q,G.offset).sort((F,d)=>Re(F.start)-Re(d.start)).filter(F=>!A.has(F.person)).map(F=>{const d=E.filter(ie=>ie.day===Q&&(F.agentId&&ie.agentId===F.agentId||ie.person===F.person)).map(ie=>({taskId:ie.taskId,start:ie.start,end:ie.end})),C=sa(F,d);return C&&C.length>0?{...F,segments:C}:F}),[Y,Q,G.offset,E,A]),[$e,oe]=ce.useState(()=>{const w=pr(G.id),L=w.h%12||12,F=`${String(L).padStart(2,"0")}:${String(w.m).padStart(2,"0")}`,d=w.h>=12?"PM":"AM";return{hhmm:F,ampm:d}});ce.useEffect(()=>{let w,L;const F=()=>{const ie=pr(G.id),Ee=ie.h%12||12,Fe=`${String(Ee).padStart(2,"0")}:${String(ie.m).padStart(2,"0")}`,Le=ie.h>=12?"PM":"AM";oe({hhmm:Fe,ampm:Le})},d=()=>{L&&clearInterval(L),w&&clearTimeout(w);const Ee=6e4-Date.now()%6e4;w=window.setTimeout(()=>{F(),L=window.setInterval(F,6e4)},Ee)},C=()=>{document.visibilityState==="visible"&&(F(),d())};return F(),d(),document.addEventListener("visibilitychange",C),()=>{L&&clearInterval(L),w&&clearTimeout(w),document.removeEventListener("visibilitychange",C)}},[G.id]);function X(w){return w.getDate()}return r.jsxs("section",{className:["rounded-2xl p-2 prism-surface-1",o?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2 gap-2",children:[r.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 pl-2 order-1",children:[r.jsxs("div",{className:["text-neutral-600","leading-none","text-[1.3rem] sm:text-[1.5rem]"].join(" "),style:{whiteSpace:"nowrap"},children:[V.toLocaleDateString(void 0,{month:"short"})," ",X(V)]}),r.jsx("div",{className:["font-bold tabular-nums now-pop leading-none","text-[1.45rem] sm:text-[1.6rem]",o?"text-neutral-300":"text-neutral-700"].join(" "),children:$e.hhmm},$e.hhmm),r.jsxs("div",{className:"flex items-baseline gap-1 leading-none",children:[r.jsx("span",{className:["uppercase tracking-wide",o?"text-neutral-400":"text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:$e.ampm}),r.jsx("span",{className:["uppercase tracking-wide","text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:fl(G.id)})]})]}),he&&r.jsxs("div",{className:"pl-2 font-semibold text-xl sm:text-2xl order-3 sm:order-2",children:[he," ",r.jsxs("span",{className:"opacity-70",children:["Week of ",ta(Z)]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 order-2 sm:order-3 w-full sm:w-auto justify-start sm:justify-end",children:[!he&&r.jsx("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:r.jsx("div",{className:"inline-flex gap-1.5 sm:gap-2 whitespace-nowrap pr-0.5 sm:pr-1",children:it.map((w,L)=>{const F=w===Q,d="px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-xl text-xs sm:text-sm border",C=L===c?o?"bg-neutral-800 border-neutral-600 text-white":"bg-blue-600 border-blue-600 text-white":o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100",ie=F?o?"text-red-400":"text-red-600":"";return r.jsx("button",{onClick:()=>p(L),className:[d,C,ie].filter(Boolean).join(" "),children:w},w)})})}),r.jsxs("div",{className:"relative",ref:K,children:[r.jsx("button",{"aria-label":"Choose agent",title:he?`Agent: ${he}`:"Choose agent",onClick:()=>H(w=>!w),className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),ee&&r.jsxs("div",{className:["absolute right-0 mt-2 w-56 sm:w-64 max-w-[calc(100vw-2rem)] sm:max-w-none rounded-xl p-2 border shadow-lg z-50 max-h-[18rem] overflow-auto",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-xs font-medium px-2 pb-1",children:"Agents"}),r.jsx("button",{onClick:()=>{z(""),H(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",o?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:"All"}),le.map(w=>r.jsx("button",{onClick:()=>{z(w),H(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",w===he?o?"bg-neutral-800":"bg-neutral-100":o?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:w},w))]})]}),!he&&r.jsx("button",{"aria-label":xe?"Show off-duty agents":"Hide off-duty agents",title:xe?"Show off-duty agents":"Hide off-duty agents",onClick:()=>{const w=!xe;try{localStorage.setItem("schedule_slimline",w?"1":"0")}catch{}window.dispatchEvent(new CustomEvent("schedule:set-slimline",{detail:{value:w}}))},"aria-pressed":!!xe,className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",o?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:xe?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),r.jsx("path",{d:"M1 1l22 22"}),r.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]}):r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),!he&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pl-1",children:(()=>{const w=ta(V)===ta(gn(pr(G.id).ymd)),L=!xe||!w?j:(()=>{const d=pr(G.id),C=it.indexOf(M)*1440+d.minutes,ie=d.ymd;return j.filter(Ee=>{if(h.some(Ye=>Ye.person===Ee.person&&Ye.startDate<=ie&&ie<=Ye.endDate))return!1;const Le=it.indexOf(Ee.day),pe=it.indexOf(Ee.endDay||Ee.day),ge=(Le<0?0:Le)*1440+Re(Ee.start);let O=(pe<0?Le:pe)*1440+(Ee.end==="24:00"?1440:Re(Ee.end));O<=ge&&(O+=1440);const se=C>=ge&&C<O,Te=ge>C&&ge<=C+120;return se||Te?C<=O+30:!1})})(),F=Array.from(new Set(L.map(d=>d.person)));return r.jsx(j0,{date:V,dayKey:M,people:!xe||!w?R:F,shifts:L,pto:xe&&w?[]:h,dark:o,tz:G,canEdit:J,editMode:T,showHeaderTitle:!1,tasks:$,agents:te,onRemove:d=>{if(!J){alert("Enter the password in Manage to enable editing.");return}W(d)}})})()}),r.jsx("div",{className:"pl-1 mt-2"})]}),he?r.jsx("div",{className:"mt-4",children:r.jsx(E0,{dark:o,tz:G,weekStart:f,agent:he,shifts:Y,pto:h,tasks:$,calendarSegs:E,agents:te||[]})}):r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("div",{children:r.jsx(b0,{dark:o,tz:G,dayKey:Q,shifts:ue,pto:h})}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(N0,{dark:o,tz:G,dayKey:Q,shifts:ue,pto:h}),r.jsx(C0,{dark:o,tz:G,dayKey:Q,shifts:ue,tasks:$})]})]})]})}function Wi({checked:o,onChange:f,disabled:c,size:p="md",dark:x,className:h,ariaLabel:S}){const $=p==="sm"?"w-8":"w-10",E=p==="sm"?"h-4":"h-6",G=p==="sm"?"w-3 h-3":"w-5 h-5",J=p==="sm"?"translate-x-4":"translate-x-5",T=x?"bg-neutral-700":"bg-neutral-300",W="bg-blue-600",te=x?"ring-neutral-600":"ring-neutral-300";return r.jsx("button",{type:"button",role:"switch","aria-checked":o,"aria-label":S,disabled:c,onClick:()=>!c&&f(!o),className:["relative inline-flex items-center rounded-full transition-colors focus:outline-none focus:ring-2",$,E,o?W:T,c?"opacity-50 cursor-not-allowed":"cursor-pointer","focus:ring-offset-0",te,h||""].join(" "),children:r.jsx("span",{className:["inline-block rounded-full bg-white shadow transform transition-transform",G,"translate-x-1",o?J:""].join(" ")})})}function I0({dark:o,deleteAllStep:f,setDeleteAllStep:c,selectedName:p,agentShiftsLocal:x,captureUndo:h,onDeleteShift:S}){return r.jsxs(r.Fragment,{children:[f===1&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",o?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete all shifts?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove all shifts for ",p,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>c(0),className:["px-3 py-1.5 rounded-md text-sm border",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:()=>c(2),className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Continue"})]})]})}),f===2&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",o?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Confirm delete all"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["Are you absolutely sure? This will permanently remove ",x.length," shift(s) for ",p,"."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>c(0),className:["px-3 py-1.5 rounded-md text-sm border",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:()=>{h(),x.map(E=>E.id).forEach(E=>S(E)),c(0)},className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete all"})]})]})})]})}function $0({dark:o,selectedName:f,firstName:c,lastName:p,tzId:x,isSupervisor:h,supervisorId:S,hidden:$,meetingCohort:E,notes:G,agents:J,meetingOptions:T,selectedIdx:W,onFirst:te,onLast:xe,onTz:Y,onIsSup:Z,onSupId:V,onHidden:M,onMeeting:A,onNotes:j,onSave:R,onDelete:le}){const he=z=>{switch(z){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return z||""}};return r.jsxs("div",{className:["rounded-md p-3 mb-3 border",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:["text-2xl font-semibold mb-2",$?o?"text-neutral-400":"text-neutral-500":o?"text-neutral-100":"text-neutral-900"].join(" "),children:f||"Select an agent"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"First name"}),r.jsx("input",{className:["border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:c,onChange:z=>te(z.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Last name"}),r.jsx("input",{className:["border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:p,onChange:z=>xe(z.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Timezone"}),r.jsx("select",{className:["border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:x,onChange:z=>Y(z.target.value),children:Sn.map(z=>r.jsx("option",{value:z.id,children:he(z.id)},z.id))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Weekly meeting"}),r.jsxs("select",{className:["border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:E||"",onChange:z=>A(z.target.value),children:[r.jsx("option",{value:"",children:""}),T.map(z=>r.jsx("option",{value:z,children:z},z))]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Reports to"}),r.jsxs("select",{className:["border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:S,onChange:z=>V(z.target.value),children:[r.jsx("option",{value:"",children:""}),J.filter((z,ee)=>!!z.isSupervisor&&ee!==W).map(z=>{const ee=`${z.firstName||""} ${z.lastName||""}`.trim(),H=z.id||ee;return r.jsx("option",{value:H,children:ee||H},H)})]})]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx(Wi,{ariaLabel:"Supervisor",dark:o,size:"md",checked:h,onChange:z=>Z(z)}),r.jsx("span",{children:"Supervisor"})]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx(Wi,{ariaLabel:"Hidden",dark:o,size:"md",checked:$,onChange:z=>M(z)}),r.jsx("span",{children:"Hidden"})]})]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Notes"}),r.jsx("textarea",{rows:10,className:["border rounded px-2 py-1 text-sm h-full",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:G,onChange:z=>j(z.target.value)})]})]}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx("button",{onClick:R,className:["px-3 py-1.5 rounded border text-sm font-medium",o?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:le,className:["px-3 py-1.5 rounded border text-sm",o?"border-neutral-700 text-red-300":"border-neutral-300 text-red-600"].join(" "),children:"Delete"})]})]})}function $d({dark:o,tz:f,weekStart:c,agent:p,shifts:x,pto:h,tasks:S,calendarSegs:$,agents:E,titlePrefix:G,bandHeight:J,dayLabelFontPx:T,onDragAll:W,onDragShift:te,draggable:xe=!0,showDayLabels:Y=!0,showWeekLabel:Z=!0,framed:V=!0,showNowLine:M=!0,showNowLabel:A=!0,showShiftLabels:j=!0,alwaysShowTimeTags:R=!1,forceOuterTimeTags:le=!1,highlightIds:he,showEdgeTimeTagsForHighlights:z,selectedIds:ee,onToggleSelect:H,avoidLabelOverlap:K}){const je=(()=>{try{return document.querySelector("[data-theme]")?.getAttribute("data-theme")||"system"}catch{return"system"}})(),Q=je==="night",ue=je==="noir",$e=je==="prism";function oe(q){let we=0;for(let U=0;U<q.length;U++)we=(we<<5)-we+q.charCodeAt(U),we|=0;return(we%360+360)%360}const X=10080,w=gn(c),L=q=>it.indexOf(q),F=o?"text-neutral-400":"text-neutral-500",d=ce.useMemo(()=>As(x,f.offset).filter(q=>q.person===p),[x,f.offset,p]),C=ce.useMemo(()=>{const q=new Map;for(const U of d){const De=L(U.day);if(De<0)continue;const Ke=De*1440+Re(U.start);let st;if(U.end==="24:00")st=(De+1)*1440;else{const zt=U.endDay||U.day;let $t=L(zt);$t<0&&($t=De),st=$t*1440+Re(U.end),st<=Ke&&($t<De?st+=7*1440:st+=1440)}const et=Math.max(0,Math.min(X,Ke)),vt=Math.max(0,st);if(vt<=et)continue;const mt=`${U.day} ${U.start}  ${U.endDay||U.day} ${U.end}`,ft=Re(U.start),Pt=U.end==="24:00"?0:Re(U.end);let Bt;try{const zt=Math.max(0,st-Ke),$t=($||[]).filter(tt=>U.agentId&&tt.agentId===U.agentId||tt.person===p).flatMap(tt=>!tt.endDay||tt.endDay===tt.day?[tt]:[{...tt,day:tt.day,start:tt.start,end:"24:00"},{...tt,day:tt.endDay,start:"00:00",end:tt.end}]).filter(tt=>tt.day===U.day).map(tt=>({taskId:tt.taskId,start:tt.start,end:tt.end})),_t=sa({...U},$t)||[];_t&&_t.length&&(Bt=_t.map(tt=>{const At=Math.max(0,Math.min(zt,tt.startOffsetMin)),Ce=Math.max(0,Math.min(zt,tt.startOffsetMin+tt.durationMin));return{taskId:tt.taskId,stOff:At,enOff:Ce}}).filter(tt=>tt.enOff>tt.stOff))}catch{}const Rt={id:U.id,startAbs:et,endAbs:vt,title:mt,key:`${U.person}-${U.id}-${U.day}-${U.start}-${U.end}`,sub:Bt,dayKey:U.day},ut=q.get(U.id)||{id:U.id,key:`${U.person}-${U.id}`,segs:[],earliest:1/0,latest:-1/0,title:mt};ut.segs.push(Rt),ut.earliest=Math.min(ut.earliest,et),ut.latest=Math.max(ut.latest,vt),ut.title=mt,U.end==="24:00"&&(ut.startMin=ft),U.start==="00:00"&&(ut.endMin=Pt),U.end!=="24:00"&&U.start!=="00:00"&&(ut.startMin==null&&(ut.startMin=ft),ut.endMin==null&&(ut.endMin=Pt)),q.set(U.id,ut)}const we=[];for(const[,U]of q){U.segs.sort((st,et)=>st.startAbs-et.startAbs);let De=U.startMin,Ke=U.endMin;De==null&&U.segs.length>0&&(De=(U.segs.reduce((et,vt)=>vt.startAbs>et.startAbs?vt:et,U.segs[0]).startAbs%1440+1440)%1440),Ke==null&&U.segs.length>0&&(Ke=(U.segs.reduce((et,vt)=>vt.endAbs>et.endAbs?vt:et,U.segs[0]).endAbs%1440+1440)%1440),we.push({id:U.id,key:U.key,segments:U.segs,earliest:U.earliest,latest:U.latest,title:U.title,startMin:De,endMin:Ke})}return we.sort((U,De)=>U.earliest-De.earliest),we},[d]),ie=pr(f.id),Ee=w,Fe=Mn(w,7),Le=new Date(ie.y,(ie.mo||1)-1,ie.d||1),pe=Le>=Ee&&Le<Fe,O=(pe?it.indexOf(ie.weekdayShort)*1440+ie.minutes:0)/X*100,se=typeof J=="number"?J:28,Te=10,Ye=y.useRef(null),[Ie,ct]=y.useState(null),Je=30,[nt,Ct]=y.useState(0),[Et,Xe]=y.useState(!1),[yt,pt]=y.useState(null),ye=y.useRef(!1);let ae=-1/0,We=-1/0;const N=48,k=4;y.useEffect(()=>{const q=()=>{if(!Ye.current)return;const we=Ye.current.getBoundingClientRect();Ct(we.width)};return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]);const be=q=>{const we=Math.floor(q/60),U=q%60,De=we<12,Ke=we%12||12,st=U===0?"":U===30?":30":`:${U.toString().padStart(2,"0")}`;return`${Ke}${st}${De?"a":"p"}`},fe=q=>{if(!xe||!Ye.current)return;const we=Ye.current.getBoundingClientRect(),U=X/we.width,De=-1e9,Ke=1e9;ye.current=!1,ct({mode:"all",startX:q.clientX,pxToMin:U,delta:0,minDelta:De,maxDelta:Ke})},Ue=(q,we)=>{if(!xe||(we.stopPropagation(),!Ye.current))return;const U=Ye.current.getBoundingClientRect(),De=X/U.width;if(!C.find(ut=>ut.id===q))return;let st;if(ee){const ut=ee instanceof Set?new Set(ee):new Set(ee);ut.add(q),st=ut}else st=new Set([q]);const et=st||new Set([q]),vt=C.filter(ut=>!et.has(ut.id)),mt=X;let ft=1/0,Pt=-1/0;for(const ut of C){if(!et.has(ut.id))continue;const zt=ut.earliest,$t=ut.latest;let _t=1/0,tt=-1/0;for(const At of vt)for(const Ce of[-1,0,1]){const lt=At.earliest+Ce*mt,jt=At.latest+Ce*mt,rt=lt-$t;rt>=0&&(_t=Math.min(_t,rt));const Nt=jt-zt;Nt<=0&&(tt=Math.max(tt,Nt))}ft=Math.min(ft,_t),Pt=Math.max(Pt,tt)}Number.isFinite(ft)||(ft=1e9),Number.isFinite(Pt)||(Pt=-1e9);const Bt=Pt,Rt=ft;ye.current=!1,ct({mode:"single",id:q,selectedIds:st,startX:we.clientX,pxToMin:De,delta:0,minDelta:Bt,maxDelta:Rt})};return y.useEffect(()=>{if(!Ie)return;const q=U=>{const De=(U.clientX-Ie.startX)*Ie.pxToMin,Ke=Math.round(De/Je)*Je,st=Math.max(Ie.minDelta,Math.min(Ie.maxDelta,Ke));st!==0&&(ye.current=!0),ct(et=>et&&{...et,delta:st})},we=()=>{Ie.delta!==0&&(Ie.mode==="all"?W?.(Ie.delta):Ie.mode==="single"&&Ie.id&&te?.(Ie.id,Ie.delta)),window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",we),ct(null)};return window.addEventListener("mousemove",q),window.addEventListener("mouseup",we),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",we)}},[Ie,W,te]),y.useEffect(()=>{const q=we=>{if(!xe||we.key!=="ArrowLeft"&&we.key!=="ArrowRight")return;const U=yt,De=Et&&!yt;if(!U&&!De)return;we.preventDefault(),we.stopPropagation();const Ke=we.key==="ArrowLeft"?-15:15;U?te?.(U,Ke):De&&W?.(Ke)};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[xe,Et,yt,W,te]),r.jsxs("div",{className:"w-full",children:[Y&&r.jsx("div",{className:"relative h-6",children:it.map((q,we)=>{const U=we/7*100,De=1/7*100;return r.jsx("div",{className:["absolute text-center",F].join(" "),style:{left:`${U}%`,width:`${De}%`,fontSize:typeof T=="number"?T:11},children:q},q)})}),r.jsx("div",{className:["relative",V?"rounded-md overflow-hidden":"",V?o?"bg-neutral-950":"bg-neutral-50":""].filter(Boolean).join(" "),style:{height:se,overflow:"visible",marginBottom:0},children:r.jsxs("div",{ref:Ye,className:"absolute inset-y-0",style:{left:0,right:0,paddingLeft:V?6:0,paddingRight:V?6:0},onMouseDown:xe?fe:void 0,onMouseEnter:()=>Xe(!0),onMouseLeave:()=>{Xe(!1),pt(null)},children:[Array.from({length:7},(q,we)=>{const U=we/7*100,De=12/24*(100/7);return r.jsx("div",{className:"absolute inset-y-0",style:{left:`${U}%`,width:`${De}%`,background:o?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"},"aria-hidden":!0},`am-${we}`)}),Array.from({length:8},(q,we)=>{const U=we/7*100;return r.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${U}%`,width:1,background:o?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"}},`dayline-${we}`)}),Array.from({length:29},(q,we)=>we).map(q=>{const we=q/28*100;return r.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${we}%`,width:1,background:o?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)"}},`h${q}`)}),C.map(q=>{const we=Ie&&Ie.mode==="all",U=Ie&&Ie.mode==="single"&&Ie.id===q.id,De=Ie&&Ie.mode==="single"&&Ie.selectedIds&&Ie.selectedIds.has(q.id),Ke=we||U||De?Ie.delta:0,st=o?"rgba(59,130,246,0.64)":"rgba(59,130,246,0.625)",et=ft=>(ft%1440+1440)%1440,vt=et(q.startMin+Ke),mt=et(q.endMin+Ke);return q.segments.flatMap(ft=>{const Pt=ft.startAbs+Ke,Bt=ft.endAbs+Ke,Rt=Math.max(0,Bt-Pt),ut=Ce=>(Ce%X+X)%X,zt=ut(Pt),$t=ut(Bt),_t=(Ce,lt,jt,rt,Nt,St)=>{const Kt=Ce/X*100,Wt=(lt-Ce)/X*100,cn=(lt-Ce)/X*nt;`${be(vt)}${be(mt)}`;const sn=yt===q.id,xr=!!he&&(he instanceof Set?he.has(q.id):he.includes(q.id)),sr=Q||ue?"#000":xr?o?"rgba(251,146,60,0.78)":"rgba(251,146,60,0.72)":st,en=!!ee&&(ee instanceof Set?ee.has(q.id):ee.includes(q.id)),zn=[sn?V?Q||ue?"inset 0 0 0 2px rgba(255,255,255,0.35)":o?"inset 0 0 0 2px rgba(255,255,255,0.85)":"inset 0 0 0 2px rgba(0,0,0,0.7)":Q||ue?"0 0 0 2px rgba(255,255,255,0.35)":o?"0 0 0 2px rgba(255,255,255,0.85)":"0 0 0 2px rgba(0,0,0,0.7)":"",en?Q?"0 0 0 2px rgba(239,68,68,0.65)":ue?"0 0 0 2px rgba(255,255,255,0.45)":"0 0 0 2px rgba(234,179,8,0.95)":""].filter(Boolean).join(", "),Qn=R||we||U||sn||z&&xr||en;let I=Qn&&rt,Me=Qn&&Nt;if(cn<N*1.6&&I&&Me&&(Ce<=X-lt?Me=!1:I=!1),K){const Pe=Ce/X*nt,ke=lt/X*nt;Pe<ae&&(ae=-1/0),ke<We-N&&(We=-1/0);const _e=St?.forceStartOuter||le,Ae=St?.forceEndOuter||le,ot=Ce===0,Lt=lt===X,Ot=_e&&ot,kn=Ae&&Lt;if(_e&&I){const Tt=Pe;if(Ot)ae=Tt;else{const yn=ae+N+k;Tt<yn?I=!1:ae=Tt}}if(Ae&&Me){const Tt=ke;if(kn)We=Tt+N;else{const yn=We+k;Tt<yn?Me=!1:We=Tt+N}}}const Oe=[];if(ft.sub&&S)for(const Pe of ft.sub){const ke=(S||[]).find(ot=>ot.id===Pe.taskId),_e=Pt+Pe.stOff,Ae=Pt+Pe.enOff;Oe.push(`${ke?.name||"Task"}: ${It(_e%1440)}${It(Ae%1440)}`)}return r.jsxs("div",{className:"absolute inset-y-0",style:(function(){const Pe={left:`${Kt}%`,width:`${Wt}%`,boxShadow:zn||void 0};if($e){const ke=oe(q.id),_e=.42,Ae=88,ot=55;Pe.backgroundColor="#0a0a0a",Pe.backgroundImage=`linear-gradient(90deg,
                          hsla(${(ke+330)%360}, ${Ae}%, ${ot}%, ${_e}),
                          hsla(${(ke+15)%360},  ${Ae}%, ${ot}%, ${_e}),
                          hsla(${(ke+60)%360},  ${Ae}%, ${ot}%, ${_e}),
                          hsla(${(ke+120)%360}, ${Ae}%, ${ot}%, ${_e}),
                          hsla(${(ke+180)%360}, ${Ae}%, ${ot}%, ${_e}),
                          hsla(${(ke+240)%360}, ${Ae}%, ${ot}%, ${_e}),
                          hsla(${(ke+300)%360}, ${Ae}%, ${ot}%, ${_e})
                        )`,Pe.backgroundBlendMode="multiply",Pe.backgroundSize="300% 100%",Pe.animation="prismChip 12s ease-in-out infinite",Pe.animationDelay=`${-(ke%7*.33)}s`}else Pe.background=sr;return Pe})(),title:(G?`${G}  ${q.title}`:q.title)+(Oe.length?`

Postures:
${Oe.join(`
`)}`:""),onMouseDown:xe?Pe=>Ue(q.id,Pe):void 0,onMouseEnter:()=>{pt(q.id),Xe(!1)},onMouseLeave:()=>{pt(null),Xe(!0)},onClick:Pe=>{Pe.stopPropagation(),!ye.current&&H?.(q.id)},children:[ft.sub&&S&&ft.sub.map((Pe,ke)=>{const _e=Pt+Pe.stOff,Ae=Pt+Pe.enOff,ot=Math.max(Ce,Math.min(lt,_e)),Lt=Math.max(Ce,Math.min(lt,Ae));if(Lt<=ot)return null;const Ot=(ot-Ce)/(lt-Ce)*100,kn=(Lt-ot)/(lt-Ce)*100,Tt=(S||[]).find(or=>or.id===Pe.taskId),yn=Q?"rgba(239,68,68,0.28)":ue?"rgba(255,255,255,0.16)":Tt?.color||"rgba(59,130,246,0.85)",ln=Tt?.color?`linear-gradient(90deg,
                            color-mix(in oklab, ${Tt.color} 85%, #000 15%) 0%,
                            color-mix(in oklab, ${Tt.color} 65%, #000 35%) 50%,
                            color-mix(in oklab, ${Tt.color} 85%, #000 15%) 100%
                          )`:void 0;return r.jsx("div",{className:"absolute inset-y-0 pointer-events-none",style:{left:`${Ot}%`,width:`${kn}%`,background:$e?void 0:yn,backgroundImage:$e?ln:void 0,backgroundSize:$e?"300% 100%":void 0,animation:$e?"prismChip 12s ease-in-out infinite":void 0,backgroundBlendMode:$e?"multiply":void 0,opacity:$e?.75:Q?.35:ue?.25:.9},"aria-hidden":!0},`${jt}-seg-${ke}`)}),I&&r.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",St?.forceStartOuter||le?"-left-1 -translate-x-full":V?"left-1":"-left-1 -translate-x-full","bg-black/70 text-white"].join(" "),children:It(vt)}),Me&&r.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",St?.forceEndOuter||le?"-right-1 translate-x-full":V?"right-1":"-right-1 translate-x-full","bg-black/70 text-white"].join(" "),children:It(mt)})]},jt)};if(Rt<=0)return[];const tt=ft.startAbs===q.earliest,At=ft.endAbs===q.latest;if(zt<$t){const Ce=tt||zt===0,lt=At||$t===X;return[_t(zt,$t,`${ft.key}-p0`,Ce,lt)]}else{const Ce=Math.min(X-zt,Rt),lt=Math.max(0,Rt-Ce);if(lt>0){const jt=zt,rt=zt+Ce,Nt=0,St=lt,Kt=At||rt===X,Wt=tt||Nt===0;return[_t(jt,rt,`${ft.key}-p0`,!1,Kt,{forceEndOuter:!0}),_t(Nt,St,`${ft.key}-p1`,Wt,!1,{forceStartOuter:!0})]}else{const jt=zt,rt=zt+Ce,Nt=At||rt===X;return[_t(jt,rt,`${ft.key}-p0`,!1,Nt,{forceEndOuter:!0})]}}})}),Et&&!yt&&r.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:o?"inset 0 0 0 2px rgba(255,255,255,0.35)":"inset 0 0 0 2px rgba(0,0,0,0.35)"}}),pe&&M&&r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0",o?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${O}%`,width:1}}),pe&&A&&r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white whitespace-nowrap",o?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${O}%`,fontSize:Te},children:It(ie.minutes)})]})}),Z&&r.jsxs("div",{className:["mt-1 text-xs",F].join(" "),children:[rn(w),"  ",rn(Mn(w,6))]})]})}function L0(o){switch(o){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return o||""}}function P0({dark:o,agents:f,onAddAgent:c,onUpdateAgent:p,onDeleteAgent:x,weekStart:h,tz:S,shifts:$,pto:E,tasks:G,calendarSegs:J,onUpdateShift:T,onDeleteShift:W,onAddShift:te,selectedIdx:xe,onSelectIdx:Y}){const[Z,V]=y.useState(""),[M,A]=y.useState(""),[j,R]=y.useState(Sn[0]?.id||"UTC"),[le,he]=y.useState(null),[z,ee]=y.useState(""),[H,K]=y.useState(""),[je,Q]=y.useState(Sn[0]?.id||"UTC"),[ue,$e]=y.useState(!1),[oe,X]=y.useState(""),[w,L]=y.useState(""),[F,d]=y.useState(!1),[C,ie]=y.useState(""),[Ee,Fe]=y.useState(null),Le=xe??Ee,pe=I=>{Y?Y(I):Fe(I)},ge=Le!=null?f[Le]:null,O=ge?[ge.firstName,ge.lastName].filter(Boolean).join(" "):"";function se(){le!=null&&(p?.(le,{firstName:z.trim(),lastName:H.trim(),tzId:je,hidden:F,isSupervisor:ue,supervisorId:oe||null,notes:w,meetingCohort:C||void 0}),he(null))}y.useEffect(()=>{if(Le==null){ee(""),K(""),Q(Sn[0]?.id||"UTC"),$e(!1),X(""),L(""),d(!1),ie("");return}const I=f[Le];if(!I){ee(""),K(""),Q(Sn[0]?.id||"UTC"),$e(!1),X(""),L(""),d(!1),ie("");return}ee(I.firstName||""),K(I.lastName||""),Q(I.tzId||Sn[0]?.id||"UTC"),$e(!!I.isSupervisor),X(I.supervisorId||""),L(I.notes||""),d(!!I.hidden),ie(typeof I.meetingCohort=="string"?I.meetingCohort:""),he(Le)},[Le,f]);const[Te,Ye]=y.useState(null),Ie=y.useRef(null),ct=y.useMemo(()=>f.map((I,Me)=>({a:I,i:Me})).sort((I,Me)=>{const Oe=(I.a.firstName||"").toLowerCase(),Pe=(Me.a.firstName||"").toLowerCase();if(Oe!==Pe)return Oe.localeCompare(Pe);const ke=(I.a.lastName||"").toLowerCase(),_e=(Me.a.lastName||"").toLowerCase();return ke.localeCompare(_e)}),[f]);y.useEffect(()=>{if(!Te)return;const I=ct.findIndex(({a:Me})=>`${Me.firstName} ${Me.lastName}`.trim()===Te);I>=0&&Ie.current&&Ie.current.children[I]?.scrollIntoView({block:"nearest",behavior:"smooth"}),Ye(null)},[ct,Te]),y.useEffect(()=>{const I=Me=>{const Oe=Me.target,Pe=(Oe?.tagName||"").toLowerCase();if(Pe==="input"||Pe==="textarea"||Pe==="select"||Oe?.isContentEditable===!0||Me.key!=="ArrowDown"&&Me.key!=="ArrowUp"||ct.length===0)return;Me.preventDefault();let _e=Le==null?-1:ct.findIndex(ot=>ot.i===Le);Me.key==="ArrowDown"?_e=Math.min(ct.length-1,_e+1):_e=_e<=0?0:_e-1;const Ae=ct[_e];Ae&&(pe(Ae.i),setTimeout(()=>{Ie.current?.querySelector(`li[data-idx='${Ae.i}']`)?.scrollIntoView({block:"nearest"})},0))};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[ct,Le]);const[Je,nt]=y.useState(null),Ct=Je!=null?f[Je]:null;function Et(){Je!=null&&(x?.(Je),nt(null))}const[Xe,yt]=y.useState([]);y.useEffect(()=>{if(!O){yt([]);return}const I=$.filter(Oe=>Oe.person===O),Me=new Map(it.map((Oe,Pe)=>[Oe,Pe]));yt(I.slice().sort((Oe,Pe)=>Me.get(Oe.day)-Me.get(Pe.day)||Oe.start.localeCompare(Pe.start)))},[O,$]);const[pt,ye]=y.useState(null),ae=y.useCallback(()=>{O&&ye({person:O,shifts:Xe.map(I=>({...I}))})},[O,Xe]),We=y.useCallback(()=>{if(!pt)return;const I=pt.person,Me=pt.shifts,Oe=O===I?Xe:$.filter(Ae=>Ae.person===I),Pe=new Map(Me.map(Ae=>[Ae.id,Ae])),ke=new Map(Oe.map(Ae=>[Ae.id,Ae]));for(const[Ae]of ke)Pe.has(Ae)||W?.(Ae);for(const[,Ae]of Pe)ke.has(Ae.id)||te?.(Ae);for(const[,Ae]of Pe){const ot=ke.get(Ae.id);if(!ot)continue;const Lt=Ae.endDay,Ot=ot.endDay;(Ae.day!==ot.day||Ae.start!==ot.start||Ae.end!==ot.end||Lt!==Ot)&&T?.(Ae.id,{day:Ae.day,start:Ae.start,end:Ae.end,endDay:Lt})}const _e=f.findIndex(Ae=>[Ae.firstName,Ae.lastName].filter(Boolean).join(" ")===I);_e>=0&&pe(_e),yt(Me.slice()),ye(null)},[pt,O,Xe,$,W,te,T,f]);y.useEffect(()=>{const I=Me=>{(Me.ctrlKey||Me.metaKey)&&!Me.shiftKey&&(Me.key==="z"||Me.key==="Z")&&(Me.preventDefault(),We())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[We]);const N=y.useMemo(()=>O?$.filter(Me=>Me.person!==O).concat(Xe):$,[$,O,Xe]),k=(I,Me)=>{const[Oe,Pe]=I.split(":").map(Lt=>parseInt(Lt||"0",10)||0);let ke=Oe*60+Pe+Me;const _e=1440;ke=(ke%_e+_e)%_e;const Ae=Math.floor(ke/60).toString().padStart(2,"0"),ot=(ke%60).toString().padStart(2,"0");return`${Ae}:${ot}`},be=I=>it.indexOf(I),fe=I=>it[(I%7+7)%7],Ue=I=>{const[Me,Oe]=I.split(":");return(parseInt(Me||"0",10)||0)*60+(parseInt(Oe||"0",10)||0)},q=(I,Me)=>{const Pe=be(I.day)*1440+Ue(I.start),ke=I.endDay||I.day,_e=be(ke)*1440+Ue(I.end),Ae=_e<=Pe?_e+1440:_e,ot=Pe+Me,Lt=Ae+Me,Ot=Math.floor((ot/1440%7+7)%7),kn=Math.floor((Lt/1440%7+7)%7),Tt=(ot%1440+1440)%1440,yn=(Lt%1440+1440)%1440,ln=fe(Ot),or=k("00:00",Tt),vn=k("00:00",yn),Tr=fe(kn);return{...I,day:ln,start:or,end:vn,endDay:Tr}},we=I=>y0(I),U=I=>{const Me=Math.floor(I/60),Oe=I%60;return Oe===0?`${Me}h`:`${Me}h ${Oe}m`},De=y.useMemo(()=>Xe.reduce((I,Me)=>I+we(Me),0),[Xe]),Ke=Xe.length*30,st=Math.max(0,De-Ke),et=(I,Me)=>g0(I,Me),vt=I=>{if(ae(),!O)return;const Me=Xe.map(Oe=>q(Oe,I));for(let Oe=0;Oe<Me.length;Oe++)if(et(Me[Oe],Me)){alert("Move would cause overlapping shifts for this agent.");return}yt(Me),Me.forEach(Oe=>{T?.(Oe.id,{day:Oe.day,start:Oe.start,end:Oe.end,endDay:Oe.endDay})})},mt=(I,Me)=>{ae();const Oe=Xe,Pe=Oe.findIndex(Ae=>Ae.id===I);if(Pe<0)return;const ke=q(Oe[Pe],Me),_e=Oe.map((Ae,ot)=>ot===Pe?ke:Ae);if(et(ke,_e)){alert("Move would cause overlapping shifts for this agent.");return}yt(_e),T?.(ke.id,{day:ke.day,start:ke.start,end:ke.end,endDay:ke.endDay})},[ft,Pt]=y.useState(null),[Bt,Rt]=y.useState(null),[ut,zt]=y.useState("Mon"),[$t,_t]=y.useState(""),[tt,At]=y.useState(""),[Ce,lt]=y.useState("Mon"),jt=y.useRef(null),rt=y.useRef(null);function Nt(I){Pt(I.id),zt(I.day),_t(I.start),At(I.end),lt(I.endDay||I.day)}function St(){Pt(null)}function Kt(){if(!ft)return;ae();const I={...Xe.find(Oe=>Oe.id===ft),day:ut,start:$t,end:tt,endDay:Ce},Me=Xe.map(Oe=>Oe.id===ft?I:Oe);if(et(I,Me)){alert("Saved times would overlap another shift for this agent.");return}yt(Me),T?.(ft,{day:ut,start:$t,end:tt,endDay:Ce}),Pt(null)}const[Wt,cn]=y.useState(null),sn=Wt?Xe.find(I=>I.id===Wt):null;function xr(){Wt&&(ae(),yt(I=>I.filter(Me=>Me.id!==Wt)),W?.(Wt),cn(null))}const[sr,en]=y.useState(0);function lr(I){I.preventDefault();const Me=Z.trim(),Oe=M.trim();if(!Me||!Oe)return;const Pe=`${Me} ${Oe}`.trim();Ye(Pe),c?.({firstName:Me,lastName:Oe,tzId:j});const ke=Pe.toLowerCase(),_e=ct.find(({a:Ae})=>`${Ae.firstName||""} ${Ae.lastName||""}`.trim().toLowerCase()===ke);_e&&pe(_e.i),V(""),A("")}const Mr=I=>it[(it.indexOf(I)+1)%it.length],zn=I=>{if(I==="24:00")return 1440;const[Me,Oe]=I.split(":");return(parseInt(Me||"0",10)||0)*60+(parseInt(Oe||"0",10)||0)};function Qn(){if(!ge||!O)return;ae();const I=new Set(Xe.map(Tt=>Tt.day)),Me=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Oe=Xe.length===0?"Mon":Me.find(Tt=>!I.has(Tt))||"Mon";let Pe="08:00",ke="16:30";if(Xe.length>0){const Tt=Xe[Xe.length-1];Pe=Tt.start,ke=Tt.end}const _e=ke!=="24:00"&&zn(ke)<=zn(Pe),Ae=Xe.length===0?Oe:_e?Mr(Oe):Oe;let Ot={id:globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),person:O,day:Oe,start:Pe,end:ke,endDay:Ae},kn=0;for(;et(Ot,Xe.concat([{...Ot}]))&&kn<20;)Ot={...Ot,start:k(Ot.start,30),end:k(Ot.end,30)},kn++;kn>=20&&et(Ot,Xe.concat([{...Ot}]))&&alert("Could not find a non-overlapping slot for the default shift. Please adjust times after adding."),yt(Tt=>Tt.concat([Ot])),Rt(Ot.id),te?.(Ot)}return y.useEffect(()=>{if(!Bt)return;const I=setTimeout(()=>Rt(null),300);return()=>clearTimeout(I)},[Bt]),r.jsxs("div",{className:["rounded-xl p-4 border",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[r.jsxs("section",{className:["rounded-lg p-3 border",o?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"text-sm font-medium",children:["Agents (",f.length,")"]})}),f.length===0?r.jsx("div",{className:["rounded-md p-2 text-xs",o?"bg-neutral-900 text-neutral-300":"bg-white text-neutral-600"].join(" "),children:"No agents found."}):r.jsxs("div",{className:["rounded-md",""].join(" "),children:[r.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid gap-2",style:{gridTemplateColumns:"200px 1fr 200px 64px"},children:[r.jsx("div",{className:"whitespace-nowrap",children:"Name"}),r.jsx("div",{className:"whitespace-nowrap",children:"Notes"}),r.jsx("div",{className:"text-right whitespace-nowrap",children:"Reports to"}),r.jsx("div",{className:"whitespace-nowrap",children:"TZ"})]}),r.jsx("ul",{ref:Ie,className:["max-h-[48vh] overflow-y-auto"].join(" "),children:ct.map(({a:I,i:Me},Oe)=>{const Pe=I.supervisorId,ke=Pe&&f.find(Ae=>Ae.id&&Ae.id===Pe||`${Ae.firstName||""} ${Ae.lastName||""}`.trim()===Pe)||null,_e=ke?`${ke.firstName||""} ${ke.lastName||""}`.trim():Pe||"";return r.jsxs("li",{"data-idx":Me,className:["px-2 py-1.5 text-sm leading-6 grid gap-2 items-center cursor-pointer",Le===Me?o?"bg-neutral-800":"bg-blue-50":o?"odd:bg-neutral-900":"odd:bg-neutral-100"].join(" "),style:{gridTemplateColumns:"200px 1fr 200px 64px"},onClick:()=>pe(Me),children:[r.jsx("div",{className:[o?"text-neutral-200":"text-neutral-800",I.hidden?"opacity-60":""].join(" "),children:[I.firstName||"",I.lastName||""].filter(Boolean).join(" ")}),r.jsx("div",{className:["truncate",o?"text-neutral-300":"text-neutral-700"].join(" "),children:(I.notes||"").split(/\r?\n/)[0]||""}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"inline-flex items-center gap-1 justify-end",children:[r.jsx("span",{className:["truncate inline-block",o?"text-neutral-300":"text-neutral-700"].join(" "),children:_e||""}),I.isSupervisor&&r.jsxs("svg",{"aria-hidden":!0,className:o?"text-amber-300":"text-amber-600",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("title",{children:"Supervisor"}),r.jsx("path",{d:"M12 2l3 7 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1z"})]})]})}),r.jsx("div",{className:["whitespace-nowrap",o?"text-neutral-300":"text-neutral-700"].join(" "),children:fl(I.tzId||"UTC")})]},`${I.firstName}-${I.lastName}-${Me}`)})})]}),r.jsx("div",{className:"mt-2",children:r.jsxs("form",{onSubmit:lr,className:"grid grid-cols-2 md:grid-cols-4 gap-2 items-end",children:[r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"First"}),r.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Z,onChange:I=>V(I.target.value),placeholder:"First name"})]}),r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Last"}),r.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:M,onChange:I=>A(I.target.value),placeholder:"Last name"})]}),r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Timezone"}),r.jsx("select",{className:["border rounded-md px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:j,onChange:I=>R(I.target.value),children:Sn.map(I=>r.jsx("option",{value:I.id,children:L0(I.id)},I.id))})]}),r.jsx("div",{className:"col-span-1 flex md:justify-end",children:r.jsx("button",{type:"submit",disabled:!Z.trim()||!M.trim(),className:["px-3 py-1.5 rounded-md text-sm font-medium border",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add Agent"})})]})})]}),Je!=null&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",o?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete agent?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove ",Ct?.firstName," ",Ct?.lastName,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>nt(null),className:["px-3 py-1.5 rounded-md text-sm border",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:Et,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),Wt&&sn&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",o?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete shift?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove the shift for ",O," on ",sn.day," ",sn.start,"",sn.end,sn.endDay&&sn.endDay!==sn.day?r.jsxs(r.Fragment,{children:[" ","ending ",String(sn.endDay)]}):null,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>cn(null),className:["px-3 py-1.5 rounded-md text-sm border",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:xr,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),r.jsxs("div",{className:["rounded-lg p-3",o?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[ge&&r.jsx($0,{dark:o,selectedName:O,firstName:z,lastName:H,tzId:je,isSupervisor:ue,supervisorId:oe,hidden:F,meetingCohort:C,notes:w,agents:f,meetingOptions:Zl,selectedIdx:Le,onFirst:I=>ee(I),onLast:I=>K(I),onTz:I=>Q(I),onIsSup:I=>$e(I),onSupId:I=>X(I),onHidden:I=>d(I),onMeeting:I=>ie(I),onNotes:I=>L(I),onSave:se,onDelete:()=>Le!=null&&nt(Le)}),r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"text-sm font-medium",children:["Shifts (",Xe.length,")",Xe.length>0&&r.jsxs("span",{className:"ml-2 opacity-70",children:[" Total ",U(De),r.jsxs("span",{"aria-hidden":!0,children:[" ",Xe.length,"30m = ",U(st)," billable"]})]})]}),r.jsxs("div",{className:"inline-flex items-center gap-1",children:[r.jsx("button",{title:"Delete all shifts","aria-label":"Delete all shifts",disabled:!ge||Xe.length===0,onClick:()=>en(1),className:["inline-flex items-center justify-center w-8 h-8 rounded border",o?"border-neutral-800 text-red-300 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-red-600 hover:bg-red-50 disabled:opacity-50"].join(" "),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:r.jsx("path",{d:"M5 12h14"})})}),r.jsx("button",{title:"Add shift","aria-label":"Add shift",disabled:!ge,onClick:Qn,className:["inline-flex items-center justify-center w-8 h-8 rounded border",o?"border-neutral-800 text-neutral-200 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-neutral-700 hover:bg-neutral-100 disabled:opacity-50"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]})]}),ge?r.jsxs("div",{children:[r.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid grid-cols-6 gap-2",children:[r.jsx("div",{children:"Start Day"}),r.jsx("div",{children:"Start Time"}),r.jsx("div",{children:"End Day"}),r.jsx("div",{children:"End Time"}),r.jsx("div",{children:"Length"}),r.jsx("div",{className:"text-right",children:"Actions"})]}),r.jsx("ul",{className:"max-h-[36vh] overflow-y-auto",children:Xe.length===0?r.jsx("li",{className:["px-2 py-6 text-sm",o?"text-neutral-300":"text-neutral-700"].join(" "),children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{children:"No shifts for this agent."}),r.jsx("button",{onClick:()=>{if(!O)return;const I=["Mon","Tue","Wed","Thu","Fri"],Me=()=>globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),Oe={person:O,day:"Mon",start:"08:00",end:"16:30"},Pe=I.map(ke=>({id:Me(),...Oe,day:ke,endDay:ke}));yt(Pe),Pe.forEach(ke=>te?.(ke))},className:["px-3 py-1.5 rounded-md text-sm font-medium border",o?"bg-neutral-900 border-neutral-700 text-neutral-100 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),children:"Create standard week (MonFri, 8:004:30 PST)"})]})}):Xe.map(I=>{const Me=ge?.tzId||Sn[0]?.id||"UTC",Oe=S.id;let Pe=null;if(Oe!==Me){const ke={...I,person:I.person},_e=Sn.find(Lt=>Lt.id===Me)?.offset??0,ot=As([ke],_e)[0];Pe=ot?{startDay:ot.day,start:ot.start,endDay:ot.endDay||ot.day,end:ot.end}:null}return r.jsx("li",{className:["px-2 py-1.5 text-sm leading-6 grid grid-cols-6 gap-2 items-center",o?"odd:bg-neutral-900":"odd:bg-neutral-100",Bt===I.id?"shift-add-in":""].filter(Boolean).join(" "),children:ft===I.id?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:ut,onChange:ke=>zt(ke.target.value),children:it.map(ke=>r.jsx("option",{value:ke,children:ke},ke))})}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:jt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:$t,onChange:ke=>{const _e=ke.target.value;_t(_e);const Ae=k(_e,510);At(Ae);const ot=Ue(Ae)<=Ue(_e);lt(ot?Mr(ut):ut)}}),r.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",o?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const ke=jt.current;ke?.showPicker?ke.showPicker():ke?.focus()},"aria-label":"Open time picker",tabIndex:-1,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),r.jsx("div",{children:r.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Ce,onChange:ke=>lt(ke.target.value),children:it.map(ke=>r.jsx("option",{value:ke,children:ke},ke))})}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:rt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:tt,onChange:ke=>At(ke.target.value)}),r.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",o?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const ke=rt.current;ke?.showPicker?ke.showPicker():ke?.focus()},"aria-label":"Open time picker",tabIndex:-1,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),r.jsx("div",{className:o?"text-neutral-300":"text-neutral-700",children:U(we({...I,day:ut,start:$t,end:tt,endDay:Ce}))}),r.jsxs("div",{className:"inline-flex items-center justify-end gap-1 whitespace-nowrap",children:[r.jsx("button",{onClick:Kt,className:["px-2 py-1 rounded border text-xs",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:St,className:["px-2 py-1 rounded border text-xs",o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700"].join(" "),children:"Cancel"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:o?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:I.day}),Pe&&r.jsxs("div",{className:"text-xs opacity-70",children:[Pe.startDay," ",r.jsxs("span",{className:"opacity-60",children:["(",fl(ge?.tzId||"UTC"),")"]})]})]}),r.jsxs("div",{className:o?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:I.start}),Pe&&r.jsx("div",{className:"text-xs opacity-70",children:Pe.start})]}),r.jsxs("div",{className:o?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:I.endDay||I.day}),Pe&&r.jsx("div",{className:"text-xs opacity-70",children:Pe.endDay})]}),r.jsxs("div",{className:o?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:I.end}),Pe&&r.jsx("div",{className:"text-xs opacity-70",children:Pe.end})]}),r.jsx("div",{className:o?"text-neutral-300":"text-neutral-700",children:U(we(I))}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"inline-flex items-center gap-1",children:[r.jsx("button",{title:"Edit","aria-label":"Edit shift",onClick:()=>Nt(I),className:["inline-flex items-center justify-center w-7 h-7 rounded border",o?"border-neutral-700 text-neutral-200 hover:bg-neutral-800":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})]})}),r.jsx("button",{title:"Delete","aria-label":"Delete shift",onClick:()=>cn(I.id),className:["inline-flex items-center justify-center w-7 h-7 rounded border",o?"border-neutral-700 text-red-300 hover:bg-neutral-800":"border-neutral-300 text-red-600 hover:bg-red-50"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"}),r.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})})]})},I.id)})})]}):r.jsx("div",{className:"text-sm opacity-70",children:"Select an agent on the left to view and edit their shifts."}),r.jsx(I0,{dark:o,deleteAllStep:sr,setDeleteAllStep:I=>en(I),selectedName:O,agentShiftsLocal:Xe,captureUndo:ae,onDeleteShift:I=>W?.(I)})]})]}),r.jsx("div",{className:"mt-3",children:r.jsx("div",{className:["rounded-lg border",o?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:ge?r.jsx("div",{className:"p-2",children:r.jsx($d,{dark:o,tz:S,weekStart:h,agent:O,shifts:N,pto:E,tasks:G,calendarSegs:J,onDragAll:vt,onDragShift:mt,showShiftLabels:!0,showEdgeTimeTagsForHighlights:!0,framed:!0,alwaysShowTimeTags:!0,forceOuterTimeTags:!0,bandHeight:40,dayLabelFontPx:13})}):r.jsx("div",{className:["p-4 text-sm",o?"text-neutral-400":"text-neutral-600"].join(" "),children:"Select an agent to show their weekly timeline."})})})]})}function Ld({dark:o,calendarSegs:f,tasks:c,agents:p=[],weekStart:x,packed:h=!1,filterTaskId:S,title:$="Weekly posture calendar",subtitle:E}){const G=y.useMemo(()=>gn(x),[x]),J=y.useMemo(()=>it.map((z,ee)=>rn(Mn(G,ee))),[G]),T=40,W=T*24,te=o?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",xe=2,Y=72,Z=156,V=y.useMemo(()=>Array.from({length:25},(z,ee)=>ee),[]),M=y.useMemo(()=>new Map(c.map(z=>[z.id,z])),[c]),A=y.useMemo(()=>it.map((z,ee)=>{const H=J[ee],K=(f||[]).map((ue,$e)=>({...ue,_idx:$e})).flatMap(ue=>!ue.endDay||ue.endDay===ue.day?[ue]:[{...ue,day:ue.day,start:ue.start,end:"24:00"},{...ue,day:ue.endDay,start:"00:00",end:ue.end}]).filter(ue=>ue.day===z&&(!S||ue.taskId===S)).sort((ue,$e)=>Re(ue.start)-Re($e.start)),je=[],Q=K.map(ue=>{const $e=Re(ue.start),oe=ue.end==="24:00"?1440:Re(ue.end);let X=0;for(X=0;X<je.length;X++)if($e>=je[X]){je[X]=oe;break}return X===je.length&&je.push(oe),{it:ue,lane:X,s:$e,e:oe}});return{day:z,ymd:H,dateObj:gn(H),dayItems:K,placed:Q,laneCount:Math.max(1,je.length)}}),[f,S,J]),j=z=>{const ee=z>=12?"p":"a",H=z%12===0?12:z%12;return z===24?"12a":`${H}${ee}`},R=o?"text-neutral-400":"text-neutral-500",le=o?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)",he=o?"bg-neutral-950 border-neutral-800":"bg-white border-neutral-200 shadow-sm";return r.jsxs("div",{className:["mt-3 rounded-xl p-3",o?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:$}),E&&r.jsx("div",{className:"text-xs opacity-70",children:E})]}),h?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:A.map(({day:z,ymd:ee,dayItems:H})=>r.jsxs("div",{className:["rounded-lg p-2",o?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[r.jsxs("div",{className:"font-medium mb-2 flex items-baseline justify-between",children:[r.jsx("span",{children:z}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(ee.slice(8),10)})]}),r.jsx("div",{className:"space-y-1",children:H.map(K=>{const je=M.get(K.taskId),Q=je?.color||"#888",ue=rr(p,K.agentId,K.person);return r.jsxs("div",{className:["group relative rounded-md px-2 py-1",o?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[r.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:Q}}),r.jsx("span",{className:"truncate",children:ue})]}),r.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[K.start,"",K.end]}),r.jsxs("div",{className:["pointer-events-none absolute -top-6 left-0 z-10 px-1.5 py-0.5 rounded text-[10px] whitespace-nowrap",o?"bg-neutral-800 border border-neutral-700 text-neutral-100":"bg-white border border-neutral-300 text-neutral-900","opacity-0 group-hover:opacity-100 transition-none shadow-sm"].join(" "),children:[je?.name||K.taskId,"  ",K.start,"",K.end]})]},`${K._idx}-${K.person}-${K.start}-${K.end}`)})})]},z))}):r.jsx("div",{className:"mt-3 overflow-x-auto",children:r.jsx("div",{className:"min-w-[860px]",children:r.jsxs("div",{className:"grid gap-x-3 text-sm",style:{gridTemplateColumns:`${Y}px repeat(${it.length}, minmax(${Z}px, 1fr))`,gridTemplateRows:`auto ${W}px`},children:[r.jsx("div",{}),A.map(({day:z,dateObj:ee})=>{const H=ee.toLocaleDateString(void 0,{month:"short"});return r.jsx("div",{className:"pb-2 pl-1",children:r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:"text-sm font-semibold",children:z}),r.jsxs("span",{className:"text-xs opacity-70",children:[H," ",ee.getDate()]})]})},`${z}-header`)}),r.jsxs("div",{className:"relative",style:{height:`${W}px`},children:[r.jsx("div",{className:"absolute inset-y-0 right-0",style:{borderRight:`1px solid ${le}`}}),V.map(z=>{if(z===24)return null;const ee=z*T,H=z%xe===0;return r.jsx("div",{className:"absolute inset-x-0 flex justify-end pr-2",style:{top:`${ee}px`},children:H&&r.jsx("span",{className:["text-[11px] font-medium",R].join(" "),style:{transform:z===0?"translateY(0)":"translateY(-50%)"},children:j(z)})},`axis-${z}`)})]}),A.map(({day:z,dayItems:ee,placed:H,laneCount:K})=>{const je=100/K;return r.jsxs("div",{className:["relative rounded-xl border overflow-hidden",he].join(" "),style:{height:`${W}px`},children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none",children:V.map(Q=>{const ue=Q*T;return r.jsx("div",{className:"absolute inset-x-0",style:{top:`${ue}px`},children:r.jsx("div",{style:{borderTop:`1px solid ${te}`,opacity:Q%xe===0?.5:.2}})},`${z}-grid-${Q}`)})}),r.jsxs("div",{className:"relative h-full px-2 pb-3 pt-1",children:[ee.length===0&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs opacity-60",children:"No coverage"}),H.map(({it:Q,lane:ue,s:$e,e:oe})=>{const X=$e/60*T,w=Math.max(18,(oe-$e)/60*T),L=`calc(${ue*je}% + 2px)`,F=`calc(${je}% - 4px)`,d=M.get(Q.taskId),C=d?.color||"#888",ie=rr(p,Q.agentId,Q.person);return r.jsxs("div",{className:["group absolute rounded-md px-2 py-1 overflow-hidden border",o?"bg-neutral-800 text-neutral-100 border-neutral-700":"bg-white text-neutral-900 border-neutral-300 shadow-sm"].join(" "),style:{top:`${X}px`,height:`${w}px`,left:L,width:F},children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[r.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:C}}),r.jsx("span",{className:"truncate",children:ie})]}),r.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[Q.start,"",Q.end]}),r.jsxs("div",{className:["pointer-events-none absolute -top-6 left-0 z-10 px-1.5 py-0.5 rounded text-[10px] whitespace-nowrap",o?"bg-neutral-800 border border-neutral-700 text-neutral-100":"bg-white border border-neutral-300 text-neutral-900","opacity-0 group-hover:opacity-100 transition-none shadow-sm"].join(" "),children:[d?.name||Q.taskId,"  ",Q.start,"",Q.end]})]},`${Q._idx}-${Q.person}-${Q.start}-${Q.end}`)})]})]},`${z}-column`)})]})})})]})}function Vi({dark:o,tz:f,weekStart:c,agents:p,shifts:x,pto:h,tasks:S,calendarSegs:$,visibleDays:E=7,scrollChunk:G,showAllTimeLabels:J=!1,onDragAll:T,onDragShift:W,sortMode:te="start",sortDir:xe="asc",highlightIds:Y,selectedIds:Z,onToggleSelect:V,showNameColumn:M=!0}){const[A,j]=y.useState(null),[R,le]=y.useState(!1),he=y.useRef(null),[z,ee]=y.useState(160);y.useEffect(()=>{try{if(!p||p.length===0){ee(120);return}const X=p.map(Ee=>[Ee.firstName,Ee.lastName].filter(Boolean).join(" ").trim()).filter(Boolean),L=document.createElement("canvas").getContext("2d");if(!L){ee(160);return}L.font="500 13px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif";let F=0;for(const Ee of X){const Fe=L.measureText(Ee).width;Fe>F&&(F=Fe)}ee(Math.max(120,Math.min(260,Math.ceil(F+28))))}catch{ee(160)}},[p]),y.useEffect(()=>{try{document.documentElement.style.setProperty("--schedule-name-col-px",`${z}px`)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:namecol",{detail:{px:z}}))}catch{}},[z]);const H="shrink-0 text-left pl-1 text-sm truncate",K=ce.useMemo(()=>{const X=p.map(O=>[O.firstName,O.lastName].filter(Boolean).join(" ")),w=As(x,f.offset),L=new Map(it.map((O,se)=>[O,se])),F=O=>{let se=1/0;for(const Te of w){if(Te.person!==O)continue;const Ye=L.get(Te.day)??-1;if(Ye<0)continue;const Ie=Ye*1440+Re(Te.start);Ie<se&&(se=Ie)}return se},d=O=>{let se=-1/0;for(const Te of w){if(Te.person!==O)continue;const Ye=L.get(Te.day)??0,Ie=L.get(Te.endDay||Te.day)??Ye,ct=Ye*1440+Re(Te.start);let Je=Ie*1440+Re(Te.end);Je<=ct&&(Je+=1440),Je>se&&(se=Je)}return se},C=O=>{let se=0;for(const Te of w){if(Te.person!==O)continue;const Ye=L.get(Te.day)??0,Ie=L.get(Te.endDay||Te.day)??Ye,ct=Ye*1440+Re(Te.start);let Je=Ie*1440+Re(Te.end);Je<=ct&&(Je+=1440),se+=Math.max(0,Je-ct)}return se},ie=O=>w.filter(se=>se.person===O).length,Ee=O=>p.find(se=>[se.firstName,se.lastName].filter(Boolean).join(" ")===O)?.tzId||"",Fe=O=>{let se=1/0;for(const Te of w)if(Te.person===O){const Ye=L.get(Te.day)??1/0;Ye<se&&(se=Ye)}return se},Le=X.map(O=>({name:O,startKey:F(O),startHas:Number.isFinite(F(O)),endKey:d(O),endHas:Number.isFinite(d(O)),totalKey:C(O),countKey:ie(O),hasShifts:ie(O)>0,tzKey:Ee(O),tzHas:!!Ee(O),dayKey:Fe(O),dayHas:Number.isFinite(Fe(O))})),pe=(O,se)=>O.name.localeCompare(se.name),ge=xe==="asc"?1:-1;return te==="name"?Le.sort((O,se)=>ge*pe(O,se)).map(O=>O.name):te==="tz"?Le.sort((O,se)=>{if(O.tzHas&&!se.tzHas)return-1;if(!O.tzHas&&se.tzHas)return 1;const Te=O.tzKey.localeCompare(se.tzKey)*ge;return Te!==0?Te:pe(O,se)}).map(O=>O.name):te==="end"?Le.sort((O,se)=>{if(O.endHas&&!se.endHas)return-1;if(!O.endHas&&se.endHas)return 1;const Te=(O.endKey-se.endKey)*ge;return Te!==0?Te:pe(O,se)}).map(O=>O.name):te==="firstDay"?Le.sort((O,se)=>{if(O.dayHas&&!se.dayHas)return-1;if(!O.dayHas&&se.dayHas)return 1;const Te=(O.dayKey-se.dayKey)*ge;return Te!==0?Te:pe(O,se)}).map(O=>O.name):te==="count"?Le.sort((O,se)=>{const Te=O.hasShifts,Ye=se.hasShifts;if(Te&&!Ye)return-1;if(!Te&&Ye)return 1;const Ie=(O.countKey-se.countKey)*ge;return Ie!==0?Ie:pe(O,se)}).map(O=>O.name):te==="total"?Le.sort((O,se)=>{const Te=O.hasShifts,Ye=se.hasShifts;if(Te&&!Ye)return-1;if(!Te&&Ye)return 1;const Ie=(O.totalKey-se.totalKey)*ge;return Ie!==0?Ie:pe(O,se)}).map(O=>O.name):Le.sort((O,se)=>{if(O.startHas&&!se.startHas)return-1;if(!O.startHas&&se.startHas)return 1;const Te=(O.startKey-se.startKey)*ge;return Te!==0?Te:pe(O,se)}).map(O=>O.name)},[p,x,f.offset,te,xe]),je=Math.min(7,Math.max(1,E||7)),Q=7/je*100,ue=28,$e=ce.useMemo(()=>As(x,f.offset),[x,f.offset]),oe=X=>{let w=0;for(const L of $e){const F=it.indexOf(L.day);if(F<0)continue;const d=F*1440+Re(L.start);let C=(it.indexOf(L.endDay||L.day)<0?F:it.indexOf(L.endDay||L.day))*1440+Re(L.end);C<=d&&(C+=1440);const ie=(d%(7*1440)+7*1440)%(7*1440),Ee=(C%(7*1440)+7*1440)%(7*1440),Fe=7*1440,Le=(pe,ge,O)=>pe>=ge&&pe<O;ie<Ee?Le(X,ie,Ee)&&w++:(Le(X,ie,Fe)||Le(X,0,Ee))&&w++}return w};return y.useEffect(()=>{const X=he.current;if(!X)return;const w=Math.max(1,Math.ceil(7/je)),L=Math.min(w-1,Math.max(0,G||0)),F=Math.min(X.scrollWidth-X.clientWidth,Math.round(L*X.clientWidth));X.scrollTo({left:F,behavior:"smooth"})},[G,je]),r.jsx("div",{className:"space-y-1",children:r.jsxs("div",{className:"flex items-stretch gap-1",children:[M&&r.jsxs("div",{className:"shrink-0",style:{width:z},children:[r.jsx("div",{className:"h-7 opacity-0 select-none",children:"label"}),K.length===0?r.jsx("div",{className:"text-sm opacity-70 px-2",children:"No agents."}):K.map(X=>r.jsx("div",{className:["flex items-center",o?"text-neutral-300":"text-neutral-700"].join(" "),style:{height:ue},title:X,children:r.jsx("div",{className:H,style:{width:z},children:X})},X))]}),r.jsx("div",{ref:he,className:"flex-1 overflow-x-auto no-scrollbar relative",onMouseLeave:()=>{le(!1),j(null)},onMouseMove:X=>{const w=he.current;if(!w)return;const L=w.firstElementChild;if(!L)return;const F=L.getBoundingClientRect(),d=X.clientX-F.left;if(d<0||d>F.width){le(!1),j(null);return}le(!0),j(d)},children:r.jsxs("div",{style:{width:`${Q}%`},"data-ribbons-inner":"1",children:[r.jsxs("div",{className:"relative h-7",children:[it.map((X,w)=>{const L=w/7*100,F=1/7*100;return r.jsx("div",{"data-day-col":w,className:["absolute text-center",o?"text-neutral-300":"text-neutral-600"].join(" "),style:{left:`${L}%`,width:`${F}%`,fontSize:13,lineHeight:1.5},children:X},X)}),R&&A!=null&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-y-0",style:{left:A,width:1,background:"rgba(59,130,246,0.9)"}}),r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",o?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:A},children:(()=>{const w=he.current?.firstElementChild?.getBoundingClientRect().width||1,L=7*1440,F=Math.max(0,Math.min(L-1,Math.round(A/w*L))),d=Math.floor(F%1440/60).toString().padStart(2,"0"),C=(F%60).toString().padStart(2,"0"),ie=oe(F);return`${d}:${C}  ${ie} on deck`})()})]})]}),K.length>0&&K.map(X=>r.jsx("div",{className:"py-0 m-0",children:r.jsx($d,{dark:o,tz:f,weekStart:c,agent:X,shifts:x,pto:h,tasks:S,calendarSegs:($||[]).flatMap(w=>!w.endDay||w.endDay===w.day?[w]:[{...w,day:w.day,start:w.start,end:"24:00"},{...w,day:w.endDay,start:"00:00",end:w.end}]),titlePrefix:X,draggable:!!(T||W),onDragAll:w=>T?.(X,w),onDragShift:(w,L)=>W?.(X,w,L),showDayLabels:!1,showWeekLabel:!1,framed:!1,showNowLabel:!1,showShiftLabels:!0,bandHeight:ue,alwaysShowTimeTags:J,forceOuterTimeTags:J,avoidLabelOverlap:J,highlightIds:Y,showEdgeTimeTagsForHighlights:!0,selectedIds:Z,onToggleSelect:V})},X))]})})]})})}function _0({dark:o,tz:f,weekStart:c,agents:p,live:x,proposal:h,highlightLiveIds:S,highlightProposalIds:$,tasks:E,calendarSegs:G}){return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:["rounded-xl p-2 border",o?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-semibold mb-2",children:"Live"}),r.jsx(Vi,{dark:o,tz:f,weekStart:c,agents:p,shifts:x.shifts,pto:x.pto||[],tasks:E||[],calendarSegs:G||[],visibleDays:7,showAllTimeLabels:!1,highlightIds:S,sortMode:"start",sortDir:"asc",showNameColumn:!0})]}),r.jsxs("div",{className:["rounded-xl p-2 border",o?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-semibold mb-2",children:"Proposal"}),r.jsx(Vi,{dark:o,tz:f,weekStart:c,agents:p,shifts:h.shifts,pto:h.pto||[],tasks:E||[],calendarSegs:G||[],visibleDays:7,showAllTimeLabels:!1,highlightIds:$,sortMode:"start",sortDir:"asc",showNameColumn:!1})]})]}),r.jsx("div",{className:"text-[10px] opacity-70",children:"Visual highlights indicate changed items (added/removed/modified)."})]})}function T0({dark:o,tz:f,weekStart:c,shifts:p,visibleAgentNames:x,visibleDays:h=7,scrollChunk:S=0}){const[$,E]=y.useState(()=>{try{const H=localStorage.getItem("coverage_heatmap_collapsed");return H==="1"?!0:H!=="0"}catch{return!0}});y.useEffect(()=>{try{localStorage.setItem("coverage_heatmap_collapsed",$?"1":"0")}catch{}try{window.dispatchEvent(new CustomEvent("coverage:collapsed",{detail:{value:$}}))}catch{}},[$]);const G=y.useMemo(()=>new Set(x),[x]),J=y.useMemo(()=>As(p,f.offset).filter(H=>G.has(H.person)),[p,f.offset,G]),T=y.useMemo(()=>{const H=Array.from({length:7},()=>new Array(24).fill(0));for(const K of J){const je=it.indexOf(K.day);if(je<0)continue;const Q=Re(K.start),ue=Re(K.end),$e=ue>Q?ue:1440;for(let oe=0;oe<24;oe++){const X=oe*60,w=(oe+1)*60;Math.max(Q,X)<Math.min($e,w)&&H[je][oe]++}}return H},[J]),W=y.useMemo(()=>T.reduce((H,K)=>Math.max(H,...K),0),[T]),te=y.useMemo(()=>{const H=[];for(let d=0;d<7;d++)for(let C=0;C<24;C++)H.push({dIdx:d,h:C,v:T[d][C]});let K=1/0,je=0;for(const d of H)d.v<K&&(K=d.v),d.v>je&&(je=d.v);const Q=je>0?H.filter(d=>d.v===je):[],ue=H.filter(d=>d.v===K),$e=H.filter(d=>d.v===0).length,oe=H.reduce((d,C)=>d+C.v,0),X=H.length?oe/H.length:0,w=Array.from({length:7},(d,C)=>T[C].reduce((ie,Ee)=>ie+Ee,0)),L=w.reduce((d,C,ie)=>C>(w[d]??-1/0)?ie:d,0),F=w.reduce((d,C,ie)=>C<(w[d]??1/0)?ie:d,0);return{pts:H,minCount:Number.isFinite(K)?K:0,maxCount:je,maxPts:Q,minPts:ue,zeroHours:$e,avg:X,bestDayIdx:L,worstDayIdx:F,dayTotals:w}},[T]),xe=H=>{if(W<=0)return o?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)";const K=H/W,je=[[0,0,0],[239,68,68],[250,204,21]],Q=K<=.5?0:1,ue=K<=.5?K/.5:(K-.5)/.5,$e=je[Q],oe=je[Q+1]||je[Q],X=Math.round($e[0]*(1-ue)+oe[0]*ue),w=Math.round($e[1]*(1-ue)+oe[1]*ue),L=Math.round($e[2]*(1-ue)+oe[2]*ue);return`rgba(${X},${w},${L},${o?.9:.95})`},Y=Math.min(7,Math.max(1,h||7)),Z=7/Y*100,V=y.useRef(null);y.useEffect(()=>{const H=V.current;if(!H)return;const K=Math.max(1,Math.ceil(7/Y)),je=Math.min(K-1,Math.max(0,S||0)),Q=Math.min(H.scrollWidth-H.clientWidth,Math.round(je*H.clientWidth));H.scrollTo({left:Q,behavior:"smooth"})},[S,Y]);const M=7,A=1,[j,R]=y.useState(()=>{try{const H=getComputedStyle(document.documentElement).getPropertyValue("--schedule-name-col-px"),K=parseInt(H||"160",10);return Number.isFinite(K)?K:160}catch{return 160}}),[le,he]=y.useState(null),[z,ee]=y.useState(null);return y.useEffect(()=>{const H=ue=>{try{const $e=ue.detail?.px;typeof $e=="number"&&R($e)}catch{}};window.addEventListener("schedule:namecol",H);const K=document.querySelector('[data-ribbons-inner="1"]'),je=()=>{if(K){he(K.scrollWidth||K.clientWidth);try{const ue=K.getBoundingClientRect(),$e=Array.from(K.querySelectorAll("[data-day-col]"));if($e.length===7){const oe=$e.map(X=>{const w=X.getBoundingClientRect();return{left:w.left-ue.left,width:w.width}});ee(oe)}}catch{}}};je();const Q="ResizeObserver"in window?new window.ResizeObserver(()=>je()):null;return Q&&K&&Q.observe(K),()=>{try{Q&&K&&Q.unobserve(K)}catch{}window.removeEventListener("schedule:namecol",H)}},[h]),r.jsx("div",{className:["sticky bottom-0 z-30",o?"bg-neutral-950/92":"bg-white/95","backdrop-blur","border-t",o?"border-neutral-800":"border-neutral-200"].join(" "),children:r.jsxs("div",{className:"px-2 py-1.5",children:[r.jsx("div",{className:"relative h-6",children:r.jsxs("div",{className:["absolute left-2 top-1/2 -translate-y-1/2 flex items-center gap-2 text-xs font-medium",o?"text-neutral-200":"text-neutral-700"].join(" "),children:[r.jsx("span",{children:"Coverage"}),r.jsx("button",{onClick:()=>E(H=>!H),"aria-expanded":!$,className:["inline-flex items-center justify-center w-6 h-6 rounded-full border",o?"bg-neutral-900 border-neutral-700 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),title:$?"Expand":"Collapse",children:r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:$?r.jsx("polyline",{points:"18 15 12 9 6 15"}):r.jsx("polyline",{points:"6 9 12 15 18 9"})})}),(()=>{const H=Q=>Q===0?"12a":Q<12?`${Q}a`:Q===12?"12p":`${Q-12}p`,K=te.maxPts.slice(0,3).map(Q=>`${it[Q.dIdx]} ${H(Q.h)}`).join(", "),je=te.minPts.slice(0,3).map(Q=>`${it[Q.dIdx]} ${H(Q.h)}`).join(", ");return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("span",{className:["px-1.5 py-0.5 rounded border",o?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:K?`Max at: ${K}`:"No data",children:["Max ",te.maxCount]}),r.jsxs("span",{className:["px-1.5 py-0.5 rounded border",o?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:je?`Min at: ${je}`:"No data",children:["Min ",te.minCount]}),r.jsxs("span",{className:["px-1.5 py-0.5 rounded border hidden sm:inline",o?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:"Avg across all hours",children:["Avg ",te.avg.toFixed(1)]})]})})()]})}),!$&&r.jsxs("div",{className:"flex items-stretch gap-1 mt-1",children:[r.jsxs("div",{className:"shrink-0",style:{width:j},children:[r.jsx("div",{className:"h-[20px]"}),r.jsx("div",{className:"relative",style:{height:M*24+A*23},children:[0,6,12,18,24].map(H=>{const K=M*24+A*23,je=H===24?K:H*(M+A)+M/2,Q=H===24?"-translate-y-[100%]":"-translate-y-1/2",ue=H===0?"12a":H<12?`${H}a`:H===12?"12p":`${H-12}p`;return r.jsx("div",{className:["absolute right-2 text-right text-[10px]",Q,o?"text-neutral-400":"text-neutral-500"].join(" "),style:{top:je},children:ue},H)})})]}),r.jsx("div",{ref:V,className:"flex-1 overflow-x-auto no-scrollbar",children:r.jsx("div",{style:le?{width:le}:{width:`${Z}%`},children:r.jsx("div",{className:"relative",style:{height:M*24+A*23},children:it.map((H,K)=>{const je=z?z[K]?.left:le?K*(le/7):void 0,Q=z?z[K]?.width:le?le/7:void 0;return r.jsx("div",{className:"absolute inset-y-0",style:z||le?{left:je,width:Q}:{left:`${K/7*100}%`,width:`${1/7*100}%`},children:Array.from({length:24},(ue,$e)=>$e).map(ue=>{const $e=ue*(M+A),oe=T[K][ue],X=`${H}  ${String(ue).padStart(2,"0")}:00 to ${String(ue+1).padStart(2,"0")}:00  ${oe} on deck`;return r.jsx("div",{className:"w-full",style:{position:"absolute",top:$e,height:M,backgroundColor:xe(oe),borderRadius:2},title:X},ue)})},H)})})})})]})]})})}function A0({tasks:o,onCreate:f,onUpdate:c,onArchive:p,onDelete:x,dark:h,selectedId:S,onSelect:$}){const[E,G]=y.useState({name:"",color:"#2563eb"}),J=y.useMemo(()=>o.filter(j=>!j.archived),[o]),[T,W]=y.useState(null),[te,xe]=y.useState(""),[Y,Z]=y.useState("#2563eb");function V(j){W(j.id),xe(j.name),Z(j.color)}function M(){W(null)}function A(j){te.trim()&&(c({id:j,name:te.trim(),color:Y}),W(null))}return r.jsxs("section",{className:["rounded-xl p-3",h?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[r.jsx("div",{className:["border rounded-xl overflow-auto",h?"border-neutral-800":"border-neutral-300"].join(" "),children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:h?"bg-neutral-900":"bg-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Color"}),r.jsx("th",{className:"px-3 py-2 text-left w-36",children:"Actions"})]})}),r.jsx("tbody",{className:h?"divide-y divide-neutral-800":"divide-y divide-neutral-200",children:J.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"px-3 py-6 text-center opacity-70",children:"No postures configured."})}):J.map(j=>r.jsx("tr",{onClick:()=>$?.(j.id),className:[h?"hover:bg-neutral-900 cursor-pointer":"hover:bg-neutral-50 cursor-pointer",S===j.id?h?"bg-neutral-900 ring-1 ring-blue-500/40":"bg-blue-50 ring-1 ring-blue-500/40":""].join(" "),children:T===j.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("input",{className:["w-full border rounded px-2 py-1",h&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:te,onChange:R=>xe(R.target.value)})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("input",{type:"color",className:["w-10 h-8 border rounded",h&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Y,onChange:R=>Z(R.target.value)})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>A(j.id),className:["px-2 py-1 rounded border text-xs",h?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:M,className:["px-2 py-1 rounded border text-xs",h?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-1.5 font-medium",children:j.name}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("span",{className:"inline-block w-5 h-5 rounded border align-middle",style:{background:j.color}})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsxs("div",{className:"flex gap-2",onClick:R=>R.stopPropagation(),children:[r.jsx("button",{onClick:()=>V(j),className:["px-2 py-1 rounded border text-xs",h?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),r.jsx("button",{onClick:()=>c({...j,archived:!0}),className:["px-2 py-1 rounded border text-xs",h?"border-neutral-700":"border-neutral-300"].join(" "),children:"Remove"}),r.jsx("button",{onClick:()=>{x&&confirm(`Delete posture "${j.name}"? This cannot be undone.`)&&x(j.id)},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})})]})},j.id))})]})}),r.jsxs("form",{className:"mt-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",onSubmit:j=>{j.preventDefault();const R=E.name.trim();R&&(f({...E,name:R}),G({name:"",color:"#2563eb"}))},children:[r.jsxs("label",{className:"text-sm flex flex-col md:col-span-3",children:[r.jsx("span",{className:"mb-1",children:"Name"}),r.jsx("input",{className:["w-full border rounded-xl px-3 py-2",h&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:E.name,onChange:j=>G({...E,name:j.target.value}),placeholder:"e.g., Support Inbox"})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Color"}),r.jsx("input",{type:"color",className:["w-full border rounded-xl h-10",h&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:E.color,onChange:j=>G({...E,color:j.target.value}),"aria-label":"Posture color"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx("button",{type:"submit",disabled:!E.name.trim(),className:["h-10 rounded-xl border font-medium px-4 w-full md:w-auto",E.name.trim()?h?"bg-neutral-800 border-neutral-700 hover:bg-neutral-700":"bg-blue-600 border-blue-600 text-white hover:bg-blue-500":h?"bg-neutral-900 border-neutral-800 opacity-60":"bg-neutral-200 border-neutral-300 text-neutral-500 cursor-not-allowed"].join(" "),children:"Add Posture"})})]})]})}function O0({dark:o,agents:f,onAddAgent:c,onUpdateAgent:p,onDeleteAgent:x,weekStart:h,tz:S,shifts:$,pto:E,overrides:G,tasks:J,calendarSegs:T,onUpdateShift:W,onDeleteShift:te,onAddShift:xe,setTasks:Y,setCalendarSegs:Z,setPto:V,setOverrides:M}){const[A,j]=y.useState(!1),[R,le]=y.useState(""),[he,z]=y.useState(""),ee=y.useRef(null),[H,K]=y.useState(null),je=y.useCallback((u,v="success")=>{K({text:u,kind:v}),ee.current!=null&&(window.clearTimeout(ee.current),ee.current=null),ee.current=window.setTimeout(()=>K(null),3e3)},[]);y.useEffect(()=>{oa()&&(j(!0),z(""))},[]);const Q=y.useMemo(()=>Sd(),[]),ue=y.useMemo(()=>Md(),[]),$e=y.useMemo(()=>a0(),[]),[oe,X]=y.useState(f);y.useEffect(()=>{X(f)},[f]);const w=["Agents","Shifts","Postures","PTO & Overrides","Proposals"],[L,F]=y.useState("Agents"),[d,C]=y.useState(!1),[ie,Ee]=y.useState("start"),[Fe,Le]=y.useState("asc"),pe=y.useMemo(()=>`schedule2.v2.shifts.includeHidden.${h}.${S.id}`,[h,S.id]),[ge,O]=y.useState(()=>{try{const u=localStorage.getItem(pe);return u?u==="1":!1}catch{return!1}});y.useEffect(()=>{try{localStorage.setItem(pe,ge?"1":"0")}catch{}},[ge,pe]);const se=y.useMemo(()=>`schedule2.v2.shifts.daysVisible.${h}.${S.id}`,[h,S.id]),[Te,Ye]=y.useState(()=>{try{const u=localStorage.getItem(se),v=u?parseInt(u,10):7;return Number.isFinite(v)&&v>=1&&v<=7?v:7}catch{return 7}});y.useEffect(()=>{try{localStorage.setItem(se,String(Te))}catch{}},[Te,se]);const[Ie,ct]=y.useState(0);y.useEffect(()=>{ct(0)},[Te,h]),y.useEffect(()=>{if(L!=="Proposals")return;let u=!1;return(async()=>{Ke(!0);const v=await yd();if(u)return;Ke(!1),v.ok?U(v.proposals||[]):U([]);const ne=await Bi();u||Pt(ne)})(),()=>{u=!0}},[L]);const[Je,nt]=y.useState($),[Ct,Et]=y.useState(E),[Xe,yt]=y.useState(G),[pt,ye]=y.useState(!1),[ae,We]=y.useState(!1),[N,k]=y.useState("https://team-schedule-api.bsteward.workers.dev/v1/schedule"),[be,fe]=y.useState(""),[Ue,q]=y.useState(""),[we,U]=y.useState([]),[De,Ke]=y.useState(!1),[st,et]=y.useState(""),[vt,mt]=y.useState(null),[ft,Pt]=y.useState(null),[Bt,Rt]=y.useState(""),[ut,zt]=y.useState(!1),$t=y.useRef(!1),_t=y.useMemo(()=>`schedule2.v2.unpublished.${h}.${S.id}`,[h,S.id]),tt=y.useMemo(()=>`schedule2.v2.draft.${h}.${S.id}`,[h,S.id]);y.useEffect(()=>{pt||nt($)},[$,pt]),y.useEffect(()=>{pt||Et(E)},[E,pt]),y.useEffect(()=>{try{const u=localStorage.getItem(_t);if(u){const ne=JSON.parse(u);Array.isArray(ne?.shifts)&&nt(ne.shifts),Array.isArray(ne?.pto)&&Et(ne.pto),Array.isArray(ne?.overrides)&&yt(ne.overrides),(Array.isArray(ne?.shifts)||Array.isArray(ne?.pto)||Array.isArray(ne?.overrides))&&(ye(!0),$t.current=!1);return}const v=localStorage.getItem(tt);if(v){const ne=JSON.parse(v),re={schema:1,weekStart:h,tzId:S.id,updatedAt:new Date().toISOString()};if(Array.isArray(ne?.shifts)&&(nt(ne.shifts),re.shifts=ne.shifts),Array.isArray(ne?.pto)&&(Et(ne.pto),re.pto=ne.pto),Array.isArray(ne?.overrides)&&(yt(ne.overrides),re.overrides=ne.overrides),re.shifts||re.pto||re.overrides){ye(!0),$t.current=!1;try{localStorage.setItem(_t,JSON.stringify(re))}catch{}}try{localStorage.removeItem(tt)}catch{}}}catch{}},[_t,tt]),y.useEffect(()=>{if(!pt)return;const u=setTimeout(()=>{try{localStorage.setItem(_t,JSON.stringify({schema:1,weekStart:h,tzId:S.id,shifts:Je,pto:Ct,overrides:Xe,updatedAt:new Date().toISOString()}))}catch{}},300);return()=>clearTimeout(u)},[pt,Je,Ct,Xe,_t,h,S.id]);const[At,Ce]=y.useState(new Set),[lt,jt]=y.useState(new Set),[rt,Nt]=y.useState([]),[St,Kt]=y.useState([]),Wt=rt.length>0,cn=St.length>0;function sn(u,v){return u.id===v.id&&u.day===v.day&&u.start===v.start&&u.end===v.end&&u.endDay===v.endDay}function xr(u,v){if(u.length!==v.length)return!1;const ne=new Map(u.map(re=>[re.id,re]));for(const re of v){const Se=ne.get(re.id);if(!Se||!sn(Se,re))return!1}return!0}const sr=y.useCallback(u=>{u.length!==0&&(!pt&&xr(Je,$)&&($t.current=!0),Nt(v=>{const ne=v.concat([u]);return ne.length>10&&ne.shift(),ne}),Kt([]),ye(!0))},[pt,Je,$]),en=y.useCallback(()=>{if(rt.length===0)return;const u=rt[rt.length-1],v=u.map(({id:re})=>{const Se=Je.find(Ge=>Ge.id===re);return Se?{id:re,patch:{day:Se.day,start:Se.start,end:Se.end,endDay:Se.endDay}}:{id:re,patch:{}}});nt(re=>re.map(Se=>{const Ge=u.find(xt=>xt.id===Se.id);return Ge?{...Se,...Ge.patch}:Se})),Ce(re=>{const Se=new Set(re);return u.forEach(({id:Ge})=>Se.delete(Ge)),Se}),Nt(re=>re.slice(0,-1)),Kt(re=>re.concat([v])),ye(!0),rt.length-1===0&&$t.current&&(nt($),ye(!1),$t.current=!1)},[rt,Je,$]),lr=y.useCallback(()=>{if(St.length===0)return;const u=St[St.length-1],v=u.map(({id:ne})=>{const re=Je.find(Se=>Se.id===ne);return re?{id:ne,patch:{day:re.day,start:re.start,end:re.end,endDay:re.endDay}}:{id:ne,patch:{}}});nt(ne=>ne.map(re=>{const Se=u.find(Ge=>Ge.id===re.id);return Se?{...re,...Se.patch}:re})),Ce(ne=>{const re=new Set(ne);return u.forEach(({id:Se})=>re.add(Se)),re}),Kt(ne=>ne.slice(0,-1)),Nt(ne=>ne.concat([v])),ye(!0)},[St,Je]),Mr=y.useMemo(()=>{try{return Nd(Je,Xe,h,oe)}catch{return Je}},[Je,Xe,h,oe]);y.useEffect(()=>{if(L!=="Shifts")return;rt.length===0&&St.length===0&&At.size===0&&nt($)},[L,$,rt,St,At]),y.useEffect(()=>{const u=v=>{if(L!=="Shifts")return;const ne=(v.ctrlKey||v.metaKey)&&!v.shiftKey&&(v.key==="z"||v.key==="Z"),re=(v.ctrlKey||v.metaKey)&&v.shiftKey&&(v.key==="z"||v.key==="Z")||(v.ctrlKey||v.metaKey)&&(v.key==="y"||v.key==="Y");ne?(v.preventDefault(),en()):re&&(v.preventDefault(),lr()),v.key==="Escape"&&jt(new Set)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[L,en,lr]);const zn=y.useMemo(()=>{const u=new Set;for(const v of oe){const ne=`${v.firstName} ${v.lastName}`.trim();ne&&u.add(ne)}for(const v of $)v.person&&u.add(v.person);for(const v of T)v.person&&u.add(v.person);for(const v of E)v.person&&u.add(v.person);return Array.from(u).sort()},[oe,$,T,E]),Qn=y.useMemo(()=>J.filter(u=>!u.archived),[J]),[I,Me]=y.useState(""),[Oe,Pe]=y.useState("Mon"),[ke,_e]=y.useState("09:00"),[Ae,ot]=y.useState("10:00"),[Lt,Ot]=y.useState(""),[kn,Tt]=y.useState("Mon");y.useEffect(()=>{!Lt&&Qn[0]&&Ot(Qn[0].id)},[Qn,Lt]);const[yn,ln]=y.useState(null),[or,vn]=y.useState(""),[Tr,eo]=y.useState("Mon"),[hl,as]=y.useState("09:00"),[Ar,Or]=y.useState("10:00"),[Rr,to]=y.useState(""),[pl,Rs]=y.useState("Mon"),[is,zs]=y.useState(""),[gr,no]=y.useState(""),[zr,Mt]=y.useState(""),[xl,gl]=y.useState(""),[Fn,ro]=y.useState(""),[Fs,yl]=y.useState(null),[Fr,Br]=y.useState(""),[Bn,Yn]=y.useState(""),[Un,kr]=y.useState(""),[Ur,Xn]=y.useState(""),ia=u=>{yl(u),Br(u.person),Yn(u.startDate),kr(u.endDate),Xn(u.notes||"")},vl=()=>{yl(null),Br(""),Yn(""),kr(""),Xn("")},[yr,ua]=y.useState(""),[us,Bs]=y.useState(""),[cs,ca]=y.useState(""),[Gn,ds]=y.useState(""),[Hn,fs]=y.useState(""),[so,da]=y.useState(""),[Us,Hs]=y.useState(""),[ms,lo]=y.useState(!1),[ar,wl]=y.useState(""),[vr,jl]=y.useState(null);y.useEffect(()=>{vr!=null&&(vr<0||vr>=oe.length)&&jl(oe.length>0?0:null)},[vr,oe]);function hs(){nt($),ye(!1),Nt([]),Kt([]),Ce(new Set),$t.current=!1;try{localStorage.removeItem(_t)}catch{}}async function Ws(){const u=Ts(oe),v=await Ed({shifts:Je,pto:Ct,overrides:Xe,calendarSegs:T,agents:u,updatedAt:new Date().toISOString()});if(v.ok){ye(!1),je("Published to live.","success"),$t.current=!1,Ce(new Set);try{localStorage.removeItem(_t)}catch{}V(()=>Ct),M(()=>Xe)}else v.status===404||v.error==="missing_site_session"||(v.bodyText||"").includes("missing_site_session")?(await gd(),je("Publish failed: missing or expired site session. Please sign in to view and then try again.","error")):v.status===401?je("Publish failed: not signed in as admin (401).","error"):v.status===403?je("Publish failed: CSRF mismatch (403). Try reloading and signing in again.","error"):v.status===409?je("Publish failed: conflict (409). Refresh to load latest, then retry.","error"):je(`Failed to publish. ${v.status?`HTTP ${v.status}`:""} ${v.error?` ${v.error}`:""}`,"error")}async function oo(){const u=prompt("Proposal title",new Date().toLocaleString())||new Date().toLocaleString(),v=Ts(oe);(await f0({title:u,weekStart:h,tzId:S.id,shifts:Je,pto:Ct,overrides:Xe,calendarSegs:T,agents:v})).ok?je("Proposal created.","success"):je("Failed to create proposal.","error")}function dn(u=[],v=[],ne){const re=new Map(u.map(wt=>[wt.id,wt])),Se=new Map(v.map(wt=>[wt.id,wt])),Ge=[],xt=[],Qt=[];for(const[wt,Dt]of Se){const ht=re.get(wt);ht?ne(ht,Dt)||Qt.push({before:ht,after:Dt}):Ge.push(Dt)}for(const[wt,Dt]of re)Se.has(wt)||xt.push(Dt);return{added:Ge,removed:xt,changed:Qt}}const Hr=(u,v)=>u&&v&&u.id===v.id&&u.person===v.person&&u.day===v.day&&u.start===v.start&&u.end===v.end&&(u.endDay||"")===(v.endDay||""),bl=(u,v)=>u&&v&&u.id===v.id&&u.person===v.person&&u.startDate===v.startDate&&u.endDate===v.endDate&&(u.notes||"")===(v.notes||""),ps=(u,v)=>u&&v&&u.id===v.id&&u.person===v.person&&u.startDate===v.startDate&&u.endDate===v.endDate&&(u.start||"")===(v.start||"")&&(u.end||"")===(v.end||"")&&(u.endDay||"")===(v.endDay||"")&&(u.kind||"")===(v.kind||"")&&(u.notes||"")===(v.notes||"");async function fa(u){et(u),mt(null),Rt("");const v=await m0(u);if(!v.ok||!v.proposal){Rt("Failed to load proposal");return}mt(v.proposal)}const Nl=y.useCallback(u=>{c?.(u),X(v=>v.concat([{firstName:u.firstName,lastName:u.lastName,tzId:u.tzId,hidden:!1,meetingCohort:void 0}]))},[c]),Sl=y.useCallback((u,v)=>{p?.(u,v),X(ne=>ne.map((re,Se)=>Se===u?v:re))},[p]),xs=y.useCallback(u=>{x?.(u),X(v=>v.filter((ne,re)=>re!==u))},[x]);return A?r.jsxs("section",{className:["rounded-2xl p-3 space-y-3",o?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:w.map(u=>{const v=L===u;return r.jsx("button",{onClick:()=>F(u),className:["px-3 py-1.5 rounded-lg text-sm border",v?o?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":o?"bg-neutral-900 border-neutral-800 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-200 text-neutral-700 hover:bg-neutral-100"].join(" "),children:u},u)})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",disabled:!pt,onClick:hs,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",pt?o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":o?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]}),r.jsx("span",{children:"Discard"})]})}),r.jsx("button",{onClick:Ws,className:"px-3 py-1.5 rounded-xl border font-semibold bg-blue-600 border-blue-600 text-white hover:bg-blue-500 shrink-0",title:"Publish working changes to live","aria-label":"Publish",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"}),r.jsx("path",{d:"M16 5h2a2 2 0 0 1 2 2v2"})]}),r.jsx("span",{children:"Publish"})]})})]})]}),L==="Shifts"&&r.jsxs("div",{className:["flex flex-wrap items-center justify-between gap-2 sm:gap-3 text-xs rounded-xl px-2 py-2 border",o?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"flex min-w-0 items-center gap-2 sm:gap-3",children:r.jsx("span",{className:["inline-flex items-center px-2 py-1 rounded-xl border font-medium",pt?o?"bg-neutral-900 border-amber-600 text-amber-400":"bg-white border-amber-500 text-amber-700":o?"bg-neutral-900 border-neutral-800 text-neutral-400":"bg-white border-neutral-200 text-neutral-500"].join(" "),children:pt?"Unpublished changes":"Live"})}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Sort ribbons",children:[r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h14"}),r.jsx("path",{d:"M7 12h10"}),r.jsx("path",{d:"M11 18h6"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[9.5rem] sm:w-[11rem] appearance-none",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:ie,onChange:u=>Ee(u.target.value),"aria-label":"Sort ribbons",children:[r.jsx("option",{value:"start",children:"Earliest start"}),r.jsx("option",{value:"end",children:"Latest end"}),r.jsx("option",{value:"count",children:"Shift count"}),r.jsx("option",{value:"total",children:"Total minutes"}),r.jsx("option",{value:"firstDay",children:"First day"}),r.jsx("option",{value:"tz",children:"Timezone"}),r.jsx("option",{value:"name",children:"Name (AZ)"})]}),r.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(o?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),r.jsx("button",{type:"button",onClick:()=>Le(u=>u==="asc"?"desc":"asc"),"aria-pressed":Fe==="desc",title:Fe==="asc"?"Ascending":"Descending",className:["ml-1 px-2.5 py-1.5 rounded-xl border font-medium",o?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:Fe==="asc"?r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 19V5"}),r.jsx("path",{d:"m5 12 7-7 7 7"})]}):r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"m19 12-7 7-7-7"})]})})]}),r.jsx("button",{type:"button",onClick:()=>O(u=>!u),"aria-pressed":ge,title:ge?"Hide off-duty agents":"Show off-duty agents",className:["px-2.5 py-1.5 rounded-xl border font-medium",ge?o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":o?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ge?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),r.jsx("path",{d:"M1 1l22 22"}),r.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]})})}),r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Visible days",children:[r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),r.jsx("path",{d:"M16 2v4"}),r.jsx("path",{d:"M8 2v4"}),r.jsx("path",{d:"M3 10h18"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[6rem] appearance-none",o?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Te,onChange:u=>Ye(Math.max(1,Math.min(7,parseInt(u.target.value,10)||7))),"aria-label":"Visible days",children:Array.from({length:7},(u,v)=>v+1).map(u=>r.jsxs("option",{value:u,children:[u," day",u===1?"":"s"]},u))}),r.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(o?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),Te<7&&r.jsxs("div",{className:"inline-flex items-center gap-1 ml-1",role:"group","aria-label":"Scroll days",children:[r.jsx("button",{type:"button",onClick:()=>ct(u=>Math.max(0,u-1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",o?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Earlier days","aria-label":"Earlier days",disabled:Ie<=0,children:r.jsx("svg",{"aria-hidden":!0,className:Ie<=0?o?"text-neutral-600":"text-neutral-400":o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"15 18 9 12 15 6"})})}),r.jsx("button",{type:"button",onClick:()=>ct(u=>Math.min(Math.max(1,Math.ceil(7/Te))-1,u+1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",o?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Later days","aria-label":"Later days",disabled:Ie>=Math.max(1,Math.ceil(7/Te))-1,children:r.jsx("svg",{"aria-hidden":!0,className:Ie>=Math.max(1,Math.ceil(7/Te))-1?o?"text-neutral-600":"text-neutral-400":o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]}),r.jsx("button",{type:"button",onClick:()=>C(u=>!u),"aria-pressed":d,title:"Toggle time labels",className:["px-2.5 py-1.5 rounded-xl border font-medium",d?o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":o?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Undo / Redo",children:[r.jsx("button",{type:"button",disabled:!Wt,onClick:en,className:["px-2.5 py-1.5 rounded-xl border font-medium",Wt?o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":o?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Undo (Ctrl/Cmd+Z)",children:r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"9 14 4 9 9 4"}),r.jsx("path",{d:"M20 20a8 8 0 0 0-7-12H4"})]})}),r.jsx("button",{type:"button",disabled:!cn,onClick:lr,className:["px-2.5 py-1.5 rounded-xl border font-medium",cn?o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":o?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)",children:r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"15 14 20 9 15 4"}),r.jsx("path",{d:"M4 20a8 8 0 0 1 7-12h9"})]})})]}),r.jsx("button",{type:"button",onClick:oo,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Create a proposal from current changes","aria-label":"Create proposal",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]}),r.jsx("span",{children:"Proposal"})]})}),r.jsx("button",{type:"button",onClick:()=>{We(u=>!u),q("")},className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Import shifts/PTO/postures from a legacy JSON URL or paste","aria-label":"Import",children:r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"}),r.jsx("polyline",{points:"8 17 12 21 16 17"})]})}),r.jsx("button",{disabled:!pt,onClick:hs,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",pt?o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":o?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:r.jsxs("svg",{"aria-hidden":!0,className:o?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]})})]})]}),L==="Proposals"&&r.jsxs("div",{className:["rounded-xl p-3 border",o?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:"Proposals"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>{Ke(!0),yd().then(u=>{Ke(!1),U(u.ok?u.proposals||[]:[])})},className:["px-2.5 py-1.5 rounded-xl border text-xs",o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),children:"Refresh"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:["rounded-xl p-2 border",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-medium mb-2",children:"List"}),r.jsxs("div",{className:"flex flex-col gap-1 max-h-56 overflow-auto",children:[De&&r.jsx("div",{className:"text-xs opacity-70",children:"Loading"}),!De&&we.length===0&&r.jsx("div",{className:"text-xs opacity-70",children:"No proposals"}),we.map(u=>r.jsxs("button",{onClick:()=>fa(u.id),className:["text-left px-2 py-1 rounded-lg border text-xs",st===u.id?o?"bg-neutral-800 border-neutral-700":"bg-neutral-100 border-neutral-300":o?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:[r.jsx("div",{className:"font-medium truncate",children:u.title||u.id}),r.jsxs("div",{className:"opacity-70 truncate",children:[u.status,"  ",new Date((u.updatedAt||0)*1e3).toLocaleString()]})]},u.id))]})]}),r.jsxs("div",{className:["rounded-xl p-2 border",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-xs font-medium",children:"Diff"}),r.jsx("button",{type:"button",onClick:()=>zt(u=>!u),className:["px-2.5 py-1 rounded-lg border text-[11px]",o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-pressed":ut,children:ut?"Hide visual":"Show visual"})]}),Bt&&r.jsx("div",{className:"text-xs text-red-600 dark:text-red-300",children:Bt}),vt&&ft&&(()=>{const u=vt.patch||{},v={shifts:ft?.shifts||[],pto:ft?.pto||[],overrides:ft?.overrides||[]},ne=dn(v.shifts,u.shifts||[],Hr),re=dn(v.pto,u.pto||[],bl),Se=dn(v.overrides,u.overrides||[],ps),Ge=({kind:P})=>r.jsx("span",{className:["text-[10px] px-1.5 py-0.5 rounded border",P==="added"?o?"bg-green-900/30 border-green-800 text-green-300":"bg-green-50 border-green-200 text-green-700":P==="removed"?o?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700":o?"bg-amber-900/30 border-amber-800 text-amber-300":"bg-amber-50 border-amber-200 text-amber-700"].join(" "),children:P}),xt=({text:P,kind:dt})=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Ge,{kind:dt}),r.jsx("div",{className:"truncate",title:P,children:P})]}),Qt=P=>`${P.person||""}  ${P.day||""} ${P.start||""}${P.end||""}${P.endDay&&P.endDay!==P.day?` (${P.endDay})`:""}`,wt=P=>`${P.person||""}  ${P.startDate||""}  ${P.endDate||""}${P.notes?` (${P.notes})`:""}`,Dt=P=>`${P.person||""}  ${P.startDate||""}  ${P.endDate||""}${P.start?` ${P.start}`:""}${P.end?`${P.end}`:""}${P.endDay?` (${P.endDay})`:""}${P.kind?` [${P.kind}]`:""}${P.notes?` (${P.notes})`:""}`,ht=new Set([...ne.removed.map(P=>P.id),...ne.changed.map(P=>P.before?.id).filter(Boolean)]),fn=new Set([...ne.added.map(P=>P.id),...ne.changed.map(P=>P.after?.id).filter(Boolean)]);return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"Shifts"}),r.jsxs("div",{className:"space-y-1",children:[ne.added.map(P=>r.jsx(xt,{kind:"added",text:Qt(P)},"a-"+P.id)),ne.removed.map(P=>r.jsx(xt,{kind:"removed",text:Qt(P)},"r-"+P.id)),ne.changed.map(({before:P,after:dt})=>r.jsx(xt,{kind:"changed",text:`${Qt(P)}  ${Qt(dt)}`},"c-"+dt.id)),ne.added.length+ne.removed.length+ne.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"PTO"}),r.jsxs("div",{className:"space-y-1",children:[re.added.map(P=>r.jsx(xt,{kind:"added",text:wt(P)},"pa-"+P.id)),re.removed.map(P=>r.jsx(xt,{kind:"removed",text:wt(P)},"pr-"+P.id)),re.changed.map(({before:P,after:dt})=>r.jsx(xt,{kind:"changed",text:`${wt(P)}  ${wt(dt)}`},"pc-"+dt.id)),re.added.length+re.removed.length+re.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"Overrides"}),r.jsxs("div",{className:"space-y-1",children:[Se.added.map(P=>r.jsx(xt,{kind:"added",text:Dt(P)},"oa-"+P.id)),Se.removed.map(P=>r.jsx(xt,{kind:"removed",text:Dt(P)},"or-"+P.id)),Se.changed.map(({before:P,after:dt})=>r.jsx(xt,{kind:"changed",text:`${Dt(P)}  ${Dt(dt)}`},"oc-"+dt.id)),Se.added.length+Se.removed.length+Se.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),ut&&r.jsx("div",{className:"pt-2 border-t border-neutral-800/30",children:r.jsx(_0,{dark:o,tz:S,weekStart:h,agents:oe,live:{shifts:v.shifts,pto:v.pto},proposal:{shifts:u.shifts||[],pto:u.pto||[]},highlightLiveIds:ht,highlightProposalIds:fn,tasks:J,calendarSegs:T})})]})})(),(!vt||!ft)&&r.jsx("div",{className:"text-xs opacity-60",children:"Select a proposal to see its diff"})]})]})]}),ae&&r.jsxs("div",{className:["mt-2 rounded-xl p-3 border",o?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-sm font-semibold mb-2",children:"Import legacy data"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"From URL"}),r.jsx("input",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:N,onChange:u=>k(u.target.value),placeholder:"https:///schedule.json"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:async()=>{q("");try{const u=await fetch(N,{credentials:"omit"});if(!u.ok){q(`Fetch failed: ${u.status}`);return}const v=await u.json();if(!Array.isArray(v.shifts)){q("Invalid JSON: missing shifts[]");return}const ne=v.shifts.map((re,Se)=>({id:re.id||`imp-${Se}-${Math.random().toString(36).slice(2)}`,person:re.person,day:re.day,start:re.start,end:re.end,endDay:re.endDay}));nt(ne),Array.isArray(v.pto)&&Et(v.pto),Array.isArray(v.overrides)&&yt(v.overrides),Array.isArray(v.calendarSegs)&&Z(re=>v.calendarSegs),ye(!0),q(`Imported ${ne.length} shifts${Array.isArray(v.pto)?`, ${v.pto.length} PTO`:""}${Array.isArray(v.overrides)?`, ${v.overrides.length} overrides`:""}${Array.isArray(v.calendarSegs)?`, ${v.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(u){q(u?.message||"Import failed")}},children:"Fetch"}),r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",o?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>{fe(u=>u.trim()?u:`{
  "shifts": [],
  "pto": [],
  "calendarSegs": []
}`)},children:"Paste JSON"})]}),r.jsx("div",{className:"md:col-span-3",children:be!==""&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("textarea",{className:["w-full h-40 border rounded-xl p-2 font-mono text-xs",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:be,onChange:u=>fe(u.target.value)}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",o?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{q("");try{const u=JSON.parse(be);if(!Array.isArray(u.shifts)){q("Invalid JSON: missing shifts[]");return}const v=u.shifts.map((ne,re)=>({id:ne.id||`imp-${re}-${Math.random().toString(36).slice(2)}`,person:ne.person,day:ne.day,start:ne.start,end:ne.end,endDay:ne.endDay}));nt(v),Array.isArray(u.calendarSegs)&&Z(u.calendarSegs),Array.isArray(u.pto)&&Et(u.pto),Array.isArray(u.overrides)&&yt(u.overrides),ye(!0),q(`Imported ${v.length} shifts${Array.isArray(u.pto)?`, ${u.pto.length} PTO`:""}${Array.isArray(u.overrides)?`, ${u.overrides.length} overrides`:""}${Array.isArray(u.calendarSegs)?`, ${u.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(u){q(u?.message||"Invalid JSON")}},children:"Load"}),r.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",o?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>fe(""),children:"Clear"})]})]})}),Ue&&r.jsx("div",{className:["md:col-span-3 text-sm",Ue.startsWith("Imported")?o?"text-green-300":"text-green-700":o?"text-red-300":"text-red-700"].join(" "),children:Ue}),r.jsx("div",{className:"md:col-span-3 text-xs opacity-70",children:"Note: After import, click Publish to write the data to live. Agents list will update automatically from shift names."})]})]}),L==="Agents"?r.jsx(P0,{dark:o,agents:oe,onAddAgent:Nl,onUpdateAgent:Sl,onDeleteAgent:xs,weekStart:h,tz:S,shifts:$,pto:E,tasks:J,calendarSegs:T,onUpdateShift:(u,v)=>{W?.(u,v),rt.length===0&&St.length===0&&nt(re=>re.map(Se=>Se.id===u?{...Se,...v}:Se))},onDeleteShift:u=>{te?.(u),rt.length===0&&St.length===0&&nt(ne=>ne.filter(re=>re.id!==u))},onAddShift:u=>{xe?.(u),rt.length===0&&St.length===0&&nt(ne=>ne.some(re=>re.id===u.id)?ne:ne.concat([u]))},selectedIdx:vr,onSelectIdx:u=>jl(u)}):L==="Shifts"?r.jsxs("div",{className:["rounded-xl p-2 border",o?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx(Vi,{dark:o,tz:S,weekStart:h,agents:ge?oe:oe.filter(u=>!u.hidden),shifts:Mr,pto:E,tasks:void 0,calendarSegs:void 0,visibleDays:Te,scrollChunk:Ie,showAllTimeLabels:d,sortMode:ie,sortDir:Fe,highlightIds:At,selectedIds:lt,onToggleSelect:u=>{jt(v=>{const ne=new Set(v);return ne.has(u)?ne.delete(u):ne.add(u),ne})},onDragAll:(u,v)=>{const ne=Je.filter(P=>P.person===u),re=ne.map(P=>({id:P.id,patch:{day:P.day,start:P.start,end:P.end,endDay:P.endDay}}));sr(re);const Se=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ge=P=>Se.indexOf(P),xt=P=>Se[(P%7+7)%7],Qt=P=>{const[dt,mn]=P.split(":").map(Number);return(dt||0)*60+(mn||0)},wt=(P,dt)=>{const[mn,hn]=P.split(":").map(Number),Jt=((mn||0)*60+(hn||0)+dt+10080)%1440,$n=Math.floor(Jt/60).toString().padStart(2,"0"),Ln=(Jt%60).toString().padStart(2,"0");return`${$n}:${Ln}`},Dt=ne.map(P=>{const dt=Ge(P.day),mn=Ge(P.endDay||P.day),hn=dt*1440+Qt(P.start);let Jt=mn*1440+Qt(P.end);Jt<=hn&&(Jt+=1440);const $n=hn+v,Ln=Jt+v,gs=Math.floor(($n/1440%7+7)%7),Wr=Math.floor((Ln/1440%7+7)%7),ys=($n%1440+1440)%1440,vs=(Ln%1440+1440)%1440;return{...P,day:xt(gs),start:wt("00:00",ys),end:wt("00:00",vs),endDay:xt(Wr)}}),ht=new Set(At),fn=new Map(Dt.map(P=>[P.id,P]));nt(P=>P.map(dt=>fn.get(dt.id)||dt)),Dt.forEach(P=>ht.add(P.id)),Ce(ht),ye(!0)},onDragShift:(u,v,ne)=>{const re=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Se=P=>re.indexOf(P),Ge=P=>re[(P%7+7)%7],xt=P=>{const[dt,mn]=P.split(":").map(Number);return(dt||0)*60+(mn||0)},Qt=(P,dt)=>{const[mn,hn]=P.split(":").map(Number),Jt=((mn||0)*60+(hn||0)+dt+10080)%1440,$n=Math.floor(Jt/60).toString().padStart(2,"0"),Ln=(Jt%60).toString().padStart(2,"0");return`${$n}:${Ln}`},wt=new Set(lt);wt.add(v);const Dt=Je.filter(P=>wt.has(P.id));if(Dt.length===0)return;if(Dt.length===1){const P=Dt[0];sr([{id:P.id,patch:{day:P.day,start:P.start,end:P.end,endDay:P.endDay}}]);const dt=Se(P.day),mn=Se(P.endDay||P.day),hn=dt*1440+xt(P.start);let Jt=mn*1440+xt(P.end);Jt<=hn&&(Jt+=1440);const $n=hn+ne,Ln=Jt+ne,gs=Math.floor(($n/1440%7+7)%7),Wr=Math.floor((Ln/1440%7+7)%7),ys=($n%1440+1440)%1440,vs=(Ln%1440+1440)%1440,ws={day:Ge(gs),start:Qt("00:00",ys),end:Qt("00:00",vs),endDay:Ge(Wr)};nt(js=>js.map(ir=>ir.id===P.id?{...ir,...ws}:ir)),Ce(js=>{const ir=new Set(js);return ir.add(P.id),ir}),ye(!0);return}const ht=Dt.map(P=>({id:P.id,patch:{day:P.day,start:P.start,end:P.end,endDay:P.endDay}}));sr(ht);const fn=new Set(At);for(const P of Dt){const dt=Se(P.day),mn=Se(P.endDay||P.day),hn=dt*1440+xt(P.start);let Jt=mn*1440+xt(P.end);Jt<=hn&&(Jt+=1440);const $n=hn+ne,Ln=Jt+ne,gs=Math.floor(($n/1440%7+7)%7),Wr=Math.floor((Ln/1440%7+7)%7),ys=($n%1440+1440)%1440,vs=(Ln%1440+1440)%1440,ws={...P,day:Ge(gs),start:Qt("00:00",ys),end:Qt("00:00",vs),endDay:Ge(Wr)};nt(js=>js.map(ir=>ir.id===ws.id?ws:ir)),fn.add(ws.id)}Ce(fn),ye(!0)}}),(()=>{const u=(ge?oe:oe.filter(v=>!v.hidden)).map(v=>[v.firstName,v.lastName].filter(Boolean).join(" ").trim()).filter(Boolean);return r.jsx(T0,{dark:o,tz:S,weekStart:h,shifts:Mr,visibleAgentNames:u,visibleDays:Te,scrollChunk:Ie})})()]}):L==="Postures"?r.jsxs("div",{className:["rounded-xl p-3 border",o?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[r.jsxs("div",{className:"md:col-span-1 space-y-3",children:[r.jsx(A0,{tasks:J,onCreate:u=>Y(v=>v.concat([{...u,id:ls()}])),onUpdate:u=>Y(v=>v.map(ne=>ne.id===u.id?u:ne)),onArchive:u=>Y(v=>v.map(ne=>ne.id===u?{...ne,archived:!0}:ne)),onDelete:u=>{Y(v=>v.filter(ne=>ne.id!==u)),Z(v=>v.filter(ne=>ne.taskId!==u))},dark:o,selectedId:Lt,onSelect:u=>Ot(u)}),r.jsxs("div",{className:["rounded-xl p-3 border",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Assign posture to agent"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:I,onChange:u=>Me(u.target.value),children:[r.jsx("option",{value:"",children:""}),zn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Day"}),r.jsx("select",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Oe,onChange:u=>Pe(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ke,onChange:u=>_e(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ae,onChange:u=>ot(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"End Day"}),r.jsx("select",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:kn,onChange:u=>Tt(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]})]}),r.jsx("button",{onClick:()=>{if(!I)return alert("Choose an agent");if(!Lt)return alert("Choose a posture");const u=Re(ke),v=Re(Ae);if(kn===Oe&&!(v>u))return alert("End must be after start (or choose a later End Day)");ra($,Oe,S.offset).filter(re=>re.person===I).some(re=>{const Se=Re(re.start),Ge=re.end==="24:00"?1440:Re(re.end);return u<Ge&&v>Se}),Z(re=>re.concat([{person:I,agentId:dl(oe,I),day:Oe,endDay:kn,start:ke,end:Ae,taskId:Lt}]))},className:["h-10 rounded-xl border font-medium px-4",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add assignment"})]})]})]}),r.jsxs("div",{className:"md:col-span-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-medium",children:"Assigned postures"}),Lt&&r.jsxs("div",{className:"text-xs opacity-70",children:["Filtered to: ",J.find(u=>u.id===Lt)?.name||Lt]})]}),(()=>{const u=new Map(it.map((Se,Ge)=>[Se,Ge])),v=T.map((Se,Ge)=>({...Se,_idx:Ge})),ne=J.filter(Se=>!Se.archived&&(!Lt||Se.id===Lt)),re=[];for(const Se of ne){const Ge=v.filter(wt=>wt.taskId===Se.id);if(Ge.length===0)continue;const xt=new Map;for(const wt of Ge){const Dt=xt.get(wt.person)||[];Dt.push(wt),xt.set(wt.person,Dt)}const Qt=Array.from(xt.keys()).sort();re.push(r.jsxs("div",{className:["rounded-xl border overflow-hidden",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:["px-3 py-2 flex items-center justify-between rounded-t-xl",o?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:Se.color||"#888"}}),r.jsx("span",{className:"font-medium text-sm",children:Se.name})]}),r.jsxs("span",{className:"text-xs opacity-70",children:[Ge.length," item",Ge.length===1?"":"s"]})]}),r.jsx("div",{className:"divide-y "+(o?"divide-neutral-800":"divide-neutral-200"),children:Qt.map(wt=>{const Dt=xt.get(wt).slice().sort((ht,fn)=>{const P=(u.get(ht.day)??0)-(u.get(fn.day)??0);if(P!==0)return P;const dt=Re(ht.start)-Re(fn.start);return dt!==0?dt:ht.end.localeCompare(fn.end)});return r.jsxs("details",{children:[r.jsxs("summary",{className:["px-3 py-1.5 cursor-pointer select-none flex items-center justify-between",o?"hover:bg-neutral-900":"hover:bg-neutral-50"].join(" "),children:[r.jsx("span",{className:"text-sm",children:rr(oe,Dt[0]?.agentId,wt)}),r.jsxs("span",{className:"text-xs opacity-70",children:[Dt.length," shift",Dt.length===1?"":"s"]})]}),r.jsx("div",{className:"px-3 py-1.5 space-y-1",children:Dt.map(ht=>r.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"w-[12ch] opacity-70",children:[ht.day,ht.endDay&&ht.endDay!==ht.day?`  ${ht.endDay}`:""]}),r.jsxs("span",{className:"w-[11ch] tabular-nums",children:[ht.start,"",ht.end]})]}),r.jsxs("div",{className:"shrink-0 flex gap-1.5",children:[r.jsx("button",{onClick:()=>{ln(ht._idx),vn(ht.person),eo(ht.day),as(ht.start),Or(ht.end),to(ht.taskId),Rs(ht.endDay||ht.day)},className:["px-2 py-1 rounded border text-xs",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),r.jsx("button",{onClick:()=>{confirm("Remove this assignment?")&&Z(fn=>fn.filter((P,dt)=>dt!==ht._idx))},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})]},`${ht._idx}-${ht.day}-${ht.start}-${ht.end}`))})]},wt)})})]},Se.id))}return re.length===0?r.jsx("div",{className:"text-sm opacity-70",children:"No assigned postures."}):r.jsx("div",{className:"space-y-3 h-[28rem] overflow-auto pr-1",children:re})})(),yn!=null&&r.jsxs("div",{className:["rounded-xl p-3 border",o?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit assignment"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:or,onChange:u=>vn(u.target.value),children:zn.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Day"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Tr,onChange:u=>eo(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:hl,onChange:u=>as(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ar,onChange:u=>Or(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End Day"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:pl,onChange:u=>Rs(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Posture"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Rr,onChange:u=>to(u.target.value),children:J.filter(u=>!u.archived).map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))})]}),r.jsxs("div",{className:"md:col-span-6 flex gap-2",children:[r.jsx("button",{onClick:()=>{if(yn==null)return;if(!or.trim())return alert("Choose an agent");if(!Rr)return alert("Choose a posture");const u=Re(hl),v=Re(Ar);if(pl===Tr&&!(v>u))return alert("End must be after start (or choose a later End Day)");ra($,Tr,S.offset).filter(re=>re.person===or).some(re=>{const Se=Re(re.start),Ge=re.end==="24:00"?1440:Re(re.end);return u<Ge&&v>Se}),Z(re=>re.map((Se,Ge)=>Ge===yn?{person:or.trim(),agentId:dl(oe,or.trim()),day:Tr,endDay:pl,start:hl,end:Ar,taskId:Rr}:Se)),ln(null)},className:["px-3 py-1.5 rounded border text-sm",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:()=>ln(null),className:["px-3 py-1.5 rounded border text-sm",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})]})]})]})]}),r.jsx("div",{className:"mt-3 space-y-3",children:Qn.filter(u=>T.some(v=>v.taskId===u.id)).sort((u,v)=>u.name.localeCompare(v.name)).map(u=>r.jsx(Ld,{dark:o,weekStart:h,calendarSegs:T,tasks:J,agents:oe,filterTaskId:u.id,packed:!0,title:`Weekly ${u.name} calendar`},u.id))})]}):L==="PTO & Overrides"?r.jsxs("div",{children:[r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:"Weekly PTO calendar"}),r.jsx("div",{className:"text-xs opacity-70",children:"Full-day entries by person"})]}),(()=>{const ne=gn(h),re=it.map((Se,Ge)=>rn(Mn(ne,Ge)));return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((Se,Ge)=>{const xt=re[Ge],Qt=Ct.filter(P=>(!Fn||P.person===Fn)&&P.startDate<=xt&&P.endDate>=xt).slice().sort((P,dt)=>P.person.localeCompare(dt.person)||P.startDate.localeCompare(dt.startDate)),wt=new Map;let Dt=0;const ht=Qt.map(P=>{let dt=wt.get(P.person);return dt==null&&(dt=Dt++,wt.set(P.person,dt)),{p:P,lane:dt}});Math.max(ht.length,1);const fn=Math.min(220,Math.max(ht.length*28+28,120));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",o?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:fn},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:Se}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(xt.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:ht.map(({p:P,lane:dt})=>{const mn=dt*28,hn=rr(oe,P.agentId,P.person);return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 h-[22px] flex items-center justify-between",o?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:mn},title:`${hn}  ${P.startDate}  ${P.endDate}`,children:[r.jsx("span",{className:"truncate",children:hn}),P.notes&&r.jsx("span",{className:"ml-2 text-[11px] opacity-70 truncate",children:P.notes})]},`${P.id}-${xt}`)})})]},Se)})})})()]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start",children:r.jsxs("div",{className:"space-y-3 flex-1 min-w-0",children:[r.jsxs("div",{className:["rounded-xl p-3 border",o?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Add PTO"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end mb-3",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:is,onChange:u=>zs(u.target.value),children:[r.jsx("option",{value:"",children:""}),zn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:gr,onChange:u=>no(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:zr,onChange:u=>Mt(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"Notes"}),r.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:xl,onChange:u=>gl(u.target.value)})]}),r.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",o?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(!is)return alert("Choose an agent");if(!gr||!zr)return alert("Choose start and end dates");if(zr<gr)return alert("End date must be on/after start date");const u={id:ls(),person:is,agentId:dl(oe,is),startDate:gr,endDate:zr,notes:xl||void 0};Et(v=>v.concat([u])),zs(""),no(""),Mt(""),gl(""),ye(!0)},children:"Add PTO"}),r.jsxs("div",{className:"ml-auto inline-flex items-center gap-2",children:[r.jsx("span",{className:o?"text-neutral-300":"text-neutral-700",children:"Filter"}),r.jsxs("select",{className:["border rounded-xl px-2 py-1",o?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:Fn,onChange:u=>ro(u.target.value),children:[r.jsx("option",{value:"",children:"All"}),zn.map(u=>r.jsx("option",{value:u,children:u},u))]})]})]})]}),null,(()=>{const u=Ct.filter(re=>!Fn||re.person===Fn).slice().sort((re,Se)=>re.person.localeCompare(Se.person)||re.startDate.localeCompare(Se.startDate));if(u.length===0)return r.jsx("div",{className:"text-sm opacity-70",children:"No PTO entries."});const v=new Map;for(const re of u){const Se=v.get(re.person)||[];Se.push(re),v.set(re.person,Se)}const ne=Array.from(v.keys()).sort();return r.jsx("div",{className:"space-y-3",children:ne.map(re=>{const Se=v.get(re).slice().sort((Ge,xt)=>Ge.startDate.localeCompare(xt.startDate));return r.jsxs("details",{className:["rounded-xl border overflow-hidden",o?"border-neutral-800":"border-neutral-200"].join(" "),open:!0,children:[r.jsxs("summary",{className:["px-3 py-2 cursor-pointer select-none flex items-center justify-between",o?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsx("span",{className:"text-sm font-medium",children:rr(oe,Se[0]?.agentId,re)}),r.jsxs("span",{className:"text-xs opacity-70",children:[Se.length," item",Se.length===1?"":"s"]})]}),r.jsx("div",{className:"divide-y "+(o?"divide-neutral-800":"divide-neutral-200"),children:Se.map(Ge=>r.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"tabular-nums",children:[Ge.startDate,"  ",Ge.endDate]}),Ge.notes&&r.jsx("span",{className:"opacity-70 max-w-[40ch] truncate",children:Ge.notes})]}),r.jsxs("div",{className:"shrink-0 inline-flex gap-1.5",children:[r.jsx("button",{className:["px-2 py-1 rounded border text-xs",o?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>ia(Ge),children:"Edit"}),r.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete PTO?")&&Et(xt=>xt.filter(Qt=>Qt.id!==Ge.id))},children:"Delete"})]})]},Ge.id))})]},re)})})})(),Fs&&r.jsxs("div",{className:["rounded-xl p-3 border",o?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit PTO"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Fr,onChange:u=>Br(u.target.value),children:zn.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Bn,onChange:u=>Yn(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Un,onChange:u=>kr(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"Notes"}),r.jsx("input",{type:"text",className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ur,onChange:u=>Xn(u.target.value)})]}),r.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[r.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(Fs){if(!Fr.trim())return alert("Choose an agent");if(!Bn||!Un)return alert("Choose start/end");if(Un<Bn)return alert("End date must be on/after start date");Et(u=>u.map(v=>v.id===Fs.id?{...v,person:Fr.trim(),agentId:dl(oe,Fr.trim()),startDate:Bn,endDate:Un,notes:Ur||void 0}:v)),vl(),ye(!0)}},children:"Save"}),r.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",o?"border-neutral-700":"border-neutral-300"].join(" "),onClick:vl,children:"Cancel"})]})]})]})]}),r.jsx("div",{className:"space-y-3 flex-1 min-w-0",children:r.jsxs("div",{className:["rounded-xl p-3 border",o?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Add Overrides"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:yr,onChange:u=>ua(u.target.value),children:[r.jsx("option",{value:"",children:""}),zn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Start date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:us,onChange:u=>Bs(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"End date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:cs,onChange:u=>ca(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Start time (optional)"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Gn,onChange:u=>{const v=u.target.value,ne=(Se,Ge)=>It(((Re(Se)+Ge)%1440+1440)%1440),re=Gn?ne(Gn,510):null;if(ds(v),v){const Se=ne(v,510);(!Hn||re&&Hn===re)&&fs(Se)}}})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"End time (optional)"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Hn,onChange:u=>fs(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Kind"}),r.jsx("input",{type:"text",placeholder:"e.g., Swap, Half-day",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:so,onChange:u=>da(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Notes"}),r.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Us,onChange:u=>Hs(u.target.value)})]}),r.jsxs("div",{className:"flex items-end gap-3 md:col-span-2",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx(Wi,{ariaLabel:"Weekly recurrence",dark:o,size:"md",checked:ms,onChange:u=>lo(u)}),r.jsx("span",{className:"text-sm",children:"Weekly recurrence"})]}),ms&&r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"opacity-80",children:"Until"}),r.jsx("input",{type:"date",className:["border rounded-xl px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ar,onChange:u=>wl(u.target.value)})]}),r.jsx("button",{className:["ml-auto h-10 rounded-xl px-4 border font-medium","bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),onClick:()=>{if(!yr)return alert("Choose an agent");if(!us||!cs)return alert("Choose start and end dates");if(cs<us)return alert("End date must be on/after start date");if(Gn&&!Hn||!Gn&&Hn)return alert("Provide both start and end times, or leave both blank");const u={id:ls(),person:yr,agentId:dl(oe,yr),startDate:us,endDate:cs,start:Gn||void 0,end:Hn||void 0,kind:so||void 0,notes:Us||void 0,recurrence:ms?{rule:"weekly",until:ar||void 0}:void 0};yt(v=>v.concat([u])),ye(!0)},children:"Add Override"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Overrides"}),Xe.filter(u=>!Fn||u.person===Fn).length===0?r.jsx("div",{className:"text-sm opacity-70",children:"No overrides."}):r.jsx("ul",{className:"divide-y divide-neutral-700/30",children:Xe.filter(u=>!Fn||u.person===Fn).slice().sort((u,v)=>u.person.localeCompare(v.person)||u.startDate.localeCompare(v.startDate)).map(u=>r.jsxs("li",{className:"py-1.5 flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:u.person}),r.jsxs("span",{className:"opacity-70",children:["  ",u.startDate,"  ",u.endDate]}),u.start&&u.end&&r.jsxs("span",{className:"opacity-70",children:["  ",u.start,"",u.end]}),u.kind&&r.jsxs("span",{className:"ml-1 opacity-70",children:[" ",u.kind]}),u.recurrence?.rule==="weekly"&&r.jsxs("span",{className:"ml-1 text-xs opacity-80",children:["(weekly",u.recurrence.until?` until ${u.recurrence.until}`:"",")"]}),u.notes&&r.jsx("span",{className:"ml-2 text-xs opacity-70",children:u.notes})]}),r.jsx("div",{className:"shrink-0",children:r.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete override?")&&(yt(v=>v.filter(ne=>ne.id!==u.id)),ye(!0))},children:"Delete"})})]},u.id))})]})]})})]})})]}):null,H&&r.jsx("div",{className:"fixed right-4 bottom-4 z-50",children:r.jsx("div",{role:"status","aria-live":"polite",className:["min-w-[220px] max-w-[360px] px-3 py-2 rounded-xl border shadow-md text-sm",H.kind==="success"?o?"bg-neutral-800 border-green-700 text-green-300":"bg-white border-green-500 text-green-700":o?"bg-neutral-800 border-red-700 text-red-300":"bg-white border-red-500 text-red-700"].join(" "),children:H.text})})]}):r.jsx("section",{className:["rounded-2xl p-6",o?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:r.jsxs("div",{className:"max-w-md mx-auto space-y-3",children:[r.jsx("div",{className:"text-lg font-semibold",children:"Protected  Manage Data"}),r.jsx("p",{className:"text-sm opacity-80",children:"Sign in to your session."}),r.jsx("form",{onSubmit:u=>{u.preventDefault(),(async()=>{const v=await i0(R);if(v.ok){try{await gd(R)}catch{}if(xd(),oa()){j(!0),z("");try{localStorage.setItem("schedule_admin_unlocked","1")}catch{}try{Ui(Ts(f))}catch{}}else j(!1),z("Signed in, but CSRF missing. Check cookie Domain/Path and SameSite; reload and try again.")}else z(v.status===401?"Incorrect password":"Login failed")})()},children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"password",autoFocus:!0,className:["flex-1 border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:R,onChange:u=>le(u.target.value),placeholder:"Password"}),r.jsx("button",{type:"submit",className:["rounded-xl px-4 py-2 font-medium border",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Sign in"})]})}),he&&r.jsx("div",{className:["text-sm",o?"text-red-300":"text-red-600"].join(" "),children:he}),r.jsxs("div",{className:"pt-3 border-t border-neutral-700/30 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Or email me a magic link"}),r.jsx(R0,{dark:o})]}),r.jsx("div",{className:"text-xs opacity-70",children:"Your API should set a session cookie and CSRF token on success."}),r.jsxs("div",{className:"text-xs opacity-60 mt-2",children:[r.jsxs("div",{children:["API base: ",r.jsx("code",{children:Q})]}),r.jsxs("div",{children:["API path: ",r.jsx("code",{children:ue})]}),r.jsxs("div",{children:["Dev proxy: ",$e?"on (local only)":"off"]}),(()=>{const u=xd();return r.jsxs("div",{children:[r.jsxs("div",{children:["CSRF token available: ",u.token?"yes":"no"]}),r.jsxs("div",{className:"opacity-75",children:[" cookie readable: ",u.cookie?"yes":"no",";  memory: ",u.memory?"yes":"no"]})]})})()]})]})})}function R0({dark:o}){const[f,c]=y.useState(""),[p,x]=y.useState(""),[h,S]=y.useState(void 0);return r.jsxs("form",{onSubmit:$=>{$.preventDefault(),(async()=>{x(""),S(void 0);const E=await Cd(f,"admin");E.ok?E.link?(S(E.link),x("Dev mode: click the link below to sign in.")):x("Check your inbox for the sign-in link."):x("Failed to request link. Check email format and try again.")})()},children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"email",required:!0,className:["flex-1 border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:f,onChange:$=>c($.target.value),placeholder:"you@company.com"}),r.jsx("button",{type:"submit",className:["rounded-xl px-3 py-2 text-sm font-medium border",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Email link"})]}),p&&r.jsx("div",{className:"text-xs mt-2 opacity-80",children:p}),h&&r.jsx("div",{className:"mt-2 text-xs break-all",children:r.jsx("a",{className:"underline",href:h,target:"_blank",rel:"noreferrer",children:h})})]})}function z0({dark:o,weekStart:f,pto:c,agents:p,title:x="Weekly PTO calendar",subtitle:h="Full-day entries by person"}){const E=gn(f),G=it.map((J,T)=>rn(Mn(E,T)));return r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:x}),r.jsx("div",{className:"text-xs opacity-70",children:h})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((J,T)=>{const W=G[T],te=(c||[]).filter(M=>M.startDate<=W&&M.endDate>=W).slice().sort((M,A)=>{const j=rr(p,M.agentId,M.person),R=rr(p,A.agentId,A.person);return j.localeCompare(R)||M.startDate.localeCompare(A.startDate)}),xe=new Map;let Y=0;const Z=te.map(M=>{const A=rr(p,M.agentId,M.person);let j=xe.get(A);return j==null&&(j=Y++,xe.set(A,j)),{p:M,lane:j,disp:A}}),V=Math.min(280,Math.max(Z.length*50+28,140));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",o?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:V},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:J}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(W.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:Z.map(({p:M,lane:A,disp:j},R)=>{const le=A*50;return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 py-1",o?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:le},title:`${j}  ${M.startDate}  ${M.endDate}${M.notes?"  "+M.notes:""}`,children:[r.jsx("div",{className:"text-[13px] leading-snug break-words",children:j}),M.notes&&r.jsx("div",{className:"text-[11px] opacity-80 leading-snug break-words",children:M.notes})]},`${M.id}-${R}`)})})]},J)})})]})}function F0({dark:o,weekStart:f,overrides:c,agents:p,title:x="Weekly Overrides calendar",subtitle:h="Presence indicates any override on that day"}){const E=gn(f),G=it.map((J,T)=>rn(Mn(E,T)));return r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:x}),r.jsx("div",{className:"text-xs opacity-70",children:h})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((J,T)=>{const W=G[T],te=(c||[]).filter(M=>M.startDate<=W&&M.endDate>=W).slice().sort((M,A)=>{const j=rr(p,M.agentId,M.person),R=rr(p,A.agentId,A.person);return j.localeCompare(R)||M.startDate.localeCompare(A.startDate)}),xe=new Map;let Y=0;const Z=te.map(M=>{const A=rr(p,M.agentId,M.person);let j=xe.get(A);j==null&&(j=Y++,xe.set(A,j));const R=M.start&&M.end?`${M.start}${M.end}${M.endDay?" "+M.endDay:""}`:"",le=[M.kind,R].filter(Boolean).join("  ");return{o:M,lane:j,disp:A,note:le}}),V=Math.min(280,Math.max(Z.length*50+28,140));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",o?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:V},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:J}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(W.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:Z.map(({o:M,lane:A,disp:j,note:R},le)=>{const he=A*50,z=`${j}  ${M.startDate}  ${M.endDate}${R?"  "+R:""}`;return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 py-1",o?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:he},title:z,children:[r.jsx("div",{className:"text-[13px] leading-snug break-words",children:j}),R&&r.jsx("div",{className:"text-[11px] opacity-80 leading-snug break-words",children:R})]},`${M.id}-${le}`)})})]},J)})})]})}function Ri({title:o,children:f,dark:c=!1,defaultOpen:p=!0,className:x,id:h}){const S=y.useId(),$=h||`accordion-${S}`,[E,G]=y.useState(p),J=c?"bg-neutral-900 border-neutral-700 text-neutral-100 hover:bg-neutral-800":"bg-white border-neutral-300 text-neutral-900 hover:bg-neutral-100",T=c?"text-neutral-400":"text-neutral-500";return r.jsxs("section",{className:[x].filter(Boolean).join(" "),children:[r.jsxs("button",{type:"button",className:["w-full flex items-center justify-between gap-3 px-3 py-2 rounded-lg border text-left text-base font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",c?"focus:ring-neutral-700 focus:ring-offset-neutral-900":"focus:ring-blue-500 focus:ring-offset-white",J].join(" "),"aria-expanded":E,"aria-controls":$,onClick:()=>G(W=>!W),children:[r.jsx("span",{children:o}),r.jsx("svg",{className:["w-4 h-4 transform transition-transform",T,E?"rotate-90":"rotate-0"].join(" "),viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:r.jsx("polyline",{points:"9 18 15 12 9 6"})})]}),r.jsx("div",{id:$,hidden:!E,className:"mt-3",children:f})]})}function B0({dark:o,weekStart:f,agents:c,pto:p,overrides:x,tasks:h,calendarSegs:S}){const $=j=>`${j?.firstName||""} ${j?.lastName||""}`.trim(),E=j=>(j||"").trim().toLowerCase(),G=y.useMemo(()=>c||[],[c]),J=y.useMemo(()=>(c||[]).filter(j=>!!j.isSupervisor),[c]),T=y.useMemo(()=>{const j=new Map;for(const R of c||[]){if(!R.isSupervisor)continue;const le=E($(R)),he=R.id&&String(R.id)||le;he&&(j.set(he,he),le&&j.set(le,he))}return j},[c]),W=y.useMemo(()=>{const j=new Map;for(const R of J){const le=E($(R)),he=R.id&&String(R.id)||le;he&&(j.has(he)||j.set(he,[]))}for(const R of c||[]){const le=R.supervisorId||"";if(!le)continue;const he=T.get(le)||T.get(E(le));he&&j.has(he)&&j.get(he).push(R)}return j},[c,J,T]),te=y.useMemo(()=>(c||[]).filter(j=>{if(j.isSupervisor)return!1;const R=j.supervisorId||"";if(!R)return!0;const le=T.get(R)||T.get(E(R));return!le||!W.has(le)}),[c,T,W]);y.useMemo(()=>{const j=new Map;for(const R of c)R.id&&j.set(R.id,R);return j},[c]),y.useMemo(()=>{const j=new Map;for(const R of c){const le=$(R).toLowerCase();le&&j.set(le,R)}return j},[c]);const xe="inline-flex items-center gap-2 px-2 py-1 rounded border text-sm",Y=o?"border-neutral-700 bg-neutral-900 text-neutral-100":"border-neutral-300 bg-white text-neutral-900",Z=j=>Zl.includes(j),V=y.useCallback(j=>{const R=j?.meetingCohort;if(typeof R=="string"){const le=R.trim();return Z(le)?le:""}return""},[]),M=j=>j?r.jsx("span",{className:["inline-flex items-center px-1.5 py-0.5 rounded border text-[11px] font-medium",o?"border-blue-500/40 text-blue-200":"border-blue-500/50 text-blue-700 bg-blue-50"].join(" "),children:j}):null,A=y.useMemo(()=>{const j=new Map(Zl.map(le=>[le,[]])),R=[];for(const le of G){const he=V(le);he&&j.has(he)?j.get(he).push(le):R.push(le)}for(const le of j.values())le.sort((he,z)=>$(he).localeCompare($(z)));return R.sort((le,he)=>$(le).localeCompare($(he))),{assigned:j,unassigned:R}},[G,V]);return r.jsxs("section",{className:["rounded-2xl p-3",o?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsx(Ri,{title:"Teams",dark:o,className:"mb-3",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("div",{className:"flex items-start gap-3 min-w-full pb-1",children:[(()=>{const j=J.slice().sort((R,le)=>$(R).localeCompare($(le)));return j.length===0?r.jsx("div",{className:[xe,Y].join(" "),children:"No supervisors yet"}):j.map(R=>{const le=R.id&&String(R.id)||E($(R)),he=(le?W.get(le)||[]:[]).slice().sort((ee,H)=>$(ee).localeCompare($(H))),z=!!R.hidden;return r.jsxs("div",{className:["shrink-0 w-56 md:w-64 rounded-xl p-2 border",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:["font-medium",z?o?"text-neutral-400":"text-neutral-500":o?"text-neutral-100":"text-neutral-900"].join(" "),children:$(R)||R.id}),r.jsx("span",{className:["text-xs px-1.5 py-0.5 rounded border",o?"border-neutral-700 text-neutral-300":"border-neutral-300 text-neutral-600"].join(" "),children:he.length})]}),he.length>0?r.jsx("ul",{className:"space-y-1",children:he.map(ee=>{const H=V(ee),K=[ee.hidden?o?"text-neutral-400":"text-neutral-500":""].filter(Boolean).join(" ");return r.jsx("li",{className:["px-2 py-1 rounded border text-sm",o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:["truncate",K].filter(Boolean).join(" "),children:$(ee)||ee.id}),M(H)]})},ee.id||$(ee))})}):r.jsx("div",{className:["text-sm",o?"text-neutral-400":"text-neutral-500"].join(" "),children:"No direct reports"})]},R.id||$(R))})})(),te.length>0&&r.jsxs("div",{className:["shrink-0 w-56 md:w-64 rounded-xl p-2 border",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:["font-medium mb-2",o?"text-neutral-100":"text-neutral-900"].join(" "),children:"Unassigned"}),r.jsx("ul",{className:"space-y-1",children:te.slice().sort((j,R)=>$(j).localeCompare($(R))).map(j=>{const R=V(j),le=[j.hidden?o?"text-neutral-400":"text-neutral-500":""].filter(Boolean).join(" ");return r.jsx("li",{className:["px-2 py-1 rounded border text-sm",o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:["truncate",le].filter(Boolean).join(" "),children:$(j)||j.id}),M(R)]})},j.id||$(j))})})]})]})})}),r.jsx(Ri,{title:"Weekly meetings",dark:o,className:"mb-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3",children:[Zl.map(j=>{const R=A.assigned.get(j)||[];return r.jsxs("div",{className:["rounded-xl p-2 border",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium",children:j}),r.jsx("span",{className:["text-xs px-1.5 py-0.5 rounded border",o?"border-neutral-700 text-neutral-300":"border-neutral-300 text-neutral-600"].join(" "),children:R.length})]}),R.length>0?r.jsx("ul",{className:"space-y-1",children:R.map(le=>{const he=$(le)||le.id,z=[le.hidden?o?"text-neutral-400":"text-neutral-500":""].filter(Boolean).join(" ");return r.jsx("li",{className:["px-2 py-1 rounded border text-sm",o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:r.jsx("span",{className:["truncate",z].filter(Boolean).join(" "),children:he})},le.id||he)})}):r.jsx("div",{className:["text-sm",o?"text-neutral-400":"text-neutral-500"].join(" "),children:"No attendees yet"})]},j)}),A.unassigned.length>0&&r.jsxs("div",{className:["rounded-xl p-2 border",o?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-medium",children:"Unassigned"}),r.jsx("span",{className:["text-xs px-1.5 py-0.5 rounded border",o?"border-neutral-700 text-neutral-300":"border-neutral-300 text-neutral-600"].join(" "),children:A.unassigned.length})]}),r.jsx("ul",{className:"space-y-1",children:A.unassigned.map(j=>{const R=$(j)||j.id,le=[j.hidden?o?"text-neutral-400":"text-neutral-500":""].filter(Boolean).join(" ");return r.jsx("li",{className:["px-2 py-1 rounded border text-sm",o?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:r.jsx("span",{className:["truncate",le].filter(Boolean).join(" "),children:R})},j.id||R)})})]})]})}),r.jsxs(Ri,{title:"Calendars",dark:o,className:"mt-4",children:[r.jsx(z0,{dark:o,weekStart:f,pto:p,agents:c}),r.jsx(F0,{dark:o,weekStart:f,overrides:x||[],agents:c}),(()=>{const j=(h||[]).filter(R=>!R.archived).filter(R=>(S||[]).some(le=>le.taskId===R.id)).sort((R,le)=>(R.name||"").localeCompare(le.name||""));return j.length===0?null:j.map(R=>r.jsx(Ld,{dark:o,weekStart:f,calendarSegs:S,tasks:h,agents:c,filterTaskId:R.id,title:`Weekly ${R.name} calendar`},R.id))})()]})]})}function U0(){const o=Array.from({length:40},(p,x)=>`Agent${x+1}`),f=[],c=[{id:ls(),person:"Agent5",startDate:"2025-08-21",endDate:"2025-08-23",notes:"Vacation"},{id:ls(),person:"Agent12",startDate:"2025-08-22",endDate:"2025-08-22",notes:"Appt"}];for(const p of it){if(p==="Sat"||p==="Sun")continue;let x=0;const h=[];let S=360;for(;S<=1050;)h.push(S),S+=120+Math.floor(Math.random()*61);for(const $ of h){const E=2+Math.floor(Math.random()*2);for(let G=0;G<E;G++){const J=o[x%o.length];x++;const T=$,W=$+510;if(W<=1440)f.push({id:ls(),person:J,day:p,start:It(T),end:It(W)});else{const te=W-1440,xe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Y=xe[(xe.indexOf(p)+1)%7];f.push({id:ls(),person:J,day:p,start:It(T),end:"24:00",endDay:Y}),f.push({id:ls(),person:J,day:Y,start:"00:00",end:It(te),endDay:Y})}}}}return{shifts:f,pto:c}}const zi=U0(),vd="no".toLowerCase()==="yes",H0="no".toLowerCase()==="yes";function W0(){const[c,p]=ce.useState(!1),[x,h]=ce.useState(!1),[S,$]=ce.useState(""),[E,G]=ce.useState("");ce.useEffect(()=>{(async()=>{try{const N=Sd(),k=Md(),be=`${N}${k}/schedule`,fe=await fetch(be,{method:"GET",credentials:"include"});p(fe.ok)}catch{p(!1)}})()},[!1,""]);const J=N=>{const k=(N||"").toLowerCase();return k.includes("teams")?"teams":k.includes("manage2")||k.includes("manage")?"manageV2":"schedule"},[T,W]=ce.useState(()=>J(window.location.hash)),[te,xe]=ce.useState(()=>rn(na(new Date))),[Y,Z]=ce.useState(()=>new Date().getDay()),[V,M]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_theme")||"system";if(N.includes("-")){const k=N.split("-")[0];return k==="light"||k==="dark"?"default":k}return N==="light"||N==="dark"?"default":N==="night"||N==="noir"||N==="prism"?N:"system"}catch{return"system"}}),[A,j]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_theme"),k=N==="unicorn"?"system":N;return k==="light"?!1:k==="dark"||k==="night"||k==="noir"?!0:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch{return!0}}),[R,le]=ce.useState(()=>{if(typeof window<"u")try{const N=localStorage.getItem("schedule_time_format");if(N==="12h"||N==="24h")return N}catch{}return"24h"});ce.useEffect(()=>{try{localStorage.setItem("schedule_time_format",R)}catch{}},[R]);const he=ce.useCallback(N=>jd(N,R),[R]),z=ce.useMemo(()=>({timeFormat:R,setTimeFormat:le,formatTime:he}),[R,he]);ce.useEffect(()=>{const N=k=>{const fe=k?.detail?.value;if(!fe)return;if(fe==="system"){M("system"),j(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);try{localStorage.setItem("schedule_theme","system")}catch{}return}let Ue=fe,q="dark";if(fe.includes("-")){const we=fe.split("-");Ue=we[0],q=we[1]==="light"?"light":"dark"}(Ue==="light"||Ue==="dark")&&(q=Ue,Ue="default"),Ue!=="default"&&Ue!=="night"&&Ue!=="noir"&&Ue!=="prism"&&(Ue="default"),M(Ue),j(q==="dark");try{localStorage.setItem("schedule_theme",`${Ue}-${q}`)}catch{}};return window.addEventListener("schedule:set-theme",N),()=>window.removeEventListener("schedule:set-theme",N)},[]),ce.useEffect(()=>{if(!window.matchMedia)return;const N=window.matchMedia("(prefers-color-scheme: dark)"),k=()=>{try{localStorage.getItem("schedule_theme")==="system"&&j(N.matches)}catch{}};return N.addEventListener?N.addEventListener("change",k):N.addListener&&N.addListener(k),()=>{N.removeEventListener?N.removeEventListener("change",k):N.removeListener&&N.removeListener(k)}},[]);const ee=ce.useMemo(()=>V==="system"?"default":V,[V]),H=ce.useMemo(()=>{const N="min-h-screen w-full";return ee==="night"?A?`${N} bg-black text-red-400`:`${N} bg-black text-red-600`:ee==="noir"?`${N} bg-black text-white`:ee==="prism"?A?`${N} bg-black text-neutral-100`:`${N} bg-sky-50 text-sky-800`:A?`${N} bg-neutral-950 text-neutral-100`:`${N} bg-neutral-100 text-neutral-900`},[ee,A]),[K,je]=ce.useState(vd?zi.shifts:[]),[Q,ue]=ce.useState(vd?zi.pto:[]),[$e,oe]=ce.useState([]),[X,w]=ce.useState(Sn[0]),[L,F]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_slimline");return N===null?!1:N==="1"}catch{return!1}});ce.useEffect(()=>{try{localStorage.setItem("schedule_slimline",L?"1":"0")}catch{}},[L]),ce.useEffect(()=>{const N=k=>{const be=k;be&&typeof be.detail?.value=="boolean"&&F(be.detail.value)};return window.addEventListener("schedule:set-slimline",N),()=>window.removeEventListener("schedule:set-slimline",N)},[]);const[d,C]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_agents_v2_v1");if(N){const k=JSON.parse(N);if(Array.isArray(k))return k}}catch{}return[]}),[ie,Ee]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_tasks");if(N){const k=JSON.parse(N);if(Array.isArray(k))return k}}catch{}return[]}),[Fe,Le]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_calendarSegs");if(N){const k=JSON.parse(N);if(Array.isArray(k))return k}}catch{}return[]}),[pe,ge]=ce.useState(!1),O=y.useRef(new Set),[se,Te]=ce.useState(!1),[Ye,Ie]=ce.useState(!1),[ct,Je]=ce.useState(()=>{try{const N=localStorage.getItem("schedule_draft_v1");if(N){const k=JSON.parse(N);if(k&&k.meta&&k.data)return k}}catch{}return null}),nt=!!ct,Ct=N=>{try{N?localStorage.setItem("schedule_draft_v1",JSON.stringify(N)):localStorage.removeItem("schedule_draft_v1")}catch{}},Et=N=>{nt?Je(k=>{if(!k)return k;const be=N(k.data.shifts),fe={meta:{...k.meta,updatedAt:new Date().toISOString()},data:{...k.data,shifts:be}};return Ct(fe),fe}):je(N)},Xe=N=>{nt?Je(k=>{if(!k)return k;const be=N(k.data.pto),fe={meta:{...k.meta,updatedAt:new Date().toISOString()},data:{...k.data,pto:be}};return Ct(fe),fe}):ue(N)},yt=N=>{nt?Je(k=>{if(!k)return k;const be=N(k.data.calendarSegs),fe={meta:{...k.meta,updatedAt:new Date().toISOString()},data:{...k.data,calendarSegs:be}};return Ct(fe),fe}):Le(N)};ce.useEffect(()=>{(async()=>Te(oa()))()},[T]),ce.useEffect(()=>{const N=k=>{const be=!!oa();if(Te(be),be){const fe=Ts(d);Ui(fe)}};return window.addEventListener("schedule:auth",N),()=>window.removeEventListener("schedule:auth",N)},[d]),ce.useEffect(()=>{(async()=>{if(!c)return;const N=await Bi();if(N){if(je(N.shifts),ue(N.pto),Array.isArray(N.calendarSegs)&&Le(N.calendarSegs),Array.isArray(N.overrides)&&oe(N.overrides),Array.isArray(N.agents)){const k=N.agents;C(k);try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(k))}catch{}}try{O.current=new Set((N.shifts||[]).map(k=>k.id).filter(Boolean))}catch{}ge(!0)}})()},[c]),ce.useEffect(()=>{const N=()=>W(J(window.location.hash));return window.addEventListener("hashchange",N),()=>window.removeEventListener("hashchange",N)},[]),ce.useEffect(()=>{if(T==="manageV2")(window.location.hash||"").toLowerCase().startsWith("#manage2")||(window.location.hash="#manage2");else if(T==="teams")(window.location.hash||"").toLowerCase().startsWith("#teams")||(window.location.hash="#teams");else if(window.location.hash)try{history.replaceState(null,"",window.location.pathname+window.location.search)}catch{}},[T]),ce.useEffect(()=>{ie.length===0&&Ee([{id:"support",name:"Support Inbox",color:"#2563eb"},{id:"meetings",name:"Meetings",color:"#16a34a"}])},[]),ce.useEffect(()=>{try{localStorage.setItem("schedule_tasks",JSON.stringify(ie))}catch{}},[ie]),ce.useEffect(()=>{try{localStorage.setItem("schedule_calendarSegs",JSON.stringify(Fe))}catch{}},[Fe]),ce.useEffect(()=>{try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(d))}catch{}},[d]),ce.useEffect(()=>{d.length!==0&&(d.every(N=>!!N.id)||C(N=>N.map(k=>k.id?k:{...k,id:crypto.randomUUID?.()||Math.random().toString(36).slice(2)})))},[d]);const pt=N=>`${N.firstName||""} ${N.lastName||""}`.trim(),ye=N=>(N||"").trim().toLowerCase(),ae=N=>{const k=(N||"").trim().toLowerCase();return k?d.find(fe=>pt(fe).toLowerCase()===k)?.id:void 0};ce.useEffect(()=>{if(!pe||!se||nt)return;const N=setTimeout(async()=>{const k=K.map(fe=>fe.agentId?fe:{...fe,agentId:ae(fe.person)});let be=[];try{const fe=O.current;if(fe&&fe.size>0){const Ue=new Set(k.map(q=>q.id).filter(Boolean));be=Array.from(fe).filter(q=>!Ue.has(q))}}catch{}try{if(await d0({upserts:k,deletes:be}))try{O.current=new Set(k.map(Ue=>Ue.id).filter(Boolean))}catch{}else if(H0){const Ue=Q.map(U=>U.agentId?U:{...U,agentId:ae(U.person)}),q=$e.map(U=>U.agentId?U:{...U,agentId:ae(U.person)}),we=Ts(d);await c0({shifts:k,pto:Ue,overrides:q,calendarSegs:Fe,agents:we,updatedAt:new Date().toISOString()})}}catch{}},600);return()=>clearTimeout(N)},[K,Q,Fe,d,pe,se,nt]),ce.useEffect(()=>{if(!pe||!se)return;const N=setTimeout(()=>{s0(d,Ui)},600);return()=>clearTimeout(N)},[d,pe,se]);const We=y.useRef({shifts:"",pto:"",overrides:"",cal:"",agents:""});if(ce.useEffect(()=>{if(T!=="schedule"||!c)return;let N=!1;const k=async()=>{const fe=await Bi();if(!fe||N)return;const Ue=JSON.stringify(fe.shifts||[]),q=JSON.stringify(fe.pto||[]),we=JSON.stringify(Array.isArray(fe.calendarSegs)?fe.calendarSegs:[]),U=JSON.stringify(Array.isArray(fe.overrides)?fe.overrides:[]),De=JSON.stringify(Array.isArray(fe.agents)?fe.agents:[]);if(Ue!==We.current.shifts&&(je(fe.shifts),We.current.shifts=Ue),q!==We.current.pto&&(ue(fe.pto),We.current.pto=q),we!==We.current.cal&&(Le(fe.calendarSegs||[]),We.current.cal=we),U!==We.current.overrides&&(oe(fe.overrides||[]),We.current.overrides=U),De!==We.current.agents&&Array.isArray(fe.agents)){C(fe.agents),We.current.agents=De;try{localStorage.setItem("schedule_agents_v2_v1",De)}catch{}}try{O.current=new Set((fe.shifts||[]).map(Ke=>Ke.id).filter(Boolean))}catch{}};k();const be=setInterval(k,300*1e3);return()=>{N=!0,clearInterval(be)}},[T,c]),ce.useEffect(()=>{if(!pe||!d||d.length===0)return;const N=new Map;for(const U of d){const De=`${(U.firstName||"").trim()} ${(U.lastName||"").trim()}`.trim();U.id&&De&&N.set(U.id,De)}let k=!1;const be=K.map(U=>{if(U&&U.agentId){const De=N.get(U.agentId);if(De&&De!==U.person)return k=!0,{...U,person:De}}return U});k&&je(be);let fe=!1;const Ue=Q.map(U=>{const De=U.agentId;if(De){const Ke=N.get(De);if(Ke&&Ke!==U.person)return fe=!0,{...U,person:Ke}}return U});fe&&ue(Ue);let q=!1;const we=Fe.map(U=>{const De=U.agentId;if(De){const Ke=N.get(De);if(Ke&&Ke!==U.person)return q=!0,{...U,person:Ke}}return U});q&&Le(we)},[pe,d,K,Q,Fe]),ce.useMemo(()=>Array.from(new Set(K.map(N=>N.person))).sort(),[K]),ce.useEffect(()=>{if(!pe)return;const N=De=>De.map(Ke=>`${Ke.firstName} ${Ke.lastName}`.trim()).sort(),k=De=>Array.from(new Set(De)).sort(),be=N(d),fe=k(zi.shifts.map(De=>De.person)),Ue=k(K.map(De=>De.person)),q=d.length===0,U=((De,Ke)=>De.length===Ke.length&&De.every((st,et)=>st===Ke[et]))(be,fe);if(q||U){const De=Ue.map(Ke=>{const st=Ke.split(" ");return{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:st[0]||Ke,lastName:st.slice(1).join(" ")||"",tzId:Sn[0]?.id,hidden:!1}});C(De)}},[pe,K,d]),!c){const k=x;return r.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:r.jsx("div",{className:"max-w-md mx-auto p-6",children:r.jsx("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:k?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-lg font-semibold",children:"Unlocking dev session"}),r.jsx("p",{className:"text-sm opacity-80",children:"Connecting to the worker."})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-lg font-semibold",children:"Protected  Enter Site Password"}),r.jsx("p",{className:"text-sm opacity-80",children:"Sign in to view the schedule."}),r.jsx("form",{onSubmit:be=>{be.preventDefault(),(async()=>{const{ok:fe,status:Ue}=await u0(S);if(fe){p(!0),G("");try{localStorage.setItem("site_unlocked_hint","1")}catch{}}else G(Ue===401?"Incorrect password":Ue===403?"Forbidden by server policy":Ue===404?"API endpoint not found":"Network error. Is the API running?")})()},children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"password",autoFocus:!0,className:"flex-1 border rounded-xl px-3 py-2 bg-neutral-900 border-neutral-700",value:S,onChange:be=>$(be.target.value),placeholder:"Password"}),r.jsx("button",{type:"submit",className:"rounded-xl px-4 py-2 font-medium border bg-neutral-800 border-neutral-700",children:"Sign in"})]})}),E&&r.jsx("div",{className:"text-sm text-red-300",children:E}),r.jsxs("div",{className:"pt-3 border-t border-neutral-800 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Or email me a magic link"}),r.jsx(V0,{dark:!0,role:"site"})]})]})})})})}return pe?r.jsx(M0,{value:z,children:r.jsx(K0,{dark:A,children:r.jsx("div",{className:H,"data-theme":ee,children:r.jsxs("div",{className:"max-w-full mx-auto p-2 md:p-4 space-y-4",children:[r.jsx(x0,{dark:A,setDark:j,view:T,setView:W,weekStart:te,setWeekStart:xe,tz:X,setTz:w,canEdit:se,editMode:Ye,setEditMode:Ie}),T==="schedule"?r.jsx(D0,{dark:A,weekStart:te,dayIndex:Y,setDayIndex:Z,shifts:K,pto:Q,overrides:$e,tasks:ie,calendarSegs:Fe,tz:X,canEdit:se,editMode:Ye,onRemoveShift:N=>je(k=>k.filter(be=>be.id!==N)),agents:d,slimline:L}):T==="teams"?r.jsx(B0,{dark:A,weekStart:te,agents:d,pto:nt?ct.data.pto:Q,overrides:nt?ct.data.overrides:$e,tasks:ie,calendarSegs:nt?ct.data.calendarSegs:Fe}):r.jsx(O0,{dark:A,agents:d,onAddAgent:N=>{const k=`${(N.firstName||"").trim()} ${(N.lastName||"").trim()}`.trim();if(!k){alert("Enter a first and/or last name");return}if(d.some(fe=>ye(pt(fe))===ye(k))){alert("An agent with that name already exists.");return}C(fe=>fe.concat([{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:N.firstName,lastName:N.lastName,tzId:N.tzId,hidden:!1,meetingCohort:void 0}]))},onUpdateAgent:(N,k)=>{const be=d[N];if(!be)return;const fe=pt(be),Ue=(k.firstName||"").trim(),q=(k.lastName||"").trim(),we=`${Ue} ${q}`.trim();if(!we){alert("Enter a first and/or last name");return}if(d.some((st,et)=>et!==N&&ye(pt(st))===ye(we))){alert("An agent with that name already exists.");return}const De=k.meetingCohort,Ke=(()=>{if(De===void 0)return be.meetingCohort??void 0;if(De!==null&&typeof De=="string"){const st=De.trim();return Zl.includes(st)?st:void 0}})();if(ye(we)!==ye(fe)){const st=be.id,et=vt=>vt||st;Et(vt=>vt.map(mt=>mt.person===fe?{...mt,person:we,agentId:et(mt.agentId)}:mt)),Xe(vt=>vt.map(mt=>mt.person===fe?{...mt,person:we,agentId:et(mt.agentId)}:mt)),yt(vt=>vt.map(mt=>mt.person===fe?{...mt,person:we,agentId:et(mt.agentId)}:mt))}C(st=>st.map((et,vt)=>vt===N?{...et,firstName:Ue,lastName:q,tzId:k.tzId||et.tzId,hidden:k.hidden!=null?k.hidden:et.hidden,isSupervisor:k.isSupervisor!=null?!!k.isSupervisor:et.isSupervisor,supervisorId:k.supervisorId!==void 0?k.supervisorId??null:et.supervisorId,notes:k.notes!==void 0?k.notes:et.notes,meetingCohort:Ke}:et))},onDeleteAgent:N=>C(k=>{const be=k[N];if(!be)return k.filter((q,we)=>we!==N);const fe=be.id,Ue=k.filter((q,we)=>we!==N);return fe?Ue.map(q=>q.supervisorId===fe?{...q,supervisorId:null}:q):Ue}),weekStart:te,tz:X,shifts:nt?ct.data.shifts:K,pto:nt?ct.data.pto:Q,overrides:nt?ct.data.overrides:$e,tasks:ie,calendarSegs:nt?ct.data.calendarSegs:Fe,onUpdateShift:(N,k)=>Et(be=>be.map(fe=>fe.id===N?{...fe,...k}:fe)),onDeleteShift:N=>Et(k=>k.filter(be=>be.id!==N)),onAddShift:N=>Et(k=>k.concat([{...N,agentId:N.agentId||ae(N.person)}])),setTasks:Ee,setCalendarSegs:yt,setPto:Xe,setOverrides:N=>{nt?Je(k=>{if(!k)return k;const be=N(k.data.overrides),fe={meta:{...k.meta,updatedAt:new Date().toISOString()},data:{...k.data,overrides:be}};return Ct(fe),fe}):oe(N)}})]})})})}):r.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:r.jsx("div",{className:"max-w-md mx-auto p-6",children:r.jsxs("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-lg font-semibold",children:"Loading schedule"}),r.jsx("p",{className:"text-sm opacity-80",children:"Fetching the latest data."})]})})})}function V0({dark:o,role:f}){const[c,p]=y.useState(""),[x,h]=y.useState(""),[S,$]=y.useState(void 0);return r.jsxs("form",{onSubmit:E=>{E.preventDefault(),(async()=>{h(""),$(void 0);const G=await Cd(c,f);G.ok?G.link?($(G.link),h("Dev mode: click the link below to sign in.")):h("Check your inbox for the sign-in link."):h("Failed to request link. Check email format and try again.")})()},children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"email",required:!0,className:["flex-1 border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:c,onChange:E=>p(E.target.value),placeholder:"you@company.com"}),r.jsx("button",{type:"submit",className:["rounded-xl px-3 py-2 text-sm font-medium border",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Email link"})]}),x&&r.jsx("div",{className:"text-xs mt-2 opacity-80",children:x}),S&&r.jsx("div",{className:"mt-2 text-xs break-all",children:r.jsx("a",{className:"underline",href:S,target:"_blank",rel:"noreferrer",children:S})})]})}class K0 extends y.Component{state={hasError:!1,err:void 0};static getDerivedStateFromError(f){return{hasError:!0,err:f}}componentDidCatch(f,c){console.error("App error",f,c)}componentDidMount(){window.addEventListener("error",f=>{console.error("Window error",f.error||f.message)}),window.addEventListener("unhandledrejection",f=>{console.error("Unhandled rejection",f.reason)})}render(){if(this.state.hasError){const{dark:f}=this.props;return r.jsx("div",{className:f?"min-h-screen w-full bg-neutral-950 text-neutral-100":"min-h-screen w-full bg-neutral-100 text-neutral-900",children:r.jsx("div",{className:"max-w-3xl mx-auto p-4",children:r.jsxs("div",{className:["rounded-xl p-4 border",f?"bg-red-900/30 border-red-800 text-red-200":"bg-red-50 border-red-200 text-red-900"].join(" "),children:[r.jsx("div",{className:"font-semibold mb-2",children:"A runtime error occurred"}),r.jsx("div",{className:"text-xs whitespace-pre-wrap break-all",children:String(this.state.err?.message||this.state.err||"Unknown error")}),r.jsx("div",{className:"text-xs opacity-80 mt-2",children:"Check the developer console for details."})]})})})}return this.props.children}}const Q0="localhost",Y0="8787",aa=`${Q0}:${Y0}`;(function(){const f=aa;if(typeof window>"u"||!window.fetch)return;const c=window.fetch.bind(window);let p=!1;window.fetch=(x,h)=>{try{if(typeof x=="string"&&x.includes(f)){const S=new URL(x.replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] fetch ->",S.toString()),p=!0),c(S.toString(),h)}else if(x instanceof URL&&x.host.includes(f)){const S=new URL(x.toString().replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] fetch ->",S.toString()),p=!0),c(S,h)}}catch{}return c(x,h)}})();(function(){const f=aa;if(typeof window>"u"||!window.EventSource)return;const c=window.EventSource;let p=!1;try{window.EventSource=function(x,h){try{if(typeof x=="string"&&x.includes(f)){const S=new URL(x.replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] EventSource ->",S.toString()),p=!0),new c(S.toString(),h)}else if(x instanceof URL&&x.host.includes(f)){const S=new URL(x.toString().replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] EventSource ->",S.toString()),p=!0),new c(S,h)}}catch{}return new c(x,h)},window.EventSource.prototype=c.prototype}catch{}})();(function(){const f=aa;if(typeof window>"u"||!window.fetch)return;const c=window.fetch.bind(window);let p=!1;window.fetch=(x,h)=>{try{if(typeof x=="string"&&x.includes(f)){const S=new URL(x.replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] Rewriting stale 8787 request to",S.toString()),p=!0),c(S.toString(),h)}else if(x instanceof URL&&x.host.includes(f)){const S=new URL(x.toString().replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] Rewriting stale 8787 request to",S.toString()),p=!0),c(S,h)}}catch{}return c(x,h)}})();(function(){const f=aa;if(typeof window>"u"||!window.EventSource)return;const c=window.EventSource;let p=!1;try{window.EventSource=function(x,h){try{if(typeof x=="string"&&x.includes(f)){const S=new URL(x.replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] Rewriting stale 8787 EventSource to",S.toString()),p=!0),new c(S.toString(),h)}else if(x instanceof URL&&x.host.includes(f)){const S=new URL(x.toString().replace(f,window.location.host));return S.port==="8787"&&(S.port=window.location.port),p||(console.info("[rewrite-8787] Rewriting stale 8787 EventSource to",S.toString()),p=!0),new c(S,h)}}catch{}return new c(x,h)},window.EventSource.prototype=c.prototype}catch{}})();Xf.createRoot(document.getElementById("root")).render(r.jsx(y.StrictMode,{children:r.jsx(W0,{})}));
