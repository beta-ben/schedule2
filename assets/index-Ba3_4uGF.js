(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const S of document.querySelectorAll('link[rel="modulepreload"]'))C(S);new MutationObserver(S=>{for(const g of S)if(g.type==="childList")for(const K of g.addedNodes)K.tagName==="LINK"&&K.rel==="modulepreload"&&C(K)}).observe(document,{childList:!0,subtree:!0});function c(S){const g={};return S.integrity&&(g.integrity=S.integrity),S.referrerPolicy&&(g.referrerPolicy=S.referrerPolicy),S.crossOrigin==="use-credentials"?g.credentials="include":S.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function C(S){if(S.ep)return;S.ep=!0;const g=c(S);fetch(S.href,g)}})();function md(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Pi={exports:{}},Jl={},_i={exports:{}},xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var td;function Cf(){if(td)return xt;td=1;var a=Symbol.for("react.element"),y=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),K=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),ue=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),U=Symbol.iterator;function Q(d){return d===null||typeof d!="object"?null:(d=U&&d[U]||d["@@iterator"],typeof d=="function"?d:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,h={};function v(d,E,Ie){this.props=d,this.context=E,this.refs=h,this.updater=Ie||G}v.prototype.isReactComponent={},v.prototype.setState=function(d,E){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,E,"setState")},v.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function M(){}M.prototype=v.prototype;function p(d,E,Ie){this.props=d,this.context=E,this.refs=h,this.updater=Ie||G}var A=p.prototype=new M;A.constructor=p,Z(A,v.prototype),A.isPureReactComponent=!0;var O=Array.isArray,P=Object.prototype.hasOwnProperty,De={current:null},je={key:!0,ref:!0,__self:!0,__source:!0};function $e(d,E,Ie){var ke,Xe={},Ce=null,q=null;if(E!=null)for(ke in E.ref!==void 0&&(q=E.ref),E.key!==void 0&&(Ce=""+E.key),E)P.call(E,ke)&&!je.hasOwnProperty(ke)&&(Xe[ke]=E[ke]);var ce=arguments.length-2;if(ce===1)Xe.children=Ie;else if(1<ce){for(var W=Array(ce),ee=0;ee<ce;ee++)W[ee]=arguments[ee+2];Xe.children=W}if(d&&d.defaultProps)for(ke in ce=d.defaultProps,ce)Xe[ke]===void 0&&(Xe[ke]=ce[ke]);return{$$typeof:a,type:d,key:Ce,ref:q,props:Xe,_owner:De.current}}function We(d,E){return{$$typeof:a,type:d.type,key:E,ref:d.ref,props:d.props,_owner:d._owner}}function Ne(d){return typeof d=="object"&&d!==null&&d.$$typeof===a}function ye(d){var E={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(Ie){return E[Ie]})}var Re=/\/+/g;function ie(d,E){return typeof d=="object"&&d!==null&&d.key!=null?ye(""+d.key):E.toString(36)}function Fe(d,E,Ie,ke,Xe){var Ce=typeof d;(Ce==="undefined"||Ce==="boolean")&&(d=null);var q=!1;if(d===null)q=!0;else switch(Ce){case"string":case"number":q=!0;break;case"object":switch(d.$$typeof){case a:case y:q=!0}}if(q)return q=d,Xe=Xe(q),d=ke===""?"."+ie(q,0):ke,O(Xe)?(Ie="",d!=null&&(Ie=d.replace(Re,"$&/")+"/"),Fe(Xe,E,Ie,"",function(ee){return ee})):Xe!=null&&(Ne(Xe)&&(Xe=We(Xe,Ie+(!Xe.key||q&&q.key===Xe.key?"":(""+Xe.key).replace(Re,"$&/")+"/")+d)),E.push(Xe)),1;if(q=0,ke=ke===""?".":ke+":",O(d))for(var ce=0;ce<d.length;ce++){Ce=d[ce];var W=ke+ie(Ce,ce);q+=Fe(Ce,E,Ie,W,Xe)}else if(W=Q(d),typeof W=="function")for(d=W.call(d),ce=0;!(Ce=d.next()).done;)Ce=Ce.value,W=ke+ie(Ce,ce++),q+=Fe(Ce,E,Ie,W,Xe);else if(Ce==="object")throw E=String(d),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.");return q}function Ve(d,E,Ie){if(d==null)return d;var ke=[],Xe=0;return Fe(d,ke,"","",function(Ce){return E.call(Ie,Ce,Xe++)}),ke}function J(d){if(d._status===-1){var E=d._result;E=E(),E.then(function(Ie){(d._status===0||d._status===-1)&&(d._status=1,d._result=Ie)},function(Ie){(d._status===0||d._status===-1)&&(d._status=2,d._result=Ie)}),d._status===-1&&(d._status=0,d._result=E)}if(d._status===1)return d._result.default;throw d._result}var F={current:null},k={transition:null},T={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:k,ReactCurrentOwner:De};function V(){throw Error("act(...) is not supported in production builds of React.")}return xt.Children={map:Ve,forEach:function(d,E,Ie){Ve(d,function(){E.apply(this,arguments)},Ie)},count:function(d){var E=0;return Ve(d,function(){E++}),E},toArray:function(d){return Ve(d,function(E){return E})||[]},only:function(d){if(!Ne(d))throw Error("React.Children.only expected to receive a single React element child.");return d}},xt.Component=v,xt.Fragment=c,xt.Profiler=S,xt.PureComponent=p,xt.StrictMode=C,xt.Suspense=L,xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,xt.act=V,xt.cloneElement=function(d,E,Ie){if(d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+d+".");var ke=Z({},d.props),Xe=d.key,Ce=d.ref,q=d._owner;if(E!=null){if(E.ref!==void 0&&(Ce=E.ref,q=De.current),E.key!==void 0&&(Xe=""+E.key),d.type&&d.type.defaultProps)var ce=d.type.defaultProps;for(W in E)P.call(E,W)&&!je.hasOwnProperty(W)&&(ke[W]=E[W]===void 0&&ce!==void 0?ce[W]:E[W])}var W=arguments.length-2;if(W===1)ke.children=Ie;else if(1<W){ce=Array(W);for(var ee=0;ee<W;ee++)ce[ee]=arguments[ee+2];ke.children=ce}return{$$typeof:a,type:d.type,key:Xe,ref:Ce,props:ke,_owner:q}},xt.createContext=function(d){return d={$$typeof:K,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},d.Provider={$$typeof:g,_context:d},d.Consumer=d},xt.createElement=$e,xt.createFactory=function(d){var E=$e.bind(null,d);return E.type=d,E},xt.createRef=function(){return{current:null}},xt.forwardRef=function(d){return{$$typeof:z,render:d}},xt.isValidElement=Ne,xt.lazy=function(d){return{$$typeof:te,_payload:{_status:-1,_result:d},_init:J}},xt.memo=function(d,E){return{$$typeof:ue,type:d,compare:E===void 0?null:E}},xt.startTransition=function(d){var E=k.transition;k.transition={};try{d()}finally{k.transition=E}},xt.unstable_act=V,xt.useCallback=function(d,E){return F.current.useCallback(d,E)},xt.useContext=function(d){return F.current.useContext(d)},xt.useDebugValue=function(){},xt.useDeferredValue=function(d){return F.current.useDeferredValue(d)},xt.useEffect=function(d,E){return F.current.useEffect(d,E)},xt.useId=function(){return F.current.useId()},xt.useImperativeHandle=function(d,E,Ie){return F.current.useImperativeHandle(d,E,Ie)},xt.useInsertionEffect=function(d,E){return F.current.useInsertionEffect(d,E)},xt.useLayoutEffect=function(d,E){return F.current.useLayoutEffect(d,E)},xt.useMemo=function(d,E){return F.current.useMemo(d,E)},xt.useReducer=function(d,E,Ie){return F.current.useReducer(d,E,Ie)},xt.useRef=function(d){return F.current.useRef(d)},xt.useState=function(d){return F.current.useState(d)},xt.useSyncExternalStore=function(d,E,Ie){return F.current.useSyncExternalStore(d,E,Ie)},xt.useTransition=function(){return F.current.useTransition()},xt.version="18.3.1",xt}var nd;function Ui(){return nd||(nd=1,_i.exports=Cf()),_i.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd;function Ef(){if(rd)return Jl;rd=1;var a=Ui(),y=Symbol.for("react.element"),c=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,S=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function K(z,L,ue){var te,U={},Q=null,G=null;ue!==void 0&&(Q=""+ue),L.key!==void 0&&(Q=""+L.key),L.ref!==void 0&&(G=L.ref);for(te in L)C.call(L,te)&&!g.hasOwnProperty(te)&&(U[te]=L[te]);if(z&&z.defaultProps)for(te in L=z.defaultProps,L)U[te]===void 0&&(U[te]=L[te]);return{$$typeof:y,type:z,key:Q,ref:G,props:U,_owner:S.current}}return Jl.Fragment=c,Jl.jsx=K,Jl.jsxs=K,Jl}var sd;function Df(){return sd||(sd=1,Pi.exports=Ef()),Pi.exports}var r=Df(),ae=Ui();const w=md(ae);var ea={},Ti={exports:{}},Wn={},Ai={exports:{}},Oi={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ld;function If(){return ld||(ld=1,(function(a){function y(k,T){var V=k.length;k.push(T);e:for(;0<V;){var d=V-1>>>1,E=k[d];if(0<S(E,T))k[d]=T,k[V]=E,V=d;else break e}}function c(k){return k.length===0?null:k[0]}function C(k){if(k.length===0)return null;var T=k[0],V=k.pop();if(V!==T){k[0]=V;e:for(var d=0,E=k.length,Ie=E>>>1;d<Ie;){var ke=2*(d+1)-1,Xe=k[ke],Ce=ke+1,q=k[Ce];if(0>S(Xe,V))Ce<E&&0>S(q,Xe)?(k[d]=q,k[Ce]=V,d=Ce):(k[d]=Xe,k[ke]=V,d=ke);else if(Ce<E&&0>S(q,V))k[d]=q,k[Ce]=V,d=Ce;else break e}}return T}function S(k,T){var V=k.sortIndex-T.sortIndex;return V!==0?V:k.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;a.unstable_now=function(){return g.now()}}else{var K=Date,z=K.now();a.unstable_now=function(){return K.now()-z}}var L=[],ue=[],te=1,U=null,Q=3,G=!1,Z=!1,h=!1,v=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(k){for(var T=c(ue);T!==null;){if(T.callback===null)C(ue);else if(T.startTime<=k)C(ue),T.sortIndex=T.expirationTime,y(L,T);else break;T=c(ue)}}function O(k){if(h=!1,A(k),!Z)if(c(L)!==null)Z=!0,J(P);else{var T=c(ue);T!==null&&F(O,T.startTime-k)}}function P(k,T){Z=!1,h&&(h=!1,M($e),$e=-1),G=!0;var V=Q;try{for(A(T),U=c(L);U!==null&&(!(U.expirationTime>T)||k&&!ye());){var d=U.callback;if(typeof d=="function"){U.callback=null,Q=U.priorityLevel;var E=d(U.expirationTime<=T);T=a.unstable_now(),typeof E=="function"?U.callback=E:U===c(L)&&C(L),A(T)}else C(L);U=c(L)}if(U!==null)var Ie=!0;else{var ke=c(ue);ke!==null&&F(O,ke.startTime-T),Ie=!1}return Ie}finally{U=null,Q=V,G=!1}}var De=!1,je=null,$e=-1,We=5,Ne=-1;function ye(){return!(a.unstable_now()-Ne<We)}function Re(){if(je!==null){var k=a.unstable_now();Ne=k;var T=!0;try{T=je(!0,k)}finally{T?ie():(De=!1,je=null)}}else De=!1}var ie;if(typeof p=="function")ie=function(){p(Re)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Ve=Fe.port2;Fe.port1.onmessage=Re,ie=function(){Ve.postMessage(null)}}else ie=function(){v(Re,0)};function J(k){je=k,De||(De=!0,ie())}function F(k,T){$e=v(function(){k(a.unstable_now())},T)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(k){k.callback=null},a.unstable_continueExecution=function(){Z||G||(Z=!0,J(P))},a.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):We=0<k?Math.floor(1e3/k):5},a.unstable_getCurrentPriorityLevel=function(){return Q},a.unstable_getFirstCallbackNode=function(){return c(L)},a.unstable_next=function(k){switch(Q){case 1:case 2:case 3:var T=3;break;default:T=Q}var V=Q;Q=T;try{return k()}finally{Q=V}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(k,T){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var V=Q;Q=k;try{return T()}finally{Q=V}},a.unstable_scheduleCallback=function(k,T,V){var d=a.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?d+V:d):V=d,k){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=V+E,k={id:te++,callback:T,priorityLevel:k,startTime:V,expirationTime:E,sortIndex:-1},V>d?(k.sortIndex=V,y(ue,k),c(L)===null&&k===c(ue)&&(h?(M($e),$e=-1):h=!0,F(O,V-d))):(k.sortIndex=E,y(L,k),Z||G||(Z=!0,J(P))),k},a.unstable_shouldYield=ye,a.unstable_wrapCallback=function(k){var T=Q;return function(){var V=Q;Q=T;try{return k.apply(this,arguments)}finally{Q=V}}}})(Oi)),Oi}var od;function $f(){return od||(od=1,Ai.exports=If()),Ai.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad;function Lf(){if(ad)return Wn;ad=1;var a=Ui(),y=$f();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var C=new Set,S={};function g(e,t){K(e,t),K(e+"Capture",t)}function K(e,t){for(S[e]=t,e=0;e<t.length;e++)C.add(t[e])}var z=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L=Object.prototype.hasOwnProperty,ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,te={},U={};function Q(e){return L.call(U,e)?!0:L.call(te,e)?!1:ue.test(e)?U[e]=!0:(te[e]=!0,!1)}function G(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Z(e,t,n,s){if(t===null||typeof t>"u"||G(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function h(e,t,n,s,l,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){v[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];v[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){v[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){v[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){v[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){v[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){v[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){v[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){v[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M,p);v[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M,p);v[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M,p);v[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),v.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){v[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});function A(e,t,n,s){var l=v.hasOwnProperty(t)?v[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Z(t,n,l,s)&&(n=null),s||l===null?Q(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,s=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var O=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),De=Symbol.for("react.portal"),je=Symbol.for("react.fragment"),$e=Symbol.for("react.strict_mode"),We=Symbol.for("react.profiler"),Ne=Symbol.for("react.provider"),ye=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),Ve=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),k=Symbol.iterator;function T(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var V=Object.assign,d;function E(e){if(d===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);d=t&&t[1]||""}return`
`+d+e}var Ie=!1;function ke(e,t){if(!e||Ie)return"";Ie=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var s=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){s=R}e.call(t.prototype)}else{try{throw Error()}catch(R){s=R}e()}}catch(R){if(R&&s&&typeof R.stack=="string"){for(var l=R.stack.split(`
`),o=s.stack.split(`
`),i=l.length-1,f=o.length-1;1<=i&&0<=f&&l[i]!==o[f];)f--;for(;1<=i&&0<=f;i--,f--)if(l[i]!==o[f]){if(i!==1||f!==1)do if(i--,f--,0>f||l[i]!==o[f]){var x=`
`+l[i].replace(" at new "," at ");return e.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",e.displayName)),x}while(1<=i&&0<=f);break}}}finally{Ie=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?E(e):""}function Xe(e){switch(e.tag){case 5:return E(e.type);case 16:return E("Lazy");case 13:return E("Suspense");case 19:return E("SuspenseList");case 0:case 2:case 15:return e=ke(e.type,!1),e;case 11:return e=ke(e.type.render,!1),e;case 1:return e=ke(e.type,!0),e;default:return""}}function Ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case je:return"Fragment";case De:return"Portal";case We:return"Profiler";case $e:return"StrictMode";case ie:return"Suspense";case Fe:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ye:return(e.displayName||"Context")+".Consumer";case Ne:return(e._context.displayName||"Context")+".Provider";case Re:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ve:return t=e.displayName||null,t!==null?t:Ce(e.type)||"Memo";case J:t=e._payload,e=e._init;try{return Ce(e(t))}catch{}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(t);case 8:return t===$e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ee(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Te(e){e._valueTracker||(e._valueTracker=ee(e))}function Ye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=W(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ve(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gt(e,t){var n=t.checked;return V({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function et(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ce(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ut(e,t){t=t.checked,t!=null&&A(e,"checked",t,!1)}function j(e,t){ut(e,t);var n=ce(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Le(e,t.type,n):t.hasOwnProperty("defaultValue")&&Le(e,t.type,ce(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function I(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Le(e,t,n){(t!=="number"||ve(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var oe=Array.isArray;function Se(e,t,n,s){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ce(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function X(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return V({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Y(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(c(92));if(oe(n)){if(1<n.length)throw Error(c(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ce(n)}}function se(e,t){var n=ce(t.value),s=ce(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Ee(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function xe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?xe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ct,zt=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,l)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ct=ct||document.createElement("div"),ct.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ct.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ne=["Webkit","ms","Moz","O"];Object.keys(Pe).forEach(function(e){ne.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pe[t]=Pe[e]})});function lt(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pe.hasOwnProperty(e)&&Pe[e]?(""+t).trim():t+"px"}function pt(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=lt(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,l):e[n]=l}}var St=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wt(e,t){if(t){if(St[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function Wt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ht=null;function ft(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tt=null,Qt=null,Ut=null;function at(e){if(e=Tl(e)){if(typeof Tt!="function")throw Error(c(280));var t=e.stateNode;t&&(t=po(t),Tt(e.stateNode,e.type,t))}}function Vt(e){Qt?Ut?Ut.push(e):Ut=[e]:Qt=e}function _t(){if(Qt){var e=Qt,t=Ut;if(Ut=Qt=null,at(e),t)for(e=0;e<t.length;e++)at(t[e])}}function At(e,t){return e(t)}function tt(){}var Rt=!1;function we(e,t,n){if(Rt)return e(t,n);Rt=!0;try{return At(e,t,n)}finally{Rt=!1,(Qt!==null||Ut!==null)&&(tt(),_t())}}function rt(e,t){var n=e.stateNode;if(n===null)return null;var s=po(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var vt=!1;if(z)try{var nt={};Object.defineProperty(nt,"passive",{get:function(){vt=!0}}),window.addEventListener("test",nt,nt),window.removeEventListener("test",nt,nt)}catch{vt=!1}function jt(e,t,n,s,l,o,i,f,x){var R=Array.prototype.slice.call(arguments,3);try{t.apply(n,R)}catch(le){this.onError(le)}}var Mt=!1,Zt=null,Jt=!1,gn=null,fn={onError:function(e){Mt=!0,Zt=e}};function br(e,t,n,s,l,o,i,f,x){Mt=!1,Zt=null,jt.apply(fn,arguments)}function cr(e,t,n,s,l,o,i,f,x){if(br.apply(this,arguments),Mt){if(Mt){var R=Zt;Mt=!1,Zt=null}else throw Error(c(198));Jt||(Jt=!0,gn=R)}}function an(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dr(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ir(e){if(an(e)!==e)throw Error(c(188))}function Vn(e){var t=e.alternate;if(!t){if(t=an(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,s=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Ir(l),e;if(o===s)return Ir(l),t;o=o.sibling}throw Error(c(188))}if(n.return!==s.return)n=l,s=o;else{for(var i=!1,f=l.child;f;){if(f===n){i=!0,n=l,s=o;break}if(f===s){i=!0,s=l,n=o;break}f=f.sibling}if(!i){for(f=o.child;f;){if(f===n){i=!0,n=o,s=l;break}if(f===s){i=!0,s=o,n=l;break}f=f.sibling}if(!i)throw Error(c(189))}}if(n.alternate!==s)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function qn(e){return e=Vn(e),e!==null?D(e):null}function D(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=D(e);if(t!==null)return t;e=e.sibling}return null}var me=y.unstable_scheduleCallback,Me=y.unstable_cancelCallback,be=y.unstable_shouldYield,he=y.unstable_requestPaint,_e=y.unstable_now,Ae=y.unstable_getCurrentPriorityLevel,st=y.unstable_ImmediatePriority,bt=y.unstable_UserBlockingPriority,Ft=y.unstable_NormalPriority,In=y.unstable_LowPriority,Ot=y.unstable_IdlePriority,jn=null,mn=null;function fr(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(jn,e,void 0,(e.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:hl,Br=Math.log,ql=Math.LN2;function hl(e){return e>>>=0,e===0?32:31-(Br(e)/ql|0)|0}var ms=64,Wr=4194304;function Hr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ur(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var f=i&~l;f!==0?s=Hr(f):(o&=i,o!==0&&(s=Hr(o)))}else i=n&~l,i!==0?s=Hr(i):o!==0&&(s=Hr(o));if(s===0)return 0;if(t!==0&&t!==s&&(t&l)===0&&(l=s&-s,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-bn(t),l=1<<n,s|=e[n],t&=~l;return s}function eo(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-bn(o),f=1<<i,x=l[i];x===-1?((f&n)===0||(f&s)!==0)&&(l[i]=eo(f,t)):x<=t&&(e.expiredLanes|=f),o&=~f}}function As(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hs(){var e=ms;return ms<<=1,(ms&4194240)===0&&(ms=64),e}function Os(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bn(t),e[t]=n}function to(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-bn(n),o=1<<l;t[l]=0,s[l]=-1,e[l]=-1,n&=~o}}function Vr(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-bn(n),l=1<<s;l&t|e[s]&t&&(e[s]|=t),n&=~l}}var It=0;function xl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var gl,Kn,no,zs,yl,Kr=!1,Qr=[],Qn=null,er=null,Xn=null,$r=new Map,Xr=new Map,tr=[],ia="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vl(e,t){switch(e){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":Xn=null;break;case"pointerover":case"pointerout":$r.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(t.pointerId)}}function Sr(e,t,n,s,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:o,targetContainers:[l]},t!==null&&(t=Tl(t),t!==null&&Kn(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function ua(e,t,n,s,l){switch(t){case"focusin":return Qn=Sr(Qn,e,t,n,s,l),!0;case"dragenter":return er=Sr(er,e,t,n,s,l),!0;case"mouseover":return Xn=Sr(Xn,e,t,n,s,l),!0;case"pointerover":var o=l.pointerId;return $r.set(o,Sr($r.get(o)||null,e,t,n,s,l)),!0;case"gotpointercapture":return o=l.pointerId,Xr.set(o,Sr(Xr.get(o)||null,e,t,n,s,l)),!0}return!1}function ps(e){var t=Ns(e.target);if(t!==null){var n=an(t);if(n!==null){if(t=n.tag,t===13){if(t=dr(n),t!==null){e.blockedOn=t,yl(e.priority,function(){no(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Ht=s,n.target.dispatchEvent(s),Ht=null}else return t=Tl(n),t!==null&&Kn(t),e.blockedOn=n,!1;t.shift()}return!0}function xs(e,t,n){Rs(e)&&n.delete(t)}function ca(){Kr=!1,Qn!==null&&Rs(Qn)&&(Qn=null),er!==null&&Rs(er)&&(er=null),Xn!==null&&Rs(Xn)&&(Xn=null),$r.forEach(xs),Xr.forEach(xs)}function nr(e,t){e.blockedOn===t&&(e.blockedOn=null,Kr||(Kr=!0,y.unstable_scheduleCallback(y.unstable_NormalPriority,ca)))}function gs(e){function t(l){return nr(l,e)}if(0<Qr.length){nr(Qr[0],e);for(var n=1;n<Qr.length;n++){var s=Qr[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Qn!==null&&nr(Qn,e),er!==null&&nr(er,e),Xn!==null&&nr(Xn,e),$r.forEach(t),Xr.forEach(t),n=0;n<tr.length;n++)s=tr[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<tr.length&&(n=tr[0],n.blockedOn===null);)ps(n),n.blockedOn===null&&tr.shift()}var Yn=O.ReactCurrentBatchConfig,ys=!0;function ro(e,t,n,s){var l=It,o=Yn.transition;Yn.transition=null;try{It=1,Fs(e,t,n,s)}finally{It=l,Yn.transition=o}}function da(e,t,n,s){var l=It,o=Yn.transition;Yn.transition=null;try{It=4,Fs(e,t,n,s)}finally{It=l,Yn.transition=o}}function Fs(e,t,n,s){if(ys){var l=vs(e,t,n,s);if(l===null)Na(e,t,s,Bs,n),vl(e,s);else if(ua(l,e,t,n,s))s.stopPropagation();else if(vl(e,s),t&4&&-1<ia.indexOf(e)){for(;l!==null;){var o=Tl(l);if(o!==null&&gl(o),o=vs(e,t,n,s),o===null&&Na(e,t,s,Bs,n),o===l)break;l=o}l!==null&&s.stopPropagation()}else Na(e,t,s,null,n)}}var Bs=null;function vs(e,t,n,s){if(Bs=null,e=ft(s),e=Ns(e),e!==null)if(t=an(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dr(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bs=e,null}function so(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ae()){case st:return 1;case bt:return 4;case Ft:case In:return 16;case Ot:return 536870912;default:return 16}default:return 16}}var mr=null,wl=null,Mr=null;function jl(){if(Mr)return Mr;var e,t=wl,n=t.length,s,l="value"in mr?mr.value:mr.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===l[o-s];s++);return Mr=l.slice(e,1<s?1-s:void 0)}function ws(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ws(){return!0}function lo(){return!1}function yn(e){function t(n,s,l,o,i){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var f in e)e.hasOwnProperty(f)&&(n=e[f],this[f]=n?n(o):o[f]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ws:lo,this.isPropagationStopped=lo,this}return V(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ws)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ws)},persist:function(){},isPersistent:Ws}),t}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bl=yn(Yr),js=V({},Yr,{view:0,detail:0}),fa=yn(js),Nl,Sl,bs,u=V({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Et,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bs&&(bs&&e.type==="mousemove"?(Nl=e.screenX-bs.screenX,Sl=e.screenY-bs.screenY):Sl=Nl=0,bs=e),Nl)},movementY:function(e){return"movementY"in e?e.movementY:Sl}}),m=yn(u),B=V({},u,{dataTransfer:0}),H=yn(B),pe=V({},js,{relatedTarget:0}),Ge=yn(pe),mt=V({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),$t=yn(mt),yt=V({},Yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kt=yn(yt),dt=V({},Yr,{data:0}),ln=yn(dt),b={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ht={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ct(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ht[e])?!!t[e]:!1}function Et(){return Ct}var rn=V({},js,{key:function(e){if(e.key){var t=b[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ws(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ke[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Et,charCode:function(e){return e.type==="keypress"?ws(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ws(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),tn=yn(rn),Pt=V({},u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bt=yn(Pt),Nn=V({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Et}),_n=yn(Nn),Tn=V({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),An=yn(Tn),$n=V({},u,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ml=yn($n),Hs=[9,13,27,32],Us=z&&"CompositionEvent"in window,Lr=null;z&&"documentMode"in document&&(Lr=document.documentMode);var ma=z&&"TextEvent"in window&&!Lr,kl=z&&(!Us||Lr&&8<Lr&&11>=Lr),oo=" ",Jr=!1;function Ji(e,t){switch(e){case"keyup":return Hs.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Vs=!1;function Nd(e,t){switch(e){case"compositionend":return Gi(t);case"keypress":return t.which!==32?null:(Jr=!0,oo);case"textInput":return e=t.data,e===oo&&Jr?null:e;default:return null}}function Sd(e,t){if(Vs)return e==="compositionend"||!Us&&Ji(e,t)?(e=jl(),Mr=wl=mr=null,Vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kl&&t.locale!=="ko"?null:t.data;default:return null}}var Md={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Md[e.type]:t==="textarea"}function qi(e,t,n,s){Vt(s),t=fo(t,"onChange"),0<t.length&&(n=new bl("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Cl=null,El=null;function kd(e){gu(e,0)}function ao(e){var t=Js(e);if(Ye(t))return e}function Cd(e,t){if(e==="change")return t}var eu=!1;if(z){var ha;if(z){var pa="oninput"in document;if(!pa){var tu=document.createElement("div");tu.setAttribute("oninput","return;"),pa=typeof tu.oninput=="function"}ha=pa}else ha=!1;eu=ha&&(!document.documentMode||9<document.documentMode)}function nu(){Cl&&(Cl.detachEvent("onpropertychange",ru),El=Cl=null)}function ru(e){if(e.propertyName==="value"&&ao(El)){var t=[];qi(t,El,e,ft(e)),we(kd,t)}}function Ed(e,t,n){e==="focusin"?(nu(),Cl=t,El=n,Cl.attachEvent("onpropertychange",ru)):e==="focusout"&&nu()}function Dd(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(El)}function Id(e,t){if(e==="click")return ao(t)}function $d(e,t){if(e==="input"||e==="change")return ao(t)}function Ld(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hr=typeof Object.is=="function"?Object.is:Ld;function Dl(e,t){if(hr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!L.call(t,l)||!hr(e[l],t[l]))return!1}return!0}function su(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lu(e,t){var n=su(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=su(n)}}function ou(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ou(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function au(){for(var e=window,t=ve();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ve(e.document)}return t}function xa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Pd(e){var t=au(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ou(n.ownerDocument.documentElement,n)){if(s!==null&&xa(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,o=Math.min(s.start,l);s=s.end===void 0?o:Math.min(s.end,l),!e.extend&&o>s&&(l=s,s=o,o=l),l=lu(n,o);var i=lu(n,s);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _d=z&&"documentMode"in document&&11>=document.documentMode,Ks=null,ga=null,Il=null,ya=!1;function iu(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ya||Ks==null||Ks!==ve(s)||(s=Ks,"selectionStart"in s&&xa(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Il&&Dl(Il,s)||(Il=s,s=fo(ga,"onSelect"),0<s.length&&(t=new bl("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Ks)))}function io(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qs={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionend:io("Transition","TransitionEnd")},va={},uu={};z&&(uu=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function uo(e){if(va[e])return va[e];if(!Qs[e])return e;var t=Qs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uu)return va[e]=t[n];return e}var cu=uo("animationend"),du=uo("animationiteration"),fu=uo("animationstart"),mu=uo("transitionend"),hu=new Map,pu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gr(e,t){hu.set(e,t),g(t,[e])}for(var wa=0;wa<pu.length;wa++){var ja=pu[wa],Td=ja.toLowerCase(),Ad=ja[0].toUpperCase()+ja.slice(1);Gr(Td,"on"+Ad)}Gr(cu,"onAnimationEnd"),Gr(du,"onAnimationIteration"),Gr(fu,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(mu,"onTransitionEnd"),K("onMouseEnter",["mouseout","mouseover"]),K("onMouseLeave",["mouseout","mouseover"]),K("onPointerEnter",["pointerout","pointerover"]),K("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Od=new Set("cancel close invalid load scroll toggle".split(" ").concat($l));function xu(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,cr(s,t,void 0,e),e.currentTarget=null}function gu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],l=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var i=s.length-1;0<=i;i--){var f=s[i],x=f.instance,R=f.currentTarget;if(f=f.listener,x!==o&&l.isPropagationStopped())break e;xu(l,f,R),o=x}else for(i=0;i<s.length;i++){if(f=s[i],x=f.instance,R=f.currentTarget,f=f.listener,x!==o&&l.isPropagationStopped())break e;xu(l,f,R),o=x}}}if(Jt)throw e=gn,Jt=!1,gn=null,e}function Xt(e,t){var n=t[Da];n===void 0&&(n=t[Da]=new Set);var s=e+"__bubble";n.has(s)||(yu(t,e,2,!1),n.add(s))}function ba(e,t,n){var s=0;t&&(s|=4),yu(n,e,s,t)}var co="_reactListening"+Math.random().toString(36).slice(2);function Ll(e){if(!e[co]){e[co]=!0,C.forEach(function(n){n!=="selectionchange"&&(Od.has(n)||ba(n,!1,e),ba(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[co]||(t[co]=!0,ba("selectionchange",!1,t))}}function yu(e,t,n,s){switch(so(t)){case 1:var l=ro;break;case 4:l=da;break;default:l=Fs}n=l.bind(null,t,n,e),l=void 0,!vt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Na(e,t,n,s,l){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var f=s.stateNode.containerInfo;if(f===l||f.nodeType===8&&f.parentNode===l)break;if(i===4)for(i=s.return;i!==null;){var x=i.tag;if((x===3||x===4)&&(x=i.stateNode.containerInfo,x===l||x.nodeType===8&&x.parentNode===l))return;i=i.return}for(;f!==null;){if(i=Ns(f),i===null)return;if(x=i.tag,x===5||x===6){s=o=i;continue e}f=f.parentNode}}s=s.return}we(function(){var R=o,le=ft(n),fe=[];e:{var re=hu.get(e);if(re!==void 0){var ze=bl,Ue=e;switch(e){case"keypress":if(ws(n)===0)break e;case"keydown":case"keyup":ze=tn;break;case"focusin":Ue="focus",ze=Ge;break;case"focusout":Ue="blur",ze=Ge;break;case"beforeblur":case"afterblur":ze=Ge;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ze=m;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ze=H;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ze=_n;break;case cu:case du:case fu:ze=$t;break;case mu:ze=An;break;case"scroll":ze=fa;break;case"wheel":ze=Ml;break;case"copy":case"cut":case"paste":ze=kt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ze=Bt}var Qe=(t&4)!==0,sn=!Qe&&e==="scroll",$=Qe?re!==null?re+"Capture":null:re;Qe=[];for(var N=R,_;N!==null;){_=N;var ge=_.stateNode;if(_.tag===5&&ge!==null&&(_=ge,$!==null&&(ge=rt(N,$),ge!=null&&Qe.push(Pl(N,ge,_)))),sn)break;N=N.return}0<Qe.length&&(re=new ze(re,Ue,null,n,le),fe.push({event:re,listeners:Qe}))}}if((t&7)===0){e:{if(re=e==="mouseover"||e==="pointerover",ze=e==="mouseout"||e==="pointerout",re&&n!==Ht&&(Ue=n.relatedTarget||n.fromElement)&&(Ns(Ue)||Ue[Pr]))break e;if((ze||re)&&(re=le.window===le?le:(re=le.ownerDocument)?re.defaultView||re.parentWindow:window,ze?(Ue=n.relatedTarget||n.toElement,ze=R,Ue=Ue?Ns(Ue):null,Ue!==null&&(sn=an(Ue),Ue!==sn||Ue.tag!==5&&Ue.tag!==6)&&(Ue=null)):(ze=null,Ue=R),ze!==Ue)){if(Qe=m,ge="onMouseLeave",$="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(Qe=Bt,ge="onPointerLeave",$="onPointerEnter",N="pointer"),sn=ze==null?re:Js(ze),_=Ue==null?re:Js(Ue),re=new Qe(ge,N+"leave",ze,n,le),re.target=sn,re.relatedTarget=_,ge=null,Ns(le)===R&&(Qe=new Qe($,N+"enter",Ue,n,le),Qe.target=_,Qe.relatedTarget=sn,ge=Qe),sn=ge,ze&&Ue)t:{for(Qe=ze,$=Ue,N=0,_=Qe;_;_=Xs(_))N++;for(_=0,ge=$;ge;ge=Xs(ge))_++;for(;0<N-_;)Qe=Xs(Qe),N--;for(;0<_-N;)$=Xs($),_--;for(;N--;){if(Qe===$||$!==null&&Qe===$.alternate)break t;Qe=Xs(Qe),$=Xs($)}Qe=null}else Qe=null;ze!==null&&vu(fe,re,ze,Qe,!1),Ue!==null&&sn!==null&&vu(fe,sn,Ue,Qe,!0)}}e:{if(re=R?Js(R):window,ze=re.nodeName&&re.nodeName.toLowerCase(),ze==="select"||ze==="input"&&re.type==="file")var Je=Cd;else if(Zi(re))if(eu)Je=$d;else{Je=Dd;var Ze=Ed}else(ze=re.nodeName)&&ze.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Je=Id);if(Je&&(Je=Je(e,R))){qi(fe,Je,n,le);break e}Ze&&Ze(e,re,R),e==="focusout"&&(Ze=re._wrapperState)&&Ze.controlled&&re.type==="number"&&Le(re,"number",re.value)}switch(Ze=R?Js(R):window,e){case"focusin":(Zi(Ze)||Ze.contentEditable==="true")&&(Ks=Ze,ga=R,Il=null);break;case"focusout":Il=ga=Ks=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,iu(fe,n,le);break;case"selectionchange":if(_d)break;case"keydown":case"keyup":iu(fe,n,le)}var qe;if(Us)e:{switch(e){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else Vs?Ji(e,n)&&(ot="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ot="onCompositionStart");ot&&(kl&&n.locale!=="ko"&&(Vs||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&Vs&&(qe=jl()):(mr=le,wl="value"in mr?mr.value:mr.textContent,Vs=!0)),Ze=fo(R,ot),0<Ze.length&&(ot=new ln(ot,e,null,n,le),fe.push({event:ot,listeners:Ze}),qe?ot.data=qe:(qe=Gi(n),qe!==null&&(ot.data=qe)))),(qe=ma?Nd(e,n):Sd(e,n))&&(R=fo(R,"onBeforeInput"),0<R.length&&(le=new ln("onBeforeInput","beforeinput",null,n,le),fe.push({event:le,listeners:R}),le.data=qe))}gu(fe,t)})}function Pl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fo(e,t){for(var n=t+"Capture",s=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=rt(e,n),o!=null&&s.unshift(Pl(e,o,l)),o=rt(e,t),o!=null&&s.push(Pl(e,o,l))),e=e.return}return s}function Xs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vu(e,t,n,s,l){for(var o=t._reactName,i=[];n!==null&&n!==s;){var f=n,x=f.alternate,R=f.stateNode;if(x!==null&&x===s)break;f.tag===5&&R!==null&&(f=R,l?(x=rt(n,o),x!=null&&i.unshift(Pl(n,x,f))):l||(x=rt(n,o),x!=null&&i.push(Pl(n,x,f)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var zd=/\r\n?/g,Rd=/\u0000|\uFFFD/g;function wu(e){return(typeof e=="string"?e:""+e).replace(zd,`
`).replace(Rd,"")}function mo(e,t,n){if(t=wu(t),wu(e)!==t&&n)throw Error(c(425))}function ho(){}var Sa=null,Ma=null;function ka(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ca=typeof setTimeout=="function"?setTimeout:void 0,Fd=typeof clearTimeout=="function"?clearTimeout:void 0,ju=typeof Promise=="function"?Promise:void 0,Bd=typeof queueMicrotask=="function"?queueMicrotask:typeof ju<"u"?function(e){return ju.resolve(null).then(e).catch(Wd)}:Ca;function Wd(e){setTimeout(function(){throw e})}function Ea(e,t){var n=t,s=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){e.removeChild(l),gs(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);gs(t)}function Zr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),kr="__reactFiber$"+Ys,_l="__reactProps$"+Ys,Pr="__reactContainer$"+Ys,Da="__reactEvents$"+Ys,Hd="__reactListeners$"+Ys,Ud="__reactHandles$"+Ys;function Ns(e){var t=e[kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pr]||n[kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bu(e);e!==null;){if(n=e[kr])return n;e=bu(e)}return t}e=n,n=e.parentNode}return null}function Tl(e){return e=e[kr]||e[Pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Js(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function po(e){return e[_l]||null}var Ia=[],Gs=-1;function qr(e){return{current:e}}function Yt(e){0>Gs||(e.current=Ia[Gs],Ia[Gs]=null,Gs--)}function Kt(e,t){Gs++,Ia[Gs]=e.current,e.current=t}var es={},Sn=qr(es),On=qr(!1),Ss=es;function Zs(e,t){var n=e.type.contextTypes;if(!n)return es;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function zn(e){return e=e.childContextTypes,e!=null}function xo(){Yt(On),Yt(Sn)}function Nu(e,t,n){if(Sn.current!==es)throw Error(c(168));Kt(Sn,t),Kt(On,n)}function Su(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(c(108,q(e)||"Unknown",l));return V({},n,s)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||es,Ss=Sn.current,Kt(Sn,e),Kt(On,On.current),!0}function Mu(e,t,n){var s=e.stateNode;if(!s)throw Error(c(169));n?(e=Su(e,t,Ss),s.__reactInternalMemoizedMergedChildContext=e,Yt(On),Yt(Sn),Kt(Sn,e)):Yt(On),Kt(On,n)}var _r=null,yo=!1,$a=!1;function ku(e){_r===null?_r=[e]:_r.push(e)}function Vd(e){yo=!0,ku(e)}function ts(){if(!$a&&_r!==null){$a=!0;var e=0,t=It;try{var n=_r;for(It=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}_r=null,yo=!1}catch(l){throw _r!==null&&(_r=_r.slice(e+1)),me(st,ts),l}finally{It=t,$a=!1}}return null}var qs=[],el=0,vo=null,wo=0,rr=[],sr=0,Ms=null,Tr=1,Ar="";function ks(e,t){qs[el++]=wo,qs[el++]=vo,vo=e,wo=t}function Cu(e,t,n){rr[sr++]=Tr,rr[sr++]=Ar,rr[sr++]=Ms,Ms=e;var s=Tr;e=Ar;var l=32-bn(s)-1;s&=~(1<<l),n+=1;var o=32-bn(t)+l;if(30<o){var i=l-l%5;o=(s&(1<<i)-1).toString(32),s>>=i,l-=i,Tr=1<<32-bn(t)+l|n<<l|s,Ar=o+e}else Tr=1<<o|n<<l|s,Ar=e}function La(e){e.return!==null&&(ks(e,1),Cu(e,1,0))}function Pa(e){for(;e===vo;)vo=qs[--el],qs[el]=null,wo=qs[--el],qs[el]=null;for(;e===Ms;)Ms=rr[--sr],rr[sr]=null,Ar=rr[--sr],rr[sr]=null,Tr=rr[--sr],rr[sr]=null}var Jn=null,Gn=null,Gt=!1,pr=null;function Eu(e,t){var n=ir(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Du(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jn=e,Gn=Zr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jn=e,Gn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ms!==null?{id:Tr,overflow:Ar}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ir(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Jn=e,Gn=null,!0):!1;default:return!1}}function _a(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ta(e){if(Gt){var t=Gn;if(t){var n=t;if(!Du(e,t)){if(_a(e))throw Error(c(418));t=Zr(n.nextSibling);var s=Jn;t&&Du(e,t)?Eu(s,n):(e.flags=e.flags&-4097|2,Gt=!1,Jn=e)}}else{if(_a(e))throw Error(c(418));e.flags=e.flags&-4097|2,Gt=!1,Jn=e}}}function Iu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jn=e}function jo(e){if(e!==Jn)return!1;if(!Gt)return Iu(e),Gt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ka(e.type,e.memoizedProps)),t&&(t=Gn)){if(_a(e))throw $u(),Error(c(418));for(;t;)Eu(e,t),t=Zr(t.nextSibling)}if(Iu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Gn=Zr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Gn=null}}else Gn=Jn?Zr(e.stateNode.nextSibling):null;return!0}function $u(){for(var e=Gn;e;)e=Zr(e.nextSibling)}function tl(){Gn=Jn=null,Gt=!1}function Aa(e){pr===null?pr=[e]:pr.push(e)}var Kd=O.ReactCurrentBatchConfig;function Al(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(c(309));var s=n.stateNode}if(!s)throw Error(c(147,e));var l=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var f=l.refs;i===null?delete f[o]:f[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(c(284));if(!n._owner)throw Error(c(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Lu(e){var t=e._init;return t(e._payload)}function Pu(e){function t($,N){if(e){var _=$.deletions;_===null?($.deletions=[N],$.flags|=16):_.push(N)}}function n($,N){if(!e)return null;for(;N!==null;)t($,N),N=N.sibling;return null}function s($,N){for($=new Map;N!==null;)N.key!==null?$.set(N.key,N):$.set(N.index,N),N=N.sibling;return $}function l($,N){return $=us($,N),$.index=0,$.sibling=null,$}function o($,N,_){return $.index=_,e?(_=$.alternate,_!==null?(_=_.index,_<N?($.flags|=2,N):_):($.flags|=2,N)):($.flags|=1048576,N)}function i($){return e&&$.alternate===null&&($.flags|=2),$}function f($,N,_,ge){return N===null||N.tag!==6?(N=Ci(_,$.mode,ge),N.return=$,N):(N=l(N,_),N.return=$,N)}function x($,N,_,ge){var Je=_.type;return Je===je?le($,N,_.props.children,ge,_.key):N!==null&&(N.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===J&&Lu(Je)===N.type)?(ge=l(N,_.props),ge.ref=Al($,N,_),ge.return=$,ge):(ge=Ko(_.type,_.key,_.props,null,$.mode,ge),ge.ref=Al($,N,_),ge.return=$,ge)}function R($,N,_,ge){return N===null||N.tag!==4||N.stateNode.containerInfo!==_.containerInfo||N.stateNode.implementation!==_.implementation?(N=Ei(_,$.mode,ge),N.return=$,N):(N=l(N,_.children||[]),N.return=$,N)}function le($,N,_,ge,Je){return N===null||N.tag!==7?(N=_s(_,$.mode,ge,Je),N.return=$,N):(N=l(N,_),N.return=$,N)}function fe($,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Ci(""+N,$.mode,_),N.return=$,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case P:return _=Ko(N.type,N.key,N.props,null,$.mode,_),_.ref=Al($,null,N),_.return=$,_;case De:return N=Ei(N,$.mode,_),N.return=$,N;case J:var ge=N._init;return fe($,ge(N._payload),_)}if(oe(N)||T(N))return N=_s(N,$.mode,_,null),N.return=$,N;bo($,N)}return null}function re($,N,_,ge){var Je=N!==null?N.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return Je!==null?null:f($,N,""+_,ge);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case P:return _.key===Je?x($,N,_,ge):null;case De:return _.key===Je?R($,N,_,ge):null;case J:return Je=_._init,re($,N,Je(_._payload),ge)}if(oe(_)||T(_))return Je!==null?null:le($,N,_,ge,null);bo($,_)}return null}function ze($,N,_,ge,Je){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return $=$.get(_)||null,f(N,$,""+ge,Je);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case P:return $=$.get(ge.key===null?_:ge.key)||null,x(N,$,ge,Je);case De:return $=$.get(ge.key===null?_:ge.key)||null,R(N,$,ge,Je);case J:var Ze=ge._init;return ze($,N,_,Ze(ge._payload),Je)}if(oe(ge)||T(ge))return $=$.get(_)||null,le(N,$,ge,Je,null);bo(N,ge)}return null}function Ue($,N,_,ge){for(var Je=null,Ze=null,qe=N,ot=N=0,xn=null;qe!==null&&ot<_.length;ot++){qe.index>ot?(xn=qe,qe=null):xn=qe.sibling;var Lt=re($,qe,_[ot],ge);if(Lt===null){qe===null&&(qe=xn);break}e&&qe&&Lt.alternate===null&&t($,qe),N=o(Lt,N,ot),Ze===null?Je=Lt:Ze.sibling=Lt,Ze=Lt,qe=xn}if(ot===_.length)return n($,qe),Gt&&ks($,ot),Je;if(qe===null){for(;ot<_.length;ot++)qe=fe($,_[ot],ge),qe!==null&&(N=o(qe,N,ot),Ze===null?Je=qe:Ze.sibling=qe,Ze=qe);return Gt&&ks($,ot),Je}for(qe=s($,qe);ot<_.length;ot++)xn=ze(qe,$,ot,_[ot],ge),xn!==null&&(e&&xn.alternate!==null&&qe.delete(xn.key===null?ot:xn.key),N=o(xn,N,ot),Ze===null?Je=xn:Ze.sibling=xn,Ze=xn);return e&&qe.forEach(function(cs){return t($,cs)}),Gt&&ks($,ot),Je}function Qe($,N,_,ge){var Je=T(_);if(typeof Je!="function")throw Error(c(150));if(_=Je.call(_),_==null)throw Error(c(151));for(var Ze=Je=null,qe=N,ot=N=0,xn=null,Lt=_.next();qe!==null&&!Lt.done;ot++,Lt=_.next()){qe.index>ot?(xn=qe,qe=null):xn=qe.sibling;var cs=re($,qe,Lt.value,ge);if(cs===null){qe===null&&(qe=xn);break}e&&qe&&cs.alternate===null&&t($,qe),N=o(cs,N,ot),Ze===null?Je=cs:Ze.sibling=cs,Ze=cs,qe=xn}if(Lt.done)return n($,qe),Gt&&ks($,ot),Je;if(qe===null){for(;!Lt.done;ot++,Lt=_.next())Lt=fe($,Lt.value,ge),Lt!==null&&(N=o(Lt,N,ot),Ze===null?Je=Lt:Ze.sibling=Lt,Ze=Lt);return Gt&&ks($,ot),Je}for(qe=s($,qe);!Lt.done;ot++,Lt=_.next())Lt=ze(qe,$,ot,Lt.value,ge),Lt!==null&&(e&&Lt.alternate!==null&&qe.delete(Lt.key===null?ot:Lt.key),N=o(Lt,N,ot),Ze===null?Je=Lt:Ze.sibling=Lt,Ze=Lt);return e&&qe.forEach(function(kf){return t($,kf)}),Gt&&ks($,ot),Je}function sn($,N,_,ge){if(typeof _=="object"&&_!==null&&_.type===je&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case P:e:{for(var Je=_.key,Ze=N;Ze!==null;){if(Ze.key===Je){if(Je=_.type,Je===je){if(Ze.tag===7){n($,Ze.sibling),N=l(Ze,_.props.children),N.return=$,$=N;break e}}else if(Ze.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===J&&Lu(Je)===Ze.type){n($,Ze.sibling),N=l(Ze,_.props),N.ref=Al($,Ze,_),N.return=$,$=N;break e}n($,Ze);break}else t($,Ze);Ze=Ze.sibling}_.type===je?(N=_s(_.props.children,$.mode,ge,_.key),N.return=$,$=N):(ge=Ko(_.type,_.key,_.props,null,$.mode,ge),ge.ref=Al($,N,_),ge.return=$,$=ge)}return i($);case De:e:{for(Ze=_.key;N!==null;){if(N.key===Ze)if(N.tag===4&&N.stateNode.containerInfo===_.containerInfo&&N.stateNode.implementation===_.implementation){n($,N.sibling),N=l(N,_.children||[]),N.return=$,$=N;break e}else{n($,N);break}else t($,N);N=N.sibling}N=Ei(_,$.mode,ge),N.return=$,$=N}return i($);case J:return Ze=_._init,sn($,N,Ze(_._payload),ge)}if(oe(_))return Ue($,N,_,ge);if(T(_))return Qe($,N,_,ge);bo($,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,N!==null&&N.tag===6?(n($,N.sibling),N=l(N,_),N.return=$,$=N):(n($,N),N=Ci(_,$.mode,ge),N.return=$,$=N),i($)):n($,N)}return sn}var nl=Pu(!0),_u=Pu(!1),No=qr(null),So=null,rl=null,Oa=null;function za(){Oa=rl=So=null}function Ra(e){var t=No.current;Yt(No),e._currentValue=t}function Fa(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function sl(e,t){So=e,Oa=rl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Rn=!0),e.firstContext=null)}function lr(e){var t=e._currentValue;if(Oa!==e)if(e={context:e,memoizedValue:t,next:null},rl===null){if(So===null)throw Error(c(308));rl=e,So.dependencies={lanes:0,firstContext:e}}else rl=rl.next=e;return t}var Cs=null;function Ba(e){Cs===null?Cs=[e]:Cs.push(e)}function Tu(e,t,n,s){var l=t.interleaved;return l===null?(n.next=n,Ba(t)):(n.next=l.next,l.next=n),t.interleaved=n,Or(e,s)}function Or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ns=!1;function Wa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Au(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function rs(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Dt&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,Or(e,n)}return l=s.interleaved,l===null?(t.next=t,Ba(s)):(t.next=l.next,l.next=t),s.interleaved=t,Or(e,n)}function Mo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Vr(e,n)}}function Ou(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ko(e,t,n,s){var l=e.updateQueue;ns=!1;var o=l.firstBaseUpdate,i=l.lastBaseUpdate,f=l.shared.pending;if(f!==null){l.shared.pending=null;var x=f,R=x.next;x.next=null,i===null?o=R:i.next=R,i=x;var le=e.alternate;le!==null&&(le=le.updateQueue,f=le.lastBaseUpdate,f!==i&&(f===null?le.firstBaseUpdate=R:f.next=R,le.lastBaseUpdate=x))}if(o!==null){var fe=l.baseState;i=0,le=R=x=null,f=o;do{var re=f.lane,ze=f.eventTime;if((s&re)===re){le!==null&&(le=le.next={eventTime:ze,lane:0,tag:f.tag,payload:f.payload,callback:f.callback,next:null});e:{var Ue=e,Qe=f;switch(re=t,ze=n,Qe.tag){case 1:if(Ue=Qe.payload,typeof Ue=="function"){fe=Ue.call(ze,fe,re);break e}fe=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Qe.payload,re=typeof Ue=="function"?Ue.call(ze,fe,re):Ue,re==null)break e;fe=V({},fe,re);break e;case 2:ns=!0}}f.callback!==null&&f.lane!==0&&(e.flags|=64,re=l.effects,re===null?l.effects=[f]:re.push(f))}else ze={eventTime:ze,lane:re,tag:f.tag,payload:f.payload,callback:f.callback,next:null},le===null?(R=le=ze,x=fe):le=le.next=ze,i|=re;if(f=f.next,f===null){if(f=l.shared.pending,f===null)break;re=f,f=re.next,re.next=null,l.lastBaseUpdate=re,l.shared.pending=null}}while(!0);if(le===null&&(x=fe),l.baseState=x,l.firstBaseUpdate=R,l.lastBaseUpdate=le,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);Is|=i,e.lanes=i,e.memoizedState=fe}}function zu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(c(191,l));l.call(s)}}}var Ol={},Cr=qr(Ol),zl=qr(Ol),Rl=qr(Ol);function Es(e){if(e===Ol)throw Error(c(174));return e}function Ha(e,t){switch(Kt(Rl,t),Kt(zl,e),Kt(Cr,Ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:He(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=He(t,e)}Yt(Cr),Kt(Cr,t)}function ll(){Yt(Cr),Yt(zl),Yt(Rl)}function Ru(e){Es(Rl.current);var t=Es(Cr.current),n=He(t,e.type);t!==n&&(Kt(zl,e),Kt(Cr,n))}function Ua(e){zl.current===e&&(Yt(Cr),Yt(zl))}var qt=qr(0);function Co(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=[];function Ka(){for(var e=0;e<Va.length;e++)Va[e]._workInProgressVersionPrimary=null;Va.length=0}var Eo=O.ReactCurrentDispatcher,Qa=O.ReactCurrentBatchConfig,Ds=0,en=null,un=null,hn=null,Do=!1,Fl=!1,Bl=0,Qd=0;function Mn(){throw Error(c(321))}function Xa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hr(e[n],t[n]))return!1;return!0}function Ya(e,t,n,s,l,o){if(Ds=o,en=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eo.current=e===null||e.memoizedState===null?Gd:Zd,e=n(s,l),Fl){o=0;do{if(Fl=!1,Bl=0,25<=o)throw Error(c(301));o+=1,hn=un=null,t.updateQueue=null,Eo.current=qd,e=n(s,l)}while(Fl)}if(Eo.current=Lo,t=un!==null&&un.next!==null,Ds=0,hn=un=en=null,Do=!1,t)throw Error(c(300));return e}function Ja(){var e=Bl!==0;return Bl=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?en.memoizedState=hn=e:hn=hn.next=e,hn}function or(){if(un===null){var e=en.alternate;e=e!==null?e.memoizedState:null}else e=un.next;var t=hn===null?en.memoizedState:hn.next;if(t!==null)hn=t,un=e;else{if(e===null)throw Error(c(310));un=e,e={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},hn===null?en.memoizedState=hn=e:hn=hn.next=e}return hn}function Wl(e,t){return typeof t=="function"?t(e):t}function Ga(e){var t=or(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var s=un,l=s.baseQueue,o=n.pending;if(o!==null){if(l!==null){var i=l.next;l.next=o.next,o.next=i}s.baseQueue=l=o,n.pending=null}if(l!==null){o=l.next,s=s.baseState;var f=i=null,x=null,R=o;do{var le=R.lane;if((Ds&le)===le)x!==null&&(x=x.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),s=R.hasEagerState?R.eagerState:e(s,R.action);else{var fe={lane:le,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};x===null?(f=x=fe,i=s):x=x.next=fe,en.lanes|=le,Is|=le}R=R.next}while(R!==null&&R!==o);x===null?i=s:x.next=f,hr(s,t.memoizedState)||(Rn=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=x,n.lastRenderedState=s}if(e=n.interleaved,e!==null){l=e;do o=l.lane,en.lanes|=o,Is|=o,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Za(e){var t=or(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var s=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do o=e(o,i.action),i=i.next;while(i!==l);hr(o,t.memoizedState)||(Rn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,s]}function Fu(){}function Bu(e,t){var n=en,s=or(),l=t(),o=!hr(s.memoizedState,l);if(o&&(s.memoizedState=l,Rn=!0),s=s.queue,qa(Uu.bind(null,n,s,e),[e]),s.getSnapshot!==t||o||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Hl(9,Hu.bind(null,n,s,l,t),void 0,null),pn===null)throw Error(c(349));(Ds&30)!==0||Wu(n,t,l)}return l}function Wu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hu(e,t,n,s){t.value=n,t.getSnapshot=s,Vu(t)&&Ku(e)}function Uu(e,t,n){return n(function(){Vu(t)&&Ku(e)})}function Vu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!hr(e,n)}catch{return!0}}function Ku(e){var t=Or(e,1);t!==null&&vr(t,e,1,-1)}function Qu(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wl,lastRenderedState:e},t.queue=e,e=e.dispatch=Jd.bind(null,en,e),[t.memoizedState,e]}function Hl(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=en.updateQueue,t===null?(t={lastEffect:null,stores:null},en.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Xu(){return or().memoizedState}function Io(e,t,n,s){var l=Er();en.flags|=e,l.memoizedState=Hl(1|t,n,void 0,s===void 0?null:s)}function $o(e,t,n,s){var l=or();s=s===void 0?null:s;var o=void 0;if(un!==null){var i=un.memoizedState;if(o=i.destroy,s!==null&&Xa(s,i.deps)){l.memoizedState=Hl(t,n,o,s);return}}en.flags|=e,l.memoizedState=Hl(1|t,n,o,s)}function Yu(e,t){return Io(8390656,8,e,t)}function qa(e,t){return $o(2048,8,e,t)}function Ju(e,t){return $o(4,2,e,t)}function Gu(e,t){return $o(4,4,e,t)}function Zu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,n){return n=n!=null?n.concat([e]):null,$o(4,4,Zu.bind(null,t,e),n)}function ei(){}function ec(e,t){var n=or();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Xa(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function tc(e,t){var n=or();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Xa(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function nc(e,t,n){return(Ds&21)===0?(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=n):(hr(n,t)||(n=hs(),en.lanes|=n,Is|=n,e.baseState=!0),t)}function Xd(e,t){var n=It;It=n!==0&&4>n?n:4,e(!0);var s=Qa.transition;Qa.transition={};try{e(!1),t()}finally{It=n,Qa.transition=s}}function rc(){return or().memoizedState}function Yd(e,t,n){var s=as(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},sc(e))lc(t,n);else if(n=Tu(e,t,n,s),n!==null){var l=Pn();vr(n,e,s,l),oc(n,t,s)}}function Jd(e,t,n){var s=as(e),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(sc(e))lc(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,f=o(i,n);if(l.hasEagerState=!0,l.eagerState=f,hr(f,i)){var x=t.interleaved;x===null?(l.next=l,Ba(t)):(l.next=x.next,x.next=l),t.interleaved=l;return}}catch{}finally{}n=Tu(e,t,l,s),n!==null&&(l=Pn(),vr(n,e,s,l),oc(n,t,s))}}function sc(e){var t=e.alternate;return e===en||t!==null&&t===en}function lc(e,t){Fl=Do=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oc(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Vr(e,n)}}var Lo={readContext:lr,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},Gd={readContext:lr,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:lr,useEffect:Yu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Io(4194308,4,Zu.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Io(4194308,4,e,t)},useInsertionEffect:function(e,t){return Io(4,2,e,t)},useMemo:function(e,t){var n=Er();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Er();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Yd.bind(null,en,e),[s.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:Qu,useDebugValue:ei,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=Qu(!1),t=e[0];return e=Xd.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=en,l=Er();if(Gt){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),pn===null)throw Error(c(349));(Ds&30)!==0||Wu(s,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,Yu(Uu.bind(null,s,o,e),[e]),s.flags|=2048,Hl(9,Hu.bind(null,s,o,n,t),void 0,null),n},useId:function(){var e=Er(),t=pn.identifierPrefix;if(Gt){var n=Ar,s=Tr;n=(s&~(1<<32-bn(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Bl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Qd++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zd={readContext:lr,useCallback:ec,useContext:lr,useEffect:qa,useImperativeHandle:qu,useInsertionEffect:Ju,useLayoutEffect:Gu,useMemo:tc,useReducer:Ga,useRef:Xu,useState:function(){return Ga(Wl)},useDebugValue:ei,useDeferredValue:function(e){var t=or();return nc(t,un.memoizedState,e)},useTransition:function(){var e=Ga(Wl)[0],t=or().memoizedState;return[e,t]},useMutableSource:Fu,useSyncExternalStore:Bu,useId:rc,unstable_isNewReconciler:!1},qd={readContext:lr,useCallback:ec,useContext:lr,useEffect:qa,useImperativeHandle:qu,useInsertionEffect:Ju,useLayoutEffect:Gu,useMemo:tc,useReducer:Za,useRef:Xu,useState:function(){return Za(Wl)},useDebugValue:ei,useDeferredValue:function(e){var t=or();return un===null?t.memoizedState=e:nc(t,un.memoizedState,e)},useTransition:function(){var e=Za(Wl)[0],t=or().memoizedState;return[e,t]},useMutableSource:Fu,useSyncExternalStore:Bu,useId:rc,unstable_isNewReconciler:!1};function xr(e,t){if(e&&e.defaultProps){t=V({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ti(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:V({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Po={isMounted:function(e){return(e=e._reactInternals)?an(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Pn(),l=as(e),o=zr(s,l);o.payload=t,n!=null&&(o.callback=n),t=rs(e,o,l),t!==null&&(vr(t,e,l,s),Mo(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Pn(),l=as(e),o=zr(s,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=rs(e,o,l),t!==null&&(vr(t,e,l,s),Mo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pn(),s=as(e),l=zr(n,s);l.tag=2,t!=null&&(l.callback=t),t=rs(e,l,s),t!==null&&(vr(t,e,s,n),Mo(t,e,s))}};function ac(e,t,n,s,l,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,i):t.prototype&&t.prototype.isPureReactComponent?!Dl(n,s)||!Dl(l,o):!0}function ic(e,t,n){var s=!1,l=es,o=t.contextType;return typeof o=="object"&&o!==null?o=lr(o):(l=zn(t)?Ss:Sn.current,s=t.contextTypes,o=(s=s!=null)?Zs(e,l):es),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Po,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function uc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function ni(e,t,n,s){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Wa(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=lr(o):(o=zn(t)?Ss:Sn.current,l.context=Zs(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ti(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Po.enqueueReplaceState(l,l.state,null),ko(e,n,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function ol(e,t){try{var n="",s=t;do n+=Xe(s),s=s.return;while(s);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function ri(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function si(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ef=typeof WeakMap=="function"?WeakMap:Map;function cc(e,t,n){n=zr(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Fo||(Fo=!0,vi=s),si(e,t)},n}function dc(e,t,n){n=zr(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;n.payload=function(){return s(l)},n.callback=function(){si(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){si(e,t),typeof s!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function fc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new ef;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(n)||(l.add(n),e=pf.bind(null,e,t,n),t.then(e,e))}function mc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hc(e,t,n,s,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zr(-1,1),t.tag=2,rs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var tf=O.ReactCurrentOwner,Rn=!1;function Ln(e,t,n,s){t.child=e===null?_u(t,null,n,s):nl(t,e.child,n,s)}function pc(e,t,n,s,l){n=n.render;var o=t.ref;return sl(t,l),s=Ya(e,t,n,s,o,l),n=Ja(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Rr(e,t,l)):(Gt&&n&&La(t),t.flags|=1,Ln(e,t,s,l),t.child)}function xc(e,t,n,s,l){if(e===null){var o=n.type;return typeof o=="function"&&!ki(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,gc(e,t,o,s,l)):(e=Ko(n.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&l)===0){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Dl,n(i,s)&&e.ref===t.ref)return Rr(e,t,l)}return t.flags|=1,e=us(o,s),e.ref=t.ref,e.return=t,t.child=e}function gc(e,t,n,s,l){if(e!==null){var o=e.memoizedProps;if(Dl(o,s)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=s=o,(e.lanes&l)!==0)(e.flags&131072)!==0&&(Rn=!0);else return t.lanes=e.lanes,Rr(e,t,l)}return li(e,t,n,s,l)}function yc(e,t,n){var s=t.pendingProps,l=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(il,Zn),Zn|=n;else{if((n&1073741824)===0)return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Kt(il,Zn),Zn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:n,Kt(il,Zn),Zn|=s}else o!==null?(s=o.baseLanes|n,t.memoizedState=null):s=n,Kt(il,Zn),Zn|=s;return Ln(e,t,l,n),t.child}function vc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function li(e,t,n,s,l){var o=zn(n)?Ss:Sn.current;return o=Zs(t,o),sl(t,l),n=Ya(e,t,n,s,o,l),s=Ja(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Rr(e,t,l)):(Gt&&s&&La(t),t.flags|=1,Ln(e,t,n,l),t.child)}function wc(e,t,n,s,l){if(zn(n)){var o=!0;go(t)}else o=!1;if(sl(t,l),t.stateNode===null)To(e,t),ic(t,n,s),ni(t,n,s,l),s=!0;else if(e===null){var i=t.stateNode,f=t.memoizedProps;i.props=f;var x=i.context,R=n.contextType;typeof R=="object"&&R!==null?R=lr(R):(R=zn(n)?Ss:Sn.current,R=Zs(t,R));var le=n.getDerivedStateFromProps,fe=typeof le=="function"||typeof i.getSnapshotBeforeUpdate=="function";fe||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==s||x!==R)&&uc(t,i,s,R),ns=!1;var re=t.memoizedState;i.state=re,ko(t,s,i,l),x=t.memoizedState,f!==s||re!==x||On.current||ns?(typeof le=="function"&&(ti(t,n,le,s),x=t.memoizedState),(f=ns||ac(t,n,f,s,re,x,R))?(fe||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=x),i.props=s,i.state=x,i.context=R,s=f):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Au(e,t),f=t.memoizedProps,R=t.type===t.elementType?f:xr(t.type,f),i.props=R,fe=t.pendingProps,re=i.context,x=n.contextType,typeof x=="object"&&x!==null?x=lr(x):(x=zn(n)?Ss:Sn.current,x=Zs(t,x));var ze=n.getDerivedStateFromProps;(le=typeof ze=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==fe||re!==x)&&uc(t,i,s,x),ns=!1,re=t.memoizedState,i.state=re,ko(t,s,i,l);var Ue=t.memoizedState;f!==fe||re!==Ue||On.current||ns?(typeof ze=="function"&&(ti(t,n,ze,s),Ue=t.memoizedState),(R=ns||ac(t,n,R,s,re,Ue,x)||!1)?(le||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,Ue,x),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,Ue,x)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=Ue),i.props=s,i.state=Ue,i.context=x,s=R):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&re===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&re===e.memoizedState||(t.flags|=1024),s=!1)}return oi(e,t,n,s,o,l)}function oi(e,t,n,s,l,o){vc(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return l&&Mu(t,n,!1),Rr(e,t,o);s=t.stateNode,tf.current=t;var f=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=nl(t,e.child,null,o),t.child=nl(t,null,f,o)):Ln(e,t,f,o),t.memoizedState=s.state,l&&Mu(t,n,!0),t.child}function jc(e){var t=e.stateNode;t.pendingContext?Nu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nu(e,t.context,!1),Ha(e,t.containerInfo)}function bc(e,t,n,s,l){return tl(),Aa(l),t.flags|=256,Ln(e,t,n,s),t.child}var ai={dehydrated:null,treeContext:null,retryLane:0};function ii(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nc(e,t,n){var s=t.pendingProps,l=qt.current,o=!1,i=(t.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(l&2)!==0),f?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Kt(qt,l&1),e===null)return Ta(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(i=s.children,e=s.fallback,o?(s=t.mode,o=t.child,i={mode:"hidden",children:i},(s&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Qo(i,s,0,null),e=_s(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ii(n),t.memoizedState=ai,e):ui(t,i));if(l=e.memoizedState,l!==null&&(f=l.dehydrated,f!==null))return nf(e,t,i,s,f,l,n);if(o){o=s.fallback,i=t.mode,l=e.child,f=l.sibling;var x={mode:"hidden",children:s.children};return(i&1)===0&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=x,t.deletions=null):(s=us(l,x),s.subtreeFlags=l.subtreeFlags&14680064),f!==null?o=us(f,o):(o=_s(o,i,n,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,i=e.child.memoizedState,i=i===null?ii(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=ai,s}return o=e.child,e=o.sibling,s=us(o,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function ui(e,t){return t=Qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _o(e,t,n,s){return s!==null&&Aa(s),nl(t,e.child,null,n),e=ui(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nf(e,t,n,s,l,o,i){if(n)return t.flags&256?(t.flags&=-257,s=ri(Error(c(422))),_o(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,l=t.mode,s=Qo({mode:"visible",children:s.children},l,0,null),o=_s(o,l,i,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,(t.mode&1)!==0&&nl(t,e.child,null,i),t.child.memoizedState=ii(i),t.memoizedState=ai,o);if((t.mode&1)===0)return _o(e,t,i,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var f=s.dgst;return s=f,o=Error(c(419)),s=ri(o,s,void 0),_o(e,t,i,s)}if(f=(i&e.childLanes)!==0,Rn||f){if(s=pn,s!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(s.suspendedLanes|i))!==0?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,Or(e,l),vr(s,e,l,-1))}return Mi(),s=ri(Error(c(421))),_o(e,t,i,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=xf.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,Gn=Zr(l.nextSibling),Jn=t,Gt=!0,pr=null,e!==null&&(rr[sr++]=Tr,rr[sr++]=Ar,rr[sr++]=Ms,Tr=e.id,Ar=e.overflow,Ms=t),t=ui(t,s.children),t.flags|=4096,t)}function Sc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Fa(e.return,t,n)}function ci(e,t,n,s,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=n,o.tailMode=l)}function Mc(e,t,n){var s=t.pendingProps,l=s.revealOrder,o=s.tail;if(Ln(e,t,s.children,n),s=qt.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sc(e,n,t);else if(e.tag===19)Sc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Kt(qt,s),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Co(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ci(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Co(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ci(t,!0,n,null,o);break;case"together":ci(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function To(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Is|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=us(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=us(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function rf(e,t,n){switch(t.tag){case 3:jc(t),tl();break;case 5:Ru(t);break;case 1:zn(t.type)&&go(t);break;case 4:Ha(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;Kt(No,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Kt(qt,qt.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Nc(e,t,n):(Kt(qt,qt.current&1),e=Rr(e,t,n),e!==null?e.sibling:null);Kt(qt,qt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Mc(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Kt(qt,qt.current),s)break;return null;case 22:case 23:return t.lanes=0,yc(e,t,n)}return Rr(e,t,n)}var kc,di,Cc,Ec;kc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},di=function(){},Cc=function(e,t,n,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,Es(Cr.current);var o=null;switch(n){case"input":l=gt(e,l),s=gt(e,s),o=[];break;case"select":l=V({},l,{value:void 0}),s=V({},s,{value:void 0}),o=[];break;case"textarea":l=X(e,l),s=X(e,s),o=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ho)}wt(n,s);var i;n=null;for(R in l)if(!s.hasOwnProperty(R)&&l.hasOwnProperty(R)&&l[R]!=null)if(R==="style"){var f=l[R];for(i in f)f.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(S.hasOwnProperty(R)?o||(o=[]):(o=o||[]).push(R,null));for(R in s){var x=s[R];if(f=l?.[R],s.hasOwnProperty(R)&&x!==f&&(x!=null||f!=null))if(R==="style")if(f){for(i in f)!f.hasOwnProperty(i)||x&&x.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in x)x.hasOwnProperty(i)&&f[i]!==x[i]&&(n||(n={}),n[i]=x[i])}else n||(o||(o=[]),o.push(R,n)),n=x;else R==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,f=f?f.__html:void 0,x!=null&&f!==x&&(o=o||[]).push(R,x)):R==="children"?typeof x!="string"&&typeof x!="number"||(o=o||[]).push(R,""+x):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(S.hasOwnProperty(R)?(x!=null&&R==="onScroll"&&Xt("scroll",e),o||f===x||(o=[])):(o=o||[]).push(R,x))}n&&(o=o||[]).push("style",n);var R=o;(t.updateQueue=R)&&(t.flags|=4)}},Ec=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ul(e,t){if(!Gt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function kn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function sf(e,t,n){var s=t.pendingProps;switch(Pa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(t),null;case 1:return zn(t.type)&&xo(),kn(t),null;case 3:return s=t.stateNode,ll(),Yt(On),Yt(Sn),Ka(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(jo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,pr!==null&&(bi(pr),pr=null))),di(e,t),kn(t),null;case 5:Ua(t);var l=Es(Rl.current);if(n=t.type,e!==null&&t.stateNode!=null)Cc(e,t,n,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(c(166));return kn(t),null}if(e=Es(Cr.current),jo(t)){s=t.stateNode,n=t.type;var o=t.memoizedProps;switch(s[kr]=t,s[_l]=o,e=(t.mode&1)!==0,n){case"dialog":Xt("cancel",s),Xt("close",s);break;case"iframe":case"object":case"embed":Xt("load",s);break;case"video":case"audio":for(l=0;l<$l.length;l++)Xt($l[l],s);break;case"source":Xt("error",s);break;case"img":case"image":case"link":Xt("error",s),Xt("load",s);break;case"details":Xt("toggle",s);break;case"input":et(s,o),Xt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},Xt("invalid",s);break;case"textarea":Y(s,o),Xt("invalid",s)}wt(n,o),l=null;for(var i in o)if(o.hasOwnProperty(i)){var f=o[i];i==="children"?typeof f=="string"?s.textContent!==f&&(o.suppressHydrationWarning!==!0&&mo(s.textContent,f,e),l=["children",f]):typeof f=="number"&&s.textContent!==""+f&&(o.suppressHydrationWarning!==!0&&mo(s.textContent,f,e),l=["children",""+f]):S.hasOwnProperty(i)&&f!=null&&i==="onScroll"&&Xt("scroll",s)}switch(n){case"input":Te(s),I(s,o,!0);break;case"textarea":Te(s),Ee(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=ho)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=xe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[kr]=t,e[_l]=s,kc(e,t,!1,!1),t.stateNode=e;e:{switch(i=Wt(n,s),n){case"dialog":Xt("cancel",e),Xt("close",e),l=s;break;case"iframe":case"object":case"embed":Xt("load",e),l=s;break;case"video":case"audio":for(l=0;l<$l.length;l++)Xt($l[l],e);l=s;break;case"source":Xt("error",e),l=s;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),l=s;break;case"details":Xt("toggle",e),l=s;break;case"input":et(e,s),l=gt(e,s),Xt("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=V({},s,{value:void 0}),Xt("invalid",e);break;case"textarea":Y(e,s),l=X(e,s),Xt("invalid",e);break;default:l=s}wt(n,l),f=l;for(o in f)if(f.hasOwnProperty(o)){var x=f[o];o==="style"?pt(e,x):o==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&zt(e,x)):o==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&de(e,x):typeof x=="number"&&de(e,""+x):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(S.hasOwnProperty(o)?x!=null&&o==="onScroll"&&Xt("scroll",e):x!=null&&A(e,o,x,i))}switch(n){case"input":Te(e),I(e,s,!1);break;case"textarea":Te(e),Ee(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ce(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?Se(e,!!s.multiple,o,!1):s.defaultValue!=null&&Se(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=ho)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kn(t),null;case 6:if(e&&t.stateNode!=null)Ec(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(n=Es(Rl.current),Es(Cr.current),jo(t)){if(s=t.stateNode,n=t.memoizedProps,s[kr]=t,(o=s.nodeValue!==n)&&(e=Jn,e!==null))switch(e.tag){case 3:mo(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&mo(s.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[kr]=t,t.stateNode=s}return kn(t),null;case 13:if(Yt(qt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gt&&Gn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)$u(),tl(),t.flags|=98560,o=!1;else if(o=jo(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[kr]=t}else tl(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;kn(t),o=!1}else pr!==null&&(bi(pr),pr=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(qt.current&1)!==0?cn===0&&(cn=3):Mi())),t.updateQueue!==null&&(t.flags|=4),kn(t),null);case 4:return ll(),di(e,t),e===null&&Ll(t.stateNode.containerInfo),kn(t),null;case 10:return Ra(t.type._context),kn(t),null;case 17:return zn(t.type)&&xo(),kn(t),null;case 19:if(Yt(qt),o=t.memoizedState,o===null)return kn(t),null;if(s=(t.flags&128)!==0,i=o.rendering,i===null)if(s)Ul(o,!1);else{if(cn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Co(e),i!==null){for(t.flags|=128,Ul(o,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)o=n,e=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Kt(qt,qt.current&1|2),t.child}e=e.sibling}o.tail!==null&&_e()>ul&&(t.flags|=128,s=!0,Ul(o,!1),t.lanes=4194304)}else{if(!s)if(e=Co(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ul(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Gt)return kn(t),null}else 2*_e()-o.renderingStartTime>ul&&n!==1073741824&&(t.flags|=128,s=!0,Ul(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=_e(),t.sibling=null,n=qt.current,Kt(qt,s?n&1|2:n&1),t):(kn(t),null);case 22:case 23:return Si(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Zn&1073741824)!==0&&(kn(t),t.subtreeFlags&6&&(t.flags|=8192)):kn(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function lf(e,t){switch(Pa(t),t.tag){case 1:return zn(t.type)&&xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ll(),Yt(On),Yt(Sn),Ka(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ua(t),null;case 13:if(Yt(qt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(qt),null;case 4:return ll(),null;case 10:return Ra(t.type._context),null;case 22:case 23:return Si(),null;case 24:return null;default:return null}}var Ao=!1,Cn=!1,of=typeof WeakSet=="function"?WeakSet:Set,Be=null;function al(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){nn(e,t,s)}else n.current=null}function fi(e,t,n){try{n()}catch(s){nn(e,t,s)}}var Dc=!1;function af(e,t){if(Sa=ys,e=au(),xa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,f=-1,x=-1,R=0,le=0,fe=e,re=null;t:for(;;){for(var ze;fe!==n||l!==0&&fe.nodeType!==3||(f=i+l),fe!==o||s!==0&&fe.nodeType!==3||(x=i+s),fe.nodeType===3&&(i+=fe.nodeValue.length),(ze=fe.firstChild)!==null;)re=fe,fe=ze;for(;;){if(fe===e)break t;if(re===n&&++R===l&&(f=i),re===o&&++le===s&&(x=i),(ze=fe.nextSibling)!==null)break;fe=re,re=fe.parentNode}fe=ze}n=f===-1||x===-1?null:{start:f,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ma={focusedElem:e,selectionRange:n},ys=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var Ue=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(Ue!==null){var Qe=Ue.memoizedProps,sn=Ue.memoizedState,$=t.stateNode,N=$.getSnapshotBeforeUpdate(t.elementType===t.type?Qe:xr(t.type,Qe),sn);$.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(ge){nn(t,t.return,ge)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return Ue=Dc,Dc=!1,Ue}function Vl(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&fi(t,n,o)}l=l.next}while(l!==s)}}function Oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function mi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ic(e){var t=e.alternate;t!==null&&(e.alternate=null,Ic(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kr],delete t[_l],delete t[Da],delete t[Hd],delete t[Ud])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $c(e){return e.tag===5||e.tag===3||e.tag===4}function Lc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$c(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function hi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ho));else if(s!==4&&(e=e.child,e!==null))for(hi(e,t,n),e=e.sibling;e!==null;)hi(e,t,n),e=e.sibling}function pi(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}var vn=null,gr=!1;function ss(e,t,n){for(n=n.child;n!==null;)Pc(e,t,n),n=n.sibling}function Pc(e,t,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(jn,n)}catch{}switch(n.tag){case 5:Cn||al(n,t);case 6:var s=vn,l=gr;vn=null,ss(e,t,n),vn=s,gr=l,vn!==null&&(gr?(e=vn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(gr?(e=vn,n=n.stateNode,e.nodeType===8?Ea(e.parentNode,n):e.nodeType===1&&Ea(e,n),gs(e)):Ea(vn,n.stateNode));break;case 4:s=vn,l=gr,vn=n.stateNode.containerInfo,gr=!0,ss(e,t,n),vn=s,gr=l;break;case 0:case 11:case 14:case 15:if(!Cn&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var o=l,i=o.destroy;o=o.tag,i!==void 0&&((o&2)!==0||(o&4)!==0)&&fi(n,t,i),l=l.next}while(l!==s)}ss(e,t,n);break;case 1:if(!Cn&&(al(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(f){nn(n,t,f)}ss(e,t,n);break;case 21:ss(e,t,n);break;case 22:n.mode&1?(Cn=(s=Cn)||n.memoizedState!==null,ss(e,t,n),Cn=s):ss(e,t,n);break;default:ss(e,t,n)}}function _c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new of),t.forEach(function(s){var l=gf.bind(null,e,s);n.has(s)||(n.add(s),s.then(l,l))})}}function yr(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var o=e,i=t,f=i;e:for(;f!==null;){switch(f.tag){case 5:vn=f.stateNode,gr=!1;break e;case 3:vn=f.stateNode.containerInfo,gr=!0;break e;case 4:vn=f.stateNode.containerInfo,gr=!0;break e}f=f.return}if(vn===null)throw Error(c(160));Pc(o,i,l),vn=null,gr=!1;var x=l.alternate;x!==null&&(x.return=null),l.return=null}catch(R){nn(l,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Tc(t,e),t=t.sibling}function Tc(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yr(t,e),Dr(e),s&4){try{Vl(3,e,e.return),Oo(3,e)}catch(Qe){nn(e,e.return,Qe)}try{Vl(5,e,e.return)}catch(Qe){nn(e,e.return,Qe)}}break;case 1:yr(t,e),Dr(e),s&512&&n!==null&&al(n,n.return);break;case 5:if(yr(t,e),Dr(e),s&512&&n!==null&&al(n,n.return),e.flags&32){var l=e.stateNode;try{de(l,"")}catch(Qe){nn(e,e.return,Qe)}}if(s&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,f=e.type,x=e.updateQueue;if(e.updateQueue=null,x!==null)try{f==="input"&&o.type==="radio"&&o.name!=null&&ut(l,o),Wt(f,i);var R=Wt(f,o);for(i=0;i<x.length;i+=2){var le=x[i],fe=x[i+1];le==="style"?pt(l,fe):le==="dangerouslySetInnerHTML"?zt(l,fe):le==="children"?de(l,fe):A(l,le,fe,R)}switch(f){case"input":j(l,o);break;case"textarea":se(l,o);break;case"select":var re=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var ze=o.value;ze!=null?Se(l,!!o.multiple,ze,!1):re!==!!o.multiple&&(o.defaultValue!=null?Se(l,!!o.multiple,o.defaultValue,!0):Se(l,!!o.multiple,o.multiple?[]:"",!1))}l[_l]=o}catch(Qe){nn(e,e.return,Qe)}}break;case 6:if(yr(t,e),Dr(e),s&4){if(e.stateNode===null)throw Error(c(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(Qe){nn(e,e.return,Qe)}}break;case 3:if(yr(t,e),Dr(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(Qe){nn(e,e.return,Qe)}break;case 4:yr(t,e),Dr(e);break;case 13:yr(t,e),Dr(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(yi=_e())),s&4&&_c(e);break;case 22:if(le=n!==null&&n.memoizedState!==null,e.mode&1?(Cn=(R=Cn)||le,yr(t,e),Cn=R):yr(t,e),Dr(e),s&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!le&&(e.mode&1)!==0)for(Be=e,le=e.child;le!==null;){for(fe=Be=le;Be!==null;){switch(re=Be,ze=re.child,re.tag){case 0:case 11:case 14:case 15:Vl(4,re,re.return);break;case 1:al(re,re.return);var Ue=re.stateNode;if(typeof Ue.componentWillUnmount=="function"){s=re,n=re.return;try{t=s,Ue.props=t.memoizedProps,Ue.state=t.memoizedState,Ue.componentWillUnmount()}catch(Qe){nn(s,n,Qe)}}break;case 5:al(re,re.return);break;case 22:if(re.memoizedState!==null){zc(fe);continue}}ze!==null?(ze.return=re,Be=ze):zc(fe)}le=le.sibling}e:for(le=null,fe=e;;){if(fe.tag===5){if(le===null){le=fe;try{l=fe.stateNode,R?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(f=fe.stateNode,x=fe.memoizedProps.style,i=x!=null&&x.hasOwnProperty("display")?x.display:null,f.style.display=lt("display",i))}catch(Qe){nn(e,e.return,Qe)}}}else if(fe.tag===6){if(le===null)try{fe.stateNode.nodeValue=R?"":fe.memoizedProps}catch(Qe){nn(e,e.return,Qe)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===e)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===e)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===e)break e;le===fe&&(le=null),fe=fe.return}le===fe&&(le=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:yr(t,e),Dr(e),s&4&&_c(e);break;case 21:break;default:yr(t,e),Dr(e)}}function Dr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if($c(n)){var s=n;break e}n=n.return}throw Error(c(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(de(l,""),s.flags&=-33);var o=Lc(e);pi(e,o,l);break;case 3:case 4:var i=s.stateNode.containerInfo,f=Lc(e);hi(e,f,i);break;default:throw Error(c(161))}}catch(x){nn(e,e.return,x)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uf(e,t,n){Be=e,Ac(e)}function Ac(e,t,n){for(var s=(e.mode&1)!==0;Be!==null;){var l=Be,o=l.child;if(l.tag===22&&s){var i=l.memoizedState!==null||Ao;if(!i){var f=l.alternate,x=f!==null&&f.memoizedState!==null||Cn;f=Ao;var R=Cn;if(Ao=i,(Cn=x)&&!R)for(Be=l;Be!==null;)i=Be,x=i.child,i.tag===22&&i.memoizedState!==null?Rc(l):x!==null?(x.return=i,Be=x):Rc(l);for(;o!==null;)Be=o,Ac(o),o=o.sibling;Be=l,Ao=f,Cn=R}Oc(e)}else(l.subtreeFlags&8772)!==0&&o!==null?(o.return=l,Be=o):Oc(e)}}function Oc(e){for(;Be!==null;){var t=Be;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Cn||Oo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Cn)if(n===null)s.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:xr(t.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&zu(t,o,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zu(t,i,n)}break;case 5:var f=t.stateNode;if(n===null&&t.flags&4){n=f;var x=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var le=R.memoizedState;if(le!==null){var fe=le.dehydrated;fe!==null&&gs(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}Cn||t.flags&512&&mi(t)}catch(re){nn(t,t.return,re)}}if(t===e){Be=null;break}if(n=t.sibling,n!==null){n.return=t.return,Be=n;break}Be=t.return}}function zc(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Be=n;break}Be=t.return}}function Rc(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Oo(4,t)}catch(x){nn(t,n,x)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(x){nn(t,l,x)}}var o=t.return;try{mi(t)}catch(x){nn(t,o,x)}break;case 5:var i=t.return;try{mi(t)}catch(x){nn(t,i,x)}}}catch(x){nn(t,t.return,x)}if(t===e){Be=null;break}var f=t.sibling;if(f!==null){f.return=t.return,Be=f;break}Be=t.return}}var cf=Math.ceil,zo=O.ReactCurrentDispatcher,xi=O.ReactCurrentOwner,ar=O.ReactCurrentBatchConfig,Dt=0,pn=null,on=null,wn=0,Zn=0,il=qr(0),cn=0,Kl=null,Is=0,Ro=0,gi=0,Ql=null,Fn=null,yi=0,ul=1/0,Fr=null,Fo=!1,vi=null,ls=null,Bo=!1,os=null,Wo=0,Xl=0,wi=null,Ho=-1,Uo=0;function Pn(){return(Dt&6)!==0?_e():Ho!==-1?Ho:Ho=_e()}function as(e){return(e.mode&1)===0?1:(Dt&2)!==0&&wn!==0?wn&-wn:Kd.transition!==null?(Uo===0&&(Uo=hs()),Uo):(e=It,e!==0||(e=window.event,e=e===void 0?16:so(e.type)),e)}function vr(e,t,n,s){if(50<Xl)throw Xl=0,wi=null,Error(c(185));Nr(e,n,s),((Dt&2)===0||e!==pn)&&(e===pn&&((Dt&2)===0&&(Ro|=n),cn===4&&is(e,wn)),Bn(e,s),n===1&&Dt===0&&(t.mode&1)===0&&(ul=_e()+500,yo&&ts()))}function Bn(e,t){var n=e.callbackNode;pl(e,t);var s=Ur(e,e===pn?wn:0);if(s===0)n!==null&&Me(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Me(n),t===1)e.tag===0?Vd(Bc.bind(null,e)):ku(Bc.bind(null,e)),Bd(function(){(Dt&6)===0&&ts()}),n=null;else{switch(xl(s)){case 1:n=st;break;case 4:n=bt;break;case 16:n=Ft;break;case 536870912:n=Ot;break;default:n=Ft}n=Yc(n,Fc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Fc(e,t){if(Ho=-1,Uo=0,(Dt&6)!==0)throw Error(c(327));var n=e.callbackNode;if(cl()&&e.callbackNode!==n)return null;var s=Ur(e,e===pn?wn:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Vo(e,s);else{t=s;var l=Dt;Dt|=2;var o=Hc();(pn!==e||wn!==t)&&(Fr=null,ul=_e()+500,Ls(e,t));do try{mf();break}catch(f){Wc(e,f)}while(!0);za(),zo.current=o,Dt=l,on!==null?t=0:(pn=null,wn=0,t=cn)}if(t!==0){if(t===2&&(l=As(e),l!==0&&(s=l,t=ji(e,l))),t===1)throw n=Kl,Ls(e,0),is(e,s),Bn(e,_e()),n;if(t===6)is(e,s);else{if(l=e.current.alternate,(s&30)===0&&!df(l)&&(t=Vo(e,s),t===2&&(o=As(e),o!==0&&(s=o,t=ji(e,o))),t===1))throw n=Kl,Ls(e,0),is(e,s),Bn(e,_e()),n;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(c(345));case 2:Ps(e,Fn,Fr);break;case 3:if(is(e,s),(s&130023424)===s&&(t=yi+500-_e(),10<t)){if(Ur(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){Pn(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ca(Ps.bind(null,e,Fn,Fr),t);break}Ps(e,Fn,Fr);break;case 4:if(is(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var i=31-bn(s);o=1<<i,i=t[i],i>l&&(l=i),s&=~o}if(s=l,s=_e()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*cf(s/1960))-s,10<s){e.timeoutHandle=Ca(Ps.bind(null,e,Fn,Fr),s);break}Ps(e,Fn,Fr);break;case 5:Ps(e,Fn,Fr);break;default:throw Error(c(329))}}}return Bn(e,_e()),e.callbackNode===n?Fc.bind(null,e):null}function ji(e,t){var n=Ql;return e.current.memoizedState.isDehydrated&&(Ls(e,t).flags|=256),e=Vo(e,t),e!==2&&(t=Fn,Fn=n,t!==null&&bi(t)),e}function bi(e){Fn===null?Fn=e:Fn.push.apply(Fn,e)}function df(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],o=l.getSnapshot;l=l.value;try{if(!hr(o(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function is(e,t){for(t&=~gi,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bn(t),s=1<<n;e[n]=-1,t&=~s}}function Bc(e){if((Dt&6)!==0)throw Error(c(327));cl();var t=Ur(e,0);if((t&1)===0)return Bn(e,_e()),null;var n=Vo(e,t);if(e.tag!==0&&n===2){var s=As(e);s!==0&&(t=s,n=ji(e,s))}if(n===1)throw n=Kl,Ls(e,0),is(e,t),Bn(e,_e()),n;if(n===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e,Fn,Fr),Bn(e,_e()),null}function Ni(e,t){var n=Dt;Dt|=1;try{return e(t)}finally{Dt=n,Dt===0&&(ul=_e()+500,yo&&ts())}}function $s(e){os!==null&&os.tag===0&&(Dt&6)===0&&cl();var t=Dt;Dt|=1;var n=ar.transition,s=It;try{if(ar.transition=null,It=1,e)return e()}finally{It=s,ar.transition=n,Dt=t,(Dt&6)===0&&ts()}}function Si(){Zn=il.current,Yt(il)}function Ls(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Fd(n)),on!==null)for(n=on.return;n!==null;){var s=n;switch(Pa(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&xo();break;case 3:ll(),Yt(On),Yt(Sn),Ka();break;case 5:Ua(s);break;case 4:ll();break;case 13:Yt(qt);break;case 19:Yt(qt);break;case 10:Ra(s.type._context);break;case 22:case 23:Si()}n=n.return}if(pn=e,on=e=us(e.current,null),wn=Zn=t,cn=0,Kl=null,gi=Ro=Is=0,Fn=Ql=null,Cs!==null){for(t=0;t<Cs.length;t++)if(n=Cs[t],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,o=n.pending;if(o!==null){var i=o.next;o.next=l,s.next=i}n.pending=s}Cs=null}return e}function Wc(e,t){do{var n=on;try{if(za(),Eo.current=Lo,Do){for(var s=en.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Do=!1}if(Ds=0,hn=un=en=null,Fl=!1,Bl=0,xi.current=null,n===null||n.return===null){cn=1,Kl=t,on=null;break}e:{var o=e,i=n.return,f=n,x=t;if(t=wn,f.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var R=x,le=f,fe=le.tag;if((le.mode&1)===0&&(fe===0||fe===11||fe===15)){var re=le.alternate;re?(le.updateQueue=re.updateQueue,le.memoizedState=re.memoizedState,le.lanes=re.lanes):(le.updateQueue=null,le.memoizedState=null)}var ze=mc(i);if(ze!==null){ze.flags&=-257,hc(ze,i,f,o,t),ze.mode&1&&fc(o,R,t),t=ze,x=R;var Ue=t.updateQueue;if(Ue===null){var Qe=new Set;Qe.add(x),t.updateQueue=Qe}else Ue.add(x);break e}else{if((t&1)===0){fc(o,R,t),Mi();break e}x=Error(c(426))}}else if(Gt&&f.mode&1){var sn=mc(i);if(sn!==null){(sn.flags&65536)===0&&(sn.flags|=256),hc(sn,i,f,o,t),Aa(ol(x,f));break e}}o=x=ol(x,f),cn!==4&&(cn=2),Ql===null?Ql=[o]:Ql.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var $=cc(o,x,t);Ou(o,$);break e;case 1:f=x;var N=o.type,_=o.stateNode;if((o.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ls===null||!ls.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var ge=dc(o,f,t);Ou(o,ge);break e}}o=o.return}while(o!==null)}Vc(n)}catch(Je){t=Je,on===n&&n!==null&&(on=n=n.return);continue}break}while(!0)}function Hc(){var e=zo.current;return zo.current=Lo,e===null?Lo:e}function Mi(){(cn===0||cn===3||cn===2)&&(cn=4),pn===null||(Is&268435455)===0&&(Ro&268435455)===0||is(pn,wn)}function Vo(e,t){var n=Dt;Dt|=2;var s=Hc();(pn!==e||wn!==t)&&(Fr=null,Ls(e,t));do try{ff();break}catch(l){Wc(e,l)}while(!0);if(za(),Dt=n,zo.current=s,on!==null)throw Error(c(261));return pn=null,wn=0,cn}function ff(){for(;on!==null;)Uc(on)}function mf(){for(;on!==null&&!be();)Uc(on)}function Uc(e){var t=Xc(e.alternate,e,Zn);e.memoizedProps=e.pendingProps,t===null?Vc(e):on=t,xi.current=null}function Vc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=sf(n,t,Zn),n!==null){on=n;return}}else{if(n=lf(n,t),n!==null){n.flags&=32767,on=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{cn=6,on=null;return}}if(t=t.sibling,t!==null){on=t;return}on=t=e}while(t!==null);cn===0&&(cn=5)}function Ps(e,t,n){var s=It,l=ar.transition;try{ar.transition=null,It=1,hf(e,t,n,s)}finally{ar.transition=l,It=s}return null}function hf(e,t,n,s){do cl();while(os!==null);if((Dt&6)!==0)throw Error(c(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(to(e,o),e===pn&&(on=pn=null,wn=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Bo||(Bo=!0,Yc(Ft,function(){return cl(),null})),o=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||o){o=ar.transition,ar.transition=null;var i=It;It=1;var f=Dt;Dt|=4,xi.current=null,af(e,n),Tc(n,e),Pd(Ma),ys=!!Sa,Ma=Sa=null,e.current=n,uf(n),he(),Dt=f,It=i,ar.transition=o}else e.current=n;if(Bo&&(Bo=!1,os=e,Wo=l),o=e.pendingLanes,o===0&&(ls=null),fr(n.stateNode),Bn(e,_e()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],s(l.value,{componentStack:l.stack,digest:l.digest});if(Fo)throw Fo=!1,e=vi,vi=null,e;return(Wo&1)!==0&&e.tag!==0&&cl(),o=e.pendingLanes,(o&1)!==0?e===wi?Xl++:(Xl=0,wi=e):Xl=0,ts(),null}function cl(){if(os!==null){var e=xl(Wo),t=ar.transition,n=It;try{if(ar.transition=null,It=16>e?16:e,os===null)var s=!1;else{if(e=os,os=null,Wo=0,(Dt&6)!==0)throw Error(c(331));var l=Dt;for(Dt|=4,Be=e.current;Be!==null;){var o=Be,i=o.child;if((Be.flags&16)!==0){var f=o.deletions;if(f!==null){for(var x=0;x<f.length;x++){var R=f[x];for(Be=R;Be!==null;){var le=Be;switch(le.tag){case 0:case 11:case 15:Vl(8,le,o)}var fe=le.child;if(fe!==null)fe.return=le,Be=fe;else for(;Be!==null;){le=Be;var re=le.sibling,ze=le.return;if(Ic(le),le===R){Be=null;break}if(re!==null){re.return=ze,Be=re;break}Be=ze}}}var Ue=o.alternate;if(Ue!==null){var Qe=Ue.child;if(Qe!==null){Ue.child=null;do{var sn=Qe.sibling;Qe.sibling=null,Qe=sn}while(Qe!==null)}}Be=o}}if((o.subtreeFlags&2064)!==0&&i!==null)i.return=o,Be=i;else e:for(;Be!==null;){if(o=Be,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Vl(9,o,o.return)}var $=o.sibling;if($!==null){$.return=o.return,Be=$;break e}Be=o.return}}var N=e.current;for(Be=N;Be!==null;){i=Be;var _=i.child;if((i.subtreeFlags&2064)!==0&&_!==null)_.return=i,Be=_;else e:for(i=N;Be!==null;){if(f=Be,(f.flags&2048)!==0)try{switch(f.tag){case 0:case 11:case 15:Oo(9,f)}}catch(Je){nn(f,f.return,Je)}if(f===i){Be=null;break e}var ge=f.sibling;if(ge!==null){ge.return=f.return,Be=ge;break e}Be=f.return}}if(Dt=l,ts(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(jn,e)}catch{}s=!0}return s}finally{It=n,ar.transition=t}}return!1}function Kc(e,t,n){t=ol(n,t),t=cc(e,t,1),e=rs(e,t,1),t=Pn(),e!==null&&(Nr(e,1,t),Bn(e,t))}function nn(e,t,n){if(e.tag===3)Kc(e,e,n);else for(;t!==null;){if(t.tag===3){Kc(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ls===null||!ls.has(s))){e=ol(n,e),e=dc(t,e,1),t=rs(t,e,1),e=Pn(),t!==null&&(Nr(t,1,e),Bn(t,e));break}}t=t.return}}function pf(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Pn(),e.pingedLanes|=e.suspendedLanes&n,pn===e&&(wn&n)===n&&(cn===4||cn===3&&(wn&130023424)===wn&&500>_e()-yi?Ls(e,0):gi|=n),Bn(e,t)}function Qc(e,t){t===0&&((e.mode&1)===0?t=1:(t=Wr,Wr<<=1,(Wr&130023424)===0&&(Wr=4194304)));var n=Pn();e=Or(e,t),e!==null&&(Nr(e,t,n),Bn(e,n))}function xf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qc(e,n)}function gf(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(c(314))}s!==null&&s.delete(t),Qc(e,n)}var Xc;Xc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||On.current)Rn=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Rn=!1,rf(e,t,n);Rn=(e.flags&131072)!==0}else Rn=!1,Gt&&(t.flags&1048576)!==0&&Cu(t,wo,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;To(e,t),e=t.pendingProps;var l=Zs(t,Sn.current);sl(t,n),l=Ya(null,t,s,e,l,n);var o=Ja();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zn(s)?(o=!0,go(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Wa(t),l.updater=Po,t.stateNode=l,l._reactInternals=t,ni(t,s,e,n),t=oi(null,t,s,!0,o,n)):(t.tag=0,Gt&&o&&La(t),Ln(null,t,l,n),t=t.child),t;case 16:s=t.elementType;e:{switch(To(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=vf(s),e=xr(s,e),l){case 0:t=li(null,t,s,e,n);break e;case 1:t=wc(null,t,s,e,n);break e;case 11:t=pc(null,t,s,e,n);break e;case 14:t=xc(null,t,s,xr(s.type,e),n);break e}throw Error(c(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),li(e,t,s,l,n);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),wc(e,t,s,l,n);case 3:e:{if(jc(t),e===null)throw Error(c(387));s=t.pendingProps,o=t.memoizedState,l=o.element,Au(e,t),ko(t,s,null,n);var i=t.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=ol(Error(c(423)),t),t=bc(e,t,s,n,l);break e}else if(s!==l){l=ol(Error(c(424)),t),t=bc(e,t,s,n,l);break e}else for(Gn=Zr(t.stateNode.containerInfo.firstChild),Jn=t,Gt=!0,pr=null,n=_u(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),s===l){t=Rr(e,t,n);break e}Ln(e,t,s,n)}t=t.child}return t;case 5:return Ru(t),e===null&&Ta(t),s=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,i=l.children,ka(s,l)?i=null:o!==null&&ka(s,o)&&(t.flags|=32),vc(e,t),Ln(e,t,i,n),t.child;case 6:return e===null&&Ta(t),null;case 13:return Nc(e,t,n);case 4:return Ha(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=nl(t,null,s,n):Ln(e,t,s,n),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),pc(e,t,s,l,n);case 7:return Ln(e,t,t.pendingProps,n),t.child;case 8:return Ln(e,t,t.pendingProps.children,n),t.child;case 12:return Ln(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,o=t.memoizedProps,i=l.value,Kt(No,s._currentValue),s._currentValue=i,o!==null)if(hr(o.value,i)){if(o.children===l.children&&!On.current){t=Rr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var f=o.dependencies;if(f!==null){i=o.child;for(var x=f.firstContext;x!==null;){if(x.context===s){if(o.tag===1){x=zr(-1,n&-n),x.tag=2;var R=o.updateQueue;if(R!==null){R=R.shared;var le=R.pending;le===null?x.next=x:(x.next=le.next,le.next=x),R.pending=x}}o.lanes|=n,x=o.alternate,x!==null&&(x.lanes|=n),Fa(o.return,n,t),f.lanes|=n;break}x=x.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(c(341));i.lanes|=n,f=i.alternate,f!==null&&(f.lanes|=n),Fa(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}Ln(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,sl(t,n),l=lr(l),s=s(l),t.flags|=1,Ln(e,t,s,n),t.child;case 14:return s=t.type,l=xr(s,t.pendingProps),l=xr(s.type,l),xc(e,t,s,l,n);case 15:return gc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:xr(s,l),To(e,t),t.tag=1,zn(s)?(e=!0,go(t)):e=!1,sl(t,n),ic(t,s,l),ni(t,s,l,n),oi(null,t,s,!0,e,n);case 19:return Mc(e,t,n);case 22:return yc(e,t,n)}throw Error(c(156,t.tag))};function Yc(e,t){return me(e,t)}function yf(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ir(e,t,n,s){return new yf(e,t,n,s)}function ki(e){return e=e.prototype,!(!e||!e.isReactComponent)}function vf(e){if(typeof e=="function")return ki(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Re)return 11;if(e===Ve)return 14}return 2}function us(e,t){var n=e.alternate;return n===null?(n=ir(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ko(e,t,n,s,l,o){var i=2;if(s=e,typeof e=="function")ki(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case je:return _s(n.children,l,o,t);case $e:i=8,l|=8;break;case We:return e=ir(12,n,t,l|2),e.elementType=We,e.lanes=o,e;case ie:return e=ir(13,n,t,l),e.elementType=ie,e.lanes=o,e;case Fe:return e=ir(19,n,t,l),e.elementType=Fe,e.lanes=o,e;case F:return Qo(n,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ne:i=10;break e;case ye:i=9;break e;case Re:i=11;break e;case Ve:i=14;break e;case J:i=16,s=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=ir(i,n,t,l),t.elementType=e,t.type=s,t.lanes=o,t}function _s(e,t,n,s){return e=ir(7,e,s,t),e.lanes=n,e}function Qo(e,t,n,s){return e=ir(22,e,s,t),e.elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function Ci(e,t,n){return e=ir(6,e,null,t),e.lanes=n,e}function Ei(e,t,n){return t=ir(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wf(e,t,n,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Os(0),this.expirationTimes=Os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Os(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Di(e,t,n,s,l,o,i,f,x){return e=new wf(e,t,n,f,x),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ir(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wa(o),e}function jf(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:De,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Jc(e){if(!e)return es;e=e._reactInternals;e:{if(an(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var n=e.type;if(zn(n))return Su(e,n,t)}return t}function Gc(e,t,n,s,l,o,i,f,x){return e=Di(n,s,!0,e,l,o,i,f,x),e.context=Jc(null),n=e.current,s=Pn(),l=as(n),o=zr(s,l),o.callback=t??null,rs(n,o,l),e.current.lanes=l,Nr(e,l,s),Bn(e,s),e}function Xo(e,t,n,s){var l=t.current,o=Pn(),i=as(l);return n=Jc(n),t.context===null?t.context=n:t.pendingContext=n,t=zr(o,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=rs(l,t,i),e!==null&&(vr(e,l,i,o),Mo(e,l,i)),i}function Yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ii(e,t){Zc(e,t),(e=e.alternate)&&Zc(e,t)}function bf(){return null}var qc=typeof reportError=="function"?reportError:function(e){console.error(e)};function $i(e){this._internalRoot=e}Jo.prototype.render=$i.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));Xo(e,t,null,null)},Jo.prototype.unmount=$i.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$s(function(){Xo(null,e,null,null)}),t[Pr]=null}};function Jo(e){this._internalRoot=e}Jo.prototype.unstable_scheduleHydration=function(e){if(e){var t=zs();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tr.length&&t!==0&&t<tr[n].priority;n++);tr.splice(n,0,e),n===0&&ps(e)}};function Li(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ed(){}function Nf(e,t,n,s,l){if(l){if(typeof s=="function"){var o=s;s=function(){var R=Yo(i);o.call(R)}}var i=Gc(t,s,e,0,null,!1,!1,"",ed);return e._reactRootContainer=i,e[Pr]=i.current,Ll(e.nodeType===8?e.parentNode:e),$s(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var f=s;s=function(){var R=Yo(x);f.call(R)}}var x=Di(e,0,!1,null,null,!1,!1,"",ed);return e._reactRootContainer=x,e[Pr]=x.current,Ll(e.nodeType===8?e.parentNode:e),$s(function(){Xo(t,x,n,s)}),x}function Zo(e,t,n,s,l){var o=n._reactRootContainer;if(o){var i=o;if(typeof l=="function"){var f=l;l=function(){var x=Yo(i);f.call(x)}}Xo(t,i,e,l)}else i=Nf(n,t,e,l,s);return Yo(i)}gl=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Hr(t.pendingLanes);n!==0&&(Vr(t,n|1),Bn(t,_e()),(Dt&6)===0&&(ul=_e()+500,ts()))}break;case 13:$s(function(){var s=Or(e,1);if(s!==null){var l=Pn();vr(s,e,1,l)}}),Ii(e,1)}},Kn=function(e){if(e.tag===13){var t=Or(e,134217728);if(t!==null){var n=Pn();vr(t,e,134217728,n)}Ii(e,134217728)}},no=function(e){if(e.tag===13){var t=as(e),n=Or(e,t);if(n!==null){var s=Pn();vr(n,e,t,s)}Ii(e,t)}},zs=function(){return It},yl=function(e,t){var n=It;try{return It=e,t()}finally{It=n}},Tt=function(e,t,n){switch(t){case"input":if(j(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var l=po(s);if(!l)throw Error(c(90));Ye(s),j(s,l)}}}break;case"textarea":se(e,n);break;case"select":t=n.value,t!=null&&Se(e,!!n.multiple,t,!1)}},At=Ni,tt=$s;var Sf={usingClientEntryPoint:!1,Events:[Tl,Js,po,Vt,_t,Ni]},Yl={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mf={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qn(e),e===null?null:e.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||bf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qo.isDisabled&&qo.supportsFiber)try{jn=qo.inject(Mf),mn=qo}catch{}}return Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sf,Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Li(t))throw Error(c(200));return jf(e,t,null,n)},Wn.createRoot=function(e,t){if(!Li(e))throw Error(c(299));var n=!1,s="",l=qc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Di(e,1,!1,null,null,n,!1,s,l),e[Pr]=t.current,Ll(e.nodeType===8?e.parentNode:e),new $i(t)},Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=qn(t),e=e===null?null:e.stateNode,e},Wn.flushSync=function(e){return $s(e)},Wn.hydrate=function(e,t,n){if(!Go(t))throw Error(c(200));return Zo(null,e,t,!0,n)},Wn.hydrateRoot=function(e,t,n){if(!Li(e))throw Error(c(405));var s=n!=null&&n.hydratedSources||null,l=!1,o="",i=qc;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Gc(t,null,e,1,n??null,l,!1,o,i),e[Pr]=t.current,Ll(e),s)for(e=0;e<s.length;e++)n=s[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Jo(t)},Wn.render=function(e,t,n){if(!Go(t))throw Error(c(200));return Zo(null,e,t,!1,n)},Wn.unmountComponentAtNode=function(e){if(!Go(e))throw Error(c(40));return e._reactRootContainer?($s(function(){Zo(null,null,e,!1,function(){e._reactRootContainer=null,e[Pr]=null})}),!0):!1},Wn.unstable_batchedUpdates=Ni,Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Go(n))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return Zo(e,t,n,!1,s)},Wn.version="18.3.1-next-f1338f8080-20240426",Wn}var id;function Pf(){if(id)return Ti.exports;id=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(y){console.error(y)}}return a(),Ti.exports=Lf(),Ti.exports}var ud;function _f(){if(ud)return ea;ud=1;var a=Pf();return ea.createRoot=a.createRoot,ea.hydrateRoot=a.hydrateRoot,ea}var Tf=_f();const Af=md(Tf),Of="modulepreload",zf=function(a){return"/"+a},cd={},Rf=function(y,c,C){let S=Promise.resolve();if(c&&c.length>0){let ue=function(te){return Promise.all(te.map(U=>Promise.resolve(U).then(Q=>({status:"fulfilled",value:Q}),Q=>({status:"rejected",reason:Q}))))};var K=ue;document.getElementsByTagName("link");const z=document.querySelector("meta[property=csp-nonce]"),L=z?.nonce||z?.getAttribute("nonce");S=ue(c.map(te=>{if(te=zf(te),te in cd)return;cd[te]=!0;const U=te.endsWith(".css"),Q=U?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${te}"]${Q}`))return;const G=document.createElement("link");if(G.rel=U?"stylesheet":Of,U||(G.as="script"),G.crossOrigin="",G.href=te,L&&G.setAttribute("nonce",L),document.head.appendChild(G),U)return new Promise((Z,h)=>{G.addEventListener("load",Z),G.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${te}`)))})}))}function g(z){const L=new Event("vite:preloadError",{cancelable:!0});if(L.payload=z,window.dispatchEvent(L),!L.defaultPrevented)throw z}return S.then(z=>{for(const L of z||[])L.status==="rejected"&&g(L.reason);return y().catch(g)})},it=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],En=[{id:"America/Los_Angeles",label:"PT",offset:0},{id:"America/Denver",label:"MT",offset:1},{id:"America/Chicago",label:"CT",offset:2},{id:"America/New_York",label:"ET",offset:3}],Gl=24;function ds(){return Math.random().toString(36).slice(2,9)}function Oe(a){const[y,c]=a.split(":").map(Number);return y*60+(c||0)}function Nt(a){const y=(a%1440+1440)%1440,c=Math.floor(y/60),C=y%60;return`${String(c).padStart(2,"0")}:${String(C).padStart(2,"0")}`}function Dn(a){const[y,c,C]=a.split("-").map(Number);return new Date(y,c-1,C)}function jr(a,y){const c=new Date(a);return c.setDate(a.getDate()+y),c}function dn(a){return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`}function ta(a){return a.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function Ff(a,y){const c=a.getFullYear(),C=y.getFullYear(),S=a.getMonth(),g=y.getMonth(),K=a.getDate(),z=y.getDate(),L=a.toLocaleString(void 0,{month:"short"}),ue=y.toLocaleString(void 0,{month:"short"});return c===C&&S===g&&K===z?ta(a):c===C&&S===g?`${L} ${K}${z}, ${c}`:c===C?`${L} ${K}  ${ue} ${z}, ${c}`:`${L} ${K}, ${c}  ${ue} ${z}, ${C}`}function na(a){const c=0-a.getDay(),C=new Date(a);return C.setDate(a.getDate()+c),C.setHours(0,0,0,0),C}function wr(a){try{const c=new Intl.DateTimeFormat("en-US",{timeZone:a,hour:"2-digit",minute:"2-digit",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"}).formatToParts(new Date),C=Q=>c.find(G=>G.type===Q)?.value||"",S=parseInt(C("hour")||"0",10),g=parseInt(C("minute")||"0",10),K=parseInt(C("year")||"0",10),z=parseInt(C("month")||"0",10),L=parseInt(C("day")||"0",10),ue=(C("weekday")||"").slice(0,3),te=(S*60+g)%1440,U=`${K}-${String(z).padStart(2,"0")}-${String(L).padStart(2,"0")}`;return{minutes:te,ymd:U,weekdayShort:ue,h:S,m:g,y:K,mo:z,d:L}}catch{const y=new Date,c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][y.getDay()];return{minutes:y.getHours()*60+y.getMinutes(),ymd:dn(y),weekdayShort:c,h:y.getHours(),m:y.getMinutes(),y:y.getFullYear(),mo:y.getMonth()+1,d:y.getDate()}}}function fl(a,y=new Date){try{const S=new Intl.DateTimeFormat("en-US",{timeZone:a,timeZoneName:"short",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(y).find(g=>g.type==="timeZoneName")?.value;if(S&&/[A-Z]{2,4}/.test(S))return S}catch{}try{const S=new Intl.DateTimeFormat("en-US",{timeZone:a,timeZoneName:"shortOffset"}).formatToParts(y).find(g=>g.type==="timeZoneName")?.value;if(S)return S}catch{}return"UTC"}function Ri(a,y){return(a%y+y)%y}function dd(a,y){const c=it.indexOf(a),C=Ri(c+y,7);return it[C]}function Ts(a,y){const c=[],C=y*60;for(const S of a){const g=Oe(S.start),K=S.end==="24:00"?1440:Oe(S.end),z=typeof S.endDay=="string"?S.endDay!==S.day:K<g&&S.end!=="24:00",L=S.end==="24:00"?1440-g:z?1440-g+K:K-g,ue=g+L,te=g+C,U=ue+C,Q=Math.floor(te/1440),G=Math.floor((U-1)/1440),Z=Ri(te,1440),h=Ri(U,1440),v=dd(S.day,Q),M=dd(S.day,G);Q===G?c.push({...S,day:v,start:Nt(Z),end:U-te===1440?"24:00":Nt(h)}):(c.push({...S,day:v,start:Nt(Z),end:"24:00",endDay:M}),c.push({...S,day:M,start:"00:00",end:Nt(h),endDay:M}))}return c}function ra(a,y,c){return Ts(a,c).filter(S=>S.day===y)}function ur(a,y,c){if(y){const C=a.find(S=>S.id&&S.id===y);if(C){const S=`${C.firstName||""} ${C.lastName||""}`.trim();if(S)return S}}return(c||"").trim()}function dl(a,y){const c=(y||"").trim().toLowerCase();return c?a.find(S=>`${S.firstName||""} ${S.lastName||""}`.trim().toLowerCase()===c)?.id:void 0}function sa(a,y){const c=Oe(a.start),C=Oe(a.end),g=(C>c?C:1440)-c,K=a.segments||[],z=y.map(U=>{const Q=Oe(U.start),G=Oe(U.end),Z=Math.max(0,Math.min(g,Q-c)),h=Math.max(0,Math.min(g,G-c)),v=Math.max(0,h-Z);return v>0?{taskId:U.taskId,startOffsetMin:Z,durationMin:v}:null}).filter(Boolean),L=new Array(g).fill(null);for(const U of z)for(let Q=U.startOffsetMin;Q<U.startOffsetMin+U.durationMin&&Q<g;Q++)L[Q]==null&&(L[Q]={taskId:U.taskId,source:"cal"});for(const U of K)for(let Q=U.startOffsetMin;Q<U.startOffsetMin+U.durationMin&&Q<g;Q++)L[Q]={taskId:U.taskId,source:"manual"};const ue=[];let te=0;for(;te<g;){const U=L[te];if(!U){te++;continue}const Q=te,G=U.taskId;let Z=te+1;for(;Z<g&&L[Z]&&L[Z].taskId===G&&L[Z].source===U.source;)Z++;ue.push({id:`${a.id}-${G}-${Q}`,shiftId:a.id,taskId:G,startOffsetMin:Q,durationMin:Z-Q}),te=Z}return ue}const ml=!1,Hn="https://api.teamschedule.cc".replace(/\/$/,""),Un="/api".replace(/\/$/,"");function Vi(){return Hn}function hd(){return!1}function Ki(){return Un}let Qi=null;function pd(){if(typeof document>"u")return null;const a=document.cookie.match(/(?:^|; )csrf=([^;]+)/);return a?decodeURIComponent(a[1]):null}function fs(){return Qi||pd()}function Zl(){return!!fs()}function Fi(){return{cookie:!!pd(),memory:!!Qi,token:!!fs()}}async function xd(a){try{const y=await fetch(`${Hn}${Un}/login`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:a})});if(y.ok){try{const c=await y.clone().json();c&&typeof c.csrf=="string"&&(Qi=c.csrf)}catch{}try{await aa(a)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:auth",{detail:{loggedIn:!0}}))}catch{}}return{ok:y.ok,status:y.status}}catch{return{ok:!1}}}async function Xi(a,y="admin"){try{const c=await fetch(`${Hn}${Un}/login-magic/request`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({email:a,role:y})}),C=c.ok;let S;try{const g=await c.clone().json();g&&typeof g.link=="string"&&(S=g.link)}catch{}return{ok:C,link:S}}catch{return{ok:!1}}}async function Bf(a){try{const y=await fetch(`${Hn}${Un}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:a})});return{ok:y.ok,status:y.status}}catch{return{ok:!1}}}async function la(){try{const a=`${Hn}${Un}/schedule`,c=await fetch(a,{credentials:"include"});return c.ok?await c.json():null}catch{return null}}async function Yi(a){try{const y=fs();if(!y&&!ml)return console.warn("[cloudPost] CSRF token missing; writes are disabled without an authenticated session."),{ok:!1,error:"missing_csrf"};const c=`${Hn}${Un}/schedule`,C={"Content-Type":"application/json"};y&&(C["x-csrf-token"]=y);const S=await fetch(c,{method:"POST",headers:C,credentials:"include",body:JSON.stringify(a)});if(S.ok)return{ok:!0,status:S.status};let g,K;try{if((S.headers.get("content-type")||"").includes("application/json")){const L=await S.json();g=L&&(L.error||L.code||L.message),K=JSON.stringify(L)}else K=await S.text()}catch{}return{ok:!1,status:S.status,error:g,bodyText:K}}catch{return{ok:!1}}}async function gd(a){return!!(await Yi(a)).ok}async function oa(a){try{const y=fs(),c={"Content-Type":"application/json"};y&&(c["x-csrf-token"]=y);try{if((await fetch(`${Hn}${Un}/v2/agents`,{method:"PATCH",credentials:"include",headers:c,body:JSON.stringify({agents:a.map(g=>({id:g.id,firstName:g.firstName,lastName:g.lastName,hidden:!!g.hidden,tzId:g.tzId,isSupervisor:g.isSupervisor===!0,supervisorId:g.supervisorId??null,notes:g.notes}))})})).ok)return!0}catch{}return(await fetch(`${Hn}${Un}/agents`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify({agents:a})})).ok}catch{return!1}}async function yd(a){try{const y=fs(),c={"Content-Type":"application/json"};return y&&(c["x-csrf-token"]=y),c.authorization="Bearer dev",(await fetch(`${Hn}${Un}/v2/shifts/batch`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify({upserts:a.upserts||[],deletes:a.deletes||[]})})).ok}catch{return!1}}async function aa(a){try{if((await fetch(`${Hn}${Un}/schedule`,{method:"GET",credentials:"include"})).ok)return}catch{}try{await fetch(`${Hn}${Un}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:a||""})})}catch{}}async function vd(a){try{const y=fs(),c={"Content-Type":"application/json"};y&&(c["x-csrf-token"]=y);const C=await fetch(`${Hn}${Un}/v2/proposals`,{method:"POST",credentials:"include",headers:c,body:JSON.stringify(a)});let S;try{const g=await C.clone().json();g&&typeof g.id=="string"&&(S=g.id)}catch{}return C.ok?{ok:!0,id:S,status:C.status}:{ok:!1,status:C.status}}catch{return{ok:!1}}}async function Bi(){try{const a=fs(),y={};a&&(y["x-csrf-token"]=a);const c=await fetch(`${Hn}${Un}/v2/proposals`,{method:"GET",credentials:"include",headers:y});if(!c.ok)return{ok:!1,status:c.status};const C=await c.json();return{ok:!0,proposals:Array.isArray(C?.proposals)?C.proposals:[]}}catch{return{ok:!1}}}async function wd(a){try{const y=fs(),c={};y&&(c["x-csrf-token"]=y);const C=await fetch(`${Hn}${Un}/v2/proposals/${encodeURIComponent(a)}`,{method:"GET",credentials:"include",headers:c});return C.ok?{ok:!0,proposal:(await C.json())?.proposal}:{ok:!1,status:C.status}}catch{return{ok:!1}}}const Wf=Object.freeze(Object.defineProperty({__proto__:null,cloudCreateProposal:vd,cloudGet:la,cloudGetProposal:wd,cloudListProposals:Bi,cloudPost:gd,cloudPostAgents:oa,cloudPostDetailed:Yi,cloudPostShiftsBatch:yd,ensureSiteSession:aa,getApiBase:Vi,getApiPrefix:Ki,getCsrfDiagnostics:Fi,hasCsrfToken:Zl,isUsingDevProxy:hd,login:xd,loginSite:Bf,requestMagicLink:Xi},Symbol.toStringTag,{value:"Module"})),Hf=[{id:"system",label:"System",chips:[]},{id:"default-light",label:"Default Light",chips:["#ffffff","#111827"]},{id:"default-dark",label:"Default Dark",chips:["#0a0a0a","#e5e7eb"]},{id:"night-light",label:"Night Light",chips:["#ffffff","#ef4444"]},{id:"night-dark",label:"Night Dark",chips:["#000000","#ef4444"]},{id:"noir-light",label:"Noir Light",chips:["#ffffff","#000000"]},{id:"noir-dark",label:"Noir Dark",chips:["#000000","#ffffff"]},{id:"prism-light",label:"Prism Light",chips:["#f0f9ff","#0ea5e9"]},{id:"prism-dark",label:"Prism Dark",chips:["#0f172a","#a3a3a3"]}];function Uf({dark:a}){const[y,c]=w.useState(!1),C=w.useMemo(()=>{try{return localStorage.getItem("schedule_theme")||"system"}catch{return"system"}},[]),S=g=>{try{window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:g}}))}catch{}c(!1)};return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>c(g=>!g),"aria-haspopup":"menu","aria-expanded":y,className:["h-10 px-3 rounded-lg border text-sm font-medium inline-flex items-center gap-2",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),title:"Choose theme","aria-label":"Choose theme",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"4"}),r.jsx("path",{d:"M12 2v2"}),r.jsx("path",{d:"M12 20v2"}),r.jsx("path",{d:"m4.93 4.93 1.41 1.41"}),r.jsx("path",{d:"m17.66 17.66 1.41 1.41"}),r.jsx("path",{d:"M2 12h2"}),r.jsx("path",{d:"M20 12h2"}),r.jsx("path",{d:"m4.93 19.07 1.41-1.41"}),r.jsx("path",{d:"m17.66 6.34 1.41-1.41"})]}),r.jsx("span",{className:"sr-only",children:"Theme"})]}),y&&r.jsx("div",{className:["absolute right-0 mt-2 z-50 w-[320px] rounded-xl p-2 border shadow-lg",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-200"].join(" "),role:"menu",children:r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Hf.map(g=>r.jsxs("button",{onClick:()=>S(g.id),className:["flex items-center gap-2 p-2 rounded-lg border text-left",a?"hover:bg-neutral-800 border-neutral-700":"hover:bg-neutral-100 border-neutral-300",C===g.id?"ring-1 ring-blue-500":"",g.id==="system"?"col-span-2":""].join(" "),children:[r.jsx("div",{className:"flex -space-x-1",children:g.chips.map((K,z)=>r.jsx("span",{className:"inline-block w-5 h-5 rounded-full border border-black/10",style:{background:K}},z))}),r.jsx("span",{className:"text-sm",children:g.label})]},g.id))})})]})}function Vf({dark:a,setDark:y,view:c,setView:C,weekStart:S,setWeekStart:g,tz:K,setTz:z,canEdit:L,editMode:ue,setEditMode:te}){const Q=/^\d{4}-\d{2}-\d{2}$/.test(S)&&!Number.isNaN(Dn(S).getTime()),G=Q?Dn(S):na(new Date),Z=jr(G,6),[h,v]=w.useState(!1),M=w.useRef(null);return w.useEffect(()=>{if(!h)return;const p=O=>{const P=O.target;M.current&&!M.current.contains(P)&&v(!1)},A=O=>{O.key==="Escape"&&v(!1)};return document.addEventListener("mousedown",p),document.addEventListener("keydown",A),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",A)}},[h]),r.jsx(r.Fragment,{children:r.jsx("header",{className:"mb-1",children:r.jsxs("div",{className:"grid grid-cols-[auto_1fr_auto] sm:grid-cols-[1fr_auto_1fr] items-center gap-2 sm:gap-3 pt-0.5 pb-1 sm:pt-1 sm:pb-2",children:[r.jsx("div",{className:"block sm:hidden","aria-hidden":"true",children:r.jsx("div",{className:"h-9 w-9"})}),r.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-2 justify-start",children:[r.jsx("button",{onClick:()=>C("schedule"),"aria-label":"Schedule",title:"Schedule",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="schedule"?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[r.jsx("rect",{x:"3",y:"4.5",width:"18",height:"16",rx:"2"}),r.jsx("path",{d:"M8 3v3"}),r.jsx("path",{d:"M16 3v3"}),r.jsx("path",{d:"M3 9.5h18"}),r.jsx("path",{d:"M8 13h3"}),r.jsx("path",{d:"M8 17h8"})]})}),r.jsx("button",{onClick:()=>C("teams"),"aria-label":"Teams",title:"Teams",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="teams"?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[r.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"}),r.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),r.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),r.jsx("button",{onClick:()=>C("manageV2"),"aria-label":"Manage v2",title:"Manage v2",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2.5 sm:px-3 rounded-lg text-sm font-medium border",c==="manageV2"?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:r.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})})]}),r.jsxs("div",{className:"text-center whitespace-nowrap overflow-visible leading-tight",children:[r.jsx("div",{className:[a?"text-neutral-400":"text-neutral-600","font-semibold","text-[0.88rem] sm:text-[0.95rem]"].join(" "),children:"Customer Care Team Schedule"}),c==="manageV2"?r.jsx("div",{className:["font-bold tracking-wide",a?"text-red-300":"text-red-600","text-[1.15rem] sm:text-[1.35rem]"].join(" "),style:{letterSpacing:"0.02em"},children:"PORTAL OF POWER"}):r.jsx("div",{className:["font-medium tabular-nums","text-[1.15rem] sm:text-[1.35rem]"].join(" "),style:{letterSpacing:"0.005em"},children:Ff(G,Z)})]}),r.jsxs("div",{className:"relative flex items-center gap-2 justify-end w-full sm:w-auto",children:[r.jsx("div",{className:"sm:hidden",children:r.jsx("button",{onClick:()=>v(p=>!p),"aria-haspopup":"menu","aria-expanded":h,title:"Menu",className:["inline-flex items-center justify-center h-9 w-9 rounded-lg border",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M21 4H14"}),r.jsx("path",{d:"M10 4H3"}),r.jsx("path",{d:"M18 8V4"}),r.jsx("path",{d:"M6 20V4"}),r.jsx("path",{d:"M21 20H12"}),r.jsx("path",{d:"M8 20H3"}),r.jsx("path",{d:"M12 14H3"}),r.jsx("path",{d:"M18 14H21"}),r.jsx("path",{d:"M12 14V20"})]})})}),h&&r.jsxs("div",{ref:M,className:["absolute right-0 top-full mt-2 z-50 w-[18rem] max-w-[calc(100vw-1rem)] rounded-xl p-3 border shadow-lg",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),role:"menu",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("div",{className:"text-xs font-semibold opacity-70 mb-1",children:"View"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>{C("schedule"),v(!1)},className:["h-9 rounded-lg border text-sm font-medium",c==="schedule"?a?"bg-neutral-800 border-neutral-600":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700":"border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-label":"Schedule",title:"Schedule",children:"Schedule"}),r.jsx("button",{onClick:()=>{C("manageV2"),v(!1)},className:["h-9 rounded-lg border text-sm font-medium",c==="manageV2"?a?"bg-neutral-800 border-neutral-600":"bg-white border-blue-600 text-blue-600":a?"border-neutral-700":"border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-label":"Manage",title:"Manage",children:"Manage"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Timezone"}),r.jsxs("div",{className:"relative",children:[r.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",a?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M2 12h20"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),r.jsx("select",{className:["border rounded-lg pl-9 pr-2 h-9 text-sm appearance-none w-full",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:K.id,onChange:p=>{const A=En.find(O=>O.id===p.target.value);A&&z(A)},children:En.map(p=>r.jsx("option",{value:p.id,children:fl(p.id)},p.id))})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Week start (Sun)"}),r.jsx("input",{className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:Q?S:dn(G),onChange:p=>{const A=p.target.value;/^\d{4}-\d{2}-\d{2}$/.test(A)?g(A):g(dn(na(new Date)))},style:{colorScheme:a?"dark":"light"}})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-70",children:"Theme"}),r.jsxs("select",{className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full appearance-none",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),defaultValue:(()=>{try{const p=localStorage.getItem("schedule_theme");return p==="unicorn"?"system":p||"system"}catch{return"system"}})(),onChange:p=>{const A=p.target.value;try{localStorage.setItem("schedule_theme",A)}catch{}window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:A}}))},children:[r.jsx("option",{value:"system",children:"System"}),r.jsx("option",{value:"light",children:"Light"}),r.jsx("option",{value:"dark",children:"Dark"}),r.jsx("option",{value:"night",children:"Night"}),r.jsx("option",{value:"noir",children:"Noir"}),r.jsx("option",{value:"prism",children:"Prism"})]})]})]})]}),r.jsxs("div",{className:"hidden sm:block relative w-auto",children:[r.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",a?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M2 12h20"}),r.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),r.jsx("select",{"aria-label":"Timezone",title:"Timezone",className:["border rounded-lg pl-9 pr-2 h-9 sm:h-10 text-sm appearance-none min-w-[4.5rem] w-auto",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:K.id,onChange:p=>{const A=En.find(O=>O.id===p.target.value);A&&z(A)},children:En.map(p=>r.jsx("option",{value:p.id,children:fl(p.id)},p.id))})]}),r.jsx("div",{className:"hidden sm:block relative w-auto",children:r.jsx("input",{"aria-label":"Week start (Sun)",title:"Week start (Sun)",className:["border rounded-lg pl-3 pr-2 h-9 sm:h-10 text-sm w-auto min-w-[9.5rem]",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:Q?S:dn(G),onChange:p=>{const A=p.target.value;/^\d{4}-\d{2}-\d{2}$/.test(A)?g(A):g(dn(na(new Date)))},style:{colorScheme:a?"dark":"light"}})}),r.jsx("div",{className:"hidden sm:block [&>button]:h-9 sm:[&>button]:h-10",children:r.jsx(Uf,{dark:a})})]})]})})})}function Kf({date:a,dayKey:y,people:c,shifts:C,pto:S,dark:g,tz:K,canEdit:z,editMode:L,onRemove:ue,showHeaderTitle:te=!0,tasks:U,compact:Q,agents:G}){const h=w.useRef(null),[v,M]=ae.useState(0),[p,A]=ae.useState(()=>{try{const X=localStorage.getItem("schedule_theme");return X==="unicorn"?"system":X||"system"}catch{return"system"}});ae.useEffect(()=>{(()=>{const Ee=document.querySelector("[data-theme]")?.getAttribute("data-theme")||null;Ee&&A(Ee)})();const Y=se=>{const Ee=se;if(Ee?.detail?.value){const xe=Ee.detail.value;A(xe==="unicorn"?"system":xe)}};return window.addEventListener("schedule:set-theme",Y),()=>window.removeEventListener("schedule:set-theme",Y)},[]),ae.useEffect(()=>{const X=()=>{h.current&&M(h.current.clientWidth)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]);const O=Array.from({length:24},(X,Y)=>Y),P=g?"text-neutral-500":"text-neutral-400",je=(()=>{const[X,Y]=ae.useState(typeof window<"u"?window.innerWidth:1280);return ae.useEffect(()=>{const se=()=>Y(window.innerWidth);return window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]),X})(),$e=je>=1024?"lg":je>=768?"md":je>=640?"sm":"xs",We=$e==="lg"?1:$e==="md"?.9:$e==="sm"?.82:.75,Ne=Math.max(12,Math.round(13*We)),ye=$e==="lg"?100:$e==="md"?92:$e==="sm"?84:66;w.useMemo(()=>{try{if(!c||c.length===0)return ye;const Y=document.createElement("canvas").getContext("2d");if(!Y)return ye;Y.font=`500 ${Ne}px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif`;let se=0;for(const xe of c){const He=Y.measureText(xe).width;He>se&&(se=He)}return Math.ceil(se+28)}catch{return ye}},[c,Ne,ye]);const Re=Math.round(54*.56*We),ie=Math.max(9,Math.round(11*We)),Fe=12,Ve=ie,J=Math.max(20,Math.round(24*We)),F=6,k=$e==="lg"?1:$e==="md"?2:$e==="sm"?3:4,T=g?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)",V=g?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)",d=k===1?100/(Gl*2):100/Gl,E=ae.useMemo(()=>{const X=new Map;return c.forEach(Y=>{const se=C.filter(Ee=>Ee.person===Y).map(Ee=>Oe(Ee.start));se.length&&X.set(Y,Math.min(...se))}),Array.from(X.entries()).sort((Y,se)=>Y[1]-se[1]||Y[0].localeCompare(se[0])).map(([Y])=>Y)},[c,C]),Ie=ae.useMemo(()=>{const X=new Map,Y=Math.max(1,E.length);return E.forEach((se,Ee)=>{const xe=Math.round(Ee/Y*360);X.set(se,xe)}),X},[E]),[ke,Xe]=ae.useState(Date.now());ae.useEffect(()=>{let X,Y;const se=()=>Xe(Date.now()),Ee=()=>{Y&&clearInterval(Y),X&&clearTimeout(X);const ct=6e4-Date.now()%6e4;X=window.setTimeout(()=>{se(),Y=window.setInterval(se,6e4)},ct)},xe=()=>{document.visibilityState==="visible"&&(se(),Ee())};return se(),Ee(),document.addEventListener("visibilitychange",xe),()=>{Y&&clearInterval(Y),X&&clearTimeout(X),document.removeEventListener("visibilitychange",xe)}},[]);const Ce=wr(K.id),q=Ce.minutes,ce=dn(a)===Ce.ymd,W=q/1440*100,ee=Math.max(2,Math.round(4*We)),Te=Math.max(10,Math.round(14*We)),Ye=ae.useMemo(()=>{const X=new Map;for(const Y of U||[])X.set(Y.id,Y);return X},[U]),[ve,gt]=ae.useState({id:null,x:0}),[et,ut]=ae.useState(null),[j,I]=ae.useState(!1),Le=ae.useMemo(()=>{const X=new Map;for(const Y of En)X.set(Y.id,Y.offset);return X},[]),oe=X=>{const Y=(X||"").trim().toLowerCase();return(G||[]).find(se=>`${se.firstName||""} ${se.lastName||""}`.trim().toLowerCase()===Y)},Se=X=>it.indexOf(X);return r.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",style:{overflowY:"visible"},children:[!Q&&r.jsxs("div",{className:["relative sticky top-0 z-40 shadow-sm px-2",g?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].filter(Boolean).join(" "),style:{height:Re,display:"flex",alignItems:"center"},children:[te&&r.jsxs("div",{className:"absolute left-2 right-2 text-center font-bold",style:{top:Math.max(0,Math.round(6*We)),fontSize:Math.round(13*We),lineHeight:1},children:[y," ",r.jsx("span",{className:["ml-1",P].join(" "),children:dn(a)})]}),p!=="night"&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",children:r.jsx("div",{className:"absolute inset-y-0 left-0",style:{width:`calc(12 * (100% / ${Gl}))`,backgroundColor:g?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"}})}),p!=="night"&&r.jsx("div",{className:"absolute left-2 right-2",style:{bottom:ee,height:Te,paddingTop:Math.max(2,Math.round(2*We))},children:O.map((X,Y)=>Y%k===0&&r.jsx("div",{className:"absolute text-left pl-0.5 leading-none pointer-events-none",style:{left:`calc(${Y} * (100% / ${Gl}))`,width:`calc(100% / ${Gl})`},children:r.jsx("div",{className:["font-bold hour-label tracking-tight",P].join(" "),style:{fontSize:ie},children:X===0?12:X>12?X-12:X})},Y))}),ce&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*We))},children:r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded-md shadow-sm now-pop",g?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${W}%`,fontSize:Ve,willChange:"transform,opacity"},children:Nt(q)},q)}),j&&et!=null&&r.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*We))},children:(()=>{const X=h.current?.getBoundingClientRect().width||1,Y=Math.max(0,Math.min(100,et/X*100)),se=1440,Ee=Math.max(0,Math.min(se-1,Math.round(et/X*se))),xe=Math.floor(Ee/60).toString().padStart(2,"0"),He=(Ee%60).toString().padStart(2,"0");let ct=0;for(const zt of C){const de=Oe(zt.start),Pe=Oe(zt.end),ne=Pe>de?Pe:1440;Ee>=de&&Ee<ne&&ct++}return r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",g?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:`${Y}%`},children:`${xe}:${He}  ${ct} on deck`})})()})]}),r.jsxs("div",{className:"relative px-2",ref:h,onMouseLeave:()=>{I(!1),ut(null)},onMouseMove:X=>{const Y=h.current;if(!Y)return;const se=Y.getBoundingClientRect(),Ee=X.clientX-se.left;if(Ee<0||Ee>se.width){I(!1),ut(null);return}I(!0),ut(Ee)},style:{paddingBottom:8},children:[ce&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-20 pointer-events-none",children:r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",g?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${W}%`}})}),j&&et!=null&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-30 pointer-events-none",children:r.jsx("div",{className:"absolute inset-y-0",style:{left:et,width:1,background:"rgba(59,130,246,0.9)"}})}),E.map(X=>r.jsxs("div",{className:"relative",style:{height:J+6},children:[p!=="night"&&r.jsx("div",{className:"absolute inset-y-0 left-0 right-0 pointer-events-none",style:{backgroundImage:`repeating-linear-gradient(to right, ${T} 0, ${T} ${d}%, ${V} ${d}%, ${V} ${d*2}%)`,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}}),C.filter(Y=>Y.person===X).sort((Y,se)=>Oe(Y.start)-Oe(se.start)).map((Y,se,Ee)=>{const xe=S.some(we=>we.person===X&&a>=Dn(we.startDate)&&a<=Dn(we.endDate)),He=Oe(Y.start),ct=Oe(Y.end),zt=ct>He?ct:1440,de=He/1440*100,Pe=Math.max(.5,(zt-He)/1440*100),ne=Ie.get(X)??0,lt=`hsla(${ne},75%,70%,0.95)`,pt=`hsla(${ne},60%,28%,0.95)`,St=`hsl(${ne},70%,55%)`,wt=g?"rgba(120,120,120,0.4)":"rgba(180,180,180,0.85)",Wt=g?"rgba(160,160,160,0.55)":"rgba(160,160,160,0.5)",Ht=zt-He,ft=p==="night",Tt=p==="noir";let Qt=xe?wt:g?pt:lt,Ut=xe?Wt:g?St:`hsl(${ne},65%,50%)`;ft?(Qt="#000",Ut="rgba(239,68,68,0.55)"):Tt&&(Qt="#000",Ut="rgba(255,255,255,0.35)");const at=(Array.isArray(Y.segments)?Y.segments:[]).slice().sort((we,rt)=>we.startOffsetMin-rt.startOffsetMin),Vt=at.map(we=>{const rt=Ye.get(we.taskId),vt=He+Math.max(0,Math.min(Ht,we.startOffsetMin)),nt=He+Math.max(0,Math.min(Ht,we.startOffsetMin+we.durationMin));return`${rt?.name||"Task"}: ${Nt(vt)}${Nt(nt)}`}),_t=`${Y.person}  ${Y.start}-${Y.end}`+(Vt.length?`

Tasks:
${Vt.join(`
`)}`:""),At=C.some(we=>we!==Y&&we.person===X&&(()=>{const rt=He,vt=zt,nt=Oe(we.start),jt=Oe(we.end),Mt=jt>Oe(we.start)?jt:1440;return rt<Mt&&vt>nt})()),tt=At?g?"inset 0 0 0 2px rgba(255,0,0,0.6)":"inset 0 0 0 2px rgba(255,0,0,0.7)":void 0,Rt=ve.id===Y.id;return r.jsxs("div",{className:"relative",title:_t+(At?`

Warning: overlaps another shift.`:""),onMouseEnter:()=>gt({id:Y.id,x:0}),onMouseLeave:()=>gt({id:null,x:0}),onMouseMove:we=>{const vt=we.currentTarget.getBoundingClientRect(),nt=we.clientX-vt.left,jt=Math.max(8,Math.min(nt,vt.width-8));gt(Mt=>Mt.id===Y.id?{id:Y.id,x:jt}:Mt)},children:[(()=>{let we,rt=!1;if(p==="prism"&&!xe){rt=!0;const nt=(ne+20)%360;we=`linear-gradient(90deg, hsl(${nt} 88% 62% / 0.78), hsl(${(nt+50)%360} 84% 58% / 0.74), hsl(${(nt+100)%360} 82% 62% / 0.78))`}xe&&(we=`linear-gradient(0deg, ${g?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 0%, ${g?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 100%)`);const vt={left:`${de}%`,width:`${Pe}%`,top:2,height:J,backgroundColor:Qt,boxShadow:`inset 0 0 0 1px ${Ut}`+(tt?`, ${tt}`:""),borderRadius:F,...we?{backgroundImage:we}:{},...rt?{backgroundColor:"rgba(0,0,0,0.08)",backgroundBlendMode:"multiply"}:{},...rt?{backgroundSize:"300% 100%",animation:"prismChip 10s linear infinite",animationDelay:`${ne%60/30}s`}:{},transition:"filter 100ms ease, box-shadow 100ms ease",...Rt?{filter:"brightness(1.06)"}:{}};return r.jsx("div",{className:"absolute",style:vt})})(),at.map(we=>{const rt=Math.max(0,Math.min(Ht,we.startOffsetMin)),vt=Math.max(0,Math.min(Ht,we.startOffsetMin+we.durationMin));if(vt<=rt)return null;const nt=(He+rt)/1440*100,jt=(vt-rt)/1440*100,Zt=Ye.get(we.taskId)?.color||(g?St:`hsl(${ne},65%,50%)`),Jt=p==="prism"?`linear-gradient(90deg,
                              color-mix(in oklab, ${Zt} 85%, #000 15%) 0%,
                              color-mix(in oklab, ${Zt} 65%, #000 35%) 50%,
                              color-mix(in oklab, ${Zt} 85%, #000 15%) 100%
                            )`:ft?"repeating-linear-gradient(135deg, rgba(239,68,68,0.28) 0 6px, transparent 6px 14px)":Tt?"repeating-linear-gradient(135deg, rgba(255,255,255,0.16) 0 6px, transparent 6px 14px)":`repeating-linear-gradient(135deg, color-mix(in oklab, ${Zt} 40%, ${g?"#0a0a0a":"#ffffff"} 60%) 0 6px, transparent 6px 14px)`,gn={left:`${nt}%`,width:`${jt}%`,top:2,height:J,backgroundImage:Jt,...p==="prism"?{backgroundSize:"300% 100%",animation:"prismChip 12s ease-in-out infinite",backgroundBlendMode:"multiply"}:{},pointerEvents:"none",borderRadius:F,opacity:p==="prism"?.7:ft?.35:Tt?.25:.45};return r.jsx("div",{className:"absolute",style:gn},we.id)}),r.jsx("div",{className:"absolute pointer-events-none",style:{left:`${de}%`,top:2,width:`${Pe}%`,height:J,boxShadow:`inset 0 0 0 1px ${Ut}`+(tt?`, ${tt}`:"")+(Rt?`, 0 0 0 2px ${Ut}, 0 6px 16px rgba(0,0,0,${g?.5:.25})`:""),borderRadius:F,zIndex:5,transition:"box-shadow 100ms ease"}}),(()=>{const we=v>0?v/1440:0,nt=Ht*we>=60,jt=p==="prism"&&!xe;return r.jsx("div",{className:["absolute flex items-center justify-center px-2 truncate pointer-events-none",xe?"text-neutral-500":jt?"text-white":""].join(" "),style:{left:`${de}%`,top:2,width:`${Pe}%`,height:J,fontSize:Fe,...jt?{textShadow:"0 1px 1px rgba(0,0,0,0.7), 0 0 6px rgba(0,0,0,0.35)"}:{},transition:"filter 100ms ease",...Rt&&!jt?{filter:"brightness(1.02)"}:{}},children:nt?(X||"").split(" ")[0]||X:""})})(),ve.id===Y.id&&r.jsxs("div",{className:["absolute z-40 px-2 py-1 rounded-md text-xs shadow-lg border",g?"bg-neutral-900/95 border-neutral-700 text-neutral-100":"bg-white/95 border-neutral-300 text-neutral-900"].join(" "),style:{left:ve.x,top:2,transform:"translate(-50%, calc(-100% - 6px))"},role:"tooltip",children:[r.jsx("div",{className:"font-semibold mb-1",children:X}),r.jsxs("div",{className:g?"text-neutral-300":"text-neutral-700",children:["Shift: ",Y.start,"",Y.end]}),(()=>{const we=oe(X);if(!we||!we.tzId)return null;const rt=Le.get(we.tzId)??0,vt=K.offset,nt=(rt-vt)*60,jt=Se(Y.day),Mt=Se(Y.endDay||Y.day),Zt=(jt<0?0:jt)*1440+Oe(Y.start);let Jt=(Mt<0?jt:Mt)*1440+(Y.end==="24:00"?1440:Oe(Y.end));Jt<=Zt&&(Jt+=1440);const gn=Zt+nt,fn=Jt+nt,br=it[(Math.floor(gn/1440)%7+7)%7],cr=it[(Math.floor(fn/1440)%7+7)%7],an=(gn%1440+1440)%1440,dr=(fn%1440+1440)%1440;return r.jsxs("div",{className:g?"text-neutral-300":"text-neutral-700",children:["Local: ",br," ",Nt(an),"",cr," ",Nt(dr)," ",r.jsxs("span",{className:"opacity-70",children:["(",fl(we.tzId),")"]})]})})(),at.length>0&&r.jsx("div",{className:"mt-1",children:r.jsx("ul",{className:"space-y-0.5",children:at.map(we=>{const rt=Ye.get(we.taskId),vt=rt?.color||(g?St:`hsl(${ne},65%,50%)`),nt=Nt(He+Math.max(0,Math.min(Ht,we.startOffsetMin))),jt=Nt(He+Math.max(0,Math.min(Ht,we.startOffsetMin+we.durationMin)));return r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-3 h-3 rounded-sm border",style:{background:vt,borderColor:vt}}),r.jsxs("span",{className:"truncate",children:[r.jsx("span",{className:"font-medium",children:rt?.name||"Task"}),r.jsxs("span",{className:"ml-1 "+(g?"text-neutral-300":"text-neutral-700"),children:[nt,"",jt]})]})]},we.id)})})})]}),L&&ue&&r.jsx("button",{onClick:we=>{we.stopPropagation(),ue(Y.id)},title:"Delete shift",className:"absolute -top-1 w-4 h-4 rounded-full leading-[14px] text-[12px] text-center border bg-white/90 hover:bg-white",style:{left:`calc(${de}% + ${Pe}% - 8px)`},children:""})]},Y.id)})]},X))]})]})}function Qf({dark:a,tz:y,dayKey:c,shifts:C,pto:S}){const[g,K]=ae.useState(Date.now());ae.useEffect(()=>{let h,v;const M=()=>K(Date.now()),p=()=>{v&&clearInterval(v),h&&clearTimeout(h);const P=6e4-Date.now()%6e4;h=window.setTimeout(()=>{M(),v=window.setInterval(M,6e4)},P)},A=()=>{document.visibilityState==="visible"&&(M(),p())};return M(),p(),document.addEventListener("visibilitychange",A),()=>{v&&clearInterval(v),h&&clearTimeout(h),document.removeEventListener("visibilitychange",A)}},[]);const z=wr(y.id),L=z.minutes,ue=z.ymd,te=ae.useMemo(()=>{const h=new Set;for(const v of S||[])v.startDate<=ue&&ue<=v.endDate&&h.add(v.person);return h},[S,ue]),U=ae.useMemo(()=>{const h=new Map;return C.forEach(v=>{const M=h.get(v.person),p=Oe(v.start);(M==null||p<M)&&h.set(v.person,p)}),Array.from(h.entries()).sort((v,M)=>v[1]-M[1]||v[0].localeCompare(M[0])).map(([v])=>v)},[C]),Q=ae.useMemo(()=>{const h=new Map,v=Math.max(1,U.length);return U.forEach((M,p)=>{const A=Math.round(p/v*360);h.set(M,A)}),h},[U]),G=ae.useMemo(()=>{const h=C.filter(M=>{if(te.has(M.person))return!1;const p=Oe(M.start),A=Oe(M.end),O=A>p?A:1440;return L>=p&&L<O}),v=new Map;for(const M of h){const p=Oe(M.start),A=Oe(M.end),O=A>p?A:1440,P=v.get(M.person);(!P||O<P.end)&&v.set(M.person,{start:p,end:O,label:`${M.start}${M.end}`})}return Array.from(v.entries()).sort((M,p)=>M[1].end-p[1].end||M[0].localeCompare(p[0])).map(([M,p])=>({person:M,window:p.label,end:p.end}))},[C,L]),Z=h=>{const v=Math.floor(h/60),M=h%60;return v>0&&M>0?`${v}h ${M}m`:v>0?`${v}h`:M>0?`${M}m`:"ending now"};return r.jsxs("section",{className:["rounded-2xl p-3 prism-surface-2 border",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsxs("h2",{className:"text-base font-semibold",children:["On deck",r.jsxs("span",{className:["ml-2 text-sm",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",G.length,")"]})]}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",Nt(L)]})]}),G.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on right now."}):r.jsx("ul",{className:"space-y-1",children:G.map(h=>{const v=Q.get(h.person)??0,M=a?28:82,p=a?.22:.35,A=a?.1:.18,O=a?40:62,P=a?50:48,De={background:`linear-gradient(90deg, hsla(${v},70%,${M}%,${p}) 0%, hsla(${v},70%,${M}%,${A}) 100%)`,borderColor:`hsl(${v},70%,${O}%)`,borderLeftColor:`hsl(${v},70%,${P}%)`,borderLeftWidth:6,borderStyle:"solid"},je=Math.max(0,h.end-L);return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:De,children:[r.jsx("span",{className:"font-medium",children:h.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[h.window," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:[" ",Z(je)," left"]})]})]},h.person)})})]})}function Xf({dark:a,tz:y,dayKey:c,shifts:C,pto:S,windowMin:g=120}){const[K,z]=ae.useState(Date.now());ae.useEffect(()=>{let M,p;const A=()=>z(Date.now()),O=()=>{p&&clearInterval(p),M&&clearTimeout(M);const je=6e4-Date.now()%6e4;M=window.setTimeout(()=>{A(),p=window.setInterval(A,6e4)},je)},P=()=>{document.visibilityState==="visible"&&(A(),O())};return A(),O(),document.addEventListener("visibilitychange",P),()=>{p&&clearInterval(p),M&&clearTimeout(M),document.removeEventListener("visibilitychange",P)}},[]);const L=wr(y.id),ue=L.minutes,te=ue+g,U=L.ymd,Q=ae.useMemo(()=>{const M=new Set;for(const p of S||[])p.startDate<=U&&U<=p.endDate&&M.add(p.person);return M},[S,U]),G=ae.useMemo(()=>{const M=new Map;return C.forEach(p=>{const A=M.get(p.person),O=Oe(p.start);(A==null||O<A)&&M.set(p.person,O)}),Array.from(M.entries()).sort((p,A)=>p[1]-A[1]||p[0].localeCompare(A[0])).map(([p])=>p)},[C]),Z=ae.useMemo(()=>{const M=new Map,p=Math.max(1,G.length);return G.forEach((A,O)=>{const P=Math.round(O/p*360);M.set(A,P)}),M},[G]),h=ae.useMemo(()=>{const M=C.filter(A=>{if(Q.has(A.person))return!1;const O=Oe(A.start);return O>ue&&O<=te}),p=new Map;for(const A of M){const O=Oe(A.start),P=p.get(A.person);(!P||O<P.start)&&p.set(A.person,{start:O,label:A.start})}return Array.from(p.entries()).sort((A,O)=>A[1].start-O[1].start||A[0].localeCompare(O[0])).map(([A,O])=>({person:A,at:O.label,start:O.start}))},[C,ue,te]),v=M=>{const p=Math.max(0,M),A=Math.floor(p/60),O=p%60;return A>0&&O>0?`${A}h ${O}m`:A>0?`${A}h`:O>0?`${O}m`:"now"};return r.jsxs("section",{className:["rounded-2xl p-3 prism-surface-3 border",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsxs("h2",{className:"text-base font-semibold",children:["Up next",r.jsxs("span",{className:["ml-2 text-sm",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",h.length,")"]})]}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["within 2 hours of ",Nt(ue)]})]}),h.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming starts in this window."}):r.jsx("ul",{className:"space-y-1",children:h.map(M=>{const p=Z.get(M.person)??0,A=a?28:82,O=a?.22:.35,P=a?.1:.18,De=a?40:62,je=a?50:48,$e={background:`linear-gradient(90deg, hsla(${p},70%,${A}%,${O}) 0%, hsla(${p},70%,${A}%,${P}) 100%)`,borderColor:`hsl(${p},70%,${De}%)`,borderLeftColor:`hsl(${p},70%,${je}%)`,borderLeftWidth:6,borderStyle:"solid"},We=Math.max(0,M.start-ue);return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:$e,children:[r.jsx("span",{className:"font-medium",children:M.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[M.at," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:[" in ",v(We)]})]})]},M.person)})})]})}function Yf({dark:a,tz:y,dayKey:c,shifts:C,tasks:S}){const[g,K]=ae.useState(Date.now());ae.useEffect(()=>{let Z,h;const v=()=>K(Date.now()),M=()=>{h&&clearInterval(h),Z&&clearTimeout(Z);const O=6e4-Date.now()%6e4;Z=window.setTimeout(()=>{v(),h=window.setInterval(v,6e4)},O)},p=()=>{document.visibilityState==="visible"&&(v(),M())};return v(),M(),document.addEventListener("visibilitychange",p),()=>{h&&clearInterval(h),Z&&clearTimeout(Z),document.removeEventListener("visibilitychange",p)}},[]);const L=wr(y.id).minutes,ue=ae.useMemo(()=>{const Z=new Map;return S.forEach(h=>Z.set(h.id,h)),Z},[S]),te=ae.useMemo(()=>{const Z=[];for(const h of C){if(!Array.isArray(h.segments)||h.segments.length===0)continue;const v=Oe(h.start);for(const M of h.segments){const p=v+M.startOffsetMin,A=p+M.durationMin;Z.push({taskId:M.taskId,person:h.person,start:p,end:A})}}return Z.sort((h,v)=>h.start-v.start||h.end-v.end||h.person.localeCompare(v.person))},[C]),U=ae.useMemo(()=>{const Z=new Map;for(const h of te){const v=Z.get(h.taskId)||{onNow:[],nextOne:null};h.start<=L&&L<h.end?v.onNow.push(h):h.start>L&&(!v.nextOne||h.start<v.nextOne.start)&&(v.nextOne=h),Z.set(h.taskId,v)}for(const[h,v]of Z)v.onNow.sort((M,p)=>M.end-p.end||M.person.localeCompare(p.person)),Z.set(h,v);return Z},[te,L]),Q=Array.from(U.entries()).filter(([Z,h])=>(h.onNow.length>0||h.nextOne)&&ue.has(Z));Q.sort((Z,h)=>(Z[1].onNow.length?0:1)-(h[1].onNow.length?0:1)||Z[0].localeCompare(h[0]));const G=Z=>{const h=Math.max(0,Z),v=Math.floor(h/60),M=h%60;return v>0&&M>0?`${v}h ${M}m`:v>0?`${v}h`:M>0?`${M}m`:"now"};return r.jsxs("section",{className:["rounded-2xl p-3",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[r.jsx("h2",{className:"text-base font-semibold",children:"Posture schedule today"}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",Nt(L)]})]}),Q.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No posture coverage configured today."}):r.jsx("div",{className:"space-y-3",children:Q.map(([Z,h])=>{const v=ue.get(Z),M=v.color||"#2563eb";return r.jsxs("div",{className:"rounded-lg p-2",style:{background:a?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)"},children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:M},"aria-hidden":!0}),r.jsx("div",{className:"font-medium",children:v.name})]}),r.jsxs("div",{className:["text-xs",a?"text-neutral-400":"text-neutral-500"].join(" "),children:[h.onNow.length>0&&r.jsxs("span",{children:["on now ",`(${h.onNow.length})`]}),h.onNow.length>0&&h.nextOne&&r.jsx("span",{className:"mx-1",children:""}),h.nextOne&&r.jsxs("span",{children:["next at ",Nt(h.nextOne.start)]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsx("div",{children:h.onNow.length===0?r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on now."}):r.jsx("ul",{className:"space-y-1",children:h.onNow.map(p=>{const A=Math.max(0,p.end-L),O={borderLeft:`6px solid ${M}`};return r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md px-2 py-1",style:O,children:[r.jsx("span",{className:"font-medium",children:p.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[Nt(p.start),"",Nt(p.end)," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:[" ",G(A)," left"]})]})]},`${Z}-now-${p.person}-${p.start}`)})})}),r.jsx("div",{children:h.nextOne?(()=>{const p=h.nextOne,A=Math.max(0,p.start-L),O={borderLeft:`6px solid ${M}`};return r.jsx("ul",{className:"space-y-1",children:r.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md px-2 py-1",style:O,children:[r.jsx("span",{className:"font-medium",children:p.person}),r.jsxs("span",{className:a?"text-neutral-300":"text-neutral-700",children:[Nt(p.start)," ",r.jsxs("span",{className:a?"text-neutral-400":"text-neutral-500",children:[" in ",G(A)]})]})]},`${Z}-up-${p.person}-${p.start}`)})})():r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming today."})})]})]},Z)})})]})}function Jf({dark:a,tz:y,weekStart:c,agent:C,shifts:S,pto:g,tasks:K,calendarSegs:z,agents:L}){const te=a?"text-neutral-400":"text-neutral-500",Q=(()=>{const[q,ce]=ae.useState(typeof window<"u"?window.innerWidth:1280);return ae.useEffect(()=>{const W=()=>ce(window.innerWidth);return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]),q})(),G=Q>=1024?"lg":Q>=768?"md":Q>=640?"sm":"xs",Z=G==="lg"?1:G==="md"?.9:G==="sm"?.82:.75,h=G==="lg"?80:G==="md"?76:G==="sm"?70:66,v=Math.round(60*Z),M=Math.max(9,Math.round(11*Z)),p=Math.max(11,Math.round(12*Z)),A=12,O=Math.max(9,Math.round(10*Z)),P=Math.max(20,Math.round(24*Z)),De=G==="lg"?2:G==="md"?3:4,je=120,$e=q=>(q-je+1440)%1440/1440*100,We=Math.max(1,Math.round(24/De)),Ne=`${h}px`,ye=Math.round(30*Z),Re=Math.max(12,Math.round(16*Z)),ie=Dn(c),Fe=ae.useMemo(()=>Array.from({length:7},(q,ce)=>{const W=jr(ie,ce);return{key:it[ce],date:W,ymd:dn(W)}}),[c]),Ve=ae.useMemo(()=>Ts(S,y.offset).filter(q=>q.person===C),[S,y.offset,C]),J=ae.useMemo(()=>{const q=new Map;for(const ce of it)q.set(ce,[]);for(const ce of Ve)q.get(ce.day).push(ce);for(const[ce,W]of q)W.sort((ee,Te)=>Oe(ee.start)-Oe(Te.start));return q},[Ve]),F=ae.useMemo(()=>{let q=0;for(const ce of C)q=(q+ce.charCodeAt(0))%360;return q},[C]),[k,T]=ae.useState(Date.now());ae.useEffect(()=>{const q=setInterval(()=>T(Date.now()),3e4);return()=>clearInterval(q)},[]);const V=wr(y.id),d=$e(V.minutes),E=V.weekdayShort,Ie=`hsla(${F},75%,70%,0.95)`,ke=`hsla(${F},60%,28%,0.95)`,Xe=`hsl(${F},70%,55%)`,Ce=ae.useMemo(()=>{const q=new Map;for(const ce of K||[])q.set(ce.id,ce);return q},[K]);return r.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",children:[r.jsxs("div",{className:"grid sticky top-0 z-30",style:{gridTemplateColumns:`${Ne} 1fr`},children:[r.jsx("div",{className:a?"bg-neutral-900":"bg-white"}),r.jsx("div",{className:["relative",a?"bg-neutral-900":"bg-white"].join(" "),style:{height:v},children:r.jsx("div",{className:"absolute left-0 right-0",style:{top:ye,height:Re},children:Array.from({length:We},(q,ce)=>ce).map(q=>{const ce=(2+q*De)%24;return r.jsx("div",{className:"absolute text-left pl-1 leading-none pointer-events-none",style:{left:`calc(${q} * (100% / ${We}))`,width:`calc(100% / ${We})`},children:r.jsxs("div",{className:["hour-label font-normal opacity-70",te].join(" "),style:{fontSize:M},children:[ce===0?12:ce>12?ce-12:ce,ce<12?"am":"pm"]})},q)})})})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"absolute inset-y-0 right-0 z-20 pointer-events-none",style:{left:Ne},children:[r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",a?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${d}%`}}),r.jsx("div",{className:["absolute -translate-x-1/2 -top-5 px-1.5 py-0.5 rounded-md shadow-sm",a?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${d}%`,fontSize:O},children:Nt(V.minutes)})]}),Fe.map(q=>{const ce=(J.get(q.key)||[]).map(ee=>{const Te=(z||[]).filter(ve=>ee.agentId&&ve.agentId===ee.agentId||ve.person===C).flatMap(ve=>!ve.endDay||ve.endDay===ve.day?[ve]:[{...ve,day:ve.day,start:ve.start,end:"24:00"},{...ve,day:ve.endDay,start:"00:00",end:ve.end}]).filter(ve=>ve.day===q.key).map(ve=>({taskId:ve.taskId,start:ve.start,end:ve.end})),Ye=sa(ee,Te);return Ye&&Ye.length>0?{...ee,segments:Ye}:ee}),W=q.key===E;return r.jsxs("div",{className:"grid",style:{gridTemplateColumns:`${Ne} 1fr`},children:[r.jsx("div",{className:["py-1.5 pr-2 font-medium sticky left-0 z-20 truncate",a?"bg-neutral-900":"bg-white"].join(" "),style:{fontSize:p},children:r.jsx("span",{className:W?a?"text-red-400":"text-red-600":void 0,children:q.key})}),r.jsx("div",{className:"relative",style:{backgroundImage:`linear-gradient(to right, ${a?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 0, ${a?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 50%, ${a?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 50%, ${a?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 100%)`,backgroundSize:`calc(100%/${We}) 100%`,backgroundRepeat:"repeat-x",backgroundPosition:"0 0"},children:ce.map(ee=>{const Te=ur(L||[],ee.agentId,ee.person),Ye=Oe(ee.start),ve=Oe(ee.end),gt=ve>Ye?ve:1440,et=(Ye-je+1440)%1440,ut=(gt-je+1440)%1440,j=[];ut>et?j.push({leftPct:et/1440*100,widthPct:Math.max(.5,(ut-et)/1440*100)}):(j.push({leftPct:et/1440*100,widthPct:Math.max(.5,(1440-et)/1440*100)}),ut>0&&j.push({leftPct:0,widthPct:Math.max(.5,ut/1440*100)}));const I=gt-Ye,Le=a?ke:Ie,oe=a?Xe:`hsl(${F},65%,50%)`,Se=(Array.isArray(ee.segments)?ee.segments:[]).slice().sort((xe,He)=>xe.startOffsetMin-He.startOffsetMin),X=[];let Y=0;for(const xe of Se){const He=Math.max(0,Math.min(I,xe.startOffsetMin)),ct=Math.max(0,Math.min(I,xe.startOffsetMin+xe.durationMin));if(He>Y){const zt=Ye+Y,de=Ye+He;X.push({kind:"base",startOff:Y,len:He-Y,color:Le,title:`${ee.person}  ${Nt(zt)}${Nt(de)}`,key:`gap-${Y}`})}if(ct>He){const zt=Ce.get(xe.taskId),de=Ye+He,Pe=Ye+ct,ne=zt?.color||oe,lt=`color-mix(in oklab, ${ne} 42%, ${a?"#0a0a0a":"#ffffff"} 58%)`,pt=`color-mix(in oklab, ${ne} 70%, ${a?"#ffffff":"#000000"} 30%)`;X.push({kind:"seg",startOff:He,len:ct-He,color:lt,border:pt,title:`${zt?.name||"Task"}  ${Nt(de)}${Nt(Pe)}`,key:`seg-${xe.id}`})}Y=Math.max(Y,ct)}if(Y<I){const xe=Ye+Y,He=gt;X.push({kind:"base",startOff:Y,len:I-Y,color:Le,title:`${ee.person}  ${Nt(xe)}${Nt(He)}`,key:`gap-${Y}`})}const se=X.filter(xe=>xe.kind==="seg").map(xe=>xe.title.replace(/^.*  /,"")),Ee=`${Te}  ${ee.start}-${ee.end}`+(se.length?`

Tasks:
${se.join(`
`)}`:"");return r.jsxs("div",{className:"relative",title:Ee,children:[X.map(xe=>{const He=Ye+xe.startOff,ct=He+xe.len,zt=(He-je+1440)%1440,de=(ct-je+1440)%1440,Pe=[];if(de>zt)Pe.push({leftPct:zt/1440*100,widthPct:xe.len/1440*100,key:`one-${xe.key}`});else{const lt=1440-zt,pt=xe.len-lt;Pe.push({leftPct:zt/1440*100,widthPct:lt/1440*100,key:`wrapA-${xe.key}`}),pt>0&&Pe.push({leftPct:0,widthPct:pt/1440*100,key:`wrapB-${xe.key}`})}const ne=xe.kind==="seg"&&xe.border?xe.border:oe;return Pe.map(lt=>r.jsx("div",{className:"absolute rounded",style:{left:`${lt.leftPct}%`,width:`${lt.widthPct}%`,height:P,backgroundColor:xe.color,boxShadow:`inset 0 0 0 1px ${ne}`},title:xe.title},lt.key))}),j.length>0&&r.jsxs("div",{className:"absolute flex items-center justify-center px-2 truncate pointer-events-none",style:{left:`${j[0].leftPct}%`,width:`${j[0].widthPct}%`,height:P,fontSize:A},children:[ee.start,"-",ee.end]})]},`${ee.person}-${ee.day}-${ee.start}-${ee.end}`)})})]},q.key)})]})]})}function Gf({dark:a,weekStart:y,dayIndex:c,setDayIndex:C,shifts:S,pto:g,tasks:K,calendarSegs:z,tz:L,canEdit:ue,editMode:te,onRemoveShift:U,agents:Q,slimline:G}){const Z=Dn(y),h=jr(Z,c),v=it[c],M=ae.useMemo(()=>{const J=new Set;for(const F of Q||[]){const k=[F.firstName||"",F.lastName||""].filter(Boolean).join(" ").trim();k&&F.hidden&&J.add(k)}return J},[Q]),p=ae.useMemo(()=>ra(S,v,L.offset).sort((T,V)=>Oe(T.start)-Oe(V.start)).filter(T=>!M.has(T.person)).map(T=>{const V=z.filter(E=>E.day===v&&(T.agentId&&E.agentId===T.agentId||E.person===T.person)).map(E=>({taskId:E.taskId,start:E.start,end:E.end})),d=sa(T,V);return d&&d.length>0?{...T,segments:d}:T}),[S,v,L.offset,z,M]),A=ae.useMemo(()=>Array.from(new Set(p.map(J=>J.person))),[p]),O=ae.useMemo(()=>Array.from(new Set(S.map(F=>F.person))).sort().filter(F=>!M.has(F)),[S,M]),[P,De]=ae.useState(""),[je,$e]=ae.useState(!1),We=w.useRef(null);ae.useEffect(()=>{if(!je)return;const J=k=>{const T=k.target;We.current&&!We.current.contains(T)&&$e(!1)},F=k=>{k.key==="Escape"&&$e(!1)};return document.addEventListener("mousedown",J),document.addEventListener("keydown",F),()=>{document.removeEventListener("mousedown",J),document.removeEventListener("keydown",F)}},[je]),ae.useEffect(()=>{$e(!1)},[P,c]);const ye=wr(L.id).weekdayShort,Re=ae.useMemo(()=>ra(S,ye,L.offset).sort((k,T)=>Oe(k.start)-Oe(T.start)).filter(k=>!M.has(k.person)).map(k=>{const T=z.filter(d=>d.day===ye&&(k.agentId&&d.agentId===k.agentId||d.person===k.person)).map(d=>({taskId:d.taskId,start:d.start,end:d.end})),V=sa(k,T);return V&&V.length>0?{...k,segments:V}:k}),[S,ye,L.offset,z,M]),[ie,Fe]=ae.useState(()=>{const J=wr(L.id),F=J.h%12||12,k=`${String(F).padStart(2,"0")}:${String(J.m).padStart(2,"0")}`,T=J.h>=12?"PM":"AM";return{hhmm:k,ampm:T}});ae.useEffect(()=>{let J,F;const k=()=>{const d=wr(L.id),E=d.h%12||12,Ie=`${String(E).padStart(2,"0")}:${String(d.m).padStart(2,"0")}`,ke=d.h>=12?"PM":"AM";Fe({hhmm:Ie,ampm:ke})},T=()=>{F&&clearInterval(F),J&&clearTimeout(J);const E=6e4-Date.now()%6e4;J=window.setTimeout(()=>{k(),F=window.setInterval(k,6e4)},E)},V=()=>{document.visibilityState==="visible"&&(k(),T())};return k(),T(),document.addEventListener("visibilitychange",V),()=>{F&&clearInterval(F),J&&clearTimeout(J),document.removeEventListener("visibilitychange",V)}},[L.id]);function Ve(J){return J.getDate()}return r.jsxs("section",{className:["rounded-2xl p-2 prism-surface-1",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2 gap-2",children:[r.jsxs("div",{className:"flex items-baseline gap-2 sm:gap-3 pl-2 order-1",children:[r.jsxs("div",{className:["text-neutral-600","leading-none","text-[1.3rem] sm:text-[1.5rem]"].join(" "),style:{whiteSpace:"nowrap"},children:[h.toLocaleDateString(void 0,{month:"short"})," ",Ve(h)]}),r.jsx("div",{className:["font-bold tabular-nums now-pop leading-none","text-[1.45rem] sm:text-[1.6rem]",a?"text-neutral-300":"text-neutral-700"].join(" "),children:ie.hhmm},ie.hhmm),r.jsxs("div",{className:"flex items-baseline gap-1 leading-none",children:[r.jsx("span",{className:["uppercase tracking-wide",a?"text-neutral-400":"text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:ie.ampm}),r.jsx("span",{className:["uppercase tracking-wide","text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:fl(L.id)})]})]}),P&&r.jsxs("div",{className:"pl-2 font-semibold text-xl sm:text-2xl order-3 sm:order-2",children:[P," ",r.jsxs("span",{className:"opacity-70",children:["Week of ",ta(Z)]})]}),r.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 order-2 sm:order-3 w-full sm:w-auto justify-start sm:justify-end",children:[!P&&r.jsx("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:r.jsx("div",{className:"inline-flex gap-1.5 sm:gap-2 whitespace-nowrap pr-0.5 sm:pr-1",children:it.map((J,F)=>{const k=J===ye,T="px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-xl text-xs sm:text-sm border",V=F===c?a?"bg-neutral-800 border-neutral-600 text-white":"bg-blue-600 border-blue-600 text-white":a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100",d=k?a?"text-red-400":"text-red-600":"";return r.jsx("button",{onClick:()=>C(F),className:[T,V,d].filter(Boolean).join(" "),children:J},J)})})}),r.jsxs("div",{className:"relative",ref:We,children:[r.jsx("button",{"aria-label":"Choose agent",title:P?`Agent: ${P}`:"Choose agent",onClick:()=>$e(J=>!J),className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),r.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),je&&r.jsxs("div",{className:["absolute right-0 mt-2 w-56 sm:w-64 max-w-[calc(100vw-2rem)] sm:max-w-none rounded-xl p-2 border shadow-lg z-50 max-h-[18rem] overflow-auto",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-xs font-medium px-2 pb-1",children:"Agents"}),r.jsx("button",{onClick:()=>{De(""),$e(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",a?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:"All"}),O.map(J=>r.jsx("button",{onClick:()=>{De(J),$e(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",J===P?a?"bg-neutral-800":"bg-neutral-100":a?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:J},J))]})]}),!P&&r.jsx("button",{"aria-label":G?"Show off-duty agents":"Hide off-duty agents",title:G?"Show off-duty agents":"Hide off-duty agents",onClick:()=>{const J=!G;try{localStorage.setItem("schedule_slimline",J?"1":"0")}catch{}window.dispatchEvent(new CustomEvent("schedule:set-slimline",{detail:{value:J}}))},"aria-pressed":!!G,className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",a?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:G?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),r.jsx("path",{d:"M1 1l22 22"}),r.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]}):r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})})]})]}),!P&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"pl-1",children:(()=>{const J=ta(h)===ta(Dn(wr(L.id).ymd)),F=!G||!J?p:(()=>{const T=wr(L.id),V=it.indexOf(v)*1440+T.minutes,d=T.ymd;return p.filter(E=>{if(g.some(ee=>ee.person===E.person&&ee.startDate<=d&&d<=ee.endDate))return!1;const ke=it.indexOf(E.day),Xe=it.indexOf(E.endDay||E.day),Ce=(ke<0?0:ke)*1440+Oe(E.start);let q=(Xe<0?ke:Xe)*1440+(E.end==="24:00"?1440:Oe(E.end));q<=Ce&&(q+=1440);const ce=V>=Ce&&V<q,W=Ce>V&&Ce<=V+120;return ce||W?V<=q+30:!1})})(),k=Array.from(new Set(F.map(T=>T.person)));return r.jsx(Kf,{date:h,dayKey:v,people:!G||!J?A:k,shifts:F,pto:G&&J?[]:g,dark:a,tz:L,canEdit:ue,editMode:te,showHeaderTitle:!1,tasks:K,agents:Q,onRemove:T=>{if(!ue){alert("Enter the password in Manage to enable editing.");return}U(T)}})})()}),r.jsx("div",{className:"pl-1 mt-2"})]}),P?r.jsx("div",{className:"mt-4",children:r.jsx(Jf,{dark:a,tz:L,weekStart:y,agent:P,shifts:S,pto:g,tasks:K,calendarSegs:z,agents:Q||[]})}):r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("div",{children:r.jsx(Qf,{dark:a,tz:L,dayKey:ye,shifts:Re,pto:g})}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx(Xf,{dark:a,tz:L,dayKey:ye,shifts:Re,pto:g}),r.jsx(Yf,{dark:a,tz:L,dayKey:ye,shifts:Re,tasks:K})]})]})]})}function Wi({checked:a,onChange:y,disabled:c,size:C="md",dark:S,className:g,ariaLabel:K}){const z=C==="sm"?"w-8":"w-10",L=C==="sm"?"h-4":"h-6",ue=C==="sm"?"w-3 h-3":"w-5 h-5",te=C==="sm"?"translate-x-4":"translate-x-5",U=S?"bg-neutral-700":"bg-neutral-300",Q="bg-blue-600",G=S?"ring-neutral-600":"ring-neutral-300";return r.jsx("button",{type:"button",role:"switch","aria-checked":a,"aria-label":K,disabled:c,onClick:()=>!c&&y(!a),className:["relative inline-flex items-center rounded-full transition-colors focus:outline-none focus:ring-2",z,L,a?Q:U,c?"opacity-50 cursor-not-allowed":"cursor-pointer","focus:ring-offset-0",G,g||""].join(" "),children:r.jsx("span",{className:["inline-block rounded-full bg-white shadow transform transition-transform",ue,"translate-x-1",a?te:""].join(" ")})})}function Zf({dark:a,deleteAllStep:y,setDeleteAllStep:c,selectedName:C,agentShiftsLocal:S,captureUndo:g,onDeleteShift:K}){return r.jsxs(r.Fragment,{children:[y===1&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete all shifts?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove all shifts for ",C,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>c(0),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:()=>c(2),className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Continue"})]})]})}),y===2&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Confirm delete all"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["Are you absolutely sure? This will permanently remove ",S.length," shift(s) for ",C,"."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>c(0),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:()=>{g(),S.map(L=>L.id).forEach(L=>K(L)),c(0)},className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete all"})]})]})})]})}function qf({dark:a,selectedName:y,firstName:c,lastName:C,tzId:S,isSupervisor:g,supervisorId:K,hidden:z,notes:L,agents:ue,selectedIdx:te,onFirst:U,onLast:Q,onTz:G,onIsSup:Z,onSupId:h,onHidden:v,onNotes:M,onSave:p,onDelete:A}){const O=P=>{switch(P){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return P||""}};return r.jsxs("div",{className:["rounded-md p-3 mb-3 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:["text-2xl font-semibold mb-2",z?a?"text-neutral-400":"text-neutral-500":a?"text-neutral-100":"text-neutral-900"].join(" "),children:y||"Select an agent"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"First name"}),r.jsx("input",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:c,onChange:P=>U(P.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Last name"}),r.jsx("input",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:C,onChange:P=>Q(P.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Timezone"}),r.jsx("select",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:S,onChange:P=>G(P.target.value),children:En.map(P=>r.jsx("option",{value:P.id,children:O(P.id)},P.id))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Reports to"}),r.jsxs("select",{className:["border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:K,onChange:P=>h(P.target.value),children:[r.jsx("option",{value:"",children:""}),ue.filter((P,De)=>!!P.isSupervisor&&De!==te).map(P=>{const De=`${P.firstName||""} ${P.lastName||""}`.trim(),je=P.id||De;return r.jsx("option",{value:je,children:De||je},je)})]})]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx(Wi,{ariaLabel:"Supervisor",dark:a,size:"md",checked:g,onChange:P=>Z(P)}),r.jsx("span",{children:"Supervisor"})]}),r.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[r.jsx(Wi,{ariaLabel:"Hidden",dark:a,size:"md",checked:z,onChange:P=>v(P)}),r.jsx("span",{children:"Hidden"})]})]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"opacity-70 mb-1",children:"Notes"}),r.jsx("textarea",{rows:10,className:["border rounded px-2 py-1 text-sm h-full",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:L,onChange:P=>M(P.target.value)})]})]}),r.jsxs("div",{className:"mt-2 flex gap-2",children:[r.jsx("button",{onClick:p,className:["px-3 py-1.5 rounded border text-sm font-medium",a?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:A,className:["px-3 py-1.5 rounded border text-sm",a?"border-neutral-700 text-red-300":"border-neutral-300 text-red-600"].join(" "),children:"Delete"})]})]})}function jd({dark:a,tz:y,weekStart:c,agent:C,shifts:S,pto:g,tasks:K,calendarSegs:z,agents:L,titlePrefix:ue,bandHeight:te,dayLabelFontPx:U,onDragAll:Q,onDragShift:G,draggable:Z=!0,showDayLabels:h=!0,showWeekLabel:v=!0,framed:M=!0,showNowLine:p=!0,showNowLabel:A=!0,showShiftLabels:O=!0,alwaysShowTimeTags:P=!1,forceOuterTimeTags:De=!1,highlightIds:je,showEdgeTimeTagsForHighlights:$e,selectedIds:We,onToggleSelect:Ne,avoidLabelOverlap:ye}){const Re=(()=>{try{return document.querySelector("[data-theme]")?.getAttribute("data-theme")||"system"}catch{return"system"}})(),ie=Re==="night",Fe=Re==="noir",Ve=Re==="prism";function J(de){let Pe=0;for(let ne=0;ne<de.length;ne++)Pe=(Pe<<5)-Pe+de.charCodeAt(ne),Pe|=0;return(Pe%360+360)%360}const F=10080,k=Dn(c),T=de=>it.indexOf(de),V=a?"text-neutral-400":"text-neutral-500",d=ae.useMemo(()=>Ts(S,y.offset).filter(de=>de.person===C),[S,y.offset,C]),E=ae.useMemo(()=>{const de=new Map;for(const ne of d){const lt=T(ne.day);if(lt<0)continue;const pt=lt*1440+Oe(ne.start);let St;if(ne.end==="24:00")St=(lt+1)*1440;else{const Vt=ne.endDay||ne.day;let _t=T(Vt);_t<0&&(_t=lt),St=_t*1440+Oe(ne.end),St<=pt&&(_t<lt?St+=7*1440:St+=1440)}const wt=Math.max(0,Math.min(F,pt)),Wt=Math.max(0,St);if(Wt<=wt)continue;const Ht=`${ne.day} ${ne.start}  ${ne.endDay||ne.day} ${ne.end}`,ft=Oe(ne.start),Tt=ne.end==="24:00"?0:Oe(ne.end);let Qt;try{const Vt=Math.max(0,St-pt),_t=(z||[]).filter(tt=>ne.agentId&&tt.agentId===ne.agentId||tt.person===C).flatMap(tt=>!tt.endDay||tt.endDay===tt.day?[tt]:[{...tt,day:tt.day,start:tt.start,end:"24:00"},{...tt,day:tt.endDay,start:"00:00",end:tt.end}]).filter(tt=>tt.day===ne.day).map(tt=>({taskId:tt.taskId,start:tt.start,end:tt.end})),At=sa({...ne},_t)||[];At&&At.length&&(Qt=At.map(tt=>{const Rt=Math.max(0,Math.min(Vt,tt.startOffsetMin)),we=Math.max(0,Math.min(Vt,tt.startOffsetMin+tt.durationMin));return{taskId:tt.taskId,stOff:Rt,enOff:we}}).filter(tt=>tt.enOff>tt.stOff))}catch{}const Ut={id:ne.id,startAbs:wt,endAbs:Wt,title:Ht,key:`${ne.person}-${ne.id}-${ne.day}-${ne.start}-${ne.end}`,sub:Qt,dayKey:ne.day},at=de.get(ne.id)||{id:ne.id,key:`${ne.person}-${ne.id}`,segs:[],earliest:1/0,latest:-1/0,title:Ht};at.segs.push(Ut),at.earliest=Math.min(at.earliest,wt),at.latest=Math.max(at.latest,Wt),at.title=Ht,ne.end==="24:00"&&(at.startMin=ft),ne.start==="00:00"&&(at.endMin=Tt),ne.end!=="24:00"&&ne.start!=="00:00"&&(at.startMin==null&&(at.startMin=ft),at.endMin==null&&(at.endMin=Tt)),de.set(ne.id,at)}const Pe=[];for(const[,ne]of de){ne.segs.sort((St,wt)=>St.startAbs-wt.startAbs);let lt=ne.startMin,pt=ne.endMin;lt==null&&ne.segs.length>0&&(lt=(ne.segs.reduce((wt,Wt)=>Wt.startAbs>wt.startAbs?Wt:wt,ne.segs[0]).startAbs%1440+1440)%1440),pt==null&&ne.segs.length>0&&(pt=(ne.segs.reduce((wt,Wt)=>Wt.endAbs>wt.endAbs?Wt:wt,ne.segs[0]).endAbs%1440+1440)%1440),Pe.push({id:ne.id,key:ne.key,segments:ne.segs,earliest:ne.earliest,latest:ne.latest,title:ne.title,startMin:lt,endMin:pt})}return Pe.sort((ne,lt)=>ne.earliest-lt.earliest),Pe},[d]),Ie=wr(y.id),ke=k,Xe=jr(k,7),Ce=new Date(Ie.y,(Ie.mo||1)-1,Ie.d||1),q=Ce>=ke&&Ce<Xe,W=(q?it.indexOf(Ie.weekdayShort)*1440+Ie.minutes:0)/F*100,ee=typeof te=="number"?te:28,Te=10,Ye=w.useRef(null),[ve,gt]=w.useState(null),et=30,[ut,j]=w.useState(0),[I,Le]=w.useState(!1),[oe,Se]=w.useState(null),X=w.useRef(!1);let Y=-1/0,se=-1/0;const Ee=48,xe=4;w.useEffect(()=>{const de=()=>{if(!Ye.current)return;const Pe=Ye.current.getBoundingClientRect();j(Pe.width)};return de(),window.addEventListener("resize",de),()=>window.removeEventListener("resize",de)},[]);const He=de=>{const Pe=Math.floor(de/60),ne=de%60,lt=Pe<12,pt=Pe%12||12,St=ne===0?"":ne===30?":30":`:${ne.toString().padStart(2,"0")}`;return`${pt}${St}${lt?"a":"p"}`},ct=de=>{if(!Z||!Ye.current)return;const Pe=Ye.current.getBoundingClientRect(),ne=F/Pe.width,lt=-1e9,pt=1e9;X.current=!1,gt({mode:"all",startX:de.clientX,pxToMin:ne,delta:0,minDelta:lt,maxDelta:pt})},zt=(de,Pe)=>{if(!Z||(Pe.stopPropagation(),!Ye.current))return;const ne=Ye.current.getBoundingClientRect(),lt=F/ne.width;if(!E.find(at=>at.id===de))return;let St;if(We){const at=We instanceof Set?new Set(We):new Set(We);at.add(de),St=at}else St=new Set([de]);const wt=St||new Set([de]),Wt=E.filter(at=>!wt.has(at.id)),Ht=F;let ft=1/0,Tt=-1/0;for(const at of E){if(!wt.has(at.id))continue;const Vt=at.earliest,_t=at.latest;let At=1/0,tt=-1/0;for(const Rt of Wt)for(const we of[-1,0,1]){const rt=Rt.earliest+we*Ht,vt=Rt.latest+we*Ht,nt=rt-_t;nt>=0&&(At=Math.min(At,nt));const jt=vt-Vt;jt<=0&&(tt=Math.max(tt,jt))}ft=Math.min(ft,At),Tt=Math.max(Tt,tt)}Number.isFinite(ft)||(ft=1e9),Number.isFinite(Tt)||(Tt=-1e9);const Qt=Tt,Ut=ft;X.current=!1,gt({mode:"single",id:de,selectedIds:St,startX:Pe.clientX,pxToMin:lt,delta:0,minDelta:Qt,maxDelta:Ut})};return w.useEffect(()=>{if(!ve)return;const de=ne=>{const lt=(ne.clientX-ve.startX)*ve.pxToMin,pt=Math.round(lt/et)*et,St=Math.max(ve.minDelta,Math.min(ve.maxDelta,pt));St!==0&&(X.current=!0),gt(wt=>wt&&{...wt,delta:St})},Pe=()=>{ve.delta!==0&&(ve.mode==="all"?Q?.(ve.delta):ve.mode==="single"&&ve.id&&G?.(ve.id,ve.delta)),window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Pe),gt(null)};return window.addEventListener("mousemove",de),window.addEventListener("mouseup",Pe),()=>{window.removeEventListener("mousemove",de),window.removeEventListener("mouseup",Pe)}},[ve,Q,G]),w.useEffect(()=>{const de=Pe=>{if(!Z||Pe.key!=="ArrowLeft"&&Pe.key!=="ArrowRight")return;const ne=oe,lt=I&&!oe;if(!ne&&!lt)return;Pe.preventDefault(),Pe.stopPropagation();const pt=Pe.key==="ArrowLeft"?-15:15;ne?G?.(ne,pt):lt&&Q?.(pt)};return window.addEventListener("keydown",de),()=>window.removeEventListener("keydown",de)},[Z,I,oe,Q,G]),r.jsxs("div",{className:"w-full",children:[h&&r.jsx("div",{className:"relative h-6",children:it.map((de,Pe)=>{const ne=Pe/7*100,lt=1/7*100;return r.jsx("div",{className:["absolute text-center",V].join(" "),style:{left:`${ne}%`,width:`${lt}%`,fontSize:typeof U=="number"?U:11},children:de},de)})}),r.jsx("div",{className:["relative",M?"rounded-md overflow-hidden":"",M?a?"bg-neutral-950":"bg-neutral-50":""].filter(Boolean).join(" "),style:{height:ee,overflow:"visible",marginBottom:0},children:r.jsxs("div",{ref:Ye,className:"absolute inset-y-0",style:{left:0,right:0,paddingLeft:M?6:0,paddingRight:M?6:0},onMouseDown:Z?ct:void 0,onMouseEnter:()=>Le(!0),onMouseLeave:()=>{Le(!1),Se(null)},children:[Array.from({length:7},(de,Pe)=>{const ne=Pe/7*100,lt=12/24*(100/7);return r.jsx("div",{className:"absolute inset-y-0",style:{left:`${ne}%`,width:`${lt}%`,background:a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"},"aria-hidden":!0},`am-${Pe}`)}),Array.from({length:8},(de,Pe)=>{const ne=Pe/7*100;return r.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${ne}%`,width:1,background:a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"}},`dayline-${Pe}`)}),Array.from({length:29},(de,Pe)=>Pe).map(de=>{const Pe=de/28*100;return r.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${Pe}%`,width:1,background:a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)"}},`h${de}`)}),E.map(de=>{const Pe=ve&&ve.mode==="all",ne=ve&&ve.mode==="single"&&ve.id===de.id,lt=ve&&ve.mode==="single"&&ve.selectedIds&&ve.selectedIds.has(de.id),pt=Pe||ne||lt?ve.delta:0,St=a?"rgba(59,130,246,0.64)":"rgba(59,130,246,0.625)",wt=ft=>(ft%1440+1440)%1440,Wt=wt(de.startMin+pt),Ht=wt(de.endMin+pt);return de.segments.flatMap(ft=>{const Tt=ft.startAbs+pt,Qt=ft.endAbs+pt,Ut=Math.max(0,Qt-Tt),at=we=>(we%F+F)%F,Vt=at(Tt),_t=at(Qt),At=(we,rt,vt,nt,jt,Mt)=>{const Zt=we/F*100,Jt=(rt-we)/F*100,gn=(rt-we)/F*ut;`${He(Wt)}${He(Ht)}`;const fn=oe===de.id,br=!!je&&(je instanceof Set?je.has(de.id):je.includes(de.id)),cr=ie||Fe?"#000":br?a?"rgba(251,146,60,0.78)":"rgba(251,146,60,0.72)":St,an=!!We&&(We instanceof Set?We.has(de.id):We.includes(de.id)),Vn=[fn?M?ie||Fe?"inset 0 0 0 2px rgba(255,255,255,0.35)":a?"inset 0 0 0 2px rgba(255,255,255,0.85)":"inset 0 0 0 2px rgba(0,0,0,0.7)":ie||Fe?"0 0 0 2px rgba(255,255,255,0.35)":a?"0 0 0 2px rgba(255,255,255,0.85)":"0 0 0 2px rgba(0,0,0,0.7)":"",an?ie?"0 0 0 2px rgba(239,68,68,0.65)":Fe?"0 0 0 2px rgba(255,255,255,0.45)":"0 0 0 2px rgba(234,179,8,0.95)":""].filter(Boolean).join(", "),qn=P||Pe||ne||fn||$e&&br||an;let D=qn&&nt,me=qn&&jt;if(gn<Ee*1.6&&D&&me&&(we<=F-rt?me=!1:D=!1),ye){const be=we/F*ut,he=rt/F*ut;be<Y&&(Y=-1/0),he<se-Ee&&(se=-1/0);const _e=Mt?.forceStartOuter||De,Ae=Mt?.forceEndOuter||De,st=we===0,bt=rt===F,Ft=_e&&st,In=Ae&&bt;if(_e&&D){const Ot=be;if(Ft)Y=Ot;else{const jn=Y+Ee+xe;Ot<jn?D=!1:Y=Ot}}if(Ae&&me){const Ot=he;if(In)se=Ot+Ee;else{const jn=se+xe;Ot<jn?me=!1:se=Ot+Ee}}}const Me=[];if(ft.sub&&K)for(const be of ft.sub){const he=(K||[]).find(st=>st.id===be.taskId),_e=Tt+be.stOff,Ae=Tt+be.enOff;Me.push(`${he?.name||"Task"}: ${Nt(_e%1440)}${Nt(Ae%1440)}`)}return r.jsxs("div",{className:"absolute inset-y-0",style:(function(){const be={left:`${Zt}%`,width:`${Jt}%`,boxShadow:Vn||void 0};if(Ve){const he=J(de.id),_e=.42,Ae=88,st=55;be.backgroundColor="#0a0a0a",be.backgroundImage=`linear-gradient(90deg,
                          hsla(${(he+330)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+15)%360},  ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+60)%360},  ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+120)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+180)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+240)%360}, ${Ae}%, ${st}%, ${_e}),
                          hsla(${(he+300)%360}, ${Ae}%, ${st}%, ${_e})
                        )`,be.backgroundBlendMode="multiply",be.backgroundSize="300% 100%",be.animation="prismChip 12s ease-in-out infinite",be.animationDelay=`${-(he%7*.33)}s`}else be.background=cr;return be})(),title:(ue?`${ue}  ${de.title}`:de.title)+(Me.length?`

Postures:
${Me.join(`
`)}`:""),onMouseDown:Z?be=>zt(de.id,be):void 0,onMouseEnter:()=>{Se(de.id),Le(!1)},onMouseLeave:()=>{Se(null),Le(!0)},onClick:be=>{be.stopPropagation(),!X.current&&Ne?.(de.id)},children:[ft.sub&&K&&ft.sub.map((be,he)=>{const _e=Tt+be.stOff,Ae=Tt+be.enOff,st=Math.max(we,Math.min(rt,_e)),bt=Math.max(we,Math.min(rt,Ae));if(bt<=st)return null;const Ft=(st-we)/(rt-we)*100,In=(bt-st)/(rt-we)*100,Ot=(K||[]).find(fr=>fr.id===be.taskId),jn=ie?"rgba(239,68,68,0.28)":Fe?"rgba(255,255,255,0.16)":Ot?.color||"rgba(59,130,246,0.85)",mn=Ot?.color?`linear-gradient(90deg,
                            color-mix(in oklab, ${Ot.color} 85%, #000 15%) 0%,
                            color-mix(in oklab, ${Ot.color} 65%, #000 35%) 50%,
                            color-mix(in oklab, ${Ot.color} 85%, #000 15%) 100%
                          )`:void 0;return r.jsx("div",{className:"absolute inset-y-0 pointer-events-none",style:{left:`${Ft}%`,width:`${In}%`,background:Ve?void 0:jn,backgroundImage:Ve?mn:void 0,backgroundSize:Ve?"300% 100%":void 0,animation:Ve?"prismChip 12s ease-in-out infinite":void 0,backgroundBlendMode:Ve?"multiply":void 0,opacity:Ve?.75:ie?.35:Fe?.25:.9},"aria-hidden":!0},`${vt}-seg-${he}`)}),D&&r.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",Mt?.forceStartOuter||De?"-left-1 -translate-x-full":M?"left-1":"-left-1 -translate-x-full","bg-black/70 text-white"].join(" "),children:Nt(Wt)}),me&&r.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",Mt?.forceEndOuter||De?"-right-1 translate-x-full":M?"right-1":"-right-1 translate-x-full","bg-black/70 text-white"].join(" "),children:Nt(Ht)})]},vt)};if(Ut<=0)return[];const tt=ft.startAbs===de.earliest,Rt=ft.endAbs===de.latest;if(Vt<_t){const we=tt||Vt===0,rt=Rt||_t===F;return[At(Vt,_t,`${ft.key}-p0`,we,rt)]}else{const we=Math.min(F-Vt,Ut),rt=Math.max(0,Ut-we);if(rt>0){const vt=Vt,nt=Vt+we,jt=0,Mt=rt,Zt=Rt||nt===F,Jt=tt||jt===0;return[At(vt,nt,`${ft.key}-p0`,!1,Zt,{forceEndOuter:!0}),At(jt,Mt,`${ft.key}-p1`,Jt,!1,{forceStartOuter:!0})]}else{const vt=Vt,nt=Vt+we,jt=Rt||nt===F;return[At(vt,nt,`${ft.key}-p0`,!1,jt,{forceEndOuter:!0})]}}})}),I&&!oe&&r.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:a?"inset 0 0 0 2px rgba(255,255,255,0.35)":"inset 0 0 0 2px rgba(0,0,0,0.35)"}}),q&&p&&r.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0",a?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${W}%`,width:1}}),q&&A&&r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white whitespace-nowrap",a?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${W}%`,fontSize:Te},children:Nt(Ie.minutes)})]})}),v&&r.jsxs("div",{className:["mt-1 text-xs",V].join(" "),children:[dn(k),"  ",dn(jr(k,6))]})]})}function e0(a){switch(a){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return a||""}}function t0({dark:a,agents:y,onAddAgent:c,onUpdateAgent:C,onDeleteAgent:S,weekStart:g,tz:K,shifts:z,pto:L,tasks:ue,calendarSegs:te,onUpdateShift:U,onDeleteShift:Q,onAddShift:G,selectedIdx:Z,onSelectIdx:h}){const[v,M]=w.useState(""),[p,A]=w.useState(""),[O,P]=w.useState(En[0]?.id||"UTC"),[De,je]=w.useState(null),[$e,We]=w.useState(""),[Ne,ye]=w.useState(""),[Re,ie]=w.useState(En[0]?.id||"UTC"),[Fe,Ve]=w.useState(!1),[J,F]=w.useState(""),[k,T]=w.useState(""),[V,d]=w.useState(!1),[E,Ie]=w.useState(null),ke=Z??E,Xe=D=>{h?h(D):Ie(D)},Ce=ke!=null?y[ke]:null,q=Ce?[Ce.firstName,Ce.lastName].filter(Boolean).join(" "):"";function ce(){De!=null&&(C?.(De,{firstName:$e.trim(),lastName:Ne.trim(),tzId:Re,hidden:V,isSupervisor:Fe,supervisorId:J||null,notes:k}),je(null))}w.useEffect(()=>{if(ke==null){We(""),ye(""),ie(En[0]?.id||"UTC"),Ve(!1),F(""),T(""),d(!1);return}const D=y[ke];if(!D){We(""),ye(""),ie(En[0]?.id||"UTC"),Ve(!1),F(""),T(""),d(!1);return}We(D.firstName||""),ye(D.lastName||""),ie(D.tzId||En[0]?.id||"UTC"),Ve(!!D.isSupervisor),F(D.supervisorId||""),T(D.notes||""),d(!!D.hidden),je(ke)},[ke,y]);const[W,ee]=w.useState(null),Te=w.useRef(null),Ye=w.useMemo(()=>y.map((D,me)=>({a:D,i:me})).sort((D,me)=>{const Me=(D.a.firstName||"").toLowerCase(),be=(me.a.firstName||"").toLowerCase();if(Me!==be)return Me.localeCompare(be);const he=(D.a.lastName||"").toLowerCase(),_e=(me.a.lastName||"").toLowerCase();return he.localeCompare(_e)}),[y]);w.useEffect(()=>{if(!W)return;const D=Ye.findIndex(({a:me})=>`${me.firstName} ${me.lastName}`.trim()===W);D>=0&&Te.current&&Te.current.children[D]?.scrollIntoView({block:"nearest",behavior:"smooth"}),ee(null)},[Ye,W]),w.useEffect(()=>{const D=me=>{const Me=me.target,be=(Me?.tagName||"").toLowerCase();if(be==="input"||be==="textarea"||be==="select"||Me?.isContentEditable===!0||me.key!=="ArrowDown"&&me.key!=="ArrowUp"||Ye.length===0)return;me.preventDefault();let _e=ke==null?-1:Ye.findIndex(st=>st.i===ke);me.key==="ArrowDown"?_e=Math.min(Ye.length-1,_e+1):_e=_e<=0?0:_e-1;const Ae=Ye[_e];Ae&&(Xe(Ae.i),setTimeout(()=>{Te.current?.querySelector(`li[data-idx="${Ae.i}"]`)?.scrollIntoView({block:"nearest"})},0))};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[Ye,ke]);const[ve,gt]=w.useState(null),et=ve!=null?y[ve]:null;function ut(){ve!=null&&(S?.(ve),gt(null))}const[j,I]=w.useState([]);w.useEffect(()=>{if(!q){I([]);return}const D=z.filter(Me=>Me.person===q),me=new Map(it.map((Me,be)=>[Me,be]));I(D.slice().sort((Me,be)=>me.get(Me.day)-me.get(be.day)||Me.start.localeCompare(be.start)))},[q,z]);const[Le,oe]=w.useState(null),Se=w.useCallback(()=>{q&&oe({person:q,shifts:j.map(D=>({...D}))})},[q,j]),X=w.useCallback(()=>{if(!Le)return;const D=Le.person,me=Le.shifts,Me=q===D?j:z.filter(Ae=>Ae.person===D),be=new Map(me.map(Ae=>[Ae.id,Ae])),he=new Map(Me.map(Ae=>[Ae.id,Ae]));for(const[Ae]of he)be.has(Ae)||Q?.(Ae);for(const[,Ae]of be)he.has(Ae.id)||G?.(Ae);for(const[,Ae]of be){const st=he.get(Ae.id);if(!st)continue;const bt=Ae.endDay,Ft=st.endDay;(Ae.day!==st.day||Ae.start!==st.start||Ae.end!==st.end||bt!==Ft)&&U?.(Ae.id,{day:Ae.day,start:Ae.start,end:Ae.end,endDay:bt})}const _e=y.findIndex(Ae=>[Ae.firstName,Ae.lastName].filter(Boolean).join(" ")===D);_e>=0&&Xe(_e),I(me.slice()),oe(null)},[Le,q,j,z,Q,G,U,y]);w.useEffect(()=>{const D=me=>{(me.ctrlKey||me.metaKey)&&!me.shiftKey&&(me.key==="z"||me.key==="Z")&&(me.preventDefault(),X())};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[X]);const Y=w.useMemo(()=>q?z.filter(me=>me.person!==q).concat(j):z,[z,q,j]),se=(D,me)=>{const[Me,be]=D.split(":").map(bt=>parseInt(bt||"0",10)||0);let he=Me*60+be+me;const _e=1440;he=(he%_e+_e)%_e;const Ae=Math.floor(he/60).toString().padStart(2,"0"),st=(he%60).toString().padStart(2,"0");return`${Ae}:${st}`},Ee=D=>it.indexOf(D),xe=D=>it[(D%7+7)%7],He=D=>{const[me,Me]=D.split(":");return(parseInt(me||"0",10)||0)*60+(parseInt(Me||"0",10)||0)},ct=(D,me)=>{const be=Ee(D.day)*1440+He(D.start),he=D.endDay||D.day,_e=Ee(he)*1440+He(D.end),Ae=_e<=be?_e+1440:_e;let st=be+me,bt=Ae+me;const Ft=Math.floor((st/1440%7+7)%7),In=Math.floor((bt/1440%7+7)%7),Ot=(st%1440+1440)%1440,jn=(bt%1440+1440)%1440,mn=xe(Ft),fr=se("00:00",Ot),bn=se("00:00",jn),Br=xe(In);return{...D,day:mn,start:fr,end:bn,endDay:Br}},zt=(D,me,Me,be)=>Math.max(D,Me)<Math.min(me,be),de=D=>{const Me=Ee(D.day),be=D.endDay||D.day,he=Ee(be),_e=He(D.start),Ae=He(D.end),st=Me*1440+_e;let bt=he*1440+Ae;return he<Me?bt+=7*1440:he===Me&&bt<=st&&(bt+=1440),{start:st,end:bt}},Pe=D=>{const me=de(D);return Math.max(0,me.end-me.start)},ne=D=>{const me=Math.floor(D/60),Me=D%60;return Me===0?`${me}h`:`${me}h ${Me}m`},lt=w.useMemo(()=>j.reduce((D,me)=>D+Pe(me),0),[j]),pt=j.length*30,St=Math.max(0,lt-pt),wt=(D,me)=>{const Me=de(D);for(const be of me){if(be.id===D.id)continue;const he=de(be);if(zt(Me.start,Me.end,he.start,he.end))return!0}return!1},Wt=D=>{if(Se(),!q)return;const me=j.map(Me=>ct(Me,D));for(let Me=0;Me<me.length;Me++)for(let be=Me+1;be<me.length;be++)if(wt(me[Me],me)){alert("Move would cause overlapping shifts for this agent.");return}I(me),me.forEach(Me=>{U?.(Me.id,{day:Me.day,start:Me.start,end:Me.end,endDay:Me.endDay})})},Ht=(D,me)=>{Se();const Me=j,be=Me.findIndex(Ae=>Ae.id===D);if(be<0)return;const he=ct(Me[be],me),_e=Me.map((Ae,st)=>st===be?he:Ae);if(wt(he,_e)){alert("Move would cause overlapping shifts for this agent.");return}I(_e),U?.(he.id,{day:he.day,start:he.start,end:he.end,endDay:he.endDay})},[ft,Tt]=w.useState(null),[Qt,Ut]=w.useState(null),[at,Vt]=w.useState("Mon"),[_t,At]=w.useState(""),[tt,Rt]=w.useState(""),[we,rt]=w.useState("Mon"),vt=w.useRef(null),nt=w.useRef(null);function jt(D){Tt(D.id),Vt(D.day),At(D.start),Rt(D.end),rt(D.endDay||D.day)}function Mt(){Tt(null)}function Zt(){if(!ft)return;Se();const D={...j.find(Me=>Me.id===ft),day:at,start:_t,end:tt,endDay:we},me=j.map(Me=>Me.id===ft?D:Me);if(wt(D,me)){alert("Saved times would overlap another shift for this agent.");return}I(me),U?.(ft,{day:at,start:_t,end:tt,endDay:we}),Tt(null)}const[Jt,gn]=w.useState(null),fn=Jt?j.find(D=>D.id===Jt):null;function br(){Jt&&(Se(),I(D=>D.filter(me=>me.id!==Jt)),Q?.(Jt),gn(null))}const[cr,an]=w.useState(0);function dr(D){D.preventDefault();const me=v.trim(),Me=p.trim();!me||!Me||(ee(`${me} ${Me}`.trim()),c?.({firstName:me,lastName:Me,tzId:O}),M(""),A(""))}const Ir=D=>it[(it.indexOf(D)+1)%it.length],Vn=D=>{if(D==="24:00")return 1440;const[me,Me]=D.split(":");return(parseInt(me||"0",10)||0)*60+(parseInt(Me||"0",10)||0)};function qn(){if(!Ce||!q)return;Se();const D=new Set(j.map(Ot=>Ot.day)),me=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Me=j.length===0?"Mon":me.find(Ot=>!D.has(Ot))||"Mon";let be="08:00",he="16:30";if(j.length>0){const Ot=j[j.length-1];be=Ot.start,he=Ot.end}const _e=he!=="24:00"&&Vn(he)<=Vn(be),Ae=j.length===0?Me:_e?Ir(Me):Me;let Ft={id:globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),person:q,day:Me,start:be,end:he,endDay:Ae},In=0;for(;wt(Ft,j.concat([{...Ft}]))&&In<20;)Ft={...Ft,start:se(Ft.start,30),end:se(Ft.end,30)},In++;In>=20&&wt(Ft,j.concat([{...Ft}]))&&alert("Could not find a non-overlapping slot for the default shift. Please adjust times after adding."),I(Ot=>Ot.concat([Ft])),Ut(Ft.id),G?.(Ft)}return w.useEffect(()=>{if(!Qt)return;const D=setTimeout(()=>Ut(null),300);return()=>clearTimeout(D)},[Qt]),r.jsxs("div",{className:["rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[r.jsxs("section",{className:["rounded-lg p-3 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"flex items-center justify-between mb-2",children:r.jsxs("div",{className:"text-sm font-medium",children:["Agents (",y.length,")"]})}),y.length===0?r.jsx("div",{className:["rounded-md p-2 text-xs",a?"bg-neutral-900 text-neutral-300":"bg-white text-neutral-600"].join(" "),children:"No agents found."}):r.jsxs("div",{className:["rounded-md",""].join(" "),children:[r.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid gap-2",style:{gridTemplateColumns:"200px 1fr 200px 64px"},children:[r.jsx("div",{className:"whitespace-nowrap",children:"Name"}),r.jsx("div",{className:"whitespace-nowrap",children:"Notes"}),r.jsx("div",{className:"text-right whitespace-nowrap",children:"Reports to"}),r.jsx("div",{className:"whitespace-nowrap",children:"TZ"})]}),r.jsx("ul",{ref:Te,className:["max-h-[48vh] overflow-y-auto"].join(" "),children:Ye.map(({a:D,i:me},Me)=>{const be=D.supervisorId,he=be&&y.find(Ae=>Ae.id&&Ae.id===be||`${Ae.firstName||""} ${Ae.lastName||""}`.trim()===be)||null,_e=he?`${he.firstName||""} ${he.lastName||""}`.trim():be||"";return r.jsxs("li",{"data-idx":me,className:["px-2 py-1.5 text-sm leading-6 grid gap-2 items-center cursor-pointer",ke===me?a?"bg-neutral-800":"bg-blue-50":a?"odd:bg-neutral-900":"odd:bg-neutral-100"].join(" "),style:{gridTemplateColumns:"200px 1fr 200px 64px"},onClick:()=>Xe(me),children:[r.jsx("div",{className:[a?"text-neutral-200":"text-neutral-800",D.hidden?"opacity-60":""].join(" "),children:[D.firstName||"",D.lastName||""].filter(Boolean).join(" ")}),r.jsx("div",{className:["truncate",a?"text-neutral-300":"text-neutral-700"].join(" "),children:(D.notes||"").split(/\r?\n/)[0]||""}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"inline-flex items-center gap-1 justify-end",children:[r.jsx("span",{className:["truncate inline-block",a?"text-neutral-300":"text-neutral-700"].join(" "),children:_e||""}),D.isSupervisor&&r.jsxs("svg",{"aria-hidden":!0,className:a?"text-amber-300":"text-amber-600",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("title",{children:"Supervisor"}),r.jsx("path",{d:"M12 2l3 7 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1z"})]})]})}),r.jsx("div",{className:["whitespace-nowrap",a?"text-neutral-300":"text-neutral-700"].join(" "),children:fl(D.tzId||"UTC")})]},`${D.firstName}-${D.lastName}-${me}`)})})]}),r.jsx("div",{className:"mt-2",children:r.jsxs("form",{onSubmit:dr,className:"grid grid-cols-2 md:grid-cols-4 gap-2 items-end",children:[r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"First"}),r.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:v,onChange:D=>M(D.target.value),placeholder:"First name"})]}),r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Last"}),r.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:p,onChange:D=>A(D.target.value),placeholder:"Last name"})]}),r.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Timezone"}),r.jsx("select",{className:["border rounded-md px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:O,onChange:D=>P(D.target.value),children:En.map(D=>r.jsx("option",{value:D.id,children:e0(D.id)},D.id))})]}),r.jsx("div",{className:"col-span-1 flex md:justify-end",children:r.jsx("button",{type:"submit",disabled:!v.trim()||!p.trim(),className:["px-3 py-1.5 rounded-md text-sm font-medium border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add Agent"})})]})})]}),ve!=null&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete agent?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove ",et?.firstName," ",et?.lastName,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>gt(null),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:ut,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),Jt&&fn&&r.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",a?"bg-black/70":"bg-black/50"].join(" "),children:r.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete shift?"}),r.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove the shift for ",q," on ",fn.day," ",fn.start,"",fn.end,fn.endDay&&fn.endDay!==fn.day?r.jsxs(r.Fragment,{children:[" ","ending ",String(fn.endDay)]}):null,". This cannot be undone."]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>gn(null),className:["px-3 py-1.5 rounded-md text-sm border",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),r.jsx("button",{onClick:br,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),r.jsxs("div",{className:["rounded-lg p-3",a?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[Ce&&r.jsx(qf,{dark:a,selectedName:q,firstName:$e,lastName:Ne,tzId:Re,isSupervisor:Fe,supervisorId:J,hidden:V,notes:k,agents:y,selectedIdx:ke,onFirst:D=>We(D),onLast:D=>ye(D),onTz:D=>ie(D),onIsSup:D=>Ve(D),onSupId:D=>F(D),onHidden:D=>d(D),onNotes:D=>T(D),onSave:ce,onDelete:()=>ke!=null&&gt(ke)}),r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"text-sm font-medium",children:["Shifts (",j.length,")",j.length>0&&r.jsxs("span",{className:"ml-2 opacity-70",children:[" Total ",ne(lt),r.jsxs("span",{"aria-hidden":!0,children:[" ",j.length,"30m = ",ne(St)," billable"]})]})]}),r.jsxs("div",{className:"inline-flex items-center gap-1",children:[r.jsx("button",{title:"Delete all shifts","aria-label":"Delete all shifts",disabled:!Ce||j.length===0,onClick:()=>an(1),className:["inline-flex items-center justify-center w-8 h-8 rounded border",a?"border-neutral-800 text-red-300 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-red-600 hover:bg-red-50 disabled:opacity-50"].join(" "),children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:r.jsx("path",{d:"M5 12h14"})})}),r.jsx("button",{title:"Add shift","aria-label":"Add shift",disabled:!Ce,onClick:qn,className:["inline-flex items-center justify-center w-8 h-8 rounded border",a?"border-neutral-800 text-neutral-200 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-neutral-700 hover:bg-neutral-100 disabled:opacity-50"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]})})]})]}),Ce?r.jsxs("div",{children:[r.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid grid-cols-6 gap-2",children:[r.jsx("div",{children:"Start Day"}),r.jsx("div",{children:"Start Time"}),r.jsx("div",{children:"End Day"}),r.jsx("div",{children:"End Time"}),r.jsx("div",{children:"Length"}),r.jsx("div",{className:"text-right",children:"Actions"})]}),r.jsx("ul",{className:"max-h-[36vh] overflow-y-auto",children:j.length===0?r.jsx("li",{className:["px-2 py-6 text-sm",a?"text-neutral-300":"text-neutral-700"].join(" "),children:r.jsxs("div",{className:"flex flex-col items-center gap-3",children:[r.jsx("div",{children:"No shifts for this agent."}),r.jsx("button",{onClick:()=>{if(!q)return;const D=["Mon","Tue","Wed","Thu","Fri"],me=()=>globalThis.crypto?.randomUUID?.()||Math.random().toString(36).slice(2),Me={person:q,day:"Mon",start:"08:00",end:"16:30"},be=D.map(he=>({id:me(),...Me,day:he,endDay:he}));I(be),be.forEach(he=>G?.(he))},className:["px-3 py-1.5 rounded-md text-sm font-medium border",a?"bg-neutral-900 border-neutral-700 text-neutral-100 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),children:"Create standard week (MonFri, 8:004:30 PST)"})]})}):j.map(D=>{const me=Ce?.tzId||En[0]?.id||"UTC",Me=K.id;let be=null;if(Me!==me){const he={...D,person:D.person},_e=En.find(bt=>bt.id===me)?.offset??0,st=Ts([he],_e)[0];be=st?{startDay:st.day,start:st.start,endDay:st.endDay||st.day,end:st.end}:null}return r.jsx("li",{className:["px-2 py-1.5 text-sm leading-6 grid grid-cols-6 gap-2 items-center",a?"odd:bg-neutral-900":"odd:bg-neutral-100",Qt===D.id?"shift-add-in":""].filter(Boolean).join(" "),children:ft===D.id?r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:at,onChange:he=>Vt(he.target.value),children:it.map(he=>r.jsx("option",{value:he,children:he},he))})}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:vt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:_t,onChange:he=>{const _e=he.target.value;At(_e);const Ae=se(_e,510);Rt(Ae);const st=He(Ae)<=He(_e);rt(st?Ir(at):at)}}),r.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",a?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const he=vt.current;he?.showPicker?he.showPicker():he?.focus()},"aria-label":"Open time picker",tabIndex:-1,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),r.jsx("div",{children:r.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:we,onChange:he=>rt(he.target.value),children:it.map(he=>r.jsx("option",{value:he,children:he},he))})}),r.jsx("div",{children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:nt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:tt,onChange:he=>Rt(he.target.value)}),r.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",a?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const he=nt.current;he?.showPicker?he.showPicker():he?.focus()},"aria-label":"Open time picker",tabIndex:-1,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("circle",{cx:"12",cy:"12",r:"9"}),r.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),r.jsx("div",{className:a?"text-neutral-300":"text-neutral-700",children:ne(Pe({...D,day:at,start:_t,end:tt,endDay:we}))}),r.jsxs("div",{className:"inline-flex items-center justify-end gap-1 whitespace-nowrap",children:[r.jsx("button",{onClick:Zt,className:["px-2 py-1 rounded border text-xs",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:Mt,className:["px-2 py-1 rounded border text-xs",a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700"].join(" "),children:"Cancel"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:D.day}),be&&r.jsxs("div",{className:"text-xs opacity-70",children:[be.startDay," ",r.jsxs("span",{className:"opacity-60",children:["(",fl(Ce?.tzId||"UTC"),")"]})]})]}),r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:D.start}),be&&r.jsx("div",{className:"text-xs opacity-70",children:be.start})]}),r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:D.endDay||D.day}),be&&r.jsx("div",{className:"text-xs opacity-70",children:be.endDay})]}),r.jsxs("div",{className:a?"text-neutral-200":"text-neutral-800",children:[r.jsx("div",{children:D.end}),be&&r.jsx("div",{className:"text-xs opacity-70",children:be.end})]}),r.jsx("div",{className:a?"text-neutral-300":"text-neutral-700",children:ne(Pe(D))}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"inline-flex items-center gap-1",children:[r.jsx("button",{title:"Edit","aria-label":"Edit shift",onClick:()=>jt(D),className:["inline-flex items-center justify-center w-7 h-7 rounded border",a?"border-neutral-700 text-neutral-200 hover:bg-neutral-800":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("path",{d:"M12 20h9"}),r.jsx("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})]})}),r.jsx("button",{title:"Delete","aria-label":"Delete shift",onClick:()=>gn(D.id),className:["inline-flex items-center justify-center w-7 h-7 rounded border",a?"border-neutral-700 text-red-300 hover:bg-neutral-800":"border-neutral-300 text-red-600 hover:bg-red-50"].join(" "),children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"}),r.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})})]})},D.id)})})]}):r.jsx("div",{className:"text-sm opacity-70",children:"Select an agent on the left to view and edit their shifts."}),r.jsx(Zf,{dark:a,deleteAllStep:cr,setDeleteAllStep:D=>an(D),selectedName:q,agentShiftsLocal:j,captureUndo:Se,onDeleteShift:D=>Q?.(D)})]})]}),r.jsx("div",{className:"mt-3",children:r.jsx("div",{className:["rounded-lg border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:Ce?r.jsx("div",{className:"p-2",children:r.jsx(jd,{dark:a,tz:K,weekStart:g,agent:q,shifts:Y,pto:L,tasks:ue,calendarSegs:te,onDragAll:Wt,onDragShift:Ht,showShiftLabels:!0,showEdgeTimeTagsForHighlights:!0,framed:!0,alwaysShowTimeTags:!0,forceOuterTimeTags:!0,bandHeight:40,dayLabelFontPx:13})}):r.jsx("div",{className:["p-4 text-sm",a?"text-neutral-400":"text-neutral-600"].join(" "),children:"Select an agent to show their weekly timeline."})})})]})}function bd({dark:a,calendarSegs:y,tasks:c,agents:C=[],weekStart:S,packed:g=!1,filterTaskId:K,title:z="Weekly posture calendar",subtitle:L}){const ue=w.useMemo(()=>Dn(S),[S]),te=w.useMemo(()=>it.map((h,v)=>dn(jr(ue,v))),[ue]),U=420,Q=a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",G=w.useMemo(()=>Array.from({length:25},(h,v)=>v),[]),Z=w.useMemo(()=>new Map(c.map(h=>[h.id,h])),[c]);return r.jsxs("div",{className:["mt-3 rounded-xl p-3",a?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:z}),L&&r.jsx("div",{className:"text-xs opacity-70",children:L})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((h,v)=>{const M=te[v],p=(y||[]).map((P,De)=>({...P,_idx:De})).flatMap(P=>!P.endDay||P.endDay===P.day?[P]:[{...P,day:P.day,start:P.start,end:"24:00"},{...P,day:P.endDay,start:"00:00",end:P.end}]).filter(P=>P.day===h&&(!K||P.taskId===K)).sort((P,De)=>Oe(P.start)-Oe(De.start)),A=[],O=p.map(P=>{const De=Oe(P.start),je=P.end==="24:00"?1440:Oe(P.end);let $e=0;for($e=0;$e<A.length;$e++)if(De>=A[$e]){A[$e]=je;break}return $e===A.length&&A.push(je),{it:P,lane:$e,s:De,e:je}});if(g)return r.jsxs("div",{className:["rounded-lg p-2",a?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[r.jsxs("div",{className:"font-medium mb-2 flex items-baseline justify-between",children:[r.jsx("span",{children:h}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(M.slice(8),10)})]}),r.jsx("div",{className:"space-y-1",children:p.map(P=>{const De=Z.get(P.taskId),je=De?.color||"#888",$e=ur(C,P.agentId,P.person);return r.jsxs("div",{className:["group relative rounded-md px-2 py-1",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[r.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:je}}),r.jsx("span",{className:"truncate",children:$e})]}),r.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[P.start,"",P.end]}),r.jsxs("div",{className:["pointer-events-none absolute -top-6 left-0 z-10 px-1.5 py-0.5 rounded text-[10px] whitespace-nowrap",a?"bg-neutral-800 border border-neutral-700 text-neutral-100":"bg-white border border-neutral-300 text-neutral-900","opacity-0 group-hover:opacity-100 transition-none shadow-sm"].join(" "),children:[De?.name||P.taskId,"  ",P.start,"",P.end]})]},`${P._idx}-${P.person}-${P.start}-${P.end}`)})})]},h);{const De=100/Math.max(1,A.length);return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:U},children:[r.jsxs("div",{className:"font-medium mb-2 flex items-baseline justify-between",children:[r.jsx("span",{children:h}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(M.slice(8),10)})]}),r.jsxs("div",{className:"absolute left-2 right-2 bottom-2 top-9",children:[G.map(je=>{const $e=je/24*100;return r.jsx("div",{className:"absolute left-0 right-0",style:{top:`${$e}%`,height:1},children:r.jsx("div",{style:{borderTop:`1px solid ${Q}`}})},je)}),O.map(({it:je,lane:$e,s:We,e:Ne})=>{const ye=We/1440*100,Re=Math.max(1.5,(Ne-We)/1440*100),ie=`calc(${$e*De}% + 0px)`,Fe=`calc(${De}% - 4px)`,Ve=Z.get(je.taskId),J=Ve?.color||"#888",F=ur(C,je.agentId,je.person);return r.jsxs("div",{className:["group relative absolute rounded-md px-2 py-1 overflow-hidden",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:`${ye}%`,height:`${Re}%`,left:ie,width:Fe},children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[r.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:J}}),r.jsx("span",{className:"truncate",children:F})]}),r.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[je.start,"",je.end]}),r.jsxs("div",{className:["pointer-events-none absolute -top-6 left-0 z-10 px-1.5 py-0.5 rounded text-[10px] whitespace-nowrap",a?"bg-neutral-800 border border-neutral-700 text-neutral-100":"bg-white border border-neutral-300 text-neutral-900","opacity-0 group-hover:opacity-100 transition-none shadow-sm"].join(" "),children:[Ve?.name||je.taskId,"  ",je.start,"",je.end]})]},`${je._idx}-${je.person}-${je.start}-${je.end}`)})]})]},h)}})})]})}function Hi({dark:a,tz:y,weekStart:c,agents:C,shifts:S,pto:g,tasks:K,calendarSegs:z,visibleDays:L=7,scrollChunk:ue,showAllTimeLabels:te=!1,onDragAll:U,onDragShift:Q,sortMode:G="start",sortDir:Z="asc",highlightIds:h,selectedIds:v,onToggleSelect:M,showNameColumn:p=!0}){const[A,O]=w.useState(null),[P,De]=w.useState(!1),je=w.useRef(null),[$e,We]=w.useState(160);w.useEffect(()=>{try{if(!C||C.length===0){We(120);return}const F=C.map(ke=>[ke.firstName,ke.lastName].filter(Boolean).join(" ").trim()).filter(Boolean),T=document.createElement("canvas").getContext("2d");if(!T){We(160);return}T.font="500 13px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif";let V=0;for(const ke of F){const Xe=T.measureText(ke).width;Xe>V&&(V=Xe)}We(Math.max(120,Math.min(260,Math.ceil(V+28))))}catch{We(160)}},[C]),w.useEffect(()=>{try{document.documentElement.style.setProperty("--schedule-name-col-px",`${$e}px`)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:namecol",{detail:{px:$e}}))}catch{}},[$e]);const Ne="shrink-0 text-left pl-1 text-sm truncate",ye=ae.useMemo(()=>{const F=C.map(W=>[W.firstName,W.lastName].filter(Boolean).join(" ")),k=Ts(S,y.offset),T=new Map(it.map((W,ee)=>[W,ee])),V=W=>{let ee=1/0;for(const Te of k){if(Te.person!==W)continue;const Ye=T.get(Te.day)??-1;if(Ye<0)continue;const ve=Ye*1440+Oe(Te.start);ve<ee&&(ee=ve)}return ee},d=W=>{let ee=-1/0;for(const Te of k){if(Te.person!==W)continue;const Ye=T.get(Te.day)??0,ve=T.get(Te.endDay||Te.day)??Ye,gt=Ye*1440+Oe(Te.start);let et=ve*1440+Oe(Te.end);et<=gt&&(et+=1440),et>ee&&(ee=et)}return ee},E=W=>{let ee=0;for(const Te of k){if(Te.person!==W)continue;const Ye=T.get(Te.day)??0,ve=T.get(Te.endDay||Te.day)??Ye,gt=Ye*1440+Oe(Te.start);let et=ve*1440+Oe(Te.end);et<=gt&&(et+=1440),ee+=Math.max(0,et-gt)}return ee},Ie=W=>k.filter(ee=>ee.person===W).length,ke=W=>C.find(ee=>[ee.firstName,ee.lastName].filter(Boolean).join(" ")===W)?.tzId||"",Xe=W=>{let ee=1/0;for(const Te of k)if(Te.person===W){const Ye=T.get(Te.day)??1/0;Ye<ee&&(ee=Ye)}return ee},Ce=F.map(W=>({name:W,startKey:V(W),startHas:Number.isFinite(V(W)),endKey:d(W),endHas:Number.isFinite(d(W)),totalKey:E(W),countKey:Ie(W),hasShifts:Ie(W)>0,tzKey:ke(W),tzHas:!!ke(W),dayKey:Xe(W),dayHas:Number.isFinite(Xe(W))})),q=(W,ee)=>W.name.localeCompare(ee.name),ce=Z==="asc"?1:-1;return G==="name"?Ce.sort((W,ee)=>ce*q(W,ee)).map(W=>W.name):G==="tz"?Ce.sort((W,ee)=>{if(W.tzHas&&!ee.tzHas)return-1;if(!W.tzHas&&ee.tzHas)return 1;const Te=W.tzKey.localeCompare(ee.tzKey)*ce;return Te!==0?Te:q(W,ee)}).map(W=>W.name):G==="end"?Ce.sort((W,ee)=>{if(W.endHas&&!ee.endHas)return-1;if(!W.endHas&&ee.endHas)return 1;const Te=(W.endKey-ee.endKey)*ce;return Te!==0?Te:q(W,ee)}).map(W=>W.name):G==="firstDay"?Ce.sort((W,ee)=>{if(W.dayHas&&!ee.dayHas)return-1;if(!W.dayHas&&ee.dayHas)return 1;const Te=(W.dayKey-ee.dayKey)*ce;return Te!==0?Te:q(W,ee)}).map(W=>W.name):G==="count"?Ce.sort((W,ee)=>{const Te=W.hasShifts,Ye=ee.hasShifts;if(Te&&!Ye)return-1;if(!Te&&Ye)return 1;const ve=(W.countKey-ee.countKey)*ce;return ve!==0?ve:q(W,ee)}).map(W=>W.name):G==="total"?Ce.sort((W,ee)=>{const Te=W.hasShifts,Ye=ee.hasShifts;if(Te&&!Ye)return-1;if(!Te&&Ye)return 1;const ve=(W.totalKey-ee.totalKey)*ce;return ve!==0?ve:q(W,ee)}).map(W=>W.name):Ce.sort((W,ee)=>{if(W.startHas&&!ee.startHas)return-1;if(!W.startHas&&ee.startHas)return 1;const Te=(W.startKey-ee.startKey)*ce;return Te!==0?Te:q(W,ee)}).map(W=>W.name)},[C,S,y.offset,G,Z]),Re=Math.min(7,Math.max(1,L||7)),ie=7/Re*100,Fe=28,Ve=ae.useMemo(()=>Ts(S,y.offset),[S,y.offset]),J=F=>{let k=0;for(const T of Ve){const V=it.indexOf(T.day);if(V<0)continue;const d=V*1440+Oe(T.start);let E=(it.indexOf(T.endDay||T.day)<0?V:it.indexOf(T.endDay||T.day))*1440+Oe(T.end);E<=d&&(E+=1440);const Ie=(d%(7*1440)+7*1440)%(7*1440),ke=(E%(7*1440)+7*1440)%(7*1440),Xe=7*1440,Ce=(q,ce,W)=>q>=ce&&q<W;Ie<ke?Ce(F,Ie,ke)&&k++:(Ce(F,Ie,Xe)||Ce(F,0,ke))&&k++}return k};return w.useEffect(()=>{const F=je.current;if(!F)return;const k=Math.max(1,Math.ceil(7/Re)),T=Math.min(k-1,Math.max(0,ue||0)),V=Math.min(F.scrollWidth-F.clientWidth,Math.round(T*F.clientWidth));F.scrollTo({left:V,behavior:"smooth"})},[ue,Re]),r.jsx("div",{className:"space-y-1",children:r.jsxs("div",{className:"flex items-stretch gap-1",children:[p&&r.jsxs("div",{className:"shrink-0",style:{width:$e},children:[r.jsx("div",{className:"h-7 opacity-0 select-none",children:"label"}),ye.length===0?r.jsx("div",{className:"text-sm opacity-70 px-2",children:"No agents."}):ye.map(F=>r.jsx("div",{className:["flex items-center",a?"text-neutral-300":"text-neutral-700"].join(" "),style:{height:Fe},title:F,children:r.jsx("div",{className:Ne,style:{width:$e},children:F})},F))]}),r.jsx("div",{ref:je,className:"flex-1 overflow-x-auto no-scrollbar relative",onMouseLeave:()=>{De(!1),O(null)},onMouseMove:F=>{const k=je.current;if(!k)return;const T=k.firstElementChild;if(!T)return;const V=T.getBoundingClientRect(),d=F.clientX-V.left;if(d<0||d>V.width){De(!1),O(null);return}De(!0),O(d)},children:r.jsxs("div",{style:{width:`${ie}%`},"data-ribbons-inner":"1",children:[r.jsxs("div",{className:"relative h-7",children:[it.map((F,k)=>{const T=k/7*100,V=1/7*100;return r.jsx("div",{"data-day-col":k,className:["absolute text-center",a?"text-neutral-300":"text-neutral-600"].join(" "),style:{left:`${T}%`,width:`${V}%`,fontSize:13,lineHeight:1.5},children:F},F)}),P&&A!=null&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute inset-y-0",style:{left:A,width:1,background:"rgba(59,130,246,0.9)"}}),r.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",a?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:A},children:(()=>{const k=je.current?.firstElementChild?.getBoundingClientRect().width||1,T=7*1440,V=Math.max(0,Math.min(T-1,Math.round(A/k*T))),d=Math.floor(V%1440/60).toString().padStart(2,"0"),E=(V%60).toString().padStart(2,"0"),Ie=J(V);return`${d}:${E}  ${Ie} on deck`})()})]})]}),ye.length>0&&ye.map(F=>r.jsx("div",{className:"py-0 m-0",children:r.jsx(jd,{dark:a,tz:y,weekStart:c,agent:F,shifts:S,pto:g,tasks:K,calendarSegs:(z||[]).flatMap(k=>!k.endDay||k.endDay===k.day?[k]:[{...k,day:k.day,start:k.start,end:"24:00"},{...k,day:k.endDay,start:"00:00",end:k.end}]),titlePrefix:F,draggable:!!(U||Q),onDragAll:k=>U?.(F,k),onDragShift:(k,T)=>Q?.(F,k,T),showDayLabels:!1,showWeekLabel:!1,framed:!1,showNowLabel:!1,showShiftLabels:!0,bandHeight:Fe,alwaysShowTimeTags:te,forceOuterTimeTags:te,avoidLabelOverlap:te,highlightIds:h,showEdgeTimeTagsForHighlights:!0,selectedIds:v,onToggleSelect:M})},F))]})})]})})}function n0({dark:a,tz:y,weekStart:c,agents:C,live:S,proposal:g,highlightLiveIds:K,highlightProposalIds:z,tasks:L,calendarSegs:ue}){return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-semibold mb-2",children:"Live"}),r.jsx(Hi,{dark:a,tz:y,weekStart:c,agents:C,shifts:S.shifts,pto:S.pto||[],tasks:L||[],calendarSegs:ue||[],visibleDays:7,showAllTimeLabels:!1,highlightIds:K,sortMode:"start",sortDir:"asc",showNameColumn:!0})]}),r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-semibold mb-2",children:"Proposal"}),r.jsx(Hi,{dark:a,tz:y,weekStart:c,agents:C,shifts:g.shifts,pto:g.pto||[],tasks:L||[],calendarSegs:ue||[],visibleDays:7,showAllTimeLabels:!1,highlightIds:z,sortMode:"start",sortDir:"asc",showNameColumn:!1})]})]}),r.jsx("div",{className:"text-[10px] opacity-70",children:"Visual highlights indicate changed items (added/removed/modified)."})]})}function r0({dark:a,tz:y,weekStart:c,shifts:C,visibleAgentNames:S,visibleDays:g=7,scrollChunk:K=0}){const[z,L]=w.useState(()=>{try{const Ne=localStorage.getItem("coverage_heatmap_collapsed");return Ne==="1"?!0:Ne!=="0"}catch{return!0}});w.useEffect(()=>{try{localStorage.setItem("coverage_heatmap_collapsed",z?"1":"0")}catch{}try{window.dispatchEvent(new CustomEvent("coverage:collapsed",{detail:{value:z}}))}catch{}},[z]);const ue=w.useMemo(()=>new Set(S),[S]),te=w.useMemo(()=>Ts(C,y.offset).filter(Ne=>ue.has(Ne.person)),[C,y.offset,ue]),U=w.useMemo(()=>{const Ne=Array.from({length:7},()=>new Array(24).fill(0));for(const ye of te){const Re=it.indexOf(ye.day);if(Re<0)continue;const ie=Oe(ye.start),Fe=Oe(ye.end),Ve=Fe>ie?Fe:1440;for(let J=0;J<24;J++){const F=J*60,k=(J+1)*60;Math.max(ie,F)<Math.min(Ve,k)&&Ne[Re][J]++}}return Ne},[te]),Q=w.useMemo(()=>U.reduce((Ne,ye)=>Math.max(Ne,...ye),0),[U]),G=w.useMemo(()=>{const Ne=[];for(let d=0;d<7;d++)for(let E=0;E<24;E++)Ne.push({dIdx:d,h:E,v:U[d][E]});let ye=1/0,Re=0;for(const d of Ne)d.v<ye&&(ye=d.v),d.v>Re&&(Re=d.v);const ie=Re>0?Ne.filter(d=>d.v===Re):[],Fe=Ne.filter(d=>d.v===ye),Ve=Ne.filter(d=>d.v===0).length,J=Ne.reduce((d,E)=>d+E.v,0),F=Ne.length?J/Ne.length:0,k=Array.from({length:7},(d,E)=>U[E].reduce((Ie,ke)=>Ie+ke,0)),T=k.reduce((d,E,Ie)=>E>(k[d]??-1/0)?Ie:d,0),V=k.reduce((d,E,Ie)=>E<(k[d]??1/0)?Ie:d,0);return{pts:Ne,minCount:Number.isFinite(ye)?ye:0,maxCount:Re,maxPts:ie,minPts:Fe,zeroHours:Ve,avg:F,bestDayIdx:T,worstDayIdx:V,dayTotals:k}},[U]),Z=Ne=>{if(Q<=0)return a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)";const ye=Ne/Q,Re=[[0,0,0],[239,68,68],[250,204,21]],ie=ye<=.5?0:1,Fe=ye<=.5?ye/.5:(ye-.5)/.5,Ve=Re[ie],J=Re[ie+1]||Re[ie],F=Math.round(Ve[0]*(1-Fe)+J[0]*Fe),k=Math.round(Ve[1]*(1-Fe)+J[1]*Fe),T=Math.round(Ve[2]*(1-Fe)+J[2]*Fe);return`rgba(${F},${k},${T},${a?.9:.95})`},h=Math.min(7,Math.max(1,g||7)),v=7/h*100,M=w.useRef(null);w.useEffect(()=>{const Ne=M.current;if(!Ne)return;const ye=Math.max(1,Math.ceil(7/h)),Re=Math.min(ye-1,Math.max(0,K||0)),ie=Math.min(Ne.scrollWidth-Ne.clientWidth,Math.round(Re*Ne.clientWidth));Ne.scrollTo({left:ie,behavior:"smooth"})},[K,h]);const p=7,A=1,[O,P]=w.useState(()=>{try{const Ne=getComputedStyle(document.documentElement).getPropertyValue("--schedule-name-col-px"),ye=parseInt(Ne||"160",10);return Number.isFinite(ye)?ye:160}catch{return 160}}),[De,je]=w.useState(null),[$e,We]=w.useState(null);return w.useEffect(()=>{const Ne=Fe=>{try{const Ve=Fe.detail?.px;typeof Ve=="number"&&P(Ve)}catch{}};window.addEventListener("schedule:namecol",Ne);const ye=document.querySelector('[data-ribbons-inner="1"]'),Re=()=>{if(ye){je(ye.scrollWidth||ye.clientWidth);try{const Fe=ye.getBoundingClientRect(),Ve=Array.from(ye.querySelectorAll("[data-day-col]"));if(Ve.length===7){const J=Ve.map(F=>{const k=F.getBoundingClientRect();return{left:k.left-Fe.left,width:k.width}});We(J)}}catch{}}};Re();const ie="ResizeObserver"in window?new window.ResizeObserver(()=>Re()):null;return ie&&ye&&ie.observe(ye),()=>{try{ie&&ye&&ie.unobserve(ye)}catch{}window.removeEventListener("schedule:namecol",Ne)}},[g]),r.jsx("div",{className:["sticky bottom-0 z-30",a?"bg-neutral-950/92":"bg-white/95","backdrop-blur","border-t",a?"border-neutral-800":"border-neutral-200"].join(" "),children:r.jsxs("div",{className:"px-2 py-1.5",children:[r.jsx("div",{className:"relative h-6",children:r.jsxs("div",{className:["absolute left-2 top-1/2 -translate-y-1/2 flex items-center gap-2 text-xs font-medium",a?"text-neutral-200":"text-neutral-700"].join(" "),children:[r.jsx("span",{children:"Coverage"}),r.jsx("button",{onClick:()=>L(Ne=>!Ne),"aria-expanded":!z,className:["inline-flex items-center justify-center w-6 h-6 rounded-full border",a?"bg-neutral-900 border-neutral-700 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),title:z?"Expand":"Collapse",children:r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:z?r.jsx("polyline",{points:"18 15 12 9 6 15"}):r.jsx("polyline",{points:"6 9 12 15 18 9"})})}),(()=>{const Ne=ie=>ie===0?"12a":ie<12?`${ie}a`:ie===12?"12p":`${ie-12}p`,ye=G.maxPts.slice(0,3).map(ie=>`${it[ie.dIdx]} ${Ne(ie.h)}`).join(", "),Re=G.minPts.slice(0,3).map(ie=>`${it[ie.dIdx]} ${Ne(ie.h)}`).join(", ");return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("span",{className:["px-1.5 py-0.5 rounded border",a?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:ye?`Max at: ${ye}`:"No data",children:["Max ",G.maxCount]}),r.jsxs("span",{className:["px-1.5 py-0.5 rounded border",a?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:Re?`Min at: ${Re}`:"No data",children:["Min ",G.minCount]}),r.jsxs("span",{className:["px-1.5 py-0.5 rounded border hidden sm:inline",a?"border-neutral-700 bg-neutral-900 text-neutral-300":"border-neutral-300 bg-white text-neutral-700"].join(" "),title:"Avg across all hours",children:["Avg ",G.avg.toFixed(1)]})]})})()]})}),!z&&r.jsxs("div",{className:"flex items-stretch gap-1 mt-1",children:[r.jsxs("div",{className:"shrink-0",style:{width:O},children:[r.jsx("div",{className:"h-[20px]"}),r.jsx("div",{className:"relative",style:{height:p*24+A*23},children:[0,6,12,18,24].map(Ne=>{const ye=p*24+A*23,Re=Ne===24?ye:Ne*(p+A)+p/2,ie=Ne===24?"-translate-y-[100%]":"-translate-y-1/2",Fe=Ne===0?"12a":Ne<12?`${Ne}a`:Ne===12?"12p":`${Ne-12}p`;return r.jsx("div",{className:["absolute right-2 text-right text-[10px]",ie,a?"text-neutral-400":"text-neutral-500"].join(" "),style:{top:Re},children:Fe},Ne)})})]}),r.jsx("div",{ref:M,className:"flex-1 overflow-x-auto no-scrollbar",children:r.jsx("div",{style:De?{width:De}:{width:`${v}%`},children:r.jsx("div",{className:"relative",style:{height:p*24+A*23},children:it.map((Ne,ye)=>{const Re=$e?$e[ye]?.left:De?ye*(De/7):void 0,ie=$e?$e[ye]?.width:De?De/7:void 0;return r.jsx("div",{className:"absolute inset-y-0",style:$e||De?{left:Re,width:ie}:{left:`${ye/7*100}%`,width:`${1/7*100}%`},children:Array.from({length:24},(Fe,Ve)=>Ve).map(Fe=>{const Ve=Fe*(p+A),J=U[ye][Fe],F=`${Ne}  ${String(Fe).padStart(2,"0")}:00 to ${String(Fe+1).padStart(2,"0")}:00  ${J} on deck`;return r.jsx("div",{className:"w-full",style:{position:"absolute",top:Ve,height:p,backgroundColor:Z(J),borderRadius:2},title:F},Fe)})},Ne)})})})})]})]})})}function s0({tasks:a,onCreate:y,onUpdate:c,onArchive:C,onDelete:S,dark:g,selectedId:K,onSelect:z}){const[L,ue]=w.useState({name:"",color:"#2563eb"}),te=w.useMemo(()=>a.filter(O=>!O.archived),[a]),[U,Q]=w.useState(null),[G,Z]=w.useState(""),[h,v]=w.useState("#2563eb");function M(O){Q(O.id),Z(O.name),v(O.color)}function p(){Q(null)}function A(O){G.trim()&&(c({id:O,name:G.trim(),color:h}),Q(null))}return r.jsxs("section",{className:["rounded-xl p-3",g?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[r.jsx("div",{className:["border rounded-xl overflow-auto",g?"border-neutral-800":"border-neutral-300"].join(" "),children:r.jsxs("table",{className:"min-w-full text-sm",children:[r.jsx("thead",{className:g?"bg-neutral-900":"bg-white",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),r.jsx("th",{className:"px-3 py-2 text-left",children:"Color"}),r.jsx("th",{className:"px-3 py-2 text-left w-36",children:"Actions"})]})}),r.jsx("tbody",{className:g?"divide-y divide-neutral-800":"divide-y divide-neutral-200",children:te.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:3,className:"px-3 py-6 text-center opacity-70",children:"No postures configured."})}):te.map(O=>r.jsx("tr",{onClick:()=>z?.(O.id),className:[g?"hover:bg-neutral-900 cursor-pointer":"hover:bg-neutral-50 cursor-pointer",K===O.id?g?"bg-neutral-900 ring-1 ring-blue-500/40":"bg-blue-50 ring-1 ring-blue-500/40":""].join(" "),children:U===O.id?r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("input",{className:["w-full border rounded px-2 py-1",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:G,onChange:P=>Z(P.target.value)})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("input",{type:"color",className:["w-10 h-8 border rounded",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:h,onChange:P=>v(P.target.value)})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>A(O.id),className:["px-2 py-1 rounded border text-xs",g?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:p,className:["px-2 py-1 rounded border text-xs",g?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})})]}):r.jsxs(r.Fragment,{children:[r.jsx("td",{className:"px-3 py-1.5 font-medium",children:O.name}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsx("span",{className:"inline-block w-5 h-5 rounded border align-middle",style:{background:O.color}})}),r.jsx("td",{className:"px-3 py-1.5",children:r.jsxs("div",{className:"flex gap-2",onClick:P=>P.stopPropagation(),children:[r.jsx("button",{onClick:()=>M(O),className:["px-2 py-1 rounded border text-xs",g?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),r.jsx("button",{onClick:()=>c({...O,archived:!0}),className:["px-2 py-1 rounded border text-xs",g?"border-neutral-700":"border-neutral-300"].join(" "),children:"Remove"}),r.jsx("button",{onClick:()=>{S&&confirm(`Delete posture "${O.name}"? This cannot be undone.`)&&S(O.id)},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})})]})},O.id))})]})}),r.jsxs("form",{className:"mt-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",onSubmit:O=>{O.preventDefault();const P=L.name.trim();P&&(y({...L,name:P}),ue({name:"",color:"#2563eb"}))},children:[r.jsxs("label",{className:"text-sm flex flex-col md:col-span-3",children:[r.jsx("span",{className:"mb-1",children:"Name"}),r.jsx("input",{className:["w-full border rounded-xl px-3 py-2",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:L.name,onChange:O=>ue({...L,name:O.target.value}),placeholder:"e.g., Support Inbox"})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Color"}),r.jsx("input",{type:"color",className:["w-full border rounded-xl h-10",g&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:L.color,onChange:O=>ue({...L,color:O.target.value}),"aria-label":"Posture color"})]}),r.jsx("div",{className:"md:col-span-2",children:r.jsx("button",{type:"submit",disabled:!L.name.trim(),className:["h-10 rounded-xl border font-medium px-4 w-full md:w-auto",L.name.trim()?g?"bg-neutral-800 border-neutral-700 hover:bg-neutral-700":"bg-blue-600 border-blue-600 text-white hover:bg-blue-500":g?"bg-neutral-900 border-neutral-800 opacity-60":"bg-neutral-200 border-neutral-300 text-neutral-500 cursor-not-allowed"].join(" "),children:"Add Posture"})})]})]})}function l0({dark:a,agents:y,onAddAgent:c,onUpdateAgent:C,onDeleteAgent:S,weekStart:g,tz:K,shifts:z,pto:L,overrides:ue,tasks:te,calendarSegs:U,onUpdateShift:Q,onDeleteShift:G,onAddShift:Z,setTasks:h,setCalendarSegs:v,setPto:M,setOverrides:p}){const[A,O]=w.useState(!1),[P,De]=w.useState(""),[je,$e]=w.useState(""),We=w.useRef(null),[Ne,ye]=w.useState(null),Re=w.useCallback((u,m="success")=>{ye({text:u,kind:m}),We.current!=null&&(window.clearTimeout(We.current),We.current=null),We.current=window.setTimeout(()=>ye(null),3e3)},[]);w.useEffect(()=>{Zl()&&(O(!0),$e(""))},[]);const ie=w.useMemo(()=>Vi(),[]),Fe=w.useMemo(()=>Ki(),[]),Ve=w.useMemo(()=>hd(),[]),[J,F]=w.useState(y);w.useEffect(()=>{F(y)},[y]);const k=["Agents","Shifts","Postures","PTO & Overrides","Proposals"],[T,V]=w.useState("Agents"),[d,E]=w.useState(!1),[Ie,ke]=w.useState("start"),[Xe,Ce]=w.useState("asc"),q=w.useMemo(()=>`schedule2.v2.shifts.includeHidden.${g}.${K.id}`,[g,K.id]),[ce,W]=w.useState(()=>{try{const u=localStorage.getItem(q);return u?u==="1":!1}catch{return!1}});w.useEffect(()=>{try{localStorage.setItem(q,ce?"1":"0")}catch{}},[ce,q]);const ee=w.useMemo(()=>`schedule2.v2.shifts.daysVisible.${g}.${K.id}`,[g,K.id]),[Te,Ye]=w.useState(()=>{try{const u=localStorage.getItem(ee),m=u?parseInt(u,10):7;return Number.isFinite(m)&&m>=1&&m<=7?m:7}catch{return 7}});w.useEffect(()=>{try{localStorage.setItem(ee,String(Te))}catch{}},[Te,ee]);const[ve,gt]=w.useState(0);w.useEffect(()=>{gt(0)},[Te,g]),w.useEffect(()=>{if(T!=="Proposals")return;let u=!1;return(async()=>{pt(!0);const m=await Bi();if(u)return;pt(!1),m.ok?ne(m.proposals||[]):ne([]);const B=await la();u||Tt(B)})(),()=>{u=!0}},[T]);const[et,ut]=w.useState(z),[j,I]=w.useState(L),[Le,oe]=w.useState(ue),[Se,X]=w.useState(!1),[Y,se]=w.useState(!1),[Ee,xe]=w.useState("https://team-schedule-api.bsteward.workers.dev/v1/schedule"),[He,ct]=w.useState(""),[zt,de]=w.useState(""),[Pe,ne]=w.useState([]),[lt,pt]=w.useState(!1),[St,wt]=w.useState(""),[Wt,Ht]=w.useState(null),[ft,Tt]=w.useState(null),[Qt,Ut]=w.useState(""),[at,Vt]=w.useState(!1),_t=w.useRef(!1),At=w.useMemo(()=>`schedule2.v2.unpublished.${g}.${K.id}`,[g,K.id]),tt=w.useMemo(()=>`schedule2.v2.draft.${g}.${K.id}`,[g,K.id]);w.useEffect(()=>{Se||ut(z)},[z,Se]),w.useEffect(()=>{Se||I(L)},[L,Se]),w.useEffect(()=>{try{const u=localStorage.getItem(At);if(u){const B=JSON.parse(u);Array.isArray(B?.shifts)&&ut(B.shifts),Array.isArray(B?.pto)&&I(B.pto),Array.isArray(B?.overrides)&&oe(B.overrides),(Array.isArray(B?.shifts)||Array.isArray(B?.pto)||Array.isArray(B?.overrides))&&(X(!0),_t.current=!1);return}const m=localStorage.getItem(tt);if(m){const B=JSON.parse(m),H={schema:1,weekStart:g,tzId:K.id,updatedAt:new Date().toISOString()};if(Array.isArray(B?.shifts)&&(ut(B.shifts),H.shifts=B.shifts),Array.isArray(B?.pto)&&(I(B.pto),H.pto=B.pto),Array.isArray(B?.overrides)&&(oe(B.overrides),H.overrides=B.overrides),H.shifts||H.pto||H.overrides){X(!0),_t.current=!1;try{localStorage.setItem(At,JSON.stringify(H))}catch{}}try{localStorage.removeItem(tt)}catch{}}}catch{}},[At,tt]),w.useEffect(()=>{if(!Se)return;const u=setTimeout(()=>{try{localStorage.setItem(At,JSON.stringify({schema:1,weekStart:g,tzId:K.id,shifts:et,pto:j,overrides:Le,updatedAt:new Date().toISOString()}))}catch{}},300);return()=>clearTimeout(u)},[Se,et,j,Le,At,g,K.id]);const[Rt,we]=w.useState(new Set),[rt,vt]=w.useState(new Set),[nt,jt]=w.useState([]),[Mt,Zt]=w.useState([]),Jt=nt.length>0,gn=Mt.length>0;function fn(u,m){return u.id===m.id&&u.day===m.day&&u.start===m.start&&u.end===m.end&&u.endDay===m.endDay}function br(u,m){if(u.length!==m.length)return!1;const B=new Map(u.map(H=>[H.id,H]));for(const H of m){const pe=B.get(H.id);if(!pe||!fn(pe,H))return!1}return!0}const cr=w.useCallback(u=>{u.length!==0&&(!Se&&br(et,z)&&(_t.current=!0),jt(m=>{const B=m.concat([u]);return B.length>10&&B.shift(),B}),Zt([]),X(!0))},[Se,et,z]),an=w.useCallback(()=>{if(nt.length===0)return;const u=nt[nt.length-1],m=u.map(({id:H})=>{const pe=et.find(Ge=>Ge.id===H);return pe?{id:H,patch:{day:pe.day,start:pe.start,end:pe.end,endDay:pe.endDay}}:{id:H,patch:{}}});ut(H=>H.map(pe=>{const Ge=u.find(mt=>mt.id===pe.id);return Ge?{...pe,...Ge.patch}:pe})),we(H=>{const pe=new Set(H);return u.forEach(({id:Ge})=>pe.delete(Ge)),pe}),jt(H=>H.slice(0,-1)),Zt(H=>H.concat([m])),X(!0),nt.length-1===0&&_t.current&&(ut(z),X(!1),_t.current=!1)},[nt,et,z]),dr=w.useCallback(()=>{if(Mt.length===0)return;const u=Mt[Mt.length-1],m=u.map(({id:B})=>{const H=et.find(pe=>pe.id===B);return H?{id:B,patch:{day:H.day,start:H.start,end:H.end,endDay:H.endDay}}:{id:B,patch:{}}});ut(B=>B.map(H=>{const pe=u.find(Ge=>Ge.id===H.id);return pe?{...H,...pe.patch}:H})),we(B=>{const H=new Set(B);return u.forEach(({id:pe})=>H.add(pe)),H}),Zt(B=>B.slice(0,-1)),jt(B=>B.concat([m])),X(!0)},[Mt,et]),Ir=w.useMemo(()=>{try{const u=Array.isArray(et)?et:[],m=[];for(const b of u){const Ke=Oe(b.start),ht=b.end==="24:00"?1440:Oe(b.end);if(typeof b.endDay=="string"?b.endDay!==b.day:ht<Ke&&b.end!=="24:00"){const Et=b.endDay||["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(b.day)+1)%7];m.push({...b,end:"24:00",endDay:Et}),m.push({...b,day:Et,start:"00:00",end:b.end,endDay:Et})}else m.push(b)}const B=Array.isArray(Le)?Le:[];if(B.length===0)return m;const H=Dn(g),pe=jr(H,6),Ge=b=>b>=dn(H)&&b<=dn(pe),mt=b=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][b.getDay()],$t=(b,Ke)=>jr(b,Ke),yt=b=>dn(b),kt=new Set,dt=(b,Ke,ht,Ct)=>{const Et=Pt=>Math.max(0,Math.min(1440,Pt)),rn=Et(ht),tn=Et(Ct);if(tn>rn)for(let Pt=m.length-1;Pt>=0;Pt--){const Bt=m[Pt];if(Bt.person!==b||Bt.day!==Ke)continue;const Nn=Oe(Bt.start),_n=Bt.end==="24:00"?1440:Oe(Bt.end),Tn=Math.max(Nn,rn),An=Math.min(_n,tn);if(!(An>Tn))continue;const $n=Tn-Nn,Ml=_n-An;m.splice(Pt,1);const Hs=(Us,Lr,ma)=>{const kl=Lr>=1440?"24:00":`${String(Math.floor(Lr/60)).padStart(2,"0")}:${String(Lr%60).padStart(2,"0")}`,oo=`${String(Math.floor(Us/60)).padStart(2,"0")}:${String(Us%60).padStart(2,"0")}`,Jr={...Bt,id:`${Bt.id}${ma}`,start:oo,end:kl};return kl!=="24:00"&&Jr.endDay&&Jr.endDay!==Jr.day&&delete Jr.endDay,Jr};Ml>0&&m.splice(Pt,0,Hs(An,_n,"-b")),$n>0&&m.splice(Pt,0,Hs(Nn,Tn,"-a"))}},ln=(b,Ke,ht)=>{let Ct=new Date(b);const Et=new Date(Ke);for(;Ct<=Et;){const rn=yt(Ct);if(Ge(rn)){const tn=mt(Ct);if(ht.start&&ht.end){for(let Pt=m.length-1;Pt>=0;Pt--){const Bt=m[Pt];Bt.person===ht.person&&Bt.day===tn&&m.splice(Pt,1)}if(!kt.has(rn)){const Pt=ht.start,Bt=ht.end,Nn=Oe(Pt),_n=Oe(Bt),Tn=_n<=Nn&&Bt!=="24:00",An=Tn?mt($t(Ct,1)):void 0;if(m.push({id:`ov:${ht.id}:${rn}`,person:ht.person,agentId:dl(J,ht.person),day:tn,start:Pt,end:Bt,...An?{endDay:An}:{}}),Tn){const $n=mt($t(Ct,1)),Ml=Math.max(_n%1440,480);dt(ht.person,$n,0,Ml);const Hs=dn($t(Ct,1));kt.add(Hs)}}}else{let Pt=null;for(const Bt of m)if(Bt.person===ht.person&&Bt.day===tn){const Nn=Oe(Bt.start);(Pt==null||Nn<Pt)&&(Pt=Nn)}Pt!=null&&dt(ht.person,tn,Pt,Pt+480)}}Ct=$t(Ct,1)}};for(const b of B){let Ke=Dn(b.startDate),ht=Dn(b.endDate);if(b.recurrence?.rule==="weekly"){const Ct=b.recurrence.until?Dn(b.recurrence.until):null;let Et=0;for(;ht<H&&Et<200&&(Ke=$t(Ke,7),ht=$t(ht,7),Et++,!(Ct&&Ke>Ct)););for(;Ke<=pe&&(!Ct||Ke<=Ct);)ln(Ke,ht,b),Ke=$t(Ke,7),ht=$t(ht,7)}else ln(Ke,ht,b)}return m}catch{return et}},[et,Le,g,J]);w.useEffect(()=>{if(T!=="Shifts")return;nt.length===0&&Mt.length===0&&Rt.size===0&&ut(z)},[T,z,nt,Mt,Rt]),w.useEffect(()=>{const u=m=>{if(T!=="Shifts")return;const B=(m.ctrlKey||m.metaKey)&&!m.shiftKey&&(m.key==="z"||m.key==="Z"),H=(m.ctrlKey||m.metaKey)&&m.shiftKey&&(m.key==="z"||m.key==="Z")||(m.ctrlKey||m.metaKey)&&(m.key==="y"||m.key==="Y");B?(m.preventDefault(),an()):H&&(m.preventDefault(),dr()),m.key==="Escape"&&vt(new Set)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[T,an,dr]);const Vn=w.useMemo(()=>{const u=new Set;for(const m of J){const B=`${m.firstName} ${m.lastName}`.trim();B&&u.add(B)}for(const m of z)m.person&&u.add(m.person);for(const m of U)m.person&&u.add(m.person);for(const m of L)m.person&&u.add(m.person);return Array.from(u).sort()},[J,z,U,L]),qn=w.useMemo(()=>te.filter(u=>!u.archived),[te]),[D,me]=w.useState(""),[Me,be]=w.useState("Mon"),[he,_e]=w.useState("09:00"),[Ae,st]=w.useState("10:00"),[bt,Ft]=w.useState(""),[In,Ot]=w.useState("Mon");w.useEffect(()=>{!bt&&qn[0]&&Ft(qn[0].id)},[qn,bt]);const[jn,mn]=w.useState(null),[fr,bn]=w.useState(""),[Br,ql]=w.useState("Mon"),[hl,ms]=w.useState("09:00"),[Wr,Hr]=w.useState("10:00"),[Ur,eo]=w.useState(""),[pl,As]=w.useState("Mon"),[hs,Os]=w.useState(""),[Nr,to]=w.useState(""),[Vr,It]=w.useState(""),[xl,gl]=w.useState(""),[Kn,no]=w.useState(""),[zs,yl]=w.useState(null),[Kr,Qr]=w.useState(""),[Qn,er]=w.useState(""),[Xn,$r]=w.useState(""),[Xr,tr]=w.useState(""),ia=u=>{yl(u),Qr(u.person),er(u.startDate),$r(u.endDate),tr(u.notes||"")},vl=()=>{yl(null),Qr(""),er(""),$r(""),tr("")},[Sr,ua]=w.useState(""),[ps,Rs]=w.useState(""),[xs,ca]=w.useState(""),[nr,gs]=w.useState(""),[Yn,ys]=w.useState(""),[ro,da]=w.useState(""),[Fs,Bs]=w.useState(""),[vs,so]=w.useState(!1),[mr,wl]=w.useState(""),[Mr,jl]=w.useState(null);w.useEffect(()=>{Mr!=null&&(Mr<0||Mr>=J.length)&&jl(J.length>0?0:null)},[Mr,J]);function ws(){ut(z),X(!1),jt([]),Zt([]),we(new Set),_t.current=!1;try{localStorage.removeItem(At)}catch{}}async function Ws(){const u=J.map(B=>({id:B.id||Math.random().toString(36).slice(2),firstName:B.firstName||"",lastName:B.lastName||"",tzId:B.tzId,hidden:!!B.hidden,isSupervisor:!!B.isSupervisor,supervisorId:B.supervisorId??null,notes:B.notes})),m=await Yi({shifts:et,pto:j,overrides:Le,calendarSegs:U,agents:u,updatedAt:new Date().toISOString()});if(m.ok){X(!1),Re("Published to live.","success"),_t.current=!1,we(new Set);try{localStorage.removeItem(At)}catch{}M(()=>j),p(()=>Le)}else m.status===404||m.error==="missing_site_session"||(m.bodyText||"").includes("missing_site_session")?(await aa(),Re("Publish failed: missing or expired site session. Please sign in to view and then try again.","error")):m.status===401?Re("Publish failed: not signed in as admin (401).","error"):m.status===403?Re("Publish failed: CSRF mismatch (403). Try reloading and signing in again.","error"):m.status===409?Re("Publish failed: conflict (409). Refresh to load latest, then retry.","error"):Re(`Failed to publish. ${m.status?`HTTP ${m.status}`:""} ${m.error?` ${m.error}`:""}`,"error")}async function lo(){const u=prompt("Proposal title",new Date().toLocaleString())||new Date().toLocaleString(),m=J.map(H=>({id:H.id||Math.random().toString(36).slice(2),firstName:H.firstName||"",lastName:H.lastName||"",tzId:H.tzId,hidden:!!H.hidden,isSupervisor:!!H.isSupervisor,supervisorId:H.supervisorId??null,notes:H.notes}));(await vd({title:u,weekStart:g,tzId:K.id,shifts:et,pto:j,overrides:Le,calendarSegs:U,agents:m})).ok?Re("Proposal created.","success"):Re("Failed to create proposal.","error")}function yn(u=[],m=[],B){const H=new Map(u.map(yt=>[yt.id,yt])),pe=new Map(m.map(yt=>[yt.id,yt])),Ge=[],mt=[],$t=[];for(const[yt,kt]of pe){const dt=H.get(yt);dt?B(dt,kt)||$t.push({before:dt,after:kt}):Ge.push(kt)}for(const[yt,kt]of H)pe.has(yt)||mt.push(kt);return{added:Ge,removed:mt,changed:$t}}const Yr=(u,m)=>u&&m&&u.id===m.id&&u.person===m.person&&u.day===m.day&&u.start===m.start&&u.end===m.end&&(u.endDay||"")===(m.endDay||""),bl=(u,m)=>u&&m&&u.id===m.id&&u.person===m.person&&u.startDate===m.startDate&&u.endDate===m.endDate&&(u.notes||"")===(m.notes||""),js=(u,m)=>u&&m&&u.id===m.id&&u.person===m.person&&u.startDate===m.startDate&&u.endDate===m.endDate&&(u.start||"")===(m.start||"")&&(u.end||"")===(m.end||"")&&(u.endDay||"")===(m.endDay||"")&&(u.kind||"")===(m.kind||"")&&(u.notes||"")===(m.notes||"");async function fa(u){wt(u),Ht(null),Ut("");const m=await wd(u);if(!m.ok||!m.proposal){Ut("Failed to load proposal");return}Ht(m.proposal)}const Nl=w.useCallback(u=>{c?.(u),F(m=>m.concat([{firstName:u.firstName,lastName:u.lastName,tzId:u.tzId,hidden:!1}]))},[c]),Sl=w.useCallback((u,m)=>{C?.(u,m),F(B=>B.map((H,pe)=>pe===u?m:H))},[C]),bs=w.useCallback(u=>{S?.(u),F(m=>m.filter((B,H)=>H!==u))},[S]);return A?r.jsxs("section",{className:["rounded-2xl p-3 space-y-3",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("div",{className:"flex items-center gap-2",children:k.map(u=>{const m=T===u;return r.jsx("button",{onClick:()=>V(u),className:["px-3 py-1.5 rounded-lg text-sm border",m?a?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":a?"bg-neutral-900 border-neutral-800 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-200 text-neutral-700 hover:bg-neutral-100"].join(" "),children:u},u)})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",disabled:!Se,onClick:ws,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",Se?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]}),r.jsx("span",{children:"Discard"})]})}),r.jsx("button",{onClick:Ws,className:"px-3 py-1.5 rounded-xl border font-semibold bg-blue-600 border-blue-600 text-white hover:bg-blue-500 shrink-0",title:"Publish working changes to live","aria-label":"Publish",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"}),r.jsx("path",{d:"M16 5h2a2 2 0 0 1 2 2v2"})]}),r.jsx("span",{children:"Publish"})]})})]})]}),T==="Shifts"&&r.jsxs("div",{className:["flex flex-wrap items-center justify-between gap-2 sm:gap-3 text-xs rounded-xl px-2 py-2 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"flex min-w-0 items-center gap-2 sm:gap-3",children:r.jsx("span",{className:["inline-flex items-center px-2 py-1 rounded-xl border font-medium",Se?a?"bg-neutral-900 border-amber-600 text-amber-400":"bg-white border-amber-500 text-amber-700":a?"bg-neutral-900 border-neutral-800 text-neutral-400":"bg-white border-neutral-200 text-neutral-500"].join(" "),children:Se?"Unpublished changes":"Live"})}),r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Sort ribbons",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h14"}),r.jsx("path",{d:"M7 12h10"}),r.jsx("path",{d:"M11 18h6"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[9.5rem] sm:w-[11rem] appearance-none",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Ie,onChange:u=>ke(u.target.value),"aria-label":"Sort ribbons",children:[r.jsx("option",{value:"start",children:"Earliest start"}),r.jsx("option",{value:"end",children:"Latest end"}),r.jsx("option",{value:"count",children:"Shift count"}),r.jsx("option",{value:"total",children:"Total minutes"}),r.jsx("option",{value:"firstDay",children:"First day"}),r.jsx("option",{value:"tz",children:"Timezone"}),r.jsx("option",{value:"name",children:"Name (AZ)"})]}),r.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(a?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),r.jsx("button",{type:"button",onClick:()=>Ce(u=>u==="asc"?"desc":"asc"),"aria-pressed":Xe==="desc",title:Xe==="asc"?"Ascending":"Descending",className:["ml-1 px-2.5 py-1.5 rounded-xl border font-medium",a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:Xe==="asc"?r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 19V5"}),r.jsx("path",{d:"m5 12 7-7 7 7"})]}):r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"m19 12-7 7-7-7"})]})})]}),r.jsx("button",{type:"button",onClick:()=>W(u=>!u),"aria-pressed":ce,title:ce?"Hide off-duty agents":"Show off-duty agents",className:["px-2.5 py-1.5 rounded-xl border font-medium",ce?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:r.jsx("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ce?r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),r.jsx("path",{d:"M1 1l22 22"}),r.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]})})}),r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Visible days",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),r.jsx("path",{d:"M16 2v4"}),r.jsx("path",{d:"M8 2v4"}),r.jsx("path",{d:"M3 10h18"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[6rem] appearance-none",a?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Te,onChange:u=>Ye(Math.max(1,Math.min(7,parseInt(u.target.value,10)||7))),"aria-label":"Visible days",children:Array.from({length:7},(u,m)=>m+1).map(u=>r.jsxs("option",{value:u,children:[u," day",u===1?"":"s"]},u))}),r.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(a?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),Te<7&&r.jsxs("div",{className:"inline-flex items-center gap-1 ml-1",role:"group","aria-label":"Scroll days",children:[r.jsx("button",{type:"button",onClick:()=>gt(u=>Math.max(0,u-1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Earlier days","aria-label":"Earlier days",disabled:ve<=0,children:r.jsx("svg",{"aria-hidden":!0,className:ve<=0?a?"text-neutral-600":"text-neutral-400":a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"15 18 9 12 15 6"})})}),r.jsx("button",{type:"button",onClick:()=>gt(u=>Math.min(Math.max(1,Math.ceil(7/Te))-1,u+1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Later days","aria-label":"Later days",disabled:ve>=Math.max(1,Math.ceil(7/Te))-1,children:r.jsx("svg",{"aria-hidden":!0,className:ve>=Math.max(1,Math.ceil(7/Te))-1?a?"text-neutral-600":"text-neutral-400":a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:r.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]}),r.jsx("button",{type:"button",onClick:()=>E(u=>!u),"aria-pressed":d,title:"Toggle time labels",className:["px-2.5 py-1.5 rounded-xl border font-medium",d?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),r.jsxs("div",{className:"inline-flex items-center gap-1",title:"Undo / Redo",children:[r.jsx("button",{type:"button",disabled:!Jt,onClick:an,className:["px-2.5 py-1.5 rounded-xl border font-medium",Jt?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Undo (Ctrl/Cmd+Z)",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"9 14 4 9 9 4"}),r.jsx("path",{d:"M20 20a8 8 0 0 0-7-12H4"})]})}),r.jsx("button",{type:"button",disabled:!gn,onClick:dr,className:["px-2.5 py-1.5 rounded-xl border font-medium",gn?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"15 14 20 9 15 4"}),r.jsx("path",{d:"M4 20a8 8 0 0 1 7-12h9"})]})})]}),r.jsx("button",{type:"button",onClick:lo,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Create a proposal from current changes","aria-label":"Create proposal",children:r.jsxs("span",{className:"inline-flex items-center gap-1",children:[r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"})]}),r.jsx("span",{children:"Proposal"})]})}),r.jsx("button",{type:"button",onClick:()=>{se(u=>!u),de("")},className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Import shifts/PTO/postures from a legacy JSON URL or paste","aria-label":"Import",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M12 5v14"}),r.jsx("path",{d:"M5 12h14"}),r.jsx("polyline",{points:"8 17 12 21 16 17"})]})}),r.jsx("button",{disabled:!Se,onClick:ws,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",Se?a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":a?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:r.jsxs("svg",{"aria-hidden":!0,className:a?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),r.jsx("path",{d:"M10 11v6"}),r.jsx("path",{d:"M14 11v6"})]})})]})]}),T==="Proposals"&&r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[r.jsx("div",{className:"text-sm font-semibold",children:"Proposals"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:()=>{pt(!0),Bi().then(u=>{pt(!1),ne(u.ok?u.proposals||[]:[])})},className:["px-2.5 py-1.5 rounded-xl border text-xs",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),children:"Refresh"})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-xs font-medium mb-2",children:"List"}),r.jsxs("div",{className:"flex flex-col gap-1 max-h-56 overflow-auto",children:[lt&&r.jsx("div",{className:"text-xs opacity-70",children:"Loading"}),!lt&&Pe.length===0&&r.jsx("div",{className:"text-xs opacity-70",children:"No proposals"}),Pe.map(u=>r.jsxs("button",{onClick:()=>fa(u.id),className:["text-left px-2 py-1 rounded-lg border text-xs",St===u.id?a?"bg-neutral-800 border-neutral-700":"bg-neutral-100 border-neutral-300":a?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:[r.jsx("div",{className:"font-medium truncate",children:u.title||u.id}),r.jsxs("div",{className:"opacity-70 truncate",children:[u.status,"  ",new Date((u.updatedAt||0)*1e3).toLocaleString()]})]},u.id))]})]}),r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-xs font-medium",children:"Diff"}),r.jsx("button",{type:"button",onClick:()=>Vt(u=>!u),className:["px-2.5 py-1 rounded-lg border text-[11px]",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),"aria-pressed":at,children:at?"Hide visual":"Show visual"})]}),Qt&&r.jsx("div",{className:"text-xs text-red-600 dark:text-red-300",children:Qt}),Wt&&ft&&(()=>{const u=Wt.patch||{},m={shifts:ft?.shifts||[],pto:ft?.pto||[],overrides:ft?.overrides||[]},B=yn(m.shifts,u.shifts||[],Yr),H=yn(m.pto,u.pto||[],bl),pe=yn(m.overrides,u.overrides||[],js),Ge=({kind:b})=>r.jsx("span",{className:["text-[10px] px-1.5 py-0.5 rounded border",b==="added"?a?"bg-green-900/30 border-green-800 text-green-300":"bg-green-50 border-green-200 text-green-700":b==="removed"?a?"bg-red-900/30 border-red-800 text-red-300":"bg-red-50 border-red-200 text-red-700":a?"bg-amber-900/30 border-amber-800 text-amber-300":"bg-amber-50 border-amber-200 text-amber-700"].join(" "),children:b}),mt=({text:b,kind:Ke})=>r.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[r.jsx(Ge,{kind:Ke}),r.jsx("div",{className:"truncate",title:b,children:b})]}),$t=b=>`${b.person||""}  ${b.day||""} ${b.start||""}${b.end||""}${b.endDay&&b.endDay!==b.day?` (${b.endDay})`:""}`,yt=b=>`${b.person||""}  ${b.startDate||""}  ${b.endDate||""}${b.notes?` (${b.notes})`:""}`,kt=b=>`${b.person||""}  ${b.startDate||""}  ${b.endDate||""}${b.start?` ${b.start}`:""}${b.end?`${b.end}`:""}${b.endDay?` (${b.endDay})`:""}${b.kind?` [${b.kind}]`:""}${b.notes?` (${b.notes})`:""}`,dt=new Set([...B.removed.map(b=>b.id),...B.changed.map(b=>b.before?.id).filter(Boolean)]),ln=new Set([...B.added.map(b=>b.id),...B.changed.map(b=>b.after?.id).filter(Boolean)]);return r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"Shifts"}),r.jsxs("div",{className:"space-y-1",children:[B.added.map(b=>r.jsx(mt,{kind:"added",text:$t(b)},"a-"+b.id)),B.removed.map(b=>r.jsx(mt,{kind:"removed",text:$t(b)},"r-"+b.id)),B.changed.map(({before:b,after:Ke})=>r.jsx(mt,{kind:"changed",text:`${$t(b)}  ${$t(Ke)}`},"c-"+Ke.id)),B.added.length+B.removed.length+B.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"PTO"}),r.jsxs("div",{className:"space-y-1",children:[H.added.map(b=>r.jsx(mt,{kind:"added",text:yt(b)},"pa-"+b.id)),H.removed.map(b=>r.jsx(mt,{kind:"removed",text:yt(b)},"pr-"+b.id)),H.changed.map(({before:b,after:Ke})=>r.jsx(mt,{kind:"changed",text:`${yt(b)}  ${yt(Ke)}`},"pc-"+Ke.id)),H.added.length+H.removed.length+H.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs font-semibold mb-1",children:"Overrides"}),r.jsxs("div",{className:"space-y-1",children:[pe.added.map(b=>r.jsx(mt,{kind:"added",text:kt(b)},"oa-"+b.id)),pe.removed.map(b=>r.jsx(mt,{kind:"removed",text:kt(b)},"or-"+b.id)),pe.changed.map(({before:b,after:Ke})=>r.jsx(mt,{kind:"changed",text:`${kt(b)}  ${kt(Ke)}`},"oc-"+Ke.id)),pe.added.length+pe.removed.length+pe.changed.length===0&&r.jsx("div",{className:"text-xs opacity-60",children:"No changes"})]})]}),at&&r.jsx("div",{className:"pt-2 border-t border-neutral-800/30",children:r.jsx(n0,{dark:a,tz:K,weekStart:g,agents:J,live:{shifts:m.shifts,pto:m.pto},proposal:{shifts:u.shifts||[],pto:u.pto||[]},highlightLiveIds:dt,highlightProposalIds:ln,tasks:te,calendarSegs:U})})]})})(),(!Wt||!ft)&&r.jsx("div",{className:"text-xs opacity-60",children:"Select a proposal to see its diff"})]})]})]}),Y&&r.jsxs("div",{className:["mt-2 rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-sm font-semibold mb-2",children:"Import legacy data"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"From URL"}),r.jsx("input",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ee,onChange:u=>xe(u.target.value),placeholder:"https:///schedule.json"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:async()=>{de("");try{const u=await fetch(Ee,{credentials:"omit"});if(!u.ok){de(`Fetch failed: ${u.status}`);return}const m=await u.json();if(!Array.isArray(m.shifts)){de("Invalid JSON: missing shifts[]");return}const B=m.shifts.map((H,pe)=>({id:H.id||`imp-${pe}-${Math.random().toString(36).slice(2)}`,person:H.person,day:H.day,start:H.start,end:H.end,endDay:H.endDay}));ut(B),Array.isArray(m.pto)&&I(m.pto),Array.isArray(m.overrides)&&oe(m.overrides),Array.isArray(m.calendarSegs)&&v(H=>m.calendarSegs),X(!0),de(`Imported ${B.length} shifts${Array.isArray(m.pto)?`, ${m.pto.length} PTO`:""}${Array.isArray(m.overrides)?`, ${m.overrides.length} overrides`:""}${Array.isArray(m.calendarSegs)?`, ${m.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(u){de(u?.message||"Import failed")}},children:"Fetch"}),r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>{ct(u=>u.trim()?u:`{
  "shifts": [],
  "pto": [],
  "calendarSegs": []
}`)},children:"Paste JSON"})]}),r.jsx("div",{className:"md:col-span-3",children:He!==""&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("textarea",{className:["w-full h-40 border rounded-xl p-2 font-mono text-xs",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:He,onChange:u=>ct(u.target.value)}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",a?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{de("");try{const u=JSON.parse(He);if(!Array.isArray(u.shifts)){de("Invalid JSON: missing shifts[]");return}const m=u.shifts.map((B,H)=>({id:B.id||`imp-${H}-${Math.random().toString(36).slice(2)}`,person:B.person,day:B.day,start:B.start,end:B.end,endDay:B.endDay}));ut(m),Array.isArray(u.calendarSegs)&&v(u.calendarSegs),Array.isArray(u.pto)&&I(u.pto),Array.isArray(u.overrides)&&oe(u.overrides),X(!0),de(`Imported ${m.length} shifts${Array.isArray(u.pto)?`, ${u.pto.length} PTO`:""}${Array.isArray(u.overrides)?`, ${u.overrides.length} overrides`:""}${Array.isArray(u.calendarSegs)?`, ${u.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(u){de(u?.message||"Invalid JSON")}},children:"Load"}),r.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>ct(""),children:"Clear"})]})]})}),zt&&r.jsx("div",{className:["md:col-span-3 text-sm",zt.startsWith("Imported")?a?"text-green-300":"text-green-700":a?"text-red-300":"text-red-700"].join(" "),children:zt}),r.jsx("div",{className:"md:col-span-3 text-xs opacity-70",children:"Note: After import, click Publish to write the data to live. Agents list will update automatically from shift names."})]})]}),T==="Agents"?r.jsx(t0,{dark:a,agents:J,onAddAgent:Nl,onUpdateAgent:Sl,onDeleteAgent:bs,weekStart:g,tz:K,shifts:z,pto:L,tasks:te,calendarSegs:U,onUpdateShift:(u,m)=>{Q?.(u,m),nt.length===0&&Mt.length===0&&ut(H=>H.map(pe=>pe.id===u?{...pe,...m}:pe))},onDeleteShift:u=>{G?.(u),nt.length===0&&Mt.length===0&&ut(B=>B.filter(H=>H.id!==u))},onAddShift:u=>{Z?.(u),nt.length===0&&Mt.length===0&&ut(B=>B.some(H=>H.id===u.id)?B:B.concat([u]))},selectedIdx:Mr,onSelectIdx:u=>jl(u)}):T==="Shifts"?r.jsxs("div",{className:["rounded-xl p-2 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx(Hi,{dark:a,tz:K,weekStart:g,agents:ce?J:J.filter(u=>!u.hidden),shifts:Ir,pto:L,tasks:void 0,calendarSegs:void 0,visibleDays:Te,scrollChunk:ve,showAllTimeLabels:d,sortMode:Ie,sortDir:Xe,highlightIds:Rt,selectedIds:rt,onToggleSelect:u=>{vt(m=>{const B=new Set(m);return B.has(u)?B.delete(u):B.add(u),B})},onDragAll:(u,m)=>{const B=et.filter(b=>b.person===u),H=B.map(b=>({id:b.id,patch:{day:b.day,start:b.start,end:b.end,endDay:b.endDay}}));cr(H);const pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ge=b=>pe.indexOf(b),mt=b=>pe[(b%7+7)%7],$t=b=>{const[Ke,ht]=b.split(":").map(Number);return(Ke||0)*60+(ht||0)},yt=(b,Ke)=>{const[ht,Ct]=b.split(":").map(Number),Et=((ht||0)*60+(Ct||0)+Ke+10080)%1440,rn=Math.floor(Et/60).toString().padStart(2,"0"),tn=(Et%60).toString().padStart(2,"0");return`${rn}:${tn}`},kt=B.map(b=>{const Ke=Ge(b.day),ht=Ge(b.endDay||b.day),Ct=Ke*1440+$t(b.start);let Et=ht*1440+$t(b.end);Et<=Ct&&(Et+=1440);let rn=Ct+m,tn=Et+m;const Pt=Math.floor((rn/1440%7+7)%7),Bt=Math.floor((tn/1440%7+7)%7),Nn=(rn%1440+1440)%1440,_n=(tn%1440+1440)%1440;return{...b,day:mt(Pt),start:yt("00:00",Nn),end:yt("00:00",_n),endDay:mt(Bt)}}),dt=new Set(Rt),ln=new Map(kt.map(b=>[b.id,b]));ut(b=>b.map(Ke=>ln.get(Ke.id)||Ke)),kt.forEach(b=>dt.add(b.id)),we(dt),X(!0)},onDragShift:(u,m,B)=>{const H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pe=b=>H.indexOf(b),Ge=b=>H[(b%7+7)%7],mt=b=>{const[Ke,ht]=b.split(":").map(Number);return(Ke||0)*60+(ht||0)},$t=(b,Ke)=>{const[ht,Ct]=b.split(":").map(Number),Et=((ht||0)*60+(Ct||0)+Ke+10080)%1440,rn=Math.floor(Et/60).toString().padStart(2,"0"),tn=(Et%60).toString().padStart(2,"0");return`${rn}:${tn}`},yt=new Set(rt);yt.add(m);const kt=et.filter(b=>yt.has(b.id));if(kt.length===0)return;if(kt.length===1){const b=kt[0];cr([{id:b.id,patch:{day:b.day,start:b.start,end:b.end,endDay:b.endDay}}]);const Ke=pe(b.day),ht=pe(b.endDay||b.day),Ct=Ke*1440+mt(b.start);let Et=ht*1440+mt(b.end);Et<=Ct&&(Et+=1440);const rn=Ct+B,tn=Et+B,Pt=Math.floor((rn/1440%7+7)%7),Bt=Math.floor((tn/1440%7+7)%7),Nn=(rn%1440+1440)%1440,_n=(tn%1440+1440)%1440,Tn={day:Ge(Pt),start:$t("00:00",Nn),end:$t("00:00",_n),endDay:Ge(Bt)};ut(An=>An.map($n=>$n.id===b.id?{...$n,...Tn}:$n)),we(An=>{const $n=new Set(An);return $n.add(b.id),$n}),X(!0);return}const dt=kt.map(b=>({id:b.id,patch:{day:b.day,start:b.start,end:b.end,endDay:b.endDay}}));cr(dt);const ln=new Set(Rt);for(const b of kt){const Ke=pe(b.day),ht=pe(b.endDay||b.day),Ct=Ke*1440+mt(b.start);let Et=ht*1440+mt(b.end);Et<=Ct&&(Et+=1440);const rn=Ct+B,tn=Et+B,Pt=Math.floor((rn/1440%7+7)%7),Bt=Math.floor((tn/1440%7+7)%7),Nn=(rn%1440+1440)%1440,_n=(tn%1440+1440)%1440,Tn={...b,day:Ge(Pt),start:$t("00:00",Nn),end:$t("00:00",_n),endDay:Ge(Bt)};ut(An=>An.map($n=>$n.id===Tn.id?Tn:$n)),ln.add(Tn.id)}we(ln),X(!0)}}),(()=>{const u=(ce?J:J.filter(m=>!m.hidden)).map(m=>[m.firstName,m.lastName].filter(Boolean).join(" ").trim()).filter(Boolean);return r.jsx(r0,{dark:a,tz:K,weekStart:g,shifts:Ir,visibleAgentNames:u,visibleDays:Te,scrollChunk:ve})})()]}):T==="Postures"?r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[r.jsxs("div",{className:"md:col-span-1 space-y-3",children:[r.jsx(s0,{tasks:te,onCreate:u=>h(m=>m.concat([{...u,id:ds()}])),onUpdate:u=>h(m=>m.map(B=>B.id===u.id?u:B)),onArchive:u=>h(m=>m.map(B=>B.id===u?{...B,archived:!0}:B)),onDelete:u=>{h(m=>m.filter(B=>B.id!==u)),v(m=>m.filter(B=>B.taskId!==u))},dark:a,selectedId:bt,onSelect:u=>Ft(u)}),r.jsxs("div",{className:["rounded-xl p-3 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Assign posture to agent"}),r.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:D,onChange:u=>me(u.target.value),children:[r.jsx("option",{value:"",children:""}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Day"}),r.jsx("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Me,onChange:u=>be(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:he,onChange:u=>_e(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ae,onChange:u=>st(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[r.jsx("span",{className:"mb-1",children:"End Day"}),r.jsx("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:In,onChange:u=>Ot(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]})]}),r.jsx("button",{onClick:()=>{if(!D)return alert("Choose an agent");if(!bt)return alert("Choose a posture");const u=Oe(he),m=Oe(Ae);if(In===Me&&!(m>u))return alert("End must be after start (or choose a later End Day)");ra(z,Me,K.offset).filter(H=>H.person===D).some(H=>{const pe=Oe(H.start),Ge=H.end==="24:00"?1440:Oe(H.end);return u<Ge&&m>pe}),v(H=>H.concat([{person:D,agentId:dl(J,D),day:Me,endDay:In,start:he,end:Ae,taskId:bt}]))},className:["h-10 rounded-xl border font-medium px-4",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add assignment"})]})]})]}),r.jsxs("div",{className:"md:col-span-1 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-sm font-medium",children:"Assigned postures"}),bt&&r.jsxs("div",{className:"text-xs opacity-70",children:["Filtered to: ",te.find(u=>u.id===bt)?.name||bt]})]}),(()=>{const u=new Map(it.map((pe,Ge)=>[pe,Ge])),m=U.map((pe,Ge)=>({...pe,_idx:Ge})),B=te.filter(pe=>!pe.archived&&(!bt||pe.id===bt)),H=[];for(const pe of B){const Ge=m.filter(yt=>yt.taskId===pe.id);if(Ge.length===0)continue;const mt=new Map;for(const yt of Ge){const kt=mt.get(yt.person)||[];kt.push(yt),mt.set(yt.person,kt)}const $t=Array.from(mt.keys()).sort();H.push(r.jsxs("div",{className:["rounded-xl border overflow-hidden",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:["px-3 py-2 flex items-center justify-between rounded-t-xl",a?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsxs("span",{className:"inline-flex items-center gap-2",children:[r.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:pe.color||"#888"}}),r.jsx("span",{className:"font-medium text-sm",children:pe.name})]}),r.jsxs("span",{className:"text-xs opacity-70",children:[Ge.length," item",Ge.length===1?"":"s"]})]}),r.jsx("div",{className:"divide-y "+(a?"divide-neutral-800":"divide-neutral-200"),children:$t.map(yt=>{const kt=mt.get(yt).slice().sort((dt,ln)=>{const b=(u.get(dt.day)??0)-(u.get(ln.day)??0);if(b!==0)return b;const Ke=Oe(dt.start)-Oe(ln.start);return Ke!==0?Ke:dt.end.localeCompare(ln.end)});return r.jsxs("details",{children:[r.jsxs("summary",{className:["px-3 py-1.5 cursor-pointer select-none flex items-center justify-between",a?"hover:bg-neutral-900":"hover:bg-neutral-50"].join(" "),children:[r.jsx("span",{className:"text-sm",children:ur(J,kt[0]?.agentId,yt)}),r.jsxs("span",{className:"text-xs opacity-70",children:[kt.length," shift",kt.length===1?"":"s"]})]}),r.jsx("div",{className:"px-3 py-1.5 space-y-1",children:kt.map(dt=>r.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"w-[12ch] opacity-70",children:[dt.day,dt.endDay&&dt.endDay!==dt.day?`  ${dt.endDay}`:""]}),r.jsxs("span",{className:"w-[11ch] tabular-nums",children:[dt.start,"",dt.end]})]}),r.jsxs("div",{className:"shrink-0 flex gap-1.5",children:[r.jsx("button",{onClick:()=>{mn(dt._idx),bn(dt.person),ql(dt.day),ms(dt.start),Hr(dt.end),eo(dt.taskId),As(dt.endDay||dt.day)},className:["px-2 py-1 rounded border text-xs",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),r.jsx("button",{onClick:()=>{confirm("Remove this assignment?")&&v(ln=>ln.filter((b,Ke)=>Ke!==dt._idx))},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})]},`${dt._idx}-${dt.day}-${dt.start}-${dt.end}`))})]},yt)})})]},pe.id))}return H.length===0?r.jsx("div",{className:"text-sm opacity-70",children:"No assigned postures."}):r.jsx("div",{className:"space-y-3 h-[28rem] overflow-auto pr-1",children:H})})(),jn!=null&&r.jsxs("div",{className:["rounded-xl p-3 border",a?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit assignment"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:fr,onChange:u=>bn(u.target.value),children:Vn.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Day"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Br,onChange:u=>ql(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:hl,onChange:u=>ms(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Wr,onChange:u=>Hr(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End Day"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:pl,onChange:u=>As(u.target.value),children:it.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Posture"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ur,onChange:u=>eo(u.target.value),children:te.filter(u=>!u.archived).map(u=>r.jsx("option",{value:u.id,children:u.name},u.id))})]}),r.jsxs("div",{className:"md:col-span-6 flex gap-2",children:[r.jsx("button",{onClick:()=>{if(jn==null)return;if(!fr.trim())return alert("Choose an agent");if(!Ur)return alert("Choose a posture");const u=Oe(hl),m=Oe(Wr);if(pl===Br&&!(m>u))return alert("End must be after start (or choose a later End Day)");ra(z,Br,K.offset).filter(H=>H.person===fr).some(H=>{const pe=Oe(H.start),Ge=H.end==="24:00"?1440:Oe(H.end);return u<Ge&&m>pe}),v(H=>H.map((pe,Ge)=>Ge===jn?{person:fr.trim(),agentId:dl(J,fr.trim()),day:Br,endDay:pl,start:hl,end:Wr,taskId:Ur}:pe)),mn(null)},className:["px-3 py-1.5 rounded border text-sm",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),r.jsx("button",{onClick:()=>mn(null),className:["px-3 py-1.5 rounded border text-sm",a?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})]})]})]})]}),r.jsx("div",{className:"mt-3 space-y-3",children:qn.filter(u=>U.some(m=>m.taskId===u.id)).sort((u,m)=>u.name.localeCompare(m.name)).map(u=>r.jsx(bd,{dark:a,weekStart:g,calendarSegs:U,tasks:te,agents:J,filterTaskId:u.id,packed:!0,title:`Weekly ${u.name} calendar`},u.id))})]}):T==="PTO & Overrides"?r.jsxs("div",{children:[r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:"Weekly PTO calendar"}),r.jsx("div",{className:"text-xs opacity-70",children:"Full-day entries by person"})]}),(()=>{const B=Dn(g),H=it.map((pe,Ge)=>dn(jr(B,Ge)));return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((pe,Ge)=>{const mt=H[Ge],$t=j.filter(b=>(!Kn||b.person===Kn)&&b.startDate<=mt&&b.endDate>=mt).slice().sort((b,Ke)=>b.person.localeCompare(Ke.person)||b.startDate.localeCompare(Ke.startDate)),yt=new Map;let kt=0;const dt=$t.map(b=>{let Ke=yt.get(b.person);return Ke==null&&(Ke=kt++,yt.set(b.person,Ke)),{p:b,lane:Ke}});Math.max(dt.length,1);const ln=Math.min(220,Math.max(dt.length*28+28,120));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:ln},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:pe}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(mt.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:dt.map(({p:b,lane:Ke})=>{const ht=Ke*28,Ct=ur(J,b.agentId,b.person);return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 h-[22px] flex items-center justify-between",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:ht},title:`${Ct}  ${b.startDate}  ${b.endDate}`,children:[r.jsx("span",{className:"truncate",children:Ct}),b.notes&&r.jsx("span",{className:"ml-2 text-[11px] opacity-70 truncate",children:b.notes})]},`${b.id}-${mt}`)})})]},pe)})})})()]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-3 items-start",children:r.jsxs("div",{className:"space-y-3 flex-1 min-w-0",children:[r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Add PTO"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end mb-3",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:hs,onChange:u=>Os(u.target.value),children:[r.jsx("option",{value:"",children:""}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Nr,onChange:u=>to(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Vr,onChange:u=>It(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"Notes"}),r.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:xl,onChange:u=>gl(u.target.value)})]}),r.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[r.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",a?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(!hs)return alert("Choose an agent");if(!Nr||!Vr)return alert("Choose start and end dates");if(Vr<Nr)return alert("End date must be on/after start date");const u={id:ds(),person:hs,agentId:dl(J,hs),startDate:Nr,endDate:Vr,notes:xl||void 0};I(m=>m.concat([u])),Os(""),to(""),It(""),gl(""),X(!0)},children:"Add PTO"}),r.jsxs("div",{className:"ml-auto inline-flex items-center gap-2",children:[r.jsx("span",{className:a?"text-neutral-300":"text-neutral-700",children:"Filter"}),r.jsxs("select",{className:["border rounded-xl px-2 py-1",a?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:Kn,onChange:u=>no(u.target.value),children:[r.jsx("option",{value:"",children:"All"}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]})]})]}),null,(()=>{const u=j.filter(H=>!Kn||H.person===Kn).slice().sort((H,pe)=>H.person.localeCompare(pe.person)||H.startDate.localeCompare(pe.startDate));if(u.length===0)return r.jsx("div",{className:"text-sm opacity-70",children:"No PTO entries."});const m=new Map;for(const H of u){const pe=m.get(H.person)||[];pe.push(H),m.set(H.person,pe)}const B=Array.from(m.keys()).sort();return r.jsx("div",{className:"space-y-3",children:B.map(H=>{const pe=m.get(H).slice().sort((Ge,mt)=>Ge.startDate.localeCompare(mt.startDate));return r.jsxs("details",{className:["rounded-xl border overflow-hidden",a?"border-neutral-800":"border-neutral-200"].join(" "),open:!0,children:[r.jsxs("summary",{className:["px-3 py-2 cursor-pointer select-none flex items-center justify-between",a?"bg-neutral-900":"bg-white"].join(" "),children:[r.jsx("span",{className:"text-sm font-medium",children:ur(J,pe[0]?.agentId,H)}),r.jsxs("span",{className:"text-xs opacity-70",children:[pe.length," item",pe.length===1?"":"s"]})]}),r.jsx("div",{className:"divide-y "+(a?"divide-neutral-800":"divide-neutral-200"),children:pe.map(Ge=>r.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"tabular-nums",children:[Ge.startDate,"  ",Ge.endDate]}),Ge.notes&&r.jsx("span",{className:"opacity-70 max-w-[40ch] truncate",children:Ge.notes})]}),r.jsxs("div",{className:"shrink-0 inline-flex gap-1.5",children:[r.jsx("button",{className:["px-2 py-1 rounded border text-xs",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>ia(Ge),children:"Edit"}),r.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete PTO?")&&I(mt=>mt.filter($t=>$t.id!==Ge.id))},children:"Delete"})]})]},Ge.id))})]},H)})})})(),zs&&r.jsxs("div",{className:["rounded-xl p-3 border",a?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit PTO"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Agent"}),r.jsx("select",{className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Kr,onChange:u=>Qr(u.target.value),children:Vn.map(u=>r.jsx("option",{value:u,children:u},u))})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"Start"}),r.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Qn,onChange:u=>er(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col",children:[r.jsx("span",{className:"mb-1",children:"End"}),r.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Xn,onChange:u=>$r(u.target.value)})]}),r.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[r.jsx("span",{className:"mb-1",children:"Notes"}),r.jsx("input",{type:"text",className:["w-full border rounded px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Xr,onChange:u=>tr(u.target.value)})]}),r.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[r.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(zs){if(!Kr.trim())return alert("Choose an agent");if(!Qn||!Xn)return alert("Choose start/end");if(Xn<Qn)return alert("End date must be on/after start date");I(u=>u.map(m=>m.id===zs.id?{...m,person:Kr.trim(),agentId:dl(J,Kr.trim()),startDate:Qn,endDate:Xn,notes:Xr||void 0}:m)),vl(),X(!0)}},children:"Save"}),r.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",a?"border-neutral-700":"border-neutral-300"].join(" "),onClick:vl,children:"Cancel"})]})]})]})]}),r.jsx("div",{className:"space-y-3 flex-1 min-w-0",children:r.jsxs("div",{className:["rounded-xl p-3 border",a?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[r.jsx("div",{className:"text-sm font-medium mb-2",children:"Add Overrides"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-2 items-end",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Agent"}),r.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Sr,onChange:u=>ua(u.target.value),children:[r.jsx("option",{value:"",children:""}),Vn.map(u=>r.jsx("option",{value:u,children:u},u))]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Start date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ps,onChange:u=>Rs(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"End date"}),r.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:xs,onChange:u=>ca(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Start time (optional)"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:nr,onChange:u=>{const m=u.target.value,B=(pe,Ge)=>Nt(((Oe(pe)+Ge)%1440+1440)%1440),H=nr?B(nr,510):null;if(gs(m),m){const pe=B(m,510);(!Yn||H&&Yn===H)&&ys(pe)}}})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{className:"text-xs opacity-80",children:"End time (optional)"}),r.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Yn,onChange:u=>ys(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Kind"}),r.jsx("input",{type:"text",placeholder:"e.g., Swap, Half-day",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ro,onChange:u=>da(u.target.value)})]}),r.jsxs("label",{className:"flex flex-col gap-1 md:col-span-2",children:[r.jsx("span",{className:"text-xs opacity-80",children:"Notes"}),r.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Fs,onChange:u=>Bs(u.target.value)})]}),r.jsxs("div",{className:"flex items-end gap-3 md:col-span-2",children:[r.jsxs("label",{className:"inline-flex items-center gap-2",children:[r.jsx(Wi,{ariaLabel:"Weekly recurrence",dark:a,size:"md",checked:vs,onChange:u=>so(u)}),r.jsx("span",{className:"text-sm",children:"Weekly recurrence"})]}),vs&&r.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"opacity-80",children:"Until"}),r.jsx("input",{type:"date",className:["border rounded-xl px-2 py-1",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:mr,onChange:u=>wl(u.target.value)})]}),r.jsx("button",{className:["ml-auto h-10 rounded-xl px-4 border font-medium","bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),onClick:()=>{if(!Sr)return alert("Choose an agent");if(!ps||!xs)return alert("Choose start and end dates");if(xs<ps)return alert("End date must be on/after start date");if(nr&&!Yn||!nr&&Yn)return alert("Provide both start and end times, or leave both blank");const u={id:ds(),person:Sr,agentId:dl(J,Sr),startDate:ps,endDate:xs,start:nr||void 0,end:Yn||void 0,kind:ro||void 0,notes:Fs||void 0,recurrence:vs?{rule:"weekly",until:mr||void 0}:void 0};oe(m=>m.concat([u])),X(!0)},children:"Add Override"})]})]}),r.jsxs("div",{className:"mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Overrides"}),Le.filter(u=>!Kn||u.person===Kn).length===0?r.jsx("div",{className:"text-sm opacity-70",children:"No overrides."}):r.jsx("ul",{className:"divide-y divide-neutral-700/30",children:Le.filter(u=>!Kn||u.person===Kn).slice().sort((u,m)=>u.person.localeCompare(m.person)||u.startDate.localeCompare(m.startDate)).map(u=>r.jsxs("li",{className:"py-1.5 flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"text-sm",children:[r.jsx("span",{className:"font-medium",children:u.person}),r.jsxs("span",{className:"opacity-70",children:["  ",u.startDate,"  ",u.endDate]}),u.start&&u.end&&r.jsxs("span",{className:"opacity-70",children:["  ",u.start,"",u.end]}),u.kind&&r.jsxs("span",{className:"ml-1 opacity-70",children:[" ",u.kind]}),u.recurrence?.rule==="weekly"&&r.jsxs("span",{className:"ml-1 text-xs opacity-80",children:["(weekly",u.recurrence.until?` until ${u.recurrence.until}`:"",")"]}),u.notes&&r.jsx("span",{className:"ml-2 text-xs opacity-70",children:u.notes})]}),r.jsx("div",{className:"shrink-0",children:r.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete override?")&&(oe(m=>m.filter(B=>B.id!==u.id)),X(!0))},children:"Delete"})})]},u.id))})]})]})})]})})]}):null,Ne&&r.jsx("div",{className:"fixed right-4 bottom-4 z-50",children:r.jsx("div",{role:"status","aria-live":"polite",className:["min-w-[220px] max-w-[360px] px-3 py-2 rounded-xl border shadow-md text-sm",Ne.kind==="success"?a?"bg-neutral-800 border-green-700 text-green-300":"bg-white border-green-500 text-green-700":a?"bg-neutral-800 border-red-700 text-red-300":"bg-white border-red-500 text-red-700"].join(" "),children:Ne.text})})]}):r.jsx("section",{className:["rounded-2xl p-6",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:r.jsxs("div",{className:"max-w-md mx-auto space-y-3",children:[r.jsx("div",{className:"text-lg font-semibold",children:"Protected  Manage Data"}),r.jsx("p",{className:"text-sm opacity-80",children:"Sign in to your session."}),r.jsx("form",{onSubmit:u=>{u.preventDefault(),(async()=>{const m=await xd(P);if(m.ok){try{await aa(P)}catch{}if(Fi(),Zl()){O(!0),$e("");try{localStorage.setItem("schedule_admin_unlocked","1")}catch{}try{oa(y.map(B=>({id:B.id||Math.random().toString(36).slice(2),firstName:B.firstName||"",lastName:B.lastName||"",tzId:B.tzId,hidden:!!B.hidden,isSupervisor:!!B.isSupervisor,supervisorId:B.supervisorId??null,notes:B.notes})))}catch{}}else O(!1),$e("Signed in, but CSRF missing. Check cookie Domain/Path and SameSite; reload and try again.")}else $e(m.status===401?"Incorrect password":"Login failed")})()},children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"password",autoFocus:!0,className:["flex-1 border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:P,onChange:u=>De(u.target.value),placeholder:"Password"}),r.jsx("button",{type:"submit",className:["rounded-xl px-4 py-2 font-medium border",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Sign in"})]})}),je&&r.jsx("div",{className:["text-sm",a?"text-red-300":"text-red-600"].join(" "),children:je}),r.jsxs("div",{className:"pt-3 border-t border-neutral-700/30 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Or email me a magic link"}),r.jsx(o0,{dark:a})]}),r.jsx("div",{className:"text-xs opacity-70",children:"Your API should set a session cookie and CSRF token on success."}),r.jsxs("div",{className:"text-xs opacity-60 mt-2",children:[r.jsxs("div",{children:["API base: ",r.jsx("code",{children:ie})]}),r.jsxs("div",{children:["API path: ",r.jsx("code",{children:Fe})]}),r.jsxs("div",{children:["Dev proxy: ",Ve?"on (local only)":"off"]}),(()=>{const u=Fi();return r.jsxs("div",{children:[r.jsxs("div",{children:["CSRF token available: ",u.token?"yes":"no"]}),r.jsxs("div",{className:"opacity-75",children:[" cookie readable: ",u.cookie?"yes":"no",";  memory: ",u.memory?"yes":"no"]})]})})()]})]})})}function o0({dark:a}){const[y,c]=w.useState(""),[C,S]=w.useState(""),[g,K]=w.useState(void 0);return r.jsxs("form",{onSubmit:z=>{z.preventDefault(),(async()=>{S(""),K(void 0);const L=await Xi(y,"admin");L.ok?L.link?(K(L.link),S("Dev mode: click the link below to sign in.")):S("Check your inbox for the sign-in link."):S("Failed to request link. Check email format and try again.")})()},children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"email",required:!0,className:["flex-1 border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:y,onChange:z=>c(z.target.value),placeholder:"you@company.com"}),r.jsx("button",{type:"submit",className:["rounded-xl px-3 py-2 text-sm font-medium border",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Email link"})]}),C&&r.jsx("div",{className:"text-xs mt-2 opacity-80",children:C}),g&&r.jsx("div",{className:"mt-2 text-xs break-all",children:r.jsx("a",{className:"underline",href:g,target:"_blank",rel:"noreferrer",children:g})})]})}function a0({dark:a,weekStart:y,pto:c,agents:C,title:S="Weekly PTO calendar",subtitle:g="Full-day entries by person"}){const L=Dn(y),ue=it.map((te,U)=>dn(jr(L,U)));return r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:S}),r.jsx("div",{className:"text-xs opacity-70",children:g})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((te,U)=>{const Q=ue[U],G=(c||[]).filter(p=>p.startDate<=Q&&p.endDate>=Q).slice().sort((p,A)=>{const O=ur(C,p.agentId,p.person),P=ur(C,A.agentId,A.person);return O.localeCompare(P)||p.startDate.localeCompare(A.startDate)}),Z=new Map;let h=0;const v=G.map(p=>{const A=ur(C,p.agentId,p.person);let O=Z.get(A);return O==null&&(O=h++,Z.set(A,O)),{p,lane:O,disp:A}}),M=Math.min(280,Math.max(v.length*50+28,140));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:M},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:te}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(Q.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:v.map(({p,lane:A,disp:O},P)=>{const De=A*50;return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 py-1",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:De},title:`${O}  ${p.startDate}  ${p.endDate}${p.notes?"  "+p.notes:""}`,children:[r.jsx("div",{className:"text-[13px] leading-snug break-words",children:O}),p.notes&&r.jsx("div",{className:"text-[11px] opacity-80 leading-snug break-words",children:p.notes})]},`${p.id}-${P}`)})})]},te)})})]})}function i0({dark:a,weekStart:y,overrides:c,agents:C,title:S="Weekly Overrides calendar",subtitle:g="Presence indicates any override on that day"}){const L=Dn(y),ue=it.map((te,U)=>dn(jr(L,U)));return r.jsxs("div",{className:["mt-3 rounded-xl p-3 border",a?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"text-sm font-medium",children:S}),r.jsx("div",{className:"text-xs opacity-70",children:g})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:it.map((te,U)=>{const Q=ue[U],G=(c||[]).filter(p=>p.startDate<=Q&&p.endDate>=Q).slice().sort((p,A)=>{const O=ur(C,p.agentId,p.person),P=ur(C,A.agentId,A.person);return O.localeCompare(P)||p.startDate.localeCompare(A.startDate)}),Z=new Map;let h=0;const v=G.map(p=>{const A=ur(C,p.agentId,p.person);let O=Z.get(A);O==null&&(O=h++,Z.set(A,O));const P=p.start&&p.end?`${p.start}${p.end}${p.endDay?" "+p.endDay:""}`:"",De=[p.kind,P].filter(Boolean).join("  ");return{o:p,lane:O,disp:A,note:De}}),M=Math.min(280,Math.max(v.length*50+28,140));return r.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",a?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:M},children:[r.jsxs("div",{className:"font-medium mb-1 flex items-baseline justify-between",children:[r.jsx("span",{children:te}),r.jsx("span",{className:"text-xs opacity-70",children:parseInt(Q.slice(8),10)})]}),r.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:v.map(({o:p,lane:A,disp:O,note:P},De)=>{const je=A*50,$e=`${O}  ${p.startDate}  ${p.endDate}${P?"  "+P:""}`;return r.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 py-1",a?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:je},title:$e,children:[r.jsx("div",{className:"text-[13px] leading-snug break-words",children:O}),P&&r.jsx("div",{className:"text-[11px] opacity-80 leading-snug break-words",children:P})]},`${p.id}-${De}`)})})]},te)})})]})}function u0({dark:a,weekStart:y,agents:c,pto:C,overrides:S,tasks:g,calendarSegs:K}){const z=h=>`${h?.firstName||""} ${h?.lastName||""}`.trim(),L=h=>(h||"").trim().toLowerCase();w.useMemo(()=>c||[],[c]);const ue=w.useMemo(()=>(c||[]).filter(h=>!!h.isSupervisor),[c]),te=w.useMemo(()=>{const h=new Map;for(const v of c||[]){if(!v.isSupervisor)continue;const M=L(z(v)),p=v.id&&String(v.id)||M;p&&(h.set(p,p),M&&h.set(M,p))}return h},[c]),U=w.useMemo(()=>{const h=new Map;for(const v of ue){const M=L(z(v)),p=v.id&&String(v.id)||M;p&&(h.has(p)||h.set(p,[]))}for(const v of c||[]){const M=v.supervisorId||"";if(!M)continue;const p=te.get(M)||te.get(L(M));p&&h.has(p)&&h.get(p).push(v)}return h},[c,ue,te]),Q=w.useMemo(()=>(c||[]).filter(h=>{if(h.isSupervisor)return!1;const v=h.supervisorId||"";if(!v)return!0;const M=te.get(v)||te.get(L(v));return!M||!U.has(M)}),[c,te,U]);w.useMemo(()=>{const h=new Map;for(const v of c)v.id&&h.set(v.id,v);return h},[c]),w.useMemo(()=>{const h=new Map;for(const v of c){const M=z(v).toLowerCase();M&&h.set(M,v)}return h},[c]);const G="inline-flex items-center gap-2 px-2 py-1 rounded border text-sm",Z=a?"border-neutral-700 bg-neutral-900 text-neutral-100":"border-neutral-300 bg-white text-neutral-900";return r.jsxs("section",{className:["rounded-2xl p-3",a?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:["text-lg font-semibold mb-2",a?"text-neutral-200":"text-neutral-900"].join(" "),children:"Teams"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("div",{className:"flex items-start gap-3 min-w-full pb-1",children:[(()=>{const h=ue.slice().sort((v,M)=>z(v).localeCompare(z(M)));return h.length===0?r.jsx("div",{className:[G,Z].join(" "),children:"No supervisors yet"}):h.map(v=>{const M=v.id&&String(v.id)||L(z(v)),p=(M?U.get(M)||[]:[]).slice().sort((O,P)=>z(O).localeCompare(z(P))),A=!!v.hidden;return r.jsxs("div",{className:["shrink-0 w-56 md:w-64 rounded-xl p-2 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:["font-medium",A?a?"text-neutral-400":"text-neutral-500":a?"text-neutral-100":"text-neutral-900"].join(" "),children:z(v)||v.id}),r.jsx("span",{className:["text-xs px-1.5 py-0.5 rounded border",a?"border-neutral-700 text-neutral-300":"border-neutral-300 text-neutral-600"].join(" "),children:p.length})]}),p.length>0?r.jsx("ul",{className:"space-y-1",children:p.map(O=>r.jsx("li",{className:["px-2 py-1 rounded border text-sm text-left",a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:z(O)||O.id},O.id||z(O)))}):r.jsx("div",{className:["text-sm",a?"text-neutral-400":"text-neutral-500"].join(" "),children:"No direct reports"})]},v.id||z(v))})})(),Q.length>0&&r.jsxs("div",{className:["shrink-0 w-56 md:w-64 rounded-xl p-2 border",a?"border-neutral-800":"border-neutral-200"].join(" "),children:[r.jsx("div",{className:["font-medium mb-2",a?"text-neutral-100":"text-neutral-900"].join(" "),children:"Unassigned"}),r.jsx("ul",{className:"space-y-1",children:Q.slice().sort((h,v)=>z(h).localeCompare(z(v))).map(h=>r.jsx("li",{className:["px-2 py-1 rounded border text-sm text-left",a?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-800"].join(" "),children:z(h)||h.id},h.id||z(h)))})]})]})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{className:["text-lg font-semibold mb-2",a?"text-neutral-200":"text-neutral-900"].join(" "),children:"Calendars"}),r.jsx(a0,{dark:a,weekStart:y,pto:C,agents:c}),r.jsx(i0,{dark:a,weekStart:y,overrides:S||[],agents:c}),(()=>{const h=(g||[]).filter(v=>!v.archived).filter(v=>(K||[]).some(M=>M.taskId===v.id)).sort((v,M)=>(v.name||"").localeCompare(M.name||""));return h.length===0?null:h.map(v=>r.jsx(bd,{dark:a,weekStart:y,calendarSegs:K,tasks:g,agents:c,filterTaskId:v.id,packed:!0,title:`Weekly ${v.name} calendar`},v.id))})()]})]})}function c0(){const a=Array.from({length:40},(C,S)=>`Agent${S+1}`),y=[],c=[{id:ds(),person:"Agent5",startDate:"2025-08-21",endDate:"2025-08-23",notes:"Vacation"},{id:ds(),person:"Agent12",startDate:"2025-08-22",endDate:"2025-08-22",notes:"Appt"}];for(const C of it){if(C==="Sat"||C==="Sun")continue;let S=0;const g=[];let K=360;for(;K<=1050;)g.push(K),K+=120+Math.floor(Math.random()*61);for(const z of g){const L=2+Math.floor(Math.random()*2);for(let ue=0;ue<L;ue++){const te=a[S%a.length];S++;const U=z,Q=z+510;if(Q<=1440)y.push({id:ds(),person:te,day:C,start:Nt(U),end:Nt(Q)});else{const G=Q-1440,Z=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=Z[(Z.indexOf(C)+1)%7];y.push({id:ds(),person:te,day:C,start:Nt(U),end:"24:00",endDay:h}),y.push({id:ds(),person:te,day:h,start:"00:00",end:Nt(G),endDay:h})}}}}return{shifts:y,pto:c}}const zi=c0(),fd="no".toLowerCase()==="yes",d0="no".toLowerCase()==="yes";function f0(){const[a,y]=ae.useState(!1),[c,C]=ae.useState(""),[S,g]=ae.useState("");ae.useEffect(()=>{(async()=>{try{const j=Vi(),I=Ki(),Le=`${j}${I}/schedule`,oe=await fetch(Le,{method:"GET",credentials:"include"});y(oe.ok)}catch{y(!1)}})()},[]);const K=j=>{const I=(j||"").toLowerCase();return I.includes("teams")?"teams":I.includes("manage2")||I.includes("manage")?"manageV2":"schedule"},[z,L]=ae.useState(()=>K(window.location.hash)),[ue,te]=ae.useState(()=>dn(na(new Date))),[U,Q]=ae.useState(()=>new Date().getDay()),[G,Z]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_theme")||"system";if(j.includes("-")){const I=j.split("-")[0];return I==="light"||I==="dark"?"default":I}return j==="light"||j==="dark"?"default":j==="night"||j==="noir"||j==="prism"?j:"system"}catch{return"system"}}),[h,v]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_theme"),I=j==="unicorn"?"system":j;return I==="light"?!1:I==="dark"||I==="night"||I==="noir"?!0:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch{return!0}});ae.useEffect(()=>{const j=I=>{const oe=I?.detail?.value;if(!oe)return;if(oe==="system"){Z("system"),v(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);try{localStorage.setItem("schedule_theme","system")}catch{}return}let Se=oe,X="dark";if(oe.includes("-")){const Y=oe.split("-");Se=Y[0],X=Y[1]==="light"?"light":"dark"}(Se==="light"||Se==="dark")&&(X=Se,Se="default"),Se!=="default"&&Se!=="night"&&Se!=="noir"&&Se!=="prism"&&(Se="default"),Z(Se),v(X==="dark");try{localStorage.setItem("schedule_theme",`${Se}-${X}`)}catch{}};return window.addEventListener("schedule:set-theme",j),()=>window.removeEventListener("schedule:set-theme",j)},[]),ae.useEffect(()=>{if(!window.matchMedia)return;const j=window.matchMedia("(prefers-color-scheme: dark)"),I=()=>{try{localStorage.getItem("schedule_theme")==="system"&&v(j.matches)}catch{}};return j.addEventListener?j.addEventListener("change",I):j.addListener&&j.addListener(I),()=>{j.removeEventListener?j.removeEventListener("change",I):j.removeListener&&j.removeListener(I)}},[]);const M=ae.useMemo(()=>G==="system"?"default":G,[G]),p=ae.useMemo(()=>{const j="min-h-screen w-full";return M==="night"?h?`${j} bg-black text-red-400`:`${j} bg-black text-red-600`:M==="noir"?`${j} bg-black text-white`:M==="prism"?h?`${j} bg-black text-neutral-100`:`${j} bg-sky-50 text-sky-800`:h?`${j} bg-neutral-950 text-neutral-100`:`${j} bg-neutral-100 text-neutral-900`},[M,h]),[A,O]=ae.useState(fd?zi.shifts:[]),[P,De]=ae.useState(fd?zi.pto:[]),[je,$e]=ae.useState([]),[We,Ne]=ae.useState(En[0]),[ye,Re]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_slimline");return j===null?!1:j==="1"}catch{return!1}});ae.useEffect(()=>{try{localStorage.setItem("schedule_slimline",ye?"1":"0")}catch{}},[ye]),ae.useEffect(()=>{const j=I=>{const Le=I;Le&&typeof Le.detail?.value=="boolean"&&Re(Le.detail.value)};return window.addEventListener("schedule:set-slimline",j),()=>window.removeEventListener("schedule:set-slimline",j)},[]);const[ie,Fe]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_agents_v2_v1");if(j){const I=JSON.parse(j);if(Array.isArray(I))return I}}catch{}return[]}),[Ve,J]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_tasks");if(j){const I=JSON.parse(j);if(Array.isArray(I))return I}}catch{}return[]}),[F,k]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_calendarSegs");if(j){const I=JSON.parse(j);if(Array.isArray(I))return I}}catch{}return[]}),[T,V]=ae.useState(!1),d=w.useRef(new Set),[E,Ie]=ae.useState(!1),[ke,Xe]=ae.useState(!1),[Ce,q]=ae.useState(()=>{try{const j=localStorage.getItem("schedule_draft_v1");if(j){const I=JSON.parse(j);if(I&&I.meta&&I.data)return I}}catch{}return null}),ce=!!Ce,W=j=>{try{j?localStorage.setItem("schedule_draft_v1",JSON.stringify(j)):localStorage.removeItem("schedule_draft_v1")}catch{}},ee=j=>{ce?q(I=>{if(!I)return I;const Le=j(I.data.shifts),oe={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,shifts:Le}};return W(oe),oe}):O(j)},Te=j=>{ce?q(I=>{if(!I)return I;const Le=j(I.data.pto),oe={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,pto:Le}};return W(oe),oe}):De(j)},Ye=j=>{ce?q(I=>{if(!I)return I;const Le=j(I.data.calendarSegs),oe={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,calendarSegs:Le}};return W(oe),oe}):k(j)};ae.useEffect(()=>{(async()=>Ie(Zl()))()},[z]),ae.useEffect(()=>{const j=I=>{const Le=!!Zl();if(Ie(Le),Le){const oe=ie.map(Se=>({id:Se.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:Se.firstName||"",lastName:Se.lastName||"",tzId:Se.tzId,hidden:!!Se.hidden,isSupervisor:Se.isSupervisor===!0,supervisorId:Se.supervisorId??null,notes:Se.notes}));oa(oe)}};return window.addEventListener("schedule:auth",j),()=>window.removeEventListener("schedule:auth",j)},[ie]),ae.useEffect(()=>{(async()=>{if(!a)return;const j=await la();if(j){if(O(j.shifts),De(j.pto),Array.isArray(j.calendarSegs)&&k(j.calendarSegs),Array.isArray(j.overrides)&&$e(j.overrides),Array.isArray(j.agents)){const I=j.agents;Fe(I);try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(I))}catch{}}try{d.current=new Set((j.shifts||[]).map(I=>I.id).filter(Boolean))}catch{}V(!0)}})()},[a]),ae.useEffect(()=>{const j=()=>L(K(window.location.hash));return window.addEventListener("hashchange",j),()=>window.removeEventListener("hashchange",j)},[]),ae.useEffect(()=>{if(z==="manageV2")(window.location.hash||"").toLowerCase().startsWith("#manage2")||(window.location.hash="#manage2");else if(z==="teams")(window.location.hash||"").toLowerCase().startsWith("#teams")||(window.location.hash="#teams");else if(window.location.hash)try{history.replaceState(null,"",window.location.pathname+window.location.search)}catch{}},[z]),ae.useEffect(()=>{Ve.length===0&&J([{id:"support",name:"Support Inbox",color:"#2563eb"},{id:"meetings",name:"Meetings",color:"#16a34a"}])},[]),ae.useEffect(()=>{try{localStorage.setItem("schedule_tasks",JSON.stringify(Ve))}catch{}},[Ve]),ae.useEffect(()=>{try{localStorage.setItem("schedule_calendarSegs",JSON.stringify(F))}catch{}},[F]),ae.useEffect(()=>{try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(ie))}catch{}},[ie]),ae.useEffect(()=>{ie.length!==0&&(ie.every(j=>!!j.id)||Fe(j=>j.map(I=>I.id?I:{...I,id:crypto.randomUUID?.()||Math.random().toString(36).slice(2)})))},[ie]);const ve=j=>`${j.firstName||""} ${j.lastName||""}`.trim(),gt=j=>(j||"").trim().toLowerCase(),et=j=>{const I=(j||"").trim().toLowerCase();return I?ie.find(oe=>ve(oe).toLowerCase()===I)?.id:void 0};ae.useEffect(()=>{if(!T||!E||ce)return;const j=setTimeout(async()=>{const I=A.map(oe=>oe.agentId?oe:{...oe,agentId:et(oe.person)});let Le=[];try{const oe=d.current;if(oe&&oe.size>0){const Se=new Set(I.map(X=>X.id).filter(Boolean));Le=Array.from(oe).filter(X=>!Se.has(X))}}catch{}try{if(await yd({upserts:I,deletes:Le}))try{d.current=new Set(I.map(Se=>Se.id).filter(Boolean))}catch{}else if(d0){const Se=P.map(se=>se.agentId?se:{...se,agentId:et(se.person)}),X=je.map(se=>se.agentId?se:{...se,agentId:et(se.person)}),Y=ie.map(se=>({id:se.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:se.firstName||"",lastName:se.lastName||"",tzId:se.tzId,hidden:!!se.hidden,isSupervisor:se.isSupervisor===!0,supervisorId:se.supervisorId??null,notes:se.notes}));await gd({shifts:I,pto:Se,overrides:X,calendarSegs:F,agents:Y,updatedAt:new Date().toISOString()})}}catch{}},600);return()=>clearTimeout(j)},[A,P,F,ie,T,E,ce]),ae.useEffect(()=>{if(!T||!E)return;const j=setTimeout(()=>{oa(ie.map(I=>({id:I.id||crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:I.firstName||"",lastName:I.lastName||"",tzId:I.tzId,hidden:!!I.hidden,isSupervisor:I.isSupervisor===!0,supervisorId:I.supervisorId??null,notes:I.notes})))},600);return()=>clearTimeout(j)},[ie,T,E]);const ut=w.useRef({shifts:"",pto:"",overrides:"",cal:"",agents:""});return ae.useEffect(()=>{if(z!=="schedule"||!a)return;let j=!1;const I=async()=>{const oe=await la();if(!oe||j)return;const Se=JSON.stringify(oe.shifts||[]),X=JSON.stringify(oe.pto||[]),Y=JSON.stringify(Array.isArray(oe.calendarSegs)?oe.calendarSegs:[]),se=JSON.stringify(Array.isArray(oe.overrides)?oe.overrides:[]),Ee=JSON.stringify(Array.isArray(oe.agents)?oe.agents:[]);if(Se!==ut.current.shifts&&(O(oe.shifts),ut.current.shifts=Se),X!==ut.current.pto&&(De(oe.pto),ut.current.pto=X),Y!==ut.current.cal&&(k(oe.calendarSegs||[]),ut.current.cal=Y),se!==ut.current.overrides&&($e(oe.overrides||[]),ut.current.overrides=se),Ee!==ut.current.agents&&Array.isArray(oe.agents)){Fe(oe.agents),ut.current.agents=Ee;try{localStorage.setItem("schedule_agents_v2_v1",Ee)}catch{}}try{d.current=new Set((oe.shifts||[]).map(xe=>xe.id).filter(Boolean))}catch{}};I();const Le=setInterval(I,300*1e3);return()=>{j=!0,clearInterval(Le)}},[z,a]),ae.useEffect(()=>{if(!T||!ie||ie.length===0)return;const j=new Map;for(const se of ie){const Ee=`${(se.firstName||"").trim()} ${(se.lastName||"").trim()}`.trim();se.id&&Ee&&j.set(se.id,Ee)}let I=!1;const Le=A.map(se=>{if(se&&se.agentId){const Ee=j.get(se.agentId);if(Ee&&Ee!==se.person)return I=!0,{...se,person:Ee}}return se});I&&O(Le);let oe=!1;const Se=P.map(se=>{const Ee=se.agentId;if(Ee){const xe=j.get(Ee);if(xe&&xe!==se.person)return oe=!0,{...se,person:xe}}return se});oe&&De(Se);let X=!1;const Y=F.map(se=>{const Ee=se.agentId;if(Ee){const xe=j.get(Ee);if(xe&&xe!==se.person)return X=!0,{...se,person:xe}}return se});X&&k(Y)},[T,ie,A,P,F]),ae.useMemo(()=>Array.from(new Set(A.map(j=>j.person))).sort(),[A]),ae.useEffect(()=>{if(!T)return;const j=Ee=>Ee.map(xe=>`${xe.firstName} ${xe.lastName}`.trim()).sort(),I=Ee=>Array.from(new Set(Ee)).sort(),Le=j(ie),oe=I(zi.shifts.map(Ee=>Ee.person)),Se=I(A.map(Ee=>Ee.person)),X=ie.length===0,se=((Ee,xe)=>Ee.length===xe.length&&Ee.every((He,ct)=>He===xe[ct]))(Le,oe);if(X||se){const Ee=Se.map(xe=>{const He=xe.split(" ");return{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:He[0]||xe,lastName:He.slice(1).join(" ")||"",tzId:En[0]?.id,hidden:!1}});Fe(Ee)}},[T,A,ie]),a?T?r.jsx(h0,{dark:h,children:r.jsx("div",{className:p,"data-theme":M,children:r.jsxs("div",{className:"max-w-full mx-auto p-2 md:p-4 space-y-4",children:[r.jsx(Vf,{dark:h,setDark:v,view:z,setView:L,weekStart:ue,setWeekStart:te,tz:We,setTz:Ne,canEdit:E,editMode:ke,setEditMode:Xe}),z==="schedule"?r.jsx(Gf,{dark:h,weekStart:ue,dayIndex:U,setDayIndex:Q,shifts:A,pto:P,tasks:Ve,calendarSegs:F,tz:We,canEdit:E,editMode:ke,onRemoveShift:j=>O(I=>I.filter(Le=>Le.id!==j)),agents:ie,slimline:ye}):z==="teams"?r.jsx(u0,{dark:h,weekStart:ue,agents:ie,pto:ce?Ce.data.pto:P,overrides:ce?Ce.data.overrides:je,tasks:Ve,calendarSegs:ce?Ce.data.calendarSegs:F}):r.jsx(l0,{dark:h,agents:ie,onAddAgent:j=>{const I=`${(j.firstName||"").trim()} ${(j.lastName||"").trim()}`.trim();if(!I){alert("Enter a first and/or last name");return}if(ie.some(oe=>gt(ve(oe))===gt(I))){alert("An agent with that name already exists.");return}Fe(oe=>oe.concat([{id:crypto.randomUUID?.()||Math.random().toString(36).slice(2),firstName:j.firstName,lastName:j.lastName,tzId:j.tzId,hidden:!1}]))},onUpdateAgent:(j,I)=>{const Le=ie[j];if(!Le)return;const oe=ve(Le),Se=(I.firstName||"").trim(),X=(I.lastName||"").trim(),Y=`${Se} ${X}`.trim();if(!Y){alert("Enter a first and/or last name");return}if(ie.some((Ee,xe)=>xe!==j&&gt(ve(Ee))===gt(Y))){alert("An agent with that name already exists.");return}if(gt(Y)!==gt(oe)){const Ee=Le.id,xe=He=>He||Ee;ee(He=>He.map(ct=>ct.person===oe?{...ct,person:Y,agentId:xe(ct.agentId)}:ct)),Te(He=>He.map(ct=>ct.person===oe?{...ct,person:Y,agentId:xe(ct.agentId)}:ct)),Ye(He=>He.map(ct=>ct.person===oe?{...ct,person:Y,agentId:xe(ct.agentId)}:ct))}Fe(Ee=>Ee.map((xe,He)=>He===j?{...xe,firstName:Se,lastName:X,tzId:I.tzId||xe.tzId,hidden:I.hidden!=null?I.hidden:xe.hidden,isSupervisor:I.isSupervisor!=null?!!I.isSupervisor:xe.isSupervisor,supervisorId:I.supervisorId!==void 0?I.supervisorId??null:xe.supervisorId,notes:I.notes!==void 0?I.notes:xe.notes}:xe))},onDeleteAgent:j=>Fe(I=>{const Le=I[j];if(!Le)return I.filter((X,Y)=>Y!==j);const oe=Le.id,Se=I.filter((X,Y)=>Y!==j);return oe?Se.map(X=>X.supervisorId===oe?{...X,supervisorId:null}:X):Se}),weekStart:ue,tz:We,shifts:ce?Ce.data.shifts:A,pto:ce?Ce.data.pto:P,overrides:ce?Ce.data.overrides:je,tasks:Ve,calendarSegs:ce?Ce.data.calendarSegs:F,onUpdateShift:(j,I)=>ee(Le=>Le.map(oe=>oe.id===j?{...oe,...I}:oe)),onDeleteShift:j=>ee(I=>I.filter(Le=>Le.id!==j)),onAddShift:j=>ee(I=>I.concat([{...j,agentId:j.agentId||et(j.person)}])),setTasks:J,setCalendarSegs:Ye,setPto:Te,setOverrides:j=>{ce?q(I=>{if(!I)return I;const Le=j(I.data.overrides),oe={meta:{...I.meta,updatedAt:new Date().toISOString()},data:{...I.data,overrides:Le}};return W(oe),oe}):$e(j)}})]})})}):r.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:r.jsx("div",{className:"max-w-md mx-auto p-6",children:r.jsxs("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-lg font-semibold",children:"Loading schedule"}),r.jsx("p",{className:"text-sm opacity-80",children:"Fetching the latest data."})]})})}):r.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:r.jsx("div",{className:"max-w-md mx-auto p-6",children:r.jsxs("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:[r.jsx("div",{className:"text-lg font-semibold",children:"Protected  Enter Site Password"}),r.jsx("p",{className:"text-sm opacity-80",children:"Sign in to view the schedule."}),r.jsx("form",{onSubmit:I=>{I.preventDefault(),(async()=>{const{loginSite:Le}=await Rf(async()=>{const{loginSite:X}=await Promise.resolve().then(()=>Wf);return{loginSite:X}},void 0),{ok:oe,status:Se}=await Le(c);if(oe){y(!0),g("");try{localStorage.setItem("site_unlocked_hint","1")}catch{}}else g(Se===401?"Incorrect password":Se===403?"Forbidden by server policy":Se===404?"API endpoint not found":"Network error. Is the API running?")})()},children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"password",autoFocus:!0,className:"flex-1 border rounded-xl px-3 py-2 bg-neutral-900 border-neutral-700",value:c,onChange:I=>C(I.target.value),placeholder:"Password"}),r.jsx("button",{type:"submit",className:"rounded-xl px-4 py-2 font-medium border bg-neutral-800 border-neutral-700",children:"Sign in"})]})}),S&&r.jsx("div",{className:"text-sm text-red-300",children:S}),r.jsxs("div",{className:"pt-3 border-t border-neutral-800 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-1",children:"Or email me a magic link"}),r.jsx(m0,{dark:!0,role:"site"})]})]})})})}function m0({dark:a,role:y}){const[c,C]=w.useState(""),[S,g]=w.useState(""),[K,z]=w.useState(void 0);return r.jsxs("form",{onSubmit:L=>{L.preventDefault(),(async()=>{g(""),z(void 0);const ue=await Xi(c,y);ue.ok?ue.link?(z(ue.link),g("Dev mode: click the link below to sign in.")):g("Check your inbox for the sign-in link."):g("Failed to request link. Check email format and try again.")})()},children:[r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"email",required:!0,className:["flex-1 border rounded-xl px-3 py-2",a&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:c,onChange:L=>C(L.target.value),placeholder:"you@company.com"}),r.jsx("button",{type:"submit",className:["rounded-xl px-3 py-2 text-sm font-medium border",a?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Email link"})]}),S&&r.jsx("div",{className:"text-xs mt-2 opacity-80",children:S}),K&&r.jsx("div",{className:"mt-2 text-xs break-all",children:r.jsx("a",{className:"underline",href:K,target:"_blank",rel:"noreferrer",children:K})})]})}class h0 extends w.Component{state={hasError:!1,err:void 0};static getDerivedStateFromError(y){return{hasError:!0,err:y}}componentDidCatch(y,c){console.error("App error",y,c)}componentDidMount(){window.addEventListener("error",y=>{console.error("Window error",y.error||y.message)}),window.addEventListener("unhandledrejection",y=>{console.error("Unhandled rejection",y.reason)})}render(){if(this.state.hasError){const{dark:y}=this.props;return r.jsx("div",{className:y?"min-h-screen w-full bg-neutral-950 text-neutral-100":"min-h-screen w-full bg-neutral-100 text-neutral-900",children:r.jsx("div",{className:"max-w-3xl mx-auto p-4",children:r.jsxs("div",{className:["rounded-xl p-4 border",y?"bg-red-900/30 border-red-800 text-red-200":"bg-red-50 border-red-200 text-red-900"].join(" "),children:[r.jsx("div",{className:"font-semibold mb-2",children:"A runtime error occurred"}),r.jsx("div",{className:"text-xs whitespace-pre-wrap break-all",children:String(this.state.err?.message||this.state.err||"Unknown error")}),r.jsx("div",{className:"text-xs opacity-80 mt-2",children:"Check the developer console for details."})]})})})}return this.props.children}}Af.createRoot(document.getElementById("root")).render(r.jsx(w.StrictMode,{children:r.jsx(f0,{})}));
