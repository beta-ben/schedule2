var g0=Object.defineProperty;var x0=(e,t,n)=>t in e?g0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Cu=(e,t,n)=>x0(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function y0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fc={exports:{}},Oo={},Bc={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),v0=Symbol.for("react.portal"),w0=Symbol.for("react.fragment"),j0=Symbol.for("react.strict_mode"),b0=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),M0=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),E0=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),Iu=Symbol.iterator;function I0(e){return e===null||typeof e!="object"?null:(e=Iu&&e[Iu]||e["@@iterator"],typeof e=="function"?e:null)}var Wc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hc=Object.assign,Uc={};function js(e,t,n){this.props=e,this.context=t,this.refs=Uc,this.updater=n||Wc}js.prototype.isReactComponent={};js.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};js.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vc(){}Vc.prototype=js.prototype;function Ca(e,t,n){this.props=e,this.context=t,this.refs=Uc,this.updater=n||Wc}var Ia=Ca.prototype=new Vc;Ia.constructor=Ca;Hc(Ia,js.prototype);Ia.isPureReactComponent=!0;var Du=Array.isArray,Kc=Object.prototype.hasOwnProperty,Da={current:null},Qc={key:!0,ref:!0,__self:!0,__source:!0};function Xc(e,t,n){var r,s={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Kc.call(t,r)&&!Qc.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),f=0;f<a;f++)u[f]=arguments[f+2];s.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:yl,type:e,key:o,ref:i,props:s,_owner:Da.current}}function D0(e,t){return{$$typeof:yl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $a(e){return typeof e=="object"&&e!==null&&e.$$typeof===yl}function $0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var $u=/\/+/g;function si(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$0(""+e.key):t.toString(36)}function Ql(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case yl:case v0:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+si(i,0):r,Du(s)?(n="",e!=null&&(n=e.replace($u,"$&/")+"/"),Ql(s,t,n,"",function(f){return f})):s!=null&&($a(s)&&(s=D0(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace($u,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",Du(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+si(o,a);i+=Ql(o,t,n,u,s)}else if(u=I0(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+si(o,a++),i+=Ql(o,t,n,u,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Cl(e,t,n){if(e==null)return e;var r=[],s=0;return Ql(e,r,"","",function(o){return t.call(n,o,s++)}),r}function L0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sn={current:null},Xl={transition:null},_0={ReactCurrentDispatcher:sn,ReactCurrentBatchConfig:Xl,ReactCurrentOwner:Da};function Yc(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Cl,forEach:function(e,t,n){Cl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Cl(e,function(){t++}),t},toArray:function(e){return Cl(e,function(t){return t})||[]},only:function(e){if(!$a(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ke.Component=js;Ke.Fragment=w0;Ke.Profiler=b0;Ke.PureComponent=Ca;Ke.StrictMode=j0;Ke.Suspense=k0;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_0;Ke.act=Yc;Ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Hc({},e.props),s=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=Da.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Kc.call(t,u)&&!Qc.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var f=0;f<u;f++)a[f]=arguments[f+2];r.children=a}return{$$typeof:yl,type:e.type,key:s,ref:o,props:r,_owner:i}};Ke.createContext=function(e){return e={$$typeof:S0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:N0,_context:e},e.Consumer=e};Ke.createElement=Xc;Ke.createFactory=function(e){var t=Xc.bind(null,e);return t.type=e,t};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(e){return{$$typeof:M0,render:e}};Ke.isValidElement=$a;Ke.lazy=function(e){return{$$typeof:C0,_payload:{_status:-1,_result:e},_init:L0}};Ke.memo=function(e,t){return{$$typeof:E0,type:e,compare:t===void 0?null:t}};Ke.startTransition=function(e){var t=Xl.transition;Xl.transition={};try{e()}finally{Xl.transition=t}};Ke.unstable_act=Yc;Ke.useCallback=function(e,t){return sn.current.useCallback(e,t)};Ke.useContext=function(e){return sn.current.useContext(e)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(e){return sn.current.useDeferredValue(e)};Ke.useEffect=function(e,t){return sn.current.useEffect(e,t)};Ke.useId=function(){return sn.current.useId()};Ke.useImperativeHandle=function(e,t,n){return sn.current.useImperativeHandle(e,t,n)};Ke.useInsertionEffect=function(e,t){return sn.current.useInsertionEffect(e,t)};Ke.useLayoutEffect=function(e,t){return sn.current.useLayoutEffect(e,t)};Ke.useMemo=function(e,t){return sn.current.useMemo(e,t)};Ke.useReducer=function(e,t,n){return sn.current.useReducer(e,t,n)};Ke.useRef=function(e){return sn.current.useRef(e)};Ke.useState=function(e){return sn.current.useState(e)};Ke.useSyncExternalStore=function(e,t,n){return sn.current.useSyncExternalStore(e,t,n)};Ke.useTransition=function(){return sn.current.useTransition()};Ke.version="18.3.1";Bc.exports=Ke;var R=Bc.exports;const C=y0(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=R,T0=Symbol.for("react.element"),O0=Symbol.for("react.fragment"),A0=Object.prototype.hasOwnProperty,z0=P0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R0={key:!0,ref:!0,__self:!0,__source:!0};function Gc(e,t,n){var r,s={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)A0.call(t,r)&&!R0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:T0,type:e,key:o,ref:i,props:s,_owner:z0.current}}Oo.Fragment=O0;Oo.jsx=Gc;Oo.jsxs=Gc;Fc.exports=Oo;var l=Fc.exports,Li={},Jc={exports:{}},vn={},Zc={exports:{}},qc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,D){var B=T.length;T.push(D);e:for(;0<B;){var ee=B-1>>>1,H=T[ee];if(0<s(H,D))T[ee]=D,T[B]=H,B=ee;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var D=T[0],B=T.pop();if(B!==D){T[0]=B;e:for(var ee=0,H=T.length,we=H>>>1;ee<we;){var se=2*(ee+1)-1,he=T[se],ne=se+1,V=T[ne];if(0>s(he,B))ne<H&&0>s(V,he)?(T[ee]=V,T[ne]=B,ee=ne):(T[ee]=he,T[se]=B,ee=se);else if(ne<H&&0>s(V,B))T[ee]=V,T[ne]=B,ee=ne;else break e}}return D}function s(T,D){var B=T.sortIndex-D.sortIndex;return B!==0?B:T.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],f=[],b=1,g=null,p=3,S=!1,v=!1,w=!1,z=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(T){for(var D=n(f);D!==null;){if(D.callback===null)r(f);else if(D.startTime<=T)r(f),D.sortIndex=D.expirationTime,t(u,D);else break;D=n(f)}}function x(T){if(w=!1,h(T),!v)if(n(u)!==null)v=!0,pe(M);else{var D=n(f);D!==null&&ae(x,D.startTime-T)}}function M(T,D){v=!1,w&&(w=!1,m(k),k=-1),S=!0;var B=p;try{for(h(D),g=n(u);g!==null&&(!(g.expirationTime>D)||T&&!ue());){var ee=g.callback;if(typeof ee=="function"){g.callback=null,p=g.priorityLevel;var H=ee(g.expirationTime<=D);D=e.unstable_now(),typeof H=="function"?g.callback=H:g===n(u)&&r(u),h(D)}else r(u);g=n(u)}if(g!==null)var we=!0;else{var se=n(f);se!==null&&ae(x,se.startTime-D),we=!1}return we}finally{g=null,p=B,S=!1}}var E=!1,y=null,k=-1,P=5,O=-1;function ue(){return!(e.unstable_now()-O<P)}function Me(){if(y!==null){var T=e.unstable_now();O=T;var D=!0;try{D=y(!0,T)}finally{D?ie():(E=!1,y=null)}}else E=!1}var ie;if(typeof d=="function")ie=function(){d(Me)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,He=Oe.port2;Oe.port1.onmessage=Me,ie=function(){He.postMessage(null)}}else ie=function(){z(Me,0)};function pe(T){y=T,E||(E=!0,ie())}function ae(T,D){k=z(function(){T(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||S||(v=!0,pe(M))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var B=p;p=D;try{return T()}finally{p=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,D){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var B=p;p=T;try{return D()}finally{p=B}},e.unstable_scheduleCallback=function(T,D,B){var ee=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ee+B:ee):B=ee,T){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,T={id:b++,callback:D,priorityLevel:T,startTime:B,expirationTime:H,sortIndex:-1},B>ee?(T.sortIndex=B,t(f,T),n(u)===null&&T===n(f)&&(w?(m(k),k=-1):w=!0,ae(x,B-ee))):(T.sortIndex=H,t(u,T),v||S||(v=!0,pe(M))),T},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(T){var D=p;return function(){var B=p;p=D;try{return T.apply(this,arguments)}finally{p=B}}}})(qc);Zc.exports=qc;var F0=Zc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B0=R,yn=F0;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ed=new Set,el={};function Ur(e,t){fs(e,t),fs(e+"Capture",t)}function fs(e,t){for(el[e]=t,e=0;e<t.length;e++)ed.add(t[e])}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_i=Object.prototype.hasOwnProperty,W0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lu={},_u={};function H0(e){return _i.call(_u,e)?!0:_i.call(Lu,e)?!1:W0.test(e)?_u[e]=!0:(Lu[e]=!0,!1)}function U0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function V0(e,t,n,r){if(t===null||typeof t>"u"||U0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ln(e,t,n,r,s,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xt[e]=new ln(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xt[t]=new ln(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xt[e]=new ln(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xt[e]=new ln(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xt[e]=new ln(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xt[e]=new ln(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xt[e]=new ln(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xt[e]=new ln(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xt[e]=new ln(e,5,!1,e.toLowerCase(),null,!1,!1)});var La=/[\-:]([a-z])/g;function _a(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(La,_a);Xt[t]=new ln(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(La,_a);Xt[t]=new ln(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(La,_a);Xt[t]=new ln(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xt[e]=new ln(e,1,!1,e.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xt[e]=new ln(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pa(e,t,n,r){var s=Xt.hasOwnProperty(t)?Xt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(V0(t,n,s,r)&&(n=null),r||s===null?H0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var sr=B0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),Xr=Symbol.for("react.portal"),Yr=Symbol.for("react.fragment"),Ta=Symbol.for("react.strict_mode"),Pi=Symbol.for("react.profiler"),td=Symbol.for("react.provider"),nd=Symbol.for("react.context"),Oa=Symbol.for("react.forward_ref"),Ti=Symbol.for("react.suspense"),Oi=Symbol.for("react.suspense_list"),Aa=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),rd=Symbol.for("react.offscreen"),Pu=Symbol.iterator;function $s(e){return e===null||typeof e!="object"?null:(e=Pu&&e[Pu]||e["@@iterator"],typeof e=="function"?e:null)}var kt=Object.assign,li;function Fs(e){if(li===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);li=t&&t[1]||""}return`
`+li+e}var oi=!1;function ii(e,t){if(!e||oi)return"";oi=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),o=r.stack.split(`
`),i=s.length-1,a=o.length-1;1<=i&&0<=a&&s[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(s[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||s[i]!==o[a]){var u=`
`+s[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{oi=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fs(e):""}function K0(e){switch(e.tag){case 5:return Fs(e.type);case 16:return Fs("Lazy");case 13:return Fs("Suspense");case 19:return Fs("SuspenseList");case 0:case 2:case 15:return e=ii(e.type,!1),e;case 11:return e=ii(e.type.render,!1),e;case 1:return e=ii(e.type,!0),e;default:return""}}function Ai(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yr:return"Fragment";case Xr:return"Portal";case Pi:return"Profiler";case Ta:return"StrictMode";case Ti:return"Suspense";case Oi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nd:return(e.displayName||"Context")+".Consumer";case td:return(e._context.displayName||"Context")+".Provider";case Oa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Aa:return t=e.displayName||null,t!==null?t:Ai(e.type)||"Memo";case ir:t=e._payload,e=e._init;try{return Ai(e(t))}catch{}}return null}function Q0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ai(t);case 8:return t===Ta?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function X0(e){var t=sd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dl(e){e._valueTracker||(e._valueTracker=X0(e))}function ld(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function io(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function zi(e,t){var n=t.checked;return kt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Tu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=br(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function od(e,t){t=t.checked,t!=null&&Pa(e,"checked",t,!1)}function Ri(e,t){od(e,t);var n=br(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fi(e,t.type,n):t.hasOwnProperty("defaultValue")&&Fi(e,t.type,br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ou(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Fi(e,t,n){(t!=="number"||io(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Bs=Array.isArray;function os(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+br(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return kt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Au(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(Bs(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:br(n)}}function id(e,t){var n=br(t.value),r=br(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ad(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ad(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $l,ud=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($l=$l||document.createElement("div"),$l.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$l.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y0=["Webkit","ms","Moz","O"];Object.keys(Vs).forEach(function(e){Y0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Vs[t]=Vs[e]})});function cd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Vs.hasOwnProperty(e)&&Vs[e]?(""+t).trim():t+"px"}function dd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=cd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var G0=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hi(e,t){if(t){if(G0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Ui(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vi=null;function za(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ki=null,is=null,as=null;function Ru(e){if(e=jl(e)){if(typeof Ki!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Bo(t),Ki(e.stateNode,e.type,t))}}function fd(e){is?as?as.push(e):as=[e]:is=e}function md(){if(is){var e=is,t=as;if(as=is=null,Ru(e),t)for(e=0;e<t.length;e++)Ru(t[e])}}function hd(e,t){return e(t)}function pd(){}var ai=!1;function gd(e,t,n){if(ai)return e(t,n);ai=!0;try{return hd(e,t,n)}finally{ai=!1,(is!==null||as!==null)&&(pd(),md())}}function nl(e,t){var n=e.stateNode;if(n===null)return null;var r=Bo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var Qi=!1;if(qn)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){Qi=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{Qi=!1}function J0(e,t,n,r,s,o,i,a,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(b){this.onError(b)}}var Ks=!1,ao=null,uo=!1,Xi=null,Z0={onError:function(e){Ks=!0,ao=e}};function q0(e,t,n,r,s,o,i,a,u){Ks=!1,ao=null,J0.apply(Z0,arguments)}function em(e,t,n,r,s,o,i,a,u){if(q0.apply(this,arguments),Ks){if(Ks){var f=ao;Ks=!1,ao=null}else throw Error(Y(198));uo||(uo=!0,Xi=f)}}function Vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function xd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fu(e){if(Vr(e)!==e)throw Error(Y(188))}function tm(e){var t=e.alternate;if(!t){if(t=Vr(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Fu(s),e;if(o===r)return Fu(s),t;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=o;else{for(var i=!1,a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function yd(e){return e=tm(e),e!==null?vd(e):null}function vd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vd(e);if(t!==null)return t;e=e.sibling}return null}var wd=yn.unstable_scheduleCallback,Bu=yn.unstable_cancelCallback,nm=yn.unstable_shouldYield,rm=yn.unstable_requestPaint,_t=yn.unstable_now,sm=yn.unstable_getCurrentPriorityLevel,Ra=yn.unstable_ImmediatePriority,jd=yn.unstable_UserBlockingPriority,co=yn.unstable_NormalPriority,lm=yn.unstable_LowPriority,bd=yn.unstable_IdlePriority,Ao=null,Bn=null;function om(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(Ao,e,void 0,(e.current.flags&128)===128)}catch{}}var Tn=Math.clz32?Math.clz32:um,im=Math.log,am=Math.LN2;function um(e){return e>>>=0,e===0?32:31-(im(e)/am|0)|0}var Ll=64,_l=4194304;function Ws(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~s;a!==0?r=Ws(a):(o&=i,o!==0&&(r=Ws(o)))}else i=n&~s,i!==0?r=Ws(i):o!==0&&(r=Ws(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tn(t),s=1<<n,r|=e[n],t&=~s;return r}function cm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Tn(o),a=1<<i,u=s[i];u===-1?(!(a&n)||a&r)&&(s[i]=cm(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function Yi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nd(){var e=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),e}function ui(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tn(t),e[t]=n}function fm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Tn(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function Fa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var at=0;function Sd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Md,Ba,kd,Ed,Cd,Gi=!1,Pl=[],mr=null,hr=null,pr=null,rl=new Map,sl=new Map,ur=[],mm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wu(e,t){switch(e){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sl.delete(t.pointerId)}}function _s(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=jl(t),t!==null&&Ba(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function hm(e,t,n,r,s){switch(t){case"focusin":return mr=_s(mr,e,t,n,r,s),!0;case"dragenter":return hr=_s(hr,e,t,n,r,s),!0;case"mouseover":return pr=_s(pr,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return rl.set(o,_s(rl.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,sl.set(o,_s(sl.get(o)||null,e,t,n,r,s)),!0}return!1}function Id(e){var t=_r(e.target);if(t!==null){var n=Vr(t);if(n!==null){if(t=n.tag,t===13){if(t=xd(n),t!==null){e.blockedOn=t,Cd(e.priority,function(){kd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ji(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Vi=r,n.target.dispatchEvent(r),Vi=null}else return t=jl(n),t!==null&&Ba(t),e.blockedOn=n,!1;t.shift()}return!0}function Hu(e,t,n){Yl(e)&&n.delete(t)}function pm(){Gi=!1,mr!==null&&Yl(mr)&&(mr=null),hr!==null&&Yl(hr)&&(hr=null),pr!==null&&Yl(pr)&&(pr=null),rl.forEach(Hu),sl.forEach(Hu)}function Ps(e,t){e.blockedOn===t&&(e.blockedOn=null,Gi||(Gi=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,pm)))}function ll(e){function t(s){return Ps(s,e)}if(0<Pl.length){Ps(Pl[0],e);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===e&&(r.blockedOn=null)}}for(mr!==null&&Ps(mr,e),hr!==null&&Ps(hr,e),pr!==null&&Ps(pr,e),rl.forEach(t),sl.forEach(t),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)Id(n),n.blockedOn===null&&ur.shift()}var us=sr.ReactCurrentBatchConfig,mo=!0;function gm(e,t,n,r){var s=at,o=us.transition;us.transition=null;try{at=1,Wa(e,t,n,r)}finally{at=s,us.transition=o}}function xm(e,t,n,r){var s=at,o=us.transition;us.transition=null;try{at=4,Wa(e,t,n,r)}finally{at=s,us.transition=o}}function Wa(e,t,n,r){if(mo){var s=Ji(e,t,n,r);if(s===null)vi(e,t,r,ho,n),Wu(e,r);else if(hm(s,e,t,n,r))r.stopPropagation();else if(Wu(e,r),t&4&&-1<mm.indexOf(e)){for(;s!==null;){var o=jl(s);if(o!==null&&Md(o),o=Ji(e,t,n,r),o===null&&vi(e,t,r,ho,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else vi(e,t,r,null,n)}}var ho=null;function Ji(e,t,n,r){if(ho=null,e=za(r),e=_r(e),e!==null)if(t=Vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=xd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ho=e,null}function Dd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sm()){case Ra:return 1;case jd:return 4;case co:case lm:return 16;case bd:return 536870912;default:return 16}default:return 16}}var dr=null,Ha=null,Gl=null;function $d(){if(Gl)return Gl;var e,t=Ha,n=t.length,r,s="value"in dr?dr.value:dr.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[o-r];r++);return Gl=s.slice(e,1<r?1-r:void 0)}function Jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tl(){return!0}function Uu(){return!1}function wn(e){function t(n,r,s,o,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Tl:Uu,this.isPropagationStopped=Uu,this}return kt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),t}var bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=wn(bs),wl=kt({},bs,{view:0,detail:0}),ym=wn(wl),ci,di,Ts,zo=kt({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ts&&(Ts&&e.type==="mousemove"?(ci=e.screenX-Ts.screenX,di=e.screenY-Ts.screenY):di=ci=0,Ts=e),ci)},movementY:function(e){return"movementY"in e?e.movementY:di}}),Vu=wn(zo),vm=kt({},zo,{dataTransfer:0}),wm=wn(vm),jm=kt({},wl,{relatedTarget:0}),fi=wn(jm),bm=kt({},bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Nm=wn(bm),Sm=kt({},bs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mm=wn(Sm),km=kt({},bs,{data:0}),Ku=wn(km),Em={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Im={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Im[e])?!!t[e]:!1}function Va(){return Dm}var $m=kt({},wl,{key:function(e){if(e.key){var t=Em[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(e){return e.type==="keypress"?Jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Lm=wn($m),_m=kt({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qu=wn(_m),Pm=kt({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),Tm=wn(Pm),Om=kt({},bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Am=wn(Om),zm=kt({},zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rm=wn(zm),Fm=[9,13,27,32],Ka=qn&&"CompositionEvent"in window,Qs=null;qn&&"documentMode"in document&&(Qs=document.documentMode);var Bm=qn&&"TextEvent"in window&&!Qs,Ld=qn&&(!Ka||Qs&&8<Qs&&11>=Qs),Xu=" ",Yu=!1;function _d(e,t){switch(e){case"keyup":return Fm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gr=!1;function Wm(e,t){switch(e){case"compositionend":return Pd(t);case"keypress":return t.which!==32?null:(Yu=!0,Xu);case"textInput":return e=t.data,e===Xu&&Yu?null:e;default:return null}}function Hm(e,t){if(Gr)return e==="compositionend"||!Ka&&_d(e,t)?(e=$d(),Gl=Ha=dr=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ld&&t.locale!=="ko"?null:t.data;default:return null}}var Um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Um[e.type]:t==="textarea"}function Td(e,t,n,r){fd(r),t=po(t,"onChange"),0<t.length&&(n=new Ua("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xs=null,ol=null;function Vm(e){Kd(e,0)}function Ro(e){var t=qr(e);if(ld(t))return e}function Km(e,t){if(e==="change")return t}var Od=!1;if(qn){var mi;if(qn){var hi="oninput"in document;if(!hi){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),hi=typeof Ju.oninput=="function"}mi=hi}else mi=!1;Od=mi&&(!document.documentMode||9<document.documentMode)}function Zu(){Xs&&(Xs.detachEvent("onpropertychange",Ad),ol=Xs=null)}function Ad(e){if(e.propertyName==="value"&&Ro(ol)){var t=[];Td(t,ol,e,za(e)),gd(Vm,t)}}function Qm(e,t,n){e==="focusin"?(Zu(),Xs=t,ol=n,Xs.attachEvent("onpropertychange",Ad)):e==="focusout"&&Zu()}function Xm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ro(ol)}function Ym(e,t){if(e==="click")return Ro(t)}function Gm(e,t){if(e==="input"||e==="change")return Ro(t)}function Jm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var An=typeof Object.is=="function"?Object.is:Jm;function il(e,t){if(An(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_i.call(t,s)||!An(e[s],t[s]))return!1}return!0}function qu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ec(e,t){var n=qu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qu(n)}}function zd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?zd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Rd(){for(var e=window,t=io();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=io(e.document)}return t}function Qa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zm(e){var t=Rd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&zd(n.ownerDocument.documentElement,n)){if(r!==null&&Qa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=ec(n,o);var i=ec(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qm=qn&&"documentMode"in document&&11>=document.documentMode,Jr=null,Zi=null,Ys=null,qi=!1;function tc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qi||Jr==null||Jr!==io(r)||(r=Jr,"selectionStart"in r&&Qa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ys&&il(Ys,r)||(Ys=r,r=po(Zi,"onSelect"),0<r.length&&(t=new Ua("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jr)))}function Ol(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zr={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},pi={},Fd={};qn&&(Fd=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Fo(e){if(pi[e])return pi[e];if(!Zr[e])return e;var t=Zr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Fd)return pi[e]=t[n];return e}var Bd=Fo("animationend"),Wd=Fo("animationiteration"),Hd=Fo("animationstart"),Ud=Fo("transitionend"),Vd=new Map,nc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Vd.set(e,t),Ur(t,[e])}for(var gi=0;gi<nc.length;gi++){var xi=nc[gi],eh=xi.toLowerCase(),th=xi[0].toUpperCase()+xi.slice(1);Sr(eh,"on"+th)}Sr(Bd,"onAnimationEnd");Sr(Wd,"onAnimationIteration");Sr(Hd,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(Ud,"onTransitionEnd");fs("onMouseEnter",["mouseout","mouseover"]);fs("onMouseLeave",["mouseout","mouseover"]);fs("onPointerEnter",["pointerout","pointerover"]);fs("onPointerLeave",["pointerout","pointerover"]);Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function rc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,em(r,t,void 0,e),e.currentTarget=null}function Kd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,f=a.currentTarget;if(a=a.listener,u!==o&&s.isPropagationStopped())break e;rc(s,a,f),o=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,f=a.currentTarget,a=a.listener,u!==o&&s.isPropagationStopped())break e;rc(s,a,f),o=u}}}if(uo)throw e=Xi,uo=!1,Xi=null,e}function yt(e,t){var n=t[sa];n===void 0&&(n=t[sa]=new Set);var r=e+"__bubble";n.has(r)||(Qd(t,e,2,!1),n.add(r))}function yi(e,t,n){var r=0;t&&(r|=4),Qd(n,e,r,t)}var Al="_reactListening"+Math.random().toString(36).slice(2);function al(e){if(!e[Al]){e[Al]=!0,ed.forEach(function(n){n!=="selectionchange"&&(nh.has(n)||yi(n,!1,e),yi(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Al]||(t[Al]=!0,yi("selectionchange",!1,t))}}function Qd(e,t,n,r){switch(Dd(t)){case 1:var s=gm;break;case 4:s=xm;break;default:s=Wa}n=s.bind(null,t,n,e),s=void 0,!Qi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function vi(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;i=i.return}for(;a!==null;){if(i=_r(a),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}a=a.parentNode}}r=r.return}gd(function(){var f=o,b=za(n),g=[];e:{var p=Vd.get(e);if(p!==void 0){var S=Ua,v=e;switch(e){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":S=Lm;break;case"focusin":v="focus",S=fi;break;case"focusout":v="blur",S=fi;break;case"beforeblur":case"afterblur":S=fi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Vu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Tm;break;case Bd:case Wd:case Hd:S=Nm;break;case Ud:S=Am;break;case"scroll":S=ym;break;case"wheel":S=Rm;break;case"copy":case"cut":case"paste":S=Mm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Qu}var w=(t&4)!==0,z=!w&&e==="scroll",m=w?p!==null?p+"Capture":null:p;w=[];for(var d=f,h;d!==null;){h=d;var x=h.stateNode;if(h.tag===5&&x!==null&&(h=x,m!==null&&(x=nl(d,m),x!=null&&w.push(ul(d,x,h)))),z)break;d=d.return}0<w.length&&(p=new S(p,v,null,n,b),g.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",p&&n!==Vi&&(v=n.relatedTarget||n.fromElement)&&(_r(v)||v[er]))break e;if((S||p)&&(p=b.window===b?b:(p=b.ownerDocument)?p.defaultView||p.parentWindow:window,S?(v=n.relatedTarget||n.toElement,S=f,v=v?_r(v):null,v!==null&&(z=Vr(v),v!==z||v.tag!==5&&v.tag!==6)&&(v=null)):(S=null,v=f),S!==v)){if(w=Vu,x="onMouseLeave",m="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(w=Qu,x="onPointerLeave",m="onPointerEnter",d="pointer"),z=S==null?p:qr(S),h=v==null?p:qr(v),p=new w(x,d+"leave",S,n,b),p.target=z,p.relatedTarget=h,x=null,_r(b)===f&&(w=new w(m,d+"enter",v,n,b),w.target=h,w.relatedTarget=z,x=w),z=x,S&&v)t:{for(w=S,m=v,d=0,h=w;h;h=Kr(h))d++;for(h=0,x=m;x;x=Kr(x))h++;for(;0<d-h;)w=Kr(w),d--;for(;0<h-d;)m=Kr(m),h--;for(;d--;){if(w===m||m!==null&&w===m.alternate)break t;w=Kr(w),m=Kr(m)}w=null}else w=null;S!==null&&sc(g,p,S,w,!1),v!==null&&z!==null&&sc(g,z,v,w,!0)}}e:{if(p=f?qr(f):window,S=p.nodeName&&p.nodeName.toLowerCase(),S==="select"||S==="input"&&p.type==="file")var M=Km;else if(Gu(p))if(Od)M=Gm;else{M=Xm;var E=Qm}else(S=p.nodeName)&&S.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=Ym);if(M&&(M=M(e,f))){Td(g,M,n,b);break e}E&&E(e,p,f),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&Fi(p,"number",p.value)}switch(E=f?qr(f):window,e){case"focusin":(Gu(E)||E.contentEditable==="true")&&(Jr=E,Zi=f,Ys=null);break;case"focusout":Ys=Zi=Jr=null;break;case"mousedown":qi=!0;break;case"contextmenu":case"mouseup":case"dragend":qi=!1,tc(g,n,b);break;case"selectionchange":if(qm)break;case"keydown":case"keyup":tc(g,n,b)}var y;if(Ka)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Gr?_d(e,n)&&(k="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(Ld&&n.locale!=="ko"&&(Gr||k!=="onCompositionStart"?k==="onCompositionEnd"&&Gr&&(y=$d()):(dr=b,Ha="value"in dr?dr.value:dr.textContent,Gr=!0)),E=po(f,k),0<E.length&&(k=new Ku(k,e,null,n,b),g.push({event:k,listeners:E}),y?k.data=y:(y=Pd(n),y!==null&&(k.data=y)))),(y=Bm?Wm(e,n):Hm(e,n))&&(f=po(f,"onBeforeInput"),0<f.length&&(b=new Ku("onBeforeInput","beforeinput",null,n,b),g.push({event:b,listeners:f}),b.data=y))}Kd(g,t)})}function ul(e,t,n){return{instance:e,listener:t,currentTarget:n}}function po(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=nl(e,n),o!=null&&r.unshift(ul(e,o,s)),o=nl(e,t),o!=null&&r.push(ul(e,o,s))),e=e.return}return r}function Kr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sc(e,t,n,r,s){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,f=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&f!==null&&(a=f,s?(u=nl(n,o),u!=null&&i.unshift(ul(n,u,a))):s||(u=nl(n,o),u!=null&&i.push(ul(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var rh=/\r\n?/g,sh=/\u0000|\uFFFD/g;function lc(e){return(typeof e=="string"?e:""+e).replace(rh,`
`).replace(sh,"")}function zl(e,t,n){if(t=lc(t),lc(e)!==t&&n)throw Error(Y(425))}function go(){}var ea=null,ta=null;function na(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ra=typeof setTimeout=="function"?setTimeout:void 0,lh=typeof clearTimeout=="function"?clearTimeout:void 0,oc=typeof Promise=="function"?Promise:void 0,oh=typeof queueMicrotask=="function"?queueMicrotask:typeof oc<"u"?function(e){return oc.resolve(null).then(e).catch(ih)}:ra;function ih(e){setTimeout(function(){throw e})}function wi(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ll(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ll(t)}function gr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ic(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ns=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Ns,cl="__reactProps$"+Ns,er="__reactContainer$"+Ns,sa="__reactEvents$"+Ns,ah="__reactListeners$"+Ns,uh="__reactHandles$"+Ns;function _r(e){var t=e[Fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[er]||n[Fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ic(e);e!==null;){if(n=e[Fn])return n;e=ic(e)}return t}e=n,n=e.parentNode}return null}function jl(e){return e=e[Fn]||e[er],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function qr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Bo(e){return e[cl]||null}var la=[],es=-1;function Mr(e){return{current:e}}function vt(e){0>es||(e.current=la[es],la[es]=null,es--)}function ht(e,t){es++,la[es]=e.current,e.current=t}var Nr={},en=Mr(Nr),cn=Mr(!1),zr=Nr;function ms(e,t){var n=e.type.contextTypes;if(!n)return Nr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dn(e){return e=e.childContextTypes,e!=null}function xo(){vt(cn),vt(en)}function ac(e,t,n){if(en.current!==Nr)throw Error(Y(168));ht(en,t),ht(cn,n)}function Xd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Y(108,Q0(e)||"Unknown",s));return kt({},n,r)}function yo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Nr,zr=en.current,ht(en,e),ht(cn,cn.current),!0}function uc(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=Xd(e,t,zr),r.__reactInternalMemoizedMergedChildContext=e,vt(cn),vt(en),ht(en,e)):vt(cn),ht(cn,n)}var Yn=null,Wo=!1,ji=!1;function Yd(e){Yn===null?Yn=[e]:Yn.push(e)}function ch(e){Wo=!0,Yd(e)}function kr(){if(!ji&&Yn!==null){ji=!0;var e=0,t=at;try{var n=Yn;for(at=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Yn=null,Wo=!1}catch(s){throw Yn!==null&&(Yn=Yn.slice(e+1)),wd(Ra,kr),s}finally{at=t,ji=!1}}return null}var ts=[],ns=0,vo=null,wo=0,bn=[],Nn=0,Rr=null,Gn=1,Jn="";function Dr(e,t){ts[ns++]=wo,ts[ns++]=vo,vo=e,wo=t}function Gd(e,t,n){bn[Nn++]=Gn,bn[Nn++]=Jn,bn[Nn++]=Rr,Rr=e;var r=Gn;e=Jn;var s=32-Tn(r)-1;r&=~(1<<s),n+=1;var o=32-Tn(t)+s;if(30<o){var i=s-s%5;o=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Gn=1<<32-Tn(t)+s|n<<s|r,Jn=o+e}else Gn=1<<o|n<<s|r,Jn=e}function Xa(e){e.return!==null&&(Dr(e,1),Gd(e,1,0))}function Ya(e){for(;e===vo;)vo=ts[--ns],ts[ns]=null,wo=ts[--ns],ts[ns]=null;for(;e===Rr;)Rr=bn[--Nn],bn[Nn]=null,Jn=bn[--Nn],bn[Nn]=null,Gn=bn[--Nn],bn[Nn]=null}var xn=null,gn=null,jt=!1,_n=null;function Jd(e,t){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xn=e,gn=gr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xn=e,gn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rr!==null?{id:Gn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xn=e,gn=null,!0):!1;default:return!1}}function oa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ia(e){if(jt){var t=gn;if(t){var n=t;if(!cc(e,t)){if(oa(e))throw Error(Y(418));t=gr(n.nextSibling);var r=xn;t&&cc(e,t)?Jd(r,n):(e.flags=e.flags&-4097|2,jt=!1,xn=e)}}else{if(oa(e))throw Error(Y(418));e.flags=e.flags&-4097|2,jt=!1,xn=e}}}function dc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xn=e}function Rl(e){if(e!==xn)return!1;if(!jt)return dc(e),jt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!na(e.type,e.memoizedProps)),t&&(t=gn)){if(oa(e))throw Zd(),Error(Y(418));for(;t;)Jd(e,t),t=gr(t.nextSibling)}if(dc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gn=gr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gn=null}}else gn=xn?gr(e.stateNode.nextSibling):null;return!0}function Zd(){for(var e=gn;e;)e=gr(e.nextSibling)}function hs(){gn=xn=null,jt=!1}function Ga(e){_n===null?_n=[e]:_n.push(e)}var dh=sr.ReactCurrentBatchConfig;function Os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=s.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function Fl(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fc(e){var t=e._init;return t(e._payload)}function qd(e){function t(m,d){if(e){var h=m.deletions;h===null?(m.deletions=[d],m.flags|=16):h.push(d)}}function n(m,d){if(!e)return null;for(;d!==null;)t(m,d),d=d.sibling;return null}function r(m,d){for(m=new Map;d!==null;)d.key!==null?m.set(d.key,d):m.set(d.index,d),d=d.sibling;return m}function s(m,d){return m=wr(m,d),m.index=0,m.sibling=null,m}function o(m,d,h){return m.index=h,e?(h=m.alternate,h!==null?(h=h.index,h<d?(m.flags|=2,d):h):(m.flags|=2,d)):(m.flags|=1048576,d)}function i(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,d,h,x){return d===null||d.tag!==6?(d=Ci(h,m.mode,x),d.return=m,d):(d=s(d,h),d.return=m,d)}function u(m,d,h,x){var M=h.type;return M===Yr?b(m,d,h.props.children,x,h.key):d!==null&&(d.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ir&&fc(M)===d.type)?(x=s(d,h.props),x.ref=Os(m,d,h),x.return=m,x):(x=so(h.type,h.key,h.props,null,m.mode,x),x.ref=Os(m,d,h),x.return=m,x)}function f(m,d,h,x){return d===null||d.tag!==4||d.stateNode.containerInfo!==h.containerInfo||d.stateNode.implementation!==h.implementation?(d=Ii(h,m.mode,x),d.return=m,d):(d=s(d,h.children||[]),d.return=m,d)}function b(m,d,h,x,M){return d===null||d.tag!==7?(d=Ar(h,m.mode,x,M),d.return=m,d):(d=s(d,h),d.return=m,d)}function g(m,d,h){if(typeof d=="string"&&d!==""||typeof d=="number")return d=Ci(""+d,m.mode,h),d.return=m,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Il:return h=so(d.type,d.key,d.props,null,m.mode,h),h.ref=Os(m,null,d),h.return=m,h;case Xr:return d=Ii(d,m.mode,h),d.return=m,d;case ir:var x=d._init;return g(m,x(d._payload),h)}if(Bs(d)||$s(d))return d=Ar(d,m.mode,h,null),d.return=m,d;Fl(m,d)}return null}function p(m,d,h,x){var M=d!==null?d.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return M!==null?null:a(m,d,""+h,x);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Il:return h.key===M?u(m,d,h,x):null;case Xr:return h.key===M?f(m,d,h,x):null;case ir:return M=h._init,p(m,d,M(h._payload),x)}if(Bs(h)||$s(h))return M!==null?null:b(m,d,h,x,null);Fl(m,h)}return null}function S(m,d,h,x,M){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(h)||null,a(d,m,""+x,M);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:return m=m.get(x.key===null?h:x.key)||null,u(d,m,x,M);case Xr:return m=m.get(x.key===null?h:x.key)||null,f(d,m,x,M);case ir:var E=x._init;return S(m,d,h,E(x._payload),M)}if(Bs(x)||$s(x))return m=m.get(h)||null,b(d,m,x,M,null);Fl(d,x)}return null}function v(m,d,h,x){for(var M=null,E=null,y=d,k=d=0,P=null;y!==null&&k<h.length;k++){y.index>k?(P=y,y=null):P=y.sibling;var O=p(m,y,h[k],x);if(O===null){y===null&&(y=P);break}e&&y&&O.alternate===null&&t(m,y),d=o(O,d,k),E===null?M=O:E.sibling=O,E=O,y=P}if(k===h.length)return n(m,y),jt&&Dr(m,k),M;if(y===null){for(;k<h.length;k++)y=g(m,h[k],x),y!==null&&(d=o(y,d,k),E===null?M=y:E.sibling=y,E=y);return jt&&Dr(m,k),M}for(y=r(m,y);k<h.length;k++)P=S(y,m,k,h[k],x),P!==null&&(e&&P.alternate!==null&&y.delete(P.key===null?k:P.key),d=o(P,d,k),E===null?M=P:E.sibling=P,E=P);return e&&y.forEach(function(ue){return t(m,ue)}),jt&&Dr(m,k),M}function w(m,d,h,x){var M=$s(h);if(typeof M!="function")throw Error(Y(150));if(h=M.call(h),h==null)throw Error(Y(151));for(var E=M=null,y=d,k=d=0,P=null,O=h.next();y!==null&&!O.done;k++,O=h.next()){y.index>k?(P=y,y=null):P=y.sibling;var ue=p(m,y,O.value,x);if(ue===null){y===null&&(y=P);break}e&&y&&ue.alternate===null&&t(m,y),d=o(ue,d,k),E===null?M=ue:E.sibling=ue,E=ue,y=P}if(O.done)return n(m,y),jt&&Dr(m,k),M;if(y===null){for(;!O.done;k++,O=h.next())O=g(m,O.value,x),O!==null&&(d=o(O,d,k),E===null?M=O:E.sibling=O,E=O);return jt&&Dr(m,k),M}for(y=r(m,y);!O.done;k++,O=h.next())O=S(y,m,k,O.value,x),O!==null&&(e&&O.alternate!==null&&y.delete(O.key===null?k:O.key),d=o(O,d,k),E===null?M=O:E.sibling=O,E=O);return e&&y.forEach(function(Me){return t(m,Me)}),jt&&Dr(m,k),M}function z(m,d,h,x){if(typeof h=="object"&&h!==null&&h.type===Yr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case Il:e:{for(var M=h.key,E=d;E!==null;){if(E.key===M){if(M=h.type,M===Yr){if(E.tag===7){n(m,E.sibling),d=s(E,h.props.children),d.return=m,m=d;break e}}else if(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===ir&&fc(M)===E.type){n(m,E.sibling),d=s(E,h.props),d.ref=Os(m,E,h),d.return=m,m=d;break e}n(m,E);break}else t(m,E);E=E.sibling}h.type===Yr?(d=Ar(h.props.children,m.mode,x,h.key),d.return=m,m=d):(x=so(h.type,h.key,h.props,null,m.mode,x),x.ref=Os(m,d,h),x.return=m,m=x)}return i(m);case Xr:e:{for(E=h.key;d!==null;){if(d.key===E)if(d.tag===4&&d.stateNode.containerInfo===h.containerInfo&&d.stateNode.implementation===h.implementation){n(m,d.sibling),d=s(d,h.children||[]),d.return=m,m=d;break e}else{n(m,d);break}else t(m,d);d=d.sibling}d=Ii(h,m.mode,x),d.return=m,m=d}return i(m);case ir:return E=h._init,z(m,d,E(h._payload),x)}if(Bs(h))return v(m,d,h,x);if($s(h))return w(m,d,h,x);Fl(m,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,d!==null&&d.tag===6?(n(m,d.sibling),d=s(d,h),d.return=m,m=d):(n(m,d),d=Ci(h,m.mode,x),d.return=m,m=d),i(m)):n(m,d)}return z}var ps=qd(!0),ef=qd(!1),jo=Mr(null),bo=null,rs=null,Ja=null;function Za(){Ja=rs=bo=null}function qa(e){var t=jo.current;vt(jo),e._currentValue=t}function aa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cs(e,t){bo=e,Ja=rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(un=!0),e.firstContext=null)}function Cn(e){var t=e._currentValue;if(Ja!==e)if(e={context:e,memoizedValue:t,next:null},rs===null){if(bo===null)throw Error(Y(308));rs=e,bo.dependencies={lanes:0,firstContext:e}}else rs=rs.next=e;return t}var Pr=null;function eu(e){Pr===null?Pr=[e]:Pr.push(e)}function tf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,eu(t)):(n.next=s.next,s.next=n),t.interleaved=n,tr(e,r)}function tr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ar=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xr(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,st&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,tr(e,n)}return s=r.interleaved,s===null?(t.next=t,eu(r)):(t.next=s.next,s.next=t),r.interleaved=t,tr(e,n)}function Zl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fa(e,n)}}function mc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function No(e,t,n,r){var s=e.updateQueue;ar=!1;var o=s.firstBaseUpdate,i=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,f=u.next;u.next=null,i===null?o=f:i.next=f,i=u;var b=e.alternate;b!==null&&(b=b.updateQueue,a=b.lastBaseUpdate,a!==i&&(a===null?b.firstBaseUpdate=f:a.next=f,b.lastBaseUpdate=u))}if(o!==null){var g=s.baseState;i=0,b=f=u=null,a=o;do{var p=a.lane,S=a.eventTime;if((r&p)===p){b!==null&&(b=b.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,w=a;switch(p=t,S=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){g=v.call(S,g,p);break e}g=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(S,g,p):v,p==null)break e;g=kt({},g,p);break e;case 2:ar=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else S={eventTime:S,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},b===null?(f=b=S,u=g):b=b.next=S,i|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(b===null&&(u=g),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=b,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Br|=i,e.lanes=i,e.memoizedState=g}}function hc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var bl={},Wn=Mr(bl),dl=Mr(bl),fl=Mr(bl);function Tr(e){if(e===bl)throw Error(Y(174));return e}function nu(e,t){switch(ht(fl,t),ht(dl,e),ht(Wn,bl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wi(t,e)}vt(Wn),ht(Wn,t)}function gs(){vt(Wn),vt(dl),vt(fl)}function rf(e){Tr(fl.current);var t=Tr(Wn.current),n=Wi(t,e.type);t!==n&&(ht(dl,e),ht(Wn,n))}function ru(e){dl.current===e&&(vt(Wn),vt(dl))}var St=Mr(0);function So(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bi=[];function su(){for(var e=0;e<bi.length;e++)bi[e]._workInProgressVersionPrimary=null;bi.length=0}var ql=sr.ReactCurrentDispatcher,Ni=sr.ReactCurrentBatchConfig,Fr=0,Mt=null,At=null,Ft=null,Mo=!1,Gs=!1,ml=0,fh=0;function Gt(){throw Error(Y(321))}function lu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!An(e[n],t[n]))return!1;return!0}function ou(e,t,n,r,s,o){if(Fr=o,Mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ql.current=e===null||e.memoizedState===null?gh:xh,e=n(r,s),Gs){o=0;do{if(Gs=!1,ml=0,25<=o)throw Error(Y(301));o+=1,Ft=At=null,t.updateQueue=null,ql.current=yh,e=n(r,s)}while(Gs)}if(ql.current=ko,t=At!==null&&At.next!==null,Fr=0,Ft=At=Mt=null,Mo=!1,t)throw Error(Y(300));return e}function iu(){var e=ml!==0;return ml=0,e}function Rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?Mt.memoizedState=Ft=e:Ft=Ft.next=e,Ft}function In(){if(At===null){var e=Mt.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Ft===null?Mt.memoizedState:Ft.next;if(t!==null)Ft=t,At=e;else{if(e===null)throw Error(Y(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Ft===null?Mt.memoizedState=Ft=e:Ft=Ft.next=e}return Ft}function hl(e,t){return typeof t=="function"?t(e):t}function Si(e){var t=In(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=At,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var i=s.next;s.next=o.next,o.next=i}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=i=null,u=null,f=o;do{var b=f.lane;if((Fr&b)===b)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var g={lane:b,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(a=u=g,i=r):u=u.next=g,Mt.lanes|=b,Br|=b}f=f.next}while(f!==null&&f!==o);u===null?i=r:u.next=a,An(r,t.memoizedState)||(un=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Mt.lanes|=o,Br|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mi(e){var t=In(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do o=e(o,i.action),i=i.next;while(i!==s);An(o,t.memoizedState)||(un=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function sf(){}function lf(e,t){var n=Mt,r=In(),s=t(),o=!An(r.memoizedState,s);if(o&&(r.memoizedState=s,un=!0),r=r.queue,au(uf.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,pl(9,af.bind(null,n,r,s,t),void 0,null),Bt===null)throw Error(Y(349));Fr&30||of(n,t,s)}return s}function of(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function af(e,t,n,r){t.value=n,t.getSnapshot=r,cf(t)&&df(e)}function uf(e,t,n){return n(function(){cf(t)&&df(e)})}function cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!An(e,n)}catch{return!0}}function df(e){var t=tr(e,1);t!==null&&On(t,e,1,-1)}function pc(e){var t=Rn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:e},t.queue=e,e=e.dispatch=ph.bind(null,Mt,e),[t.memoizedState,e]}function pl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Mt.updateQueue,t===null?(t={lastEffect:null,stores:null},Mt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ff(){return In().memoizedState}function eo(e,t,n,r){var s=Rn();Mt.flags|=e,s.memoizedState=pl(1|t,n,void 0,r===void 0?null:r)}function Ho(e,t,n,r){var s=In();r=r===void 0?null:r;var o=void 0;if(At!==null){var i=At.memoizedState;if(o=i.destroy,r!==null&&lu(r,i.deps)){s.memoizedState=pl(t,n,o,r);return}}Mt.flags|=e,s.memoizedState=pl(1|t,n,o,r)}function gc(e,t){return eo(8390656,8,e,t)}function au(e,t){return Ho(2048,8,e,t)}function mf(e,t){return Ho(4,2,e,t)}function hf(e,t){return Ho(4,4,e,t)}function pf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gf(e,t,n){return n=n!=null?n.concat([e]):null,Ho(4,4,pf.bind(null,t,e),n)}function uu(){}function xf(e,t){var n=In();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yf(e,t){var n=In();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&lu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vf(e,t,n){return Fr&21?(An(n,t)||(n=Nd(),Mt.lanes|=n,Br|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,un=!0),e.memoizedState=n)}function mh(e,t){var n=at;at=n!==0&&4>n?n:4,e(!0);var r=Ni.transition;Ni.transition={};try{e(!1),t()}finally{at=n,Ni.transition=r}}function wf(){return In().memoizedState}function hh(e,t,n){var r=vr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jf(e))bf(t,n);else if(n=tf(e,t,n,r),n!==null){var s=rn();On(n,e,r,s),Nf(n,t,r)}}function ph(e,t,n){var r=vr(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jf(e))bf(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(s.hasEagerState=!0,s.eagerState=a,An(a,i)){var u=t.interleaved;u===null?(s.next=s,eu(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=tf(e,t,s,r),n!==null&&(s=rn(),On(n,e,r,s),Nf(n,t,r))}}function jf(e){var t=e.alternate;return e===Mt||t!==null&&t===Mt}function bf(e,t){Gs=Mo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Nf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Fa(e,n)}}var ko={readContext:Cn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},gh={readContext:Cn,useCallback:function(e,t){return Rn().memoizedState=[e,t===void 0?null:t],e},useContext:Cn,useEffect:gc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,eo(4194308,4,pf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return eo(4194308,4,e,t)},useInsertionEffect:function(e,t){return eo(4,2,e,t)},useMemo:function(e,t){var n=Rn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Rn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=hh.bind(null,Mt,e),[r.memoizedState,e]},useRef:function(e){var t=Rn();return e={current:e},t.memoizedState=e},useState:pc,useDebugValue:uu,useDeferredValue:function(e){return Rn().memoizedState=e},useTransition:function(){var e=pc(!1),t=e[0];return e=mh.bind(null,e[1]),Rn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Mt,s=Rn();if(jt){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),Bt===null)throw Error(Y(349));Fr&30||of(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,gc(uf.bind(null,r,o,e),[e]),r.flags|=2048,pl(9,af.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Rn(),t=Bt.identifierPrefix;if(jt){var n=Jn,r=Gn;n=(r&~(1<<32-Tn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ml++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},xh={readContext:Cn,useCallback:xf,useContext:Cn,useEffect:au,useImperativeHandle:gf,useInsertionEffect:mf,useLayoutEffect:hf,useMemo:yf,useReducer:Si,useRef:ff,useState:function(){return Si(hl)},useDebugValue:uu,useDeferredValue:function(e){var t=In();return vf(t,At.memoizedState,e)},useTransition:function(){var e=Si(hl)[0],t=In().memoizedState;return[e,t]},useMutableSource:sf,useSyncExternalStore:lf,useId:wf,unstable_isNewReconciler:!1},yh={readContext:Cn,useCallback:xf,useContext:Cn,useEffect:au,useImperativeHandle:gf,useInsertionEffect:mf,useLayoutEffect:hf,useMemo:yf,useReducer:Mi,useRef:ff,useState:function(){return Mi(hl)},useDebugValue:uu,useDeferredValue:function(e){var t=In();return At===null?t.memoizedState=e:vf(t,At.memoizedState,e)},useTransition:function(){var e=Mi(hl)[0],t=In().memoizedState;return[e,t]},useMutableSource:sf,useSyncExternalStore:lf,useId:wf,unstable_isNewReconciler:!1};function $n(e,t){if(e&&e.defaultProps){t=kt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ua(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:kt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Uo={isMounted:function(e){return(e=e._reactInternals)?Vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rn(),s=vr(e),o=Zn(r,s);o.payload=t,n!=null&&(o.callback=n),t=xr(e,o,s),t!==null&&(On(t,e,s,r),Zl(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rn(),s=vr(e),o=Zn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=xr(e,o,s),t!==null&&(On(t,e,s,r),Zl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rn(),r=vr(e),s=Zn(n,r);s.tag=2,t!=null&&(s.callback=t),t=xr(e,s,r),t!==null&&(On(t,e,r,n),Zl(t,e,r))}};function xc(e,t,n,r,s,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!il(n,r)||!il(s,o):!0}function Sf(e,t,n){var r=!1,s=Nr,o=t.contextType;return typeof o=="object"&&o!==null?o=Cn(o):(s=dn(t)?zr:en.current,r=t.contextTypes,o=(r=r!=null)?ms(e,s):Nr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Uo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function yc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Uo.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tu(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Cn(o):(o=dn(t)?zr:en.current,s.context=ms(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ua(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Uo.enqueueReplaceState(s,s.state,null),No(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function xs(e,t){try{var n="",r=t;do n+=K0(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function ki(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vh=typeof WeakMap=="function"?WeakMap:Map;function Mf(e,t,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Co||(Co=!0,ja=r),da(e,t)},n}function kf(e,t,n){n=Zn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){da(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){da(e,t),typeof r!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function vc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vh;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=_h.bind(null,e,t,n),t.then(e,e))}function wc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function jc(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zn(-1,1),t.tag=2,xr(n,t,1))),n.lanes|=1),e)}var wh=sr.ReactCurrentOwner,un=!1;function nn(e,t,n,r){t.child=e===null?ef(t,null,n,r):ps(t,e.child,n,r)}function bc(e,t,n,r,s){n=n.render;var o=t.ref;return cs(t,s),r=ou(e,t,n,r,o,s),n=iu(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,nr(e,t,s)):(jt&&n&&Xa(t),t.flags|=1,nn(e,t,r,s),t.child)}function Nc(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!xu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,Ef(e,t,o,r,s)):(e=so(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:il,n(i,r)&&e.ref===t.ref)return nr(e,t,s)}return t.flags|=1,e=wr(o,r),e.ref=t.ref,e.return=t,t.child=e}function Ef(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(il(o,r)&&e.ref===t.ref)if(un=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(un=!0);else return t.lanes=e.lanes,nr(e,t,s)}return fa(e,t,n,r,s)}function Cf(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(ls,pn),pn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ht(ls,pn),pn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ht(ls,pn),pn|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,ht(ls,pn),pn|=r;return nn(e,t,s,n),t.child}function If(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fa(e,t,n,r,s){var o=dn(n)?zr:en.current;return o=ms(t,o),cs(t,s),n=ou(e,t,n,r,o,s),r=iu(),e!==null&&!un?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,nr(e,t,s)):(jt&&r&&Xa(t),t.flags|=1,nn(e,t,n,s),t.child)}function Sc(e,t,n,r,s){if(dn(n)){var o=!0;yo(t)}else o=!1;if(cs(t,s),t.stateNode===null)to(e,t),Sf(t,n,r),ca(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,f=n.contextType;typeof f=="object"&&f!==null?f=Cn(f):(f=dn(n)?zr:en.current,f=ms(t,f));var b=n.getDerivedStateFromProps,g=typeof b=="function"||typeof i.getSnapshotBeforeUpdate=="function";g||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==f)&&yc(t,i,r,f),ar=!1;var p=t.memoizedState;i.state=p,No(t,r,i,s),u=t.memoizedState,a!==r||p!==u||cn.current||ar?(typeof b=="function"&&(ua(t,n,b,r),u=t.memoizedState),(a=ar||xc(t,n,a,r,p,u,f))?(g||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=f,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,nf(e,t),a=t.memoizedProps,f=t.type===t.elementType?a:$n(t.type,a),i.props=f,g=t.pendingProps,p=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=Cn(u):(u=dn(n)?zr:en.current,u=ms(t,u));var S=n.getDerivedStateFromProps;(b=typeof S=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==g||p!==u)&&yc(t,i,r,u),ar=!1,p=t.memoizedState,i.state=p,No(t,r,i,s);var v=t.memoizedState;a!==g||p!==v||cn.current||ar?(typeof S=="function"&&(ua(t,n,S,r),v=t.memoizedState),(f=ar||xc(t,n,f,r,p,v,u)||!1)?(b||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,v,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,v,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),i.props=r,i.state=v,i.context=u,r=f):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return ma(e,t,n,r,o,s)}function ma(e,t,n,r,s,o){If(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&uc(t,n,!1),nr(e,t,o);r=t.stateNode,wh.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=ps(t,e.child,null,o),t.child=ps(t,null,a,o)):nn(e,t,a,o),t.memoizedState=r.state,s&&uc(t,n,!0),t.child}function Df(e){var t=e.stateNode;t.pendingContext?ac(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ac(e,t.context,!1),nu(e,t.containerInfo)}function Mc(e,t,n,r,s){return hs(),Ga(s),t.flags|=256,nn(e,t,n,r),t.child}var ha={dehydrated:null,treeContext:null,retryLane:0};function pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function $f(e,t,n){var r=t.pendingProps,s=St.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ht(St,s&1),e===null)return ia(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Qo(i,r,0,null),e=Ar(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=pa(n),t.memoizedState=ha,e):cu(t,i));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return jh(e,t,i,r,a,s,n);if(o){o=r.fallback,i=t.mode,s=e.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=wr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=wr(a,o):(o=Ar(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?pa(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=ha,r}return o=e.child,e=o.sibling,r=wr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function cu(e,t){return t=Qo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bl(e,t,n,r){return r!==null&&Ga(r),ps(t,e.child,null,n),e=cu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jh(e,t,n,r,s,o,i){if(n)return t.flags&256?(t.flags&=-257,r=ki(Error(Y(422))),Bl(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Qo({mode:"visible",children:r.children},s,0,null),o=Ar(o,s,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ps(t,e.child,null,i),t.child.memoizedState=pa(i),t.memoizedState=ha,o);if(!(t.mode&1))return Bl(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Y(419)),r=ki(o,r,void 0),Bl(e,t,i,r)}if(a=(i&e.childLanes)!==0,un||a){if(r=Bt,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,tr(e,s),On(r,e,s,-1))}return gu(),r=ki(Error(Y(421))),Bl(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ph.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,gn=gr(s.nextSibling),xn=t,jt=!0,_n=null,e!==null&&(bn[Nn++]=Gn,bn[Nn++]=Jn,bn[Nn++]=Rr,Gn=e.id,Jn=e.overflow,Rr=t),t=cu(t,r.children),t.flags|=4096,t)}function kc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),aa(e.return,t,n)}function Ei(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Lf(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(nn(e,t,r.children,n),r=St.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kc(e,n,t);else if(e.tag===19)kc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ht(St,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&So(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ei(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&So(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ei(t,!0,n,null,o);break;case"together":Ei(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function to(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function nr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=wr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function bh(e,t,n){switch(t.tag){case 3:Df(t),hs();break;case 5:rf(t);break;case 1:dn(t.type)&&yo(t);break;case 4:nu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ht(jo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ht(St,St.current&1),t.flags|=128,null):n&t.child.childLanes?$f(e,t,n):(ht(St,St.current&1),e=nr(e,t,n),e!==null?e.sibling:null);ht(St,St.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Lf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ht(St,St.current),r)break;return null;case 22:case 23:return t.lanes=0,Cf(e,t,n)}return nr(e,t,n)}var _f,ga,Pf,Tf;_f=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ga=function(){};Pf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Tr(Wn.current);var o=null;switch(n){case"input":s=zi(e,s),r=zi(e,r),o=[];break;case"select":s=kt({},s,{value:void 0}),r=kt({},r,{value:void 0}),o=[];break;case"textarea":s=Bi(e,s),r=Bi(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=go)}Hi(n,r);var i;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var a=s[f];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(el.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in r){var u=r[f];if(a=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&u!==a&&(u!=null||a!=null))if(f==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(el.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&yt("scroll",e),o||a===u||(o=[])):(o=o||[]).push(f,u))}n&&(o=o||[]).push("style",n);var f=o;(t.updateQueue=f)&&(t.flags|=4)}};Tf=function(e,t,n,r){n!==r&&(t.flags|=4)};function As(e,t){if(!jt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Nh(e,t,n){var r=t.pendingProps;switch(Ya(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(t),null;case 1:return dn(t.type)&&xo(),Jt(t),null;case 3:return r=t.stateNode,gs(),vt(cn),vt(en),su(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Rl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_n!==null&&(Sa(_n),_n=null))),ga(e,t),Jt(t),null;case 5:ru(t);var s=Tr(fl.current);if(n=t.type,e!==null&&t.stateNode!=null)Pf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return Jt(t),null}if(e=Tr(Wn.current),Rl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Fn]=t,r[cl]=o,e=(t.mode&1)!==0,n){case"dialog":yt("cancel",r),yt("close",r);break;case"iframe":case"object":case"embed":yt("load",r);break;case"video":case"audio":for(s=0;s<Hs.length;s++)yt(Hs[s],r);break;case"source":yt("error",r);break;case"img":case"image":case"link":yt("error",r),yt("load",r);break;case"details":yt("toggle",r);break;case"input":Tu(r,o),yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},yt("invalid",r);break;case"textarea":Au(r,o),yt("invalid",r)}Hi(n,o),s=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&zl(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&zl(r.textContent,a,e),s=["children",""+a]):el.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&yt("scroll",r)}switch(n){case"input":Dl(r),Ou(r,o,!0);break;case"textarea":Dl(r),zu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=go)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ad(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Fn]=t,e[cl]=r,_f(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ui(n,r),n){case"dialog":yt("cancel",e),yt("close",e),s=r;break;case"iframe":case"object":case"embed":yt("load",e),s=r;break;case"video":case"audio":for(s=0;s<Hs.length;s++)yt(Hs[s],e);s=r;break;case"source":yt("error",e),s=r;break;case"img":case"image":case"link":yt("error",e),yt("load",e),s=r;break;case"details":yt("toggle",e),s=r;break;case"input":Tu(e,r),s=zi(e,r),yt("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=kt({},r,{value:void 0}),yt("invalid",e);break;case"textarea":Au(e,r),s=Bi(e,r),yt("invalid",e);break;default:s=r}Hi(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?dd(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ud(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&tl(e,u):typeof u=="number"&&tl(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(el.hasOwnProperty(o)?u!=null&&o==="onScroll"&&yt("scroll",e):u!=null&&Pa(e,o,u,i))}switch(n){case"input":Dl(e),Ou(e,r,!1);break;case"textarea":Dl(e),zu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+br(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?os(e,!!r.multiple,o,!1):r.defaultValue!=null&&os(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=go)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jt(t),null;case 6:if(e&&t.stateNode!=null)Tf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=Tr(fl.current),Tr(Wn.current),Rl(t)){if(r=t.stateNode,n=t.memoizedProps,r[Fn]=t,(o=r.nodeValue!==n)&&(e=xn,e!==null))switch(e.tag){case 3:zl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zl(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Fn]=t,t.stateNode=r}return Jt(t),null;case 13:if(vt(St),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(jt&&gn!==null&&t.mode&1&&!(t.flags&128))Zd(),hs(),t.flags|=98560,o=!1;else if(o=Rl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Y(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Fn]=t}else hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jt(t),o=!1}else _n!==null&&(Sa(_n),_n=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||St.current&1?zt===0&&(zt=3):gu())),t.updateQueue!==null&&(t.flags|=4),Jt(t),null);case 4:return gs(),ga(e,t),e===null&&al(t.stateNode.containerInfo),Jt(t),null;case 10:return qa(t.type._context),Jt(t),null;case 17:return dn(t.type)&&xo(),Jt(t),null;case 19:if(vt(St),o=t.memoizedState,o===null)return Jt(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)As(o,!1);else{if(zt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=So(e),i!==null){for(t.flags|=128,As(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ht(St,St.current&1|2),t.child}e=e.sibling}o.tail!==null&&_t()>ys&&(t.flags|=128,r=!0,As(o,!1),t.lanes=4194304)}else{if(!r)if(e=So(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),As(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!jt)return Jt(t),null}else 2*_t()-o.renderingStartTime>ys&&n!==1073741824&&(t.flags|=128,r=!0,As(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=_t(),t.sibling=null,n=St.current,ht(St,r?n&1|2:n&1),t):(Jt(t),null);case 22:case 23:return pu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pn&1073741824&&(Jt(t),t.subtreeFlags&6&&(t.flags|=8192)):Jt(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function Sh(e,t){switch(Ya(t),t.tag){case 1:return dn(t.type)&&xo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gs(),vt(cn),vt(en),su(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ru(t),null;case 13:if(vt(St),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return vt(St),null;case 4:return gs(),null;case 10:return qa(t.type._context),null;case 22:case 23:return pu(),null;case 24:return null;default:return null}}var Wl=!1,qt=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ss(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(e,t,r)}else n.current=null}function xa(e,t,n){try{n()}catch(r){It(e,t,r)}}var Ec=!1;function kh(e,t){if(ea=mo,e=Rd(),Qa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,f=0,b=0,g=e,p=null;t:for(;;){for(var S;g!==n||s!==0&&g.nodeType!==3||(a=i+s),g!==o||r!==0&&g.nodeType!==3||(u=i+r),g.nodeType===3&&(i+=g.nodeValue.length),(S=g.firstChild)!==null;)p=g,g=S;for(;;){if(g===e)break t;if(p===n&&++f===s&&(a=i),p===o&&++b===r&&(u=i),(S=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=S}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},mo=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,z=v.memoizedState,m=t.stateNode,d=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:$n(t.type,w),z);m.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(x){It(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return v=Ec,Ec=!1,v}function Js(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&xa(t,n,o)}s=s.next}while(s!==r)}}function Vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ya(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Of(e){var t=e.alternate;t!==null&&(e.alternate=null,Of(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fn],delete t[cl],delete t[sa],delete t[ah],delete t[uh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Af(e){return e.tag===5||e.tag===3||e.tag===4}function Cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Af(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function va(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=go));else if(r!==4&&(e=e.child,e!==null))for(va(e,t,n),e=e.sibling;e!==null;)va(e,t,n),e=e.sibling}function wa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wa(e,t,n),e=e.sibling;e!==null;)wa(e,t,n),e=e.sibling}var Kt=null,Ln=!1;function or(e,t,n){for(n=n.child;n!==null;)zf(e,t,n),n=n.sibling}function zf(e,t,n){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(Ao,n)}catch{}switch(n.tag){case 5:qt||ss(n,t);case 6:var r=Kt,s=Ln;Kt=null,or(e,t,n),Kt=r,Ln=s,Kt!==null&&(Ln?(e=Kt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Ln?(e=Kt,n=n.stateNode,e.nodeType===8?wi(e.parentNode,n):e.nodeType===1&&wi(e,n),ll(e)):wi(Kt,n.stateNode));break;case 4:r=Kt,s=Ln,Kt=n.stateNode.containerInfo,Ln=!0,or(e,t,n),Kt=r,Ln=s;break;case 0:case 11:case 14:case 15:if(!qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&xa(n,t,i),s=s.next}while(s!==r)}or(e,t,n);break;case 1:if(!qt&&(ss(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,t,a)}or(e,t,n);break;case 21:or(e,t,n);break;case 22:n.mode&1?(qt=(r=qt)||n.memoizedState!==null,or(e,t,n),qt=r):or(e,t,n);break;default:or(e,t,n)}}function Ic(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mh),t.forEach(function(r){var s=Th.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Dn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,Ln=!1;break e;case 3:Kt=a.stateNode.containerInfo,Ln=!0;break e;case 4:Kt=a.stateNode.containerInfo,Ln=!0;break e}a=a.return}if(Kt===null)throw Error(Y(160));zf(o,i,s),Kt=null,Ln=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(f){It(s,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rf(t,e),t=t.sibling}function Rf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Dn(t,e),zn(e),r&4){try{Js(3,e,e.return),Vo(3,e)}catch(w){It(e,e.return,w)}try{Js(5,e,e.return)}catch(w){It(e,e.return,w)}}break;case 1:Dn(t,e),zn(e),r&512&&n!==null&&ss(n,n.return);break;case 5:if(Dn(t,e),zn(e),r&512&&n!==null&&ss(n,n.return),e.flags&32){var s=e.stateNode;try{tl(s,"")}catch(w){It(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&od(s,o),Ui(a,i);var f=Ui(a,o);for(i=0;i<u.length;i+=2){var b=u[i],g=u[i+1];b==="style"?dd(s,g):b==="dangerouslySetInnerHTML"?ud(s,g):b==="children"?tl(s,g):Pa(s,b,g,f)}switch(a){case"input":Ri(s,o);break;case"textarea":id(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?os(s,!!o.multiple,S,!1):p!==!!o.multiple&&(o.defaultValue!=null?os(s,!!o.multiple,o.defaultValue,!0):os(s,!!o.multiple,o.multiple?[]:"",!1))}s[cl]=o}catch(w){It(e,e.return,w)}}break;case 6:if(Dn(t,e),zn(e),r&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(w){It(e,e.return,w)}}break;case 3:if(Dn(t,e),zn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ll(t.containerInfo)}catch(w){It(e,e.return,w)}break;case 4:Dn(t,e),zn(e);break;case 13:Dn(t,e),zn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(mu=_t())),r&4&&Ic(e);break;case 22:if(b=n!==null&&n.memoizedState!==null,e.mode&1?(qt=(f=qt)||b,Dn(t,e),qt=f):Dn(t,e),zn(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!b&&e.mode&1)for(ce=e,b=e.child;b!==null;){for(g=ce=b;ce!==null;){switch(p=ce,S=p.child,p.tag){case 0:case 11:case 14:case 15:Js(4,p,p.return);break;case 1:ss(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){It(r,n,w)}}break;case 5:ss(p,p.return);break;case 22:if(p.memoizedState!==null){$c(g);continue}}S!==null?(S.return=p,ce=S):$c(g)}b=b.sibling}e:for(b=null,g=e;;){if(g.tag===5){if(b===null){b=g;try{s=g.stateNode,f?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=g.stateNode,u=g.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=cd("display",i))}catch(w){It(e,e.return,w)}}}else if(g.tag===6){if(b===null)try{g.stateNode.nodeValue=f?"":g.memoizedProps}catch(w){It(e,e.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;b===g&&(b=null),g=g.return}b===g&&(b=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Dn(t,e),zn(e),r&4&&Ic(e);break;case 21:break;default:Dn(t,e),zn(e)}}function zn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Af(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(tl(s,""),r.flags&=-33);var o=Cc(e);wa(e,o,s);break;case 3:case 4:var i=r.stateNode.containerInfo,a=Cc(e);va(e,a,i);break;default:throw Error(Y(161))}}catch(u){It(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Eh(e,t,n){ce=e,Ff(e)}function Ff(e,t,n){for(var r=(e.mode&1)!==0;ce!==null;){var s=ce,o=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Wl;if(!i){var a=s.alternate,u=a!==null&&a.memoizedState!==null||qt;a=Wl;var f=qt;if(Wl=i,(qt=u)&&!f)for(ce=s;ce!==null;)i=ce,u=i.child,i.tag===22&&i.memoizedState!==null?Lc(s):u!==null?(u.return=i,ce=u):Lc(s);for(;o!==null;)ce=o,Ff(o),o=o.sibling;ce=s,Wl=a,qt=f}Dc(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ce=o):Dc(e)}}function Dc(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qt||Vo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:$n(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&hc(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hc(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var b=f.memoizedState;if(b!==null){var g=b.dehydrated;g!==null&&ll(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}qt||t.flags&512&&ya(t)}catch(p){It(t,t.return,p)}}if(t===e){ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,ce=n;break}ce=t.return}}function $c(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ce=n;break}ce=t.return}}function Lc(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Vo(4,t)}catch(u){It(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){It(t,s,u)}}var o=t.return;try{ya(t)}catch(u){It(t,o,u)}break;case 5:var i=t.return;try{ya(t)}catch(u){It(t,i,u)}}}catch(u){It(t,t.return,u)}if(t===e){ce=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ce=a;break}ce=t.return}}var Ch=Math.ceil,Eo=sr.ReactCurrentDispatcher,du=sr.ReactCurrentOwner,kn=sr.ReactCurrentBatchConfig,st=0,Bt=null,Tt=null,Qt=0,pn=0,ls=Mr(0),zt=0,gl=null,Br=0,Ko=0,fu=0,Zs=null,an=null,mu=0,ys=1/0,Xn=null,Co=!1,ja=null,yr=null,Hl=!1,fr=null,Io=0,qs=0,ba=null,no=-1,ro=0;function rn(){return st&6?_t():no!==-1?no:no=_t()}function vr(e){return e.mode&1?st&2&&Qt!==0?Qt&-Qt:dh.transition!==null?(ro===0&&(ro=Nd()),ro):(e=at,e!==0||(e=window.event,e=e===void 0?16:Dd(e.type)),e):1}function On(e,t,n,r){if(50<qs)throw qs=0,ba=null,Error(Y(185));vl(e,n,r),(!(st&2)||e!==Bt)&&(e===Bt&&(!(st&2)&&(Ko|=n),zt===4&&cr(e,Qt)),fn(e,r),n===1&&st===0&&!(t.mode&1)&&(ys=_t()+500,Wo&&kr()))}function fn(e,t){var n=e.callbackNode;dm(e,t);var r=fo(e,e===Bt?Qt:0);if(r===0)n!==null&&Bu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Bu(n),t===1)e.tag===0?ch(_c.bind(null,e)):Yd(_c.bind(null,e)),oh(function(){!(st&6)&&kr()}),n=null;else{switch(Sd(r)){case 1:n=Ra;break;case 4:n=jd;break;case 16:n=co;break;case 536870912:n=bd;break;default:n=co}n=Xf(n,Bf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Bf(e,t){if(no=-1,ro=0,st&6)throw Error(Y(327));var n=e.callbackNode;if(ds()&&e.callbackNode!==n)return null;var r=fo(e,e===Bt?Qt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Do(e,r);else{t=r;var s=st;st|=2;var o=Hf();(Bt!==e||Qt!==t)&&(Xn=null,ys=_t()+500,Or(e,t));do try{$h();break}catch(a){Wf(e,a)}while(!0);Za(),Eo.current=o,st=s,Tt!==null?t=0:(Bt=null,Qt=0,t=zt)}if(t!==0){if(t===2&&(s=Yi(e),s!==0&&(r=s,t=Na(e,s))),t===1)throw n=gl,Or(e,0),cr(e,r),fn(e,_t()),n;if(t===6)cr(e,r);else{if(s=e.current.alternate,!(r&30)&&!Ih(s)&&(t=Do(e,r),t===2&&(o=Yi(e),o!==0&&(r=o,t=Na(e,o))),t===1))throw n=gl,Or(e,0),cr(e,r),fn(e,_t()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:$r(e,an,Xn);break;case 3:if(cr(e,r),(r&130023424)===r&&(t=mu+500-_t(),10<t)){if(fo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){rn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ra($r.bind(null,e,an,Xn),t);break}$r(e,an,Xn);break;case 4:if(cr(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-Tn(r);o=1<<i,i=t[i],i>s&&(s=i),r&=~o}if(r=s,r=_t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ch(r/1960))-r,10<r){e.timeoutHandle=ra($r.bind(null,e,an,Xn),r);break}$r(e,an,Xn);break;case 5:$r(e,an,Xn);break;default:throw Error(Y(329))}}}return fn(e,_t()),e.callbackNode===n?Bf.bind(null,e):null}function Na(e,t){var n=Zs;return e.current.memoizedState.isDehydrated&&(Or(e,t).flags|=256),e=Do(e,t),e!==2&&(t=an,an=n,t!==null&&Sa(t)),e}function Sa(e){an===null?an=e:an.push.apply(an,e)}function Ih(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!An(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cr(e,t){for(t&=~fu,t&=~Ko,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tn(t),r=1<<n;e[n]=-1,t&=~r}}function _c(e){if(st&6)throw Error(Y(327));ds();var t=fo(e,0);if(!(t&1))return fn(e,_t()),null;var n=Do(e,t);if(e.tag!==0&&n===2){var r=Yi(e);r!==0&&(t=r,n=Na(e,r))}if(n===1)throw n=gl,Or(e,0),cr(e,t),fn(e,_t()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,an,Xn),fn(e,_t()),null}function hu(e,t){var n=st;st|=1;try{return e(t)}finally{st=n,st===0&&(ys=_t()+500,Wo&&kr())}}function Wr(e){fr!==null&&fr.tag===0&&!(st&6)&&ds();var t=st;st|=1;var n=kn.transition,r=at;try{if(kn.transition=null,at=1,e)return e()}finally{at=r,kn.transition=n,st=t,!(st&6)&&kr()}}function pu(){pn=ls.current,vt(ls)}function Or(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,lh(n)),Tt!==null)for(n=Tt.return;n!==null;){var r=n;switch(Ya(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xo();break;case 3:gs(),vt(cn),vt(en),su();break;case 5:ru(r);break;case 4:gs();break;case 13:vt(St);break;case 19:vt(St);break;case 10:qa(r.type._context);break;case 22:case 23:pu()}n=n.return}if(Bt=e,Tt=e=wr(e.current,null),Qt=pn=t,zt=0,gl=null,fu=Ko=Br=0,an=Zs=null,Pr!==null){for(t=0;t<Pr.length;t++)if(n=Pr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=s,r.next=i}n.pending=r}Pr=null}return e}function Wf(e,t){do{var n=Tt;try{if(Za(),ql.current=ko,Mo){for(var r=Mt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mo=!1}if(Fr=0,Ft=At=Mt=null,Gs=!1,ml=0,du.current=null,n===null||n.return===null){zt=1,gl=t,Tt=null;break}e:{var o=e,i=n.return,a=n,u=t;if(t=Qt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,b=a,g=b.tag;if(!(b.mode&1)&&(g===0||g===11||g===15)){var p=b.alternate;p?(b.updateQueue=p.updateQueue,b.memoizedState=p.memoizedState,b.lanes=p.lanes):(b.updateQueue=null,b.memoizedState=null)}var S=wc(i);if(S!==null){S.flags&=-257,jc(S,i,a,o,t),S.mode&1&&vc(o,f,t),t=S,u=f;var v=t.updateQueue;if(v===null){var w=new Set;w.add(u),t.updateQueue=w}else v.add(u);break e}else{if(!(t&1)){vc(o,f,t),gu();break e}u=Error(Y(426))}}else if(jt&&a.mode&1){var z=wc(i);if(z!==null){!(z.flags&65536)&&(z.flags|=256),jc(z,i,a,o,t),Ga(xs(u,a));break e}}o=u=xs(u,a),zt!==4&&(zt=2),Zs===null?Zs=[o]:Zs.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=Mf(o,u,t);mc(o,m);break e;case 1:a=u;var d=o.type,h=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(yr===null||!yr.has(h)))){o.flags|=65536,t&=-t,o.lanes|=t;var x=kf(o,a,t);mc(o,x);break e}}o=o.return}while(o!==null)}Vf(n)}catch(M){t=M,Tt===n&&n!==null&&(Tt=n=n.return);continue}break}while(!0)}function Hf(){var e=Eo.current;return Eo.current=ko,e===null?ko:e}function gu(){(zt===0||zt===3||zt===2)&&(zt=4),Bt===null||!(Br&268435455)&&!(Ko&268435455)||cr(Bt,Qt)}function Do(e,t){var n=st;st|=2;var r=Hf();(Bt!==e||Qt!==t)&&(Xn=null,Or(e,t));do try{Dh();break}catch(s){Wf(e,s)}while(!0);if(Za(),st=n,Eo.current=r,Tt!==null)throw Error(Y(261));return Bt=null,Qt=0,zt}function Dh(){for(;Tt!==null;)Uf(Tt)}function $h(){for(;Tt!==null&&!nm();)Uf(Tt)}function Uf(e){var t=Qf(e.alternate,e,pn);e.memoizedProps=e.pendingProps,t===null?Vf(e):Tt=t,du.current=null}function Vf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Sh(n,t),n!==null){n.flags&=32767,Tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{zt=6,Tt=null;return}}else if(n=Nh(n,t,pn),n!==null){Tt=n;return}if(t=t.sibling,t!==null){Tt=t;return}Tt=t=e}while(t!==null);zt===0&&(zt=5)}function $r(e,t,n){var r=at,s=kn.transition;try{kn.transition=null,at=1,Lh(e,t,n,r)}finally{kn.transition=s,at=r}return null}function Lh(e,t,n,r){do ds();while(fr!==null);if(st&6)throw Error(Y(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(fm(e,o),e===Bt&&(Tt=Bt=null,Qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hl||(Hl=!0,Xf(co,function(){return ds(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kn.transition,kn.transition=null;var i=at;at=1;var a=st;st|=4,du.current=null,kh(e,n),Rf(n,e),Zm(ta),mo=!!ea,ta=ea=null,e.current=n,Eh(n),rm(),st=a,at=i,kn.transition=o}else e.current=n;if(Hl&&(Hl=!1,fr=e,Io=s),o=e.pendingLanes,o===0&&(yr=null),om(n.stateNode),fn(e,_t()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Co)throw Co=!1,e=ja,ja=null,e;return Io&1&&e.tag!==0&&ds(),o=e.pendingLanes,o&1?e===ba?qs++:(qs=0,ba=e):qs=0,kr(),null}function ds(){if(fr!==null){var e=Sd(Io),t=kn.transition,n=at;try{if(kn.transition=null,at=16>e?16:e,fr===null)var r=!1;else{if(e=fr,fr=null,Io=0,st&6)throw Error(Y(331));var s=st;for(st|=4,ce=e.current;ce!==null;){var o=ce,i=o.child;if(ce.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var f=a[u];for(ce=f;ce!==null;){var b=ce;switch(b.tag){case 0:case 11:case 15:Js(8,b,o)}var g=b.child;if(g!==null)g.return=b,ce=g;else for(;ce!==null;){b=ce;var p=b.sibling,S=b.return;if(Of(b),b===f){ce=null;break}if(p!==null){p.return=S,ce=p;break}ce=S}}}var v=o.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var z=w.sibling;w.sibling=null,w=z}while(w!==null)}}ce=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,ce=i;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Js(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,ce=m;break e}ce=o.return}}var d=e.current;for(ce=d;ce!==null;){i=ce;var h=i.child;if(i.subtreeFlags&2064&&h!==null)h.return=i,ce=h;else e:for(i=d;ce!==null;){if(a=ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vo(9,a)}}catch(M){It(a,a.return,M)}if(a===i){ce=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ce=x;break e}ce=a.return}}if(st=s,kr(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(Ao,e)}catch{}r=!0}return r}finally{at=n,kn.transition=t}}return!1}function Pc(e,t,n){t=xs(n,t),t=Mf(e,t,1),e=xr(e,t,1),t=rn(),e!==null&&(vl(e,1,t),fn(e,t))}function It(e,t,n){if(e.tag===3)Pc(e,e,n);else for(;t!==null;){if(t.tag===3){Pc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yr===null||!yr.has(r))){e=xs(n,e),e=kf(t,e,1),t=xr(t,e,1),e=rn(),t!==null&&(vl(t,1,e),fn(t,e));break}}t=t.return}}function _h(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rn(),e.pingedLanes|=e.suspendedLanes&n,Bt===e&&(Qt&n)===n&&(zt===4||zt===3&&(Qt&130023424)===Qt&&500>_t()-mu?Or(e,0):fu|=n),fn(e,t)}function Kf(e,t){t===0&&(e.mode&1?(t=_l,_l<<=1,!(_l&130023424)&&(_l=4194304)):t=1);var n=rn();e=tr(e,t),e!==null&&(vl(e,t,n),fn(e,n))}function Ph(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Kf(e,n)}function Th(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),Kf(e,n)}var Qf;Qf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||cn.current)un=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return un=!1,bh(e,t,n);un=!!(e.flags&131072)}else un=!1,jt&&t.flags&1048576&&Gd(t,wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;to(e,t),e=t.pendingProps;var s=ms(t,en.current);cs(t,n),s=ou(null,t,r,e,s,n);var o=iu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dn(r)?(o=!0,yo(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tu(t),s.updater=Uo,t.stateNode=s,s._reactInternals=t,ca(t,r,e,n),t=ma(null,t,r,!0,o,n)):(t.tag=0,jt&&o&&Xa(t),nn(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(to(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Ah(r),e=$n(r,e),s){case 0:t=fa(null,t,r,e,n);break e;case 1:t=Sc(null,t,r,e,n);break e;case 11:t=bc(null,t,r,e,n);break e;case 14:t=Nc(null,t,r,$n(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$n(r,s),fa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$n(r,s),Sc(e,t,r,s,n);case 3:e:{if(Df(t),e===null)throw Error(Y(387));r=t.pendingProps,o=t.memoizedState,s=o.element,nf(e,t),No(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=xs(Error(Y(423)),t),t=Mc(e,t,r,n,s);break e}else if(r!==s){s=xs(Error(Y(424)),t),t=Mc(e,t,r,n,s);break e}else for(gn=gr(t.stateNode.containerInfo.firstChild),xn=t,jt=!0,_n=null,n=ef(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(hs(),r===s){t=nr(e,t,n);break e}nn(e,t,r,n)}t=t.child}return t;case 5:return rf(t),e===null&&ia(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,i=s.children,na(r,s)?i=null:o!==null&&na(r,o)&&(t.flags|=32),If(e,t),nn(e,t,i,n),t.child;case 6:return e===null&&ia(t),null;case 13:return $f(e,t,n);case 4:return nu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ps(t,null,r,n):nn(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$n(r,s),bc(e,t,r,s,n);case 7:return nn(e,t,t.pendingProps,n),t.child;case 8:return nn(e,t,t.pendingProps.children,n),t.child;case 12:return nn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,i=s.value,ht(jo,r._currentValue),r._currentValue=i,o!==null)if(An(o.value,i)){if(o.children===s.children&&!cn.current){t=nr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Zn(-1,n&-n),u.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var b=f.pending;b===null?u.next=u:(u.next=b.next,b.next=u),f.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),aa(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(Y(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),aa(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}nn(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,cs(t,n),s=Cn(s),r=r(s),t.flags|=1,nn(e,t,r,n),t.child;case 14:return r=t.type,s=$n(r,t.pendingProps),s=$n(r.type,s),Nc(e,t,r,s,n);case 15:return Ef(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:$n(r,s),to(e,t),t.tag=1,dn(r)?(e=!0,yo(t)):e=!1,cs(t,n),Sf(t,r,s),ca(t,r,s,n),ma(null,t,r,!0,e,n);case 19:return Lf(e,t,n);case 22:return Cf(e,t,n)}throw Error(Y(156,t.tag))};function Xf(e,t){return wd(e,t)}function Oh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,n,r){return new Oh(e,t,n,r)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ah(e){if(typeof e=="function")return xu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oa)return 11;if(e===Aa)return 14}return 2}function wr(e,t){var n=e.alternate;return n===null?(n=Sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function so(e,t,n,r,s,o){var i=2;if(r=e,typeof e=="function")xu(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Yr:return Ar(n.children,s,o,t);case Ta:i=8,s|=8;break;case Pi:return e=Sn(12,n,t,s|2),e.elementType=Pi,e.lanes=o,e;case Ti:return e=Sn(13,n,t,s),e.elementType=Ti,e.lanes=o,e;case Oi:return e=Sn(19,n,t,s),e.elementType=Oi,e.lanes=o,e;case rd:return Qo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case td:i=10;break e;case nd:i=9;break e;case Oa:i=11;break e;case Aa:i=14;break e;case ir:i=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Sn(i,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Ar(e,t,n,r){return e=Sn(7,e,r,t),e.lanes=n,e}function Qo(e,t,n,r){return e=Sn(22,e,r,t),e.elementType=rd,e.lanes=n,e.stateNode={isHidden:!1},e}function Ci(e,t,n){return e=Sn(6,e,null,t),e.lanes=n,e}function Ii(e,t,n){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zh(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ui(0),this.expirationTimes=ui(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ui(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yu(e,t,n,r,s,o,i,a,u){return e=new zh(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Sn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(o),e}function Rh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Yf(e){if(!e)return Nr;e=e._reactInternals;e:{if(Vr(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(dn(n))return Xd(e,n,t)}return t}function Gf(e,t,n,r,s,o,i,a,u){return e=yu(n,r,!0,e,s,o,i,a,u),e.context=Yf(null),n=e.current,r=rn(),s=vr(n),o=Zn(r,s),o.callback=t??null,xr(n,o,s),e.current.lanes=s,vl(e,s,r),fn(e,r),e}function Xo(e,t,n,r){var s=t.current,o=rn(),i=vr(s);return n=Yf(n),t.context===null?t.context=n:t.pendingContext=n,t=Zn(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=xr(s,t,i),e!==null&&(On(e,s,i,o),Zl(e,s,i)),i}function $o(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Tc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vu(e,t){Tc(e,t),(e=e.alternate)&&Tc(e,t)}function Fh(){return null}var Jf=typeof reportError=="function"?reportError:function(e){console.error(e)};function wu(e){this._internalRoot=e}Yo.prototype.render=wu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Xo(e,t,null,null)};Yo.prototype.unmount=wu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wr(function(){Xo(null,e,null,null)}),t[er]=null}};function Yo(e){this._internalRoot=e}Yo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ed();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ur.length&&t!==0&&t<ur[n].priority;n++);ur.splice(n,0,e),n===0&&Id(e)}};function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Oc(){}function Bh(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var f=$o(i);o.call(f)}}var i=Gf(t,r,e,0,null,!1,!1,"",Oc);return e._reactRootContainer=i,e[er]=i.current,al(e.nodeType===8?e.parentNode:e),Wr(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var f=$o(u);a.call(f)}}var u=yu(e,0,!1,null,null,!1,!1,"",Oc);return e._reactRootContainer=u,e[er]=u.current,al(e.nodeType===8?e.parentNode:e),Wr(function(){Xo(t,u,n,r)}),u}function Jo(e,t,n,r,s){var o=n._reactRootContainer;if(o){var i=o;if(typeof s=="function"){var a=s;s=function(){var u=$o(i);a.call(u)}}Xo(t,i,e,s)}else i=Bh(n,t,e,s,r);return $o(i)}Md=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ws(t.pendingLanes);n!==0&&(Fa(t,n|1),fn(t,_t()),!(st&6)&&(ys=_t()+500,kr()))}break;case 13:Wr(function(){var r=tr(e,1);if(r!==null){var s=rn();On(r,e,1,s)}}),vu(e,1)}};Ba=function(e){if(e.tag===13){var t=tr(e,134217728);if(t!==null){var n=rn();On(t,e,134217728,n)}vu(e,134217728)}};kd=function(e){if(e.tag===13){var t=vr(e),n=tr(e,t);if(n!==null){var r=rn();On(n,e,t,r)}vu(e,t)}};Ed=function(){return at};Cd=function(e,t){var n=at;try{return at=e,t()}finally{at=n}};Ki=function(e,t,n){switch(t){case"input":if(Ri(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Bo(r);if(!s)throw Error(Y(90));ld(r),Ri(r,s)}}}break;case"textarea":id(e,n);break;case"select":t=n.value,t!=null&&os(e,!!n.multiple,t,!1)}};hd=hu;pd=Wr;var Wh={usingClientEntryPoint:!1,Events:[jl,qr,Bo,fd,md,hu]},zs={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hh={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yd(e),e===null?null:e.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||Fh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{Ao=Ul.inject(Hh),Bn=Ul}catch{}}vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wh;vn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ju(t))throw Error(Y(200));return Rh(e,t,null,n)};vn.createRoot=function(e,t){if(!ju(e))throw Error(Y(299));var n=!1,r="",s=Jf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yu(e,1,!1,null,null,n,!1,r,s),e[er]=t.current,al(e.nodeType===8?e.parentNode:e),new wu(t)};vn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=yd(t),e=e===null?null:e.stateNode,e};vn.flushSync=function(e){return Wr(e)};vn.hydrate=function(e,t,n){if(!Go(t))throw Error(Y(200));return Jo(null,e,t,!0,n)};vn.hydrateRoot=function(e,t,n){if(!ju(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",i=Jf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Gf(t,null,e,1,n??null,s,!1,o,i),e[er]=t.current,al(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yo(t)};vn.render=function(e,t,n){if(!Go(t))throw Error(Y(200));return Jo(null,e,t,!1,n)};vn.unmountComponentAtNode=function(e){if(!Go(e))throw Error(Y(40));return e._reactRootContainer?(Wr(function(){Jo(null,null,e,!1,function(){e._reactRootContainer=null,e[er]=null})}),!0):!1};vn.unstable_batchedUpdates=hu;vn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Go(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Jo(e,t,n,!1,r)};vn.version="18.3.1-next-f1338f8080-20240426";function Zf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zf)}catch(e){console.error(e)}}Zf(),Jc.exports=vn;var Uh=Jc.exports,Ac=Uh;Li.createRoot=Ac.createRoot,Li.hydrateRoot=Ac.hydrateRoot;const Vh="modulepreload",Kh=function(e,t){return new URL(e,t).href},zc={},Qh=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(f=>{if(f=Kh(f,r),f in zc)return;zc[f]=!0;const b=f.endsWith(".css"),g=b?'[rel="stylesheet"]':"";if(!!r)for(let v=i.length-1;v>=0;v--){const w=i[v];if(w.href===f&&(!b||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${g}`))return;const S=document.createElement("link");if(S.rel=b?"stylesheet":Vh,b||(S.as="script"),S.crossOrigin="",S.href=f,u&&S.setAttribute("nonce",u),document.head.appendChild(S),b)return new Promise((v,w)=>{S.addEventListener("load",v),S.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},Be=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Zt=[{id:"America/Los_Angeles",label:"PT",offset:0},{id:"America/Denver",label:"MT",offset:1},{id:"America/Chicago",label:"CT",offset:2},{id:"America/New_York",label:"ET",offset:3}],Rs=24;function Lr(){return Math.random().toString(36).slice(2,9)}function de(e){const[t,n]=e.split(":").map(Number);return t*60+(n||0)}function et(e){const t=(e%1440+1440)%1440,n=Math.floor(t/60),r=t%60;return`${String(n).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function rr(e){const[t,n,r]=e.split("-").map(Number);return new Date(t,n-1,r)}function vs(e,t){const n=new Date(e);return n.setDate(e.getDate()+t),n}function Mn(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function lo(e){return e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function Xh(e,t){const n=e.getFullYear(),r=t.getFullYear(),s=e.getMonth(),o=t.getMonth(),i=e.getDate(),a=t.getDate(),u=e.toLocaleString(void 0,{month:"short"}),f=t.toLocaleString(void 0,{month:"short"});if(n===r&&s===o&&i===a)return lo(e);if(n===r&&s===o){const b=" ";return`${u} ${i}${b}–${b}${a}, ${n}`}return n===r?`${u} ${i} – ${f} ${a}, ${n}`:`${u} ${i}, ${n} – ${f} ${a}, ${r}`}function oo(e){const n=0-e.getDay(),r=new Date(e);return r.setDate(e.getDate()+n),r.setHours(0,0,0,0),r}function Pn(e){try{const n=new Intl.DateTimeFormat("en-US",{timeZone:e,hour:"2-digit",minute:"2-digit",hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",weekday:"short"}).formatToParts(new Date),r=p=>{var S;return((S=n.find(v=>v.type===p))==null?void 0:S.value)||""},s=parseInt(r("hour")||"0",10),o=parseInt(r("minute")||"0",10),i=parseInt(r("year")||"0",10),a=parseInt(r("month")||"0",10),u=parseInt(r("day")||"0",10),f=(r("weekday")||"").slice(0,3),b=(s*60+o)%1440,g=`${i}-${String(a).padStart(2,"0")}-${String(u).padStart(2,"0")}`;return{minutes:b,ymd:g,weekdayShort:f,h:s,m:o,y:i,mo:a,d:u}}catch{const t=new Date,n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()];return{minutes:t.getHours()*60+t.getMinutes(),ymd:Mn(t),weekdayShort:n,h:t.getHours(),m:t.getMinutes(),y:t.getFullYear(),mo:t.getMonth()+1,d:t.getDate()}}}function xl(e,t=new Date){var n,r;try{const i=(n=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"short",hour:"2-digit",minute:"2-digit",hour12:!1}).formatToParts(t).find(a=>a.type==="timeZoneName"))==null?void 0:n.value;if(i&&/[A-Z]{2,4}/.test(i))return i}catch{}try{const i=(r=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"shortOffset"}).formatToParts(t).find(a=>a.type==="timeZoneName"))==null?void 0:r.value;if(i)return i}catch{}return"UTC"}function Ma(e,t){return(e%t+t)%t}function Rc(e,t){const n=Be.indexOf(e),r=Ma(n+t,7);return Be[r]}function Hr(e,t){const n=[],r=t*60;for(const s of e){const o=de(s.start),i=s.end==="24:00"?1440:de(s.end),a=typeof s.endDay=="string"?s.endDay!==s.day:i<o&&s.end!=="24:00",u=s.end==="24:00"?1440-o:a?1440-o+i:i-o,f=o+u,b=o+r,g=f+r,p=Math.floor(b/1440),S=Math.floor((g-1)/1440),v=Ma(b,1440),w=Ma(g,1440),z=Rc(s.day,p),m=Rc(s.day,S);p===S?n.push({...s,day:z,start:et(v),end:g-b===1440?"24:00":et(w)}):(n.push({...s,day:z,start:et(v),end:"24:00",endDay:m}),n.push({...s,day:m,start:"00:00",end:et(w),endDay:m}))}return n}function Lo(e,t,n){return Hr(e,n).filter(s=>s.day===t)}function Us(e,t,n){if(t){const r=e.find(s=>s.id&&s.id===t);if(r){const s=`${r.firstName||""} ${r.lastName||""}`.trim();if(s)return s}}return(n||"").trim()}function Vl(e,t){const n=(t||"").trim().toLowerCase();if(!n)return;const r=e.find(s=>`${s.firstName||""} ${s.lastName||""}`.trim().toLowerCase()===n);return r==null?void 0:r.id}function _o(e,t){const n=de(e.start),r=de(e.end),o=(r>n?r:1440)-n,i=e.segments||[],a=t.map(g=>{const p=de(g.start),S=de(g.end),v=Math.max(0,Math.min(o,p-n)),w=Math.max(0,Math.min(o,S-n)),z=Math.max(0,w-v);return z>0?{taskId:g.taskId,startOffsetMin:v,durationMin:z}:null}).filter(Boolean),u=new Array(o).fill(null);for(const g of a)for(let p=g.startOffsetMin;p<g.startOffsetMin+g.durationMin&&p<o;p++)u[p]==null&&(u[p]={taskId:g.taskId,source:"cal"});for(const g of i)for(let p=g.startOffsetMin;p<g.startOffsetMin+g.durationMin&&p<o;p++)u[p]={taskId:g.taskId,source:"manual"};const f=[];let b=0;for(;b<o;){const g=u[b];if(!g){b++;continue}const p=b,S=g.taskId;let v=b+1;for(;v<o&&u[v]&&u[v].taskId===S&&u[v].source===g.source;)v++;f.push({id:`${e.id}-${S}-${p}`,shiftId:e.id,taskId:S,startOffsetMin:p,durationMin:v-p}),b=v}return f}const Yh="",Gh=typeof location<"u"&&/^(localhost|127\.0\.0\.1|10\.|172\.(1[6-9]|2[0-9]|3[0-1])\.|192\.168\.)$/.test(location.hostname),qf=Gh?Yh:"",Jh="https://team-schedule-api.phorbie.workers.dev",En=Jh.replace(/\/$/,""),Hn="/api".replace(/\/$/,"");function e0(){return En}function t0(){return!1}function n0(){return Hn}let Zo=null,jr=null;function Zh(){if(typeof document>"u")return null;const e=document.cookie.match(/(?:^|; )csrf=([^;]+)/);return e?decodeURIComponent(e[1]):null}function r0(){return Zo}function ws(){return Zo!=null}function ka(){return{cookie:!!Zh(),memory:!!Zo,token:ws(),sid:!!jr}}async function s0(e){try{const t=await fetch(`${En}${Hn}/login`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:e})});if(t.ok){try{const n=await t.clone().json();n&&typeof n.csrf=="string"&&(Zo=n.csrf),n&&typeof n.sid=="string"&&(jr=n.sid)}catch{}try{await To(e)}catch{}try{window.dispatchEvent(new CustomEvent("schedule:auth",{detail:{loggedIn:!0}}))}catch{}}return{ok:t.ok,status:t.status}}catch{return{ok:!1}}}async function qh(e){return{ok:!0}}async function Ea(){if(!En)return null;try{const e=`${En}${Hn}/schedule`,n=await fetch(e,{credentials:"include",cache:"no-store"});return n.ok?await n.json():null}catch{return null}}async function bu(e){if(!En)return{ok:!1,error:"no_api_base"};try{const t=r0();if(!t&&!qf)return console.info("[schedule2] Skipping write: not logged in (no CSRF token)."),{ok:!1,error:"missing_csrf"};const n=`${En}${Hn}/schedule`,r={"Content-Type":"application/json"};t&&(r["x-csrf-token"]=t),jr&&(r["x-session-id"]=jr,r.authorization=`Session ${jr}`);const s=await fetch(n,{method:"POST",headers:r,credentials:"include",body:JSON.stringify(e)});if(s.ok)return{ok:!0,status:s.status};let o,i;try{if((s.headers.get("content-type")||"").includes("application/json")){const u=await s.json();o=u&&(u.error||u.code||u.message),i=JSON.stringify(u)}else i=await s.text()}catch{}return{ok:!1,status:s.status,error:o,bodyText:i}}catch{return{ok:!1}}}async function l0(e){return!!(await bu(e)).ok}async function Po(e){try{const t=r0();if(!t&&!qf){try{console.info("[schedule2] Skipping /api/agents write: not logged in (no CSRF token).")}catch{}return!1}if(!await ep())return!1;const r={"Content-Type":"application/json"};return t&&(r["x-csrf-token"]=t),jr&&(r["x-session-id"]=jr,r.authorization=`Session ${jr}`),(await fetch(`${En}${Hn}/agents`,{method:"POST",credentials:"include",headers:r,body:JSON.stringify({agents:e})})).ok}catch{return!1}}async function To(e){try{if((await fetch(`${En}${Hn}/schedule`,{method:"GET",credentials:"include"})).ok)return}catch{}try{await fetch(`${En}${Hn}/login-site`,{method:"POST",headers:{"content-type":"application/json"},credentials:"include",body:JSON.stringify({password:e||""})})}catch{}}let Qr=null,Kl=!1;async function ep(){if(Qr!=null)return Qr;try{const e=await fetch(`${En}${Hn}/agents`,{method:"GET",credentials:"include"});if(e.status===200||e.status===401||e.status===403)return Qr=!0,!0;if(e.status===404){if(Qr=!1,!Kl){Kl=!0;try{console.info("[schedule2] Agents-only endpoint not available on this API base; skipping /api/agents writes to avoid 404s.",{base:En,prefix:Hn})}catch{}}return!1}return Qr=!1,!1}catch{if(Qr=!1,!Kl){Kl=!0;try{console.info("[schedule2] Agents-only endpoint probe failed; skipping /api/agents writes.",{base:En,prefix:Hn})}catch{}}return!1}}const tp=Object.freeze(Object.defineProperty({__proto__:null,cloudGet:Ea,cloudPost:l0,cloudPostAgents:Po,cloudPostDetailed:bu,devSiteLogin:qh,ensureSiteSession:To,getApiBase:e0,getApiPrefix:n0,getCsrfDiagnostics:ka,hasCsrfToken:ws,isUsingDevProxy:t0,login:s0},Symbol.toStringTag,{value:"Module"}));function np({dark:e,setDark:t,view:n,setView:r,weekStart:s,setWeekStart:o,tz:i,setTz:a,canEdit:u,editMode:f,setEditMode:b,allowDarkToggle:g=!0}){const[p,S]=C.useState(!1),w=/^\d{4}-\d{2}-\d{2}$/.test(s)&&!Number.isNaN(rr(s).getTime()),z=w?rr(s):oo(new Date),m=vs(z,6);return l.jsx(l.Fragment,{children:l.jsx("header",{className:"mb-1",children:l.jsxs("div",{className:"grid grid-cols-[1fr_auto_1fr] items-center gap-1.5 sm:gap-3 pt-0.5 pb-1 sm:pb-2",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2 justify-start",children:[l.jsx("button",{onClick:()=>r("schedule"),"aria-label":"Schedule",title:"Schedule",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2 sm:px-3 rounded-lg text-xs sm:text-sm font-medium border",n==="schedule"?e?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":e?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[l.jsx("rect",{x:"3",y:"4.5",width:"18",height:"16",rx:"2"}),l.jsx("path",{d:"M8 3v3"}),l.jsx("path",{d:"M16 3v3"}),l.jsx("path",{d:"M3 9.5h18"}),l.jsx("path",{d:"M8 13h3"}),l.jsx("path",{d:"M8 17h8"})]})}),l.jsx("button",{}),l.jsx("button",{onClick:()=>r("manageV2"),"aria-label":"Manage v2",title:"Manage v2",className:["inline-flex items-center justify-center h-9 sm:h-10 px-2 sm:px-3 rounded-lg text-xs sm:text-sm font-medium border",n==="manageV2"?e?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":e?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:l.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})})]}),l.jsxs("div",{className:"block text-center whitespace-nowrap overflow-visible",children:[l.jsx("div",{className:[e?"text-neutral-400":"text-neutral-600","text-[0.9rem] sm:text-[0.95rem] font-semibold leading-tight"].join(" "),children:"Customer Care Team Schedule"}),n==="manageV2"?l.jsx("div",{className:["font-bold tracking-wide",e?"text-red-300":"text-red-600","text-xl sm:text-2xl"].join(" "),style:{letterSpacing:"0.02em",lineHeight:1.12},children:"PORTAL OF POWER"}):l.jsx("div",{className:["font-medium tabular-nums","text-lg sm:text-2xl leading-tight"].join(" "),style:{letterSpacing:"0.005em"},children:Xh(z,m)})]}),l.jsxs("div",{className:"w-full sm:w-auto",children:[l.jsx("div",{className:"flex sm:hidden items-center justify-end",children:l.jsx("button",{className:["inline-flex items-center justify-center h-9 w-9 rounded-lg border",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),onClick:()=>S(d=>!d),"aria-label":p?"Hide tools":"Show tools","aria-expanded":p,"aria-controls":"mobile-tools",title:p?"Hide tools":"Show tools",children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[l.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),l.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),l.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),l.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),l.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),l.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),l.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),l.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),l.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})})}),p&&l.jsxs("div",{id:"mobile-tools",className:"sm:hidden mt-2 flex flex-col gap-2",children:[l.jsxs("div",{className:"relative w-full",children:[l.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",e?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M2 12h20"}),l.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),l.jsx("select",{"aria-label":"Timezone",title:"Timezone",className:["border rounded-lg pl-9 pr-2 h-9 text-sm appearance-none w-full",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:i.id,onChange:d=>{const h=Zt.find(x=>x.id===d.target.value);h&&a(h)},children:Zt.map(d=>l.jsx("option",{value:d.id,children:xl(d.id)},d.id))})]}),l.jsx("div",{className:"relative w-full",children:l.jsx("input",{"aria-label":"Week start (Sun)",title:"Week start (Sun)",className:["border rounded-lg pl-3 pr-2 h-9 text-sm w-full",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:w?s:Mn(z),onChange:d=>{const h=d.target.value;/^\d{4}-\d{2}-\d{2}$/.test(h)?o(h):o(Mn(oo(new Date)))},style:{colorScheme:e?"dark":"light"}})})]}),l.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-1.5 sm:gap-2 justify-end",children:[l.jsxs("div",{className:"relative w-full sm:w-auto",children:[l.jsxs("svg",{"aria-hidden":!0,className:["pointer-events-none absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5",e?"text-neutral-300":"text-neutral-600"].join(" "),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("path",{d:"M2 12h20"}),l.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 0 20a15.3 15.3 0 0 1 0-20"})]}),l.jsx("select",{"aria-label":"Timezone",title:"Timezone",className:["border rounded-lg pl-9 pr-2 h-9 sm:h-10 text-xs sm:text-sm appearance-none w-full sm:w-auto",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:i.id,onChange:d=>{const h=Zt.find(x=>x.id===d.target.value);h&&a(h)},children:Zt.map(d=>l.jsx("option",{value:d.id,children:xl(d.id)},d.id))})]}),l.jsx("div",{className:"relative w-full sm:w-auto",children:l.jsx("input",{"aria-label":"Week start (Sun)",title:"Week start (Sun)",className:["border rounded-lg pl-3 pr-2 h-9 sm:h-10 text-xs sm:text-sm w-full sm:w-auto",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),type:"date",value:w?s:Mn(z),onChange:d=>{const h=d.target.value;/^\d{4}-\d{2}-\d{2}$/.test(h)?o(h):o(Mn(oo(new Date)))},style:{colorScheme:e?"dark":"light"}})})]})]})]})})})}function rp({date:e,dayKey:t,people:n,shifts:r,pto:s,dark:o,tz:i,canEdit:a,editMode:u,onRemove:f,showHeaderTitle:b=!0,tasks:g,compact:p,agents:S}){const w=C.useRef(null),[z,m]=R.useState(0),[d,h]=R.useState(()=>{try{const te=localStorage.getItem("schedule_theme");return te==="unicorn"?"system":te||"system"}catch{return"system"}});R.useEffect(()=>{(()=>{const ye=document.querySelector("[data-theme]"),F=(ye==null?void 0:ye.getAttribute("data-theme"))||null;F&&h(F)})();const G=ye=>{var re;const F=ye;if((re=F==null?void 0:F.detail)!=null&&re.value){const A=F.detail.value;h(A==="unicorn"?"system":A)}};return window.addEventListener("schedule:set-theme",G),()=>window.removeEventListener("schedule:set-theme",G)},[]),R.useEffect(()=>{const te=()=>{w.current&&m(w.current.clientWidth)};return te(),window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const x=Array.from({length:24},(te,G)=>G),M=o?"text-neutral-500":"text-neutral-400",y=(()=>{const[te,G]=R.useState(typeof window<"u"?window.innerWidth:1280);return R.useEffect(()=>{const ye=()=>G(window.innerWidth);return window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[]),te})(),k=y>=1024?"lg":y>=768?"md":y>=640?"sm":"xs",P=k==="lg"?1:k==="md"?.9:k==="sm"?.82:.75,O=Math.max(12,Math.round(13*P)),ue=k==="lg"?100:k==="md"?92:k==="sm"?84:76;C.useMemo(()=>{try{if(!n||n.length===0)return ue;const G=document.createElement("canvas").getContext("2d");if(!G)return ue;G.font=`500 ${O}px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif`;let ye=0;for(const re of n){const A=G.measureText(re).width;A>ye&&(ye=A)}return Math.ceil(ye+28)}catch{return ue}},[n,O,ue]);const Me=Math.round(54*.56*P),ie=Math.max(9,Math.round(11*P)),Oe=12,He=ie,pe=Math.max(20,Math.round(24*P)),ae=6,T=k==="lg"?1:k==="md"?2:3,D=o?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)",B=o?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)",ee=T===1?100/(Rs*2):100/Rs,H=R.useMemo(()=>{const te=new Map;return n.forEach(G=>{const ye=r.filter(F=>F.person===G).map(F=>de(F.start));ye.length&&te.set(G,Math.min(...ye))}),Array.from(te.entries()).sort((G,ye)=>G[1]-ye[1]||G[0].localeCompare(ye[0])).map(([G])=>G)},[n,r]),we=R.useMemo(()=>{const te=new Map,G=Math.max(1,H.length);return H.forEach((ye,F)=>{const re=Math.round(F/G*360);te.set(ye,re)}),te},[H]),[se,he]=R.useState(Date.now());R.useEffect(()=>{let te,G;const ye=()=>he(Date.now()),F=()=>{G&&clearInterval(G),te&&clearTimeout(te);const _e=6e4-Date.now()%6e4;te=window.setTimeout(()=>{ye(),G=window.setInterval(ye,6e4)},_e)},re=()=>{document.visibilityState==="visible"&&(ye(),F())};return ye(),F(),document.addEventListener("visibilitychange",re),()=>{G&&clearInterval(G),te&&clearTimeout(te),document.removeEventListener("visibilitychange",re)}},[]);const ne=Pn(i.id),V=ne.minutes,L=Mn(e)===ne.ymd,U=V/1440*100,_=d==="night",Se=d==="noir",ke=d==="prism",ge=d==="subtle",Ie=d==="spring",dt=d==="summer",I=d==="autumn",$=d==="winter",Z=Ie?o?"#22c55e":"#16a34a":dt?o?"#22d3ee":"#06b6d4":I?"#f59e0b":$?o?"#a5b4fc":"#6366f1":ge?o?"rgba(255,255,255,0.85)":"rgba(0,0,0,0.85)":"#ef4444",le=Ie||dt||I||$?"#fff":o?"#000":"#fff",oe=Math.max(2,Math.round(4*P)),ut=Math.max(10,Math.round(14*P)),Xe=R.useMemo(()=>{const te=new Map;for(const G of g||[])te.set(G.id,G);return te},[g]),[Ue,Ee]=R.useState({id:null,x:0}),[De,fe]=R.useState(null),[je,ft]=R.useState(!1),Ye=R.useMemo(()=>{const te=new Map;for(const G of Zt)te.set(G.id,G.offset);return te},[]),Wt=te=>{const G=(te||"").trim().toLowerCase();return(S||[]).find(ye=>`${ye.firstName||""} ${ye.lastName||""}`.trim().toLowerCase()===G)},Ht=te=>Be.indexOf(te);return l.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",style:{overflowY:"visible"},children:[!p&&l.jsxs("div",{className:["relative sticky top-0 z-40 shadow-sm px-2",o?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].filter(Boolean).join(" "),style:{height:Me,display:"flex",alignItems:"center"},children:[b&&l.jsxs("div",{className:"absolute left-2 right-2 text-center font-bold",style:{top:Math.max(0,Math.round(6*P)),fontSize:Math.round(13*P),lineHeight:1},children:[t," ",l.jsx("span",{className:["ml-1",M].join(" "),children:Mn(e)})]}),d!=="night"&&l.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",children:l.jsx("div",{className:"absolute inset-y-0 left-0",style:{width:`calc(12 * (100% / ${Rs}))`,backgroundColor:o?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"}})}),d!=="night"&&l.jsx("div",{className:"absolute left-2 right-2",style:{bottom:oe,height:ut,paddingTop:Math.max(2,Math.round(2*P))},children:x.map((te,G)=>G%T===0&&l.jsx("div",{className:"absolute text-left pl-0.5 leading-none pointer-events-none",style:{left:`calc(${G} * (100% / ${Rs}))`,width:`calc(100% / ${Rs})`},children:l.jsx("div",{className:["font-bold hour-label tracking-tight",M].join(" "),style:{fontSize:ie},children:te===0?12:te>12?te-12:te})},G))}),L&&l.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*P))},children:l.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded-md shadow-sm"].join(" "),style:{left:`${U}%`,fontSize:He,backgroundColor:Z,color:le},children:et(V)})}),je&&De!=null&&l.jsx("div",{className:"absolute inset-y-0 left-2 right-2 pointer-events-none",style:{paddingTop:Math.max(1,Math.round(1*P))},children:(()=>{var Ze;const te=((Ze=w.current)==null?void 0:Ze.getBoundingClientRect().width)||1,G=Math.max(0,Math.min(100,De/te*100)),ye=24*60,F=Math.max(0,Math.min(ye-1,Math.round(De/te*ye))),re=Math.floor(F/60).toString().padStart(2,"0"),A=(F%60).toString().padStart(2,"0");let _e=0;for(const Ae of r){const Ve=de(Ae.start),Qe=de(Ae.end),bt=Qe>Ve?Qe:1440;F>=Ve&&F<bt&&_e++}return l.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",o?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:`${G}%`},children:`${re}:${A} • ${_e} on deck`})})()})]}),l.jsxs("div",{className:"relative px-2",ref:w,onMouseLeave:()=>{ft(!1),fe(null)},onMouseMove:te=>{const G=w.current;if(!G)return;const ye=G.getBoundingClientRect(),F=te.clientX-ye.left;if(F<0||F>ye.width){ft(!1),fe(null);return}ft(!0),fe(F)},style:{paddingBottom:8},children:[L&&l.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-20 pointer-events-none",children:l.jsx("div",{className:"absolute -translate-x-1/2 inset-y-0 w-px",style:{left:`${U}%`,background:Z}})}),je&&De!=null&&l.jsx("div",{className:"absolute inset-y-0 left-0 right-0 z-30 pointer-events-none",children:l.jsx("div",{className:"absolute inset-y-0",style:{left:De,width:1,background:"rgba(59,130,246,0.9)"}})}),H.map(te=>l.jsxs("div",{className:"relative",style:{height:pe+6},children:[d!=="night"&&l.jsx("div",{className:"absolute inset-y-0 left-0 right-0 pointer-events-none",style:{backgroundImage:`repeating-linear-gradient(to right, ${D} 0, ${D} ${ee}%, ${B} ${ee}%, ${B} ${ee*2}%)`,backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}}),r.filter(G=>G.person===te).sort((G,ye)=>de(G.start)-de(ye.start)).map((G,ye,F)=>{const re=s.some(xe=>xe.person===te&&e>=rr(xe.startDate)&&e<=rr(xe.endDate)),A=de(G.start),_e=de(G.end),Ze=_e>A?_e:1440,Ae=A/1440*100,Ve=Math.max(.5,(Ze-A)/1440*100),Qe=we.get(te)??0,bt=`hsla(${Qe},75%,70%,0.95)`,tt=`hsla(${Qe},60%,28%,0.95)`,it=`hsl(${Qe},70%,55%)`,mn=o?"rgba(120,120,120,0.4)":"rgba(180,180,180,0.85)",Yt=o?"rgba(160,160,160,0.55)":"rgba(160,160,160,0.5)",We=Ze-A;let Ge=re?mn:o?tt:bt,ct=re?Yt:o?it:`hsl(${Qe},65%,50%)`;_?(Ge="#000",ct="rgba(239,68,68,0.55)"):Se?(Ge="#000",ct="rgba(255,255,255,0.35)"):!re&&!ke&&(ge?(Ge=o?"hsla(217, 48%, 60%, 0.22)":"hsla(217, 48%, 60%, 0.18)",ct=o?it:`hsl(${Qe},65%,50%)`):Ie?(Ge=o?"hsla(150, 60%, 40%, 0.45)":"hsla(150, 60%, 45%, 0.40)",ct="rgba(16,185,129,0.55)"):dt?(Ge=o?"hsla(190, 85%, 58%, 0.54)":"hsla(190, 90%, 65%, 0.46)",ct="rgba(6,182,212,0.55)"):I?(Ge=o?"hsla(28, 85%, 50%, 0.48)":"hsla(28, 85%, 52%, 0.42)",ct="rgba(245,158,11,0.60)"):$&&(Ge=o?"hsla(228, 60%, 62%, 0.46)":"hsla(228, 62%, 64%, 0.40)",ct="rgba(99,102,241,0.60)"));const ot=(Array.isArray(G.segments)?G.segments:[]).slice().sort((xe,$e)=>xe.startOffsetMin-$e.startOffsetMin),ze=ot.map(xe=>{const $e=Xe.get(xe.taskId),nt=A+Math.max(0,Math.min(We,xe.startOffsetMin)),Pe=A+Math.max(0,Math.min(We,xe.startOffsetMin+xe.durationMin));return`${($e==null?void 0:$e.name)||"Task"}: ${et(nt)}–${et(Pe)}`}),pt=`${G.person} • ${G.start}-${G.end}`+(ze.length?`

Tasks:
${ze.join(`
`)}`:""),Je=r.some(xe=>xe!==G&&xe.person===te&&(()=>{const $e=A,nt=Ze,Pe=de(xe.start),gt=de(xe.end),Nt=gt>de(xe.start)?gt:1440;return $e<Nt&&nt>Pe})()),mt=Je?o?"inset 0 0 0 2px rgba(255,0,0,0.6)":"inset 0 0 0 2px rgba(255,0,0,0.7)":void 0;return l.jsxs("div",{className:"relative",title:pt+(Je?`

Warning: overlaps another shift.`:""),onMouseEnter:()=>Ee({id:G.id,x:0}),onMouseLeave:()=>Ee({id:null,x:0}),onMouseMove:xe=>{const nt=xe.currentTarget.getBoundingClientRect(),Pe=xe.clientX-nt.left,gt=Math.max(8,Math.min(Pe,nt.width-8));Ee(Nt=>Nt.id===G.id?{id:G.id,x:gt}:Nt)},children:[(()=>{let xe,$e=!1;if(d==="prism"&&!re){$e=!0;const Pe=(Qe+20)%360;xe=`linear-gradient(90deg, hsl(${Pe} 88% 62% / 0.78), hsl(${(Pe+50)%360} 84% 58% / 0.74), hsl(${(Pe+100)%360} 82% 62% / 0.78))`}re&&(xe=`linear-gradient(0deg, ${o?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 0%, ${o?"rgba(0,0,0,0.18)":"rgba(0,0,0,0.08)"} 100%)`);const nt={left:`${Ae}%`,width:`${Ve}%`,top:2,height:pe,backgroundColor:Ge,boxShadow:`inset 0 0 0 1px ${ct}`+(mt?`, ${mt}`:""),borderRadius:ae,...xe?{backgroundImage:xe}:{},...$e?{backgroundColor:"rgba(0,0,0,0.08)",backgroundBlendMode:"multiply"}:{},...$e?{backgroundSize:"300% 100%",animation:"prismChip 10s linear infinite",animationDelay:`${Qe%60/30}s`}:{}};return l.jsx("div",{className:"absolute",style:nt})})(),ot.map(xe=>{const $e=Math.max(0,Math.min(We,xe.startOffsetMin)),nt=Math.max(0,Math.min(We,xe.startOffsetMin+xe.durationMin));if(nt<=$e)return null;const Pe=(A+$e)/1440*100,gt=(nt-$e)/1440*100,Nt=Xe.get(xe.taskId),j=(Nt==null?void 0:Nt.color)||(o?it:`hsl(${Qe},65%,50%)`),K=d==="prism"?`linear-gradient(90deg,
                              color-mix(in oklab, ${j} 85%, #000 15%) 0%,
                              color-mix(in oklab, ${j} 65%, #000 35%) 50%,
                              color-mix(in oklab, ${j} 85%, #000 15%) 100%
                            )`:_?"repeating-linear-gradient(135deg, rgba(239,68,68,0.28) 0 6px, transparent 6px 14px)":Se?"repeating-linear-gradient(135deg, rgba(255,255,255,0.16) 0 6px, transparent 6px 14px)":ge?"repeating-linear-gradient(135deg, hsla(217, 48%, 60%, 0.25) 0 6px, transparent 6px 14px)":Ie?`repeating-linear-gradient(135deg, color-mix(in oklab, ${j} 35%, rgba(16,185,129,0.28) 65%) 0 6px, transparent 6px 14px)`:dt?"repeating-linear-gradient(135deg, hsla(190, 85%, 60%, 0.28) 0 6px, transparent 6px 14px)":I?`repeating-linear-gradient(135deg, color-mix(in oklab, ${j} 35%, rgba(245,158,11,0.30) 65%) 0 6px, transparent 6px 14px)`:$?"repeating-linear-gradient(135deg, hsla(228, 62%, 62%, 0.28) 0 6px, transparent 6px 14px)":`repeating-linear-gradient(135deg, color-mix(in oklab, ${j} 40%, ${o?"#0a0a0a":"#ffffff"} 60%) 0 6px, transparent 6px 14px)`,q={left:`${Pe}%`,width:`${gt}%`,top:2,height:pe,backgroundImage:K,...d==="prism"?{backgroundSize:"300% 100%",animation:"prismChip 12s ease-in-out infinite",backgroundBlendMode:"multiply"}:{},pointerEvents:"none",borderRadius:ae,opacity:d==="prism"?.7:_?.35:Se?.25:.45};return l.jsx("div",{className:"absolute",style:q},xe.id)}),l.jsx("div",{className:"absolute pointer-events-none",style:{left:`${Ae}%`,top:2,width:`${Ve}%`,height:pe,boxShadow:`inset 0 0 0 1px ${ct}`+(mt?`, ${mt}`:""),borderRadius:ae,zIndex:5}}),(()=>{const xe=z>0?z/1440:0,Pe=We*xe>=60,gt=d==="prism"&&!re;return l.jsx("div",{className:["absolute flex items-center justify-center px-2 truncate pointer-events-none",re?"text-neutral-500":gt?"text-white":""].join(" "),style:{left:`${Ae}%`,top:2,width:`${Ve}%`,height:pe,fontSize:Oe,...gt?{textShadow:"0 1px 1px rgba(0,0,0,0.7), 0 0 6px rgba(0,0,0,0.35)"}:{}},children:Pe?(te||"").split(" ")[0]||te:""})})(),Ue.id===G.id&&l.jsxs("div",{className:["absolute z-40 px-2 py-1 rounded-md text-xs shadow-lg border",o?"bg-neutral-900/95 border-neutral-700 text-neutral-100":"bg-white/95 border-neutral-300 text-neutral-900"].join(" "),style:{left:Ue.x,top:2,transform:"translate(-50%, calc(-100% - 6px))"},role:"tooltip",children:[l.jsx("div",{className:"font-semibold mb-1",children:te}),l.jsxs("div",{className:o?"text-neutral-300":"text-neutral-700",children:["Shift: ",G.start,"–",G.end]}),(()=>{const xe=Wt(te);if(!xe||!xe.tzId)return null;const $e=Ye.get(xe.tzId)??0,nt=i.offset,Pe=($e-nt)*60,gt=Ht(G.day),Nt=Ht(G.endDay||G.day),j=(gt<0?0:gt)*1440+de(G.start);let K=(Nt<0?gt:Nt)*1440+(G.end==="24:00"?1440:de(G.end));K<=j&&(K+=1440);const q=j+Pe,ve=K+Pe,Ne=Be[(Math.floor(q/1440)%7+7)%7],me=Be[(Math.floor(ve/1440)%7+7)%7],Ce=(q%1440+1440)%1440,qe=(ve%1440+1440)%1440;return l.jsxs("div",{className:o?"text-neutral-300":"text-neutral-700",children:["Local: ",Ne," ",et(Ce),"–",me," ",et(qe)," ",l.jsxs("span",{className:"opacity-70",children:["(",xl(xe.tzId),")"]})]})})(),ot.length>0&&l.jsx("div",{className:"mt-1",children:l.jsx("ul",{className:"space-y-0.5",children:ot.map(xe=>{const $e=Xe.get(xe.taskId),nt=($e==null?void 0:$e.color)||(o?it:`hsl(${Qe},65%,50%)`),Pe=et(A+Math.max(0,Math.min(We,xe.startOffsetMin))),gt=et(A+Math.max(0,Math.min(We,xe.startOffsetMin+xe.durationMin)));return l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-block w-3 h-3 rounded-sm border",style:{background:nt,borderColor:nt}}),l.jsxs("span",{className:"truncate",children:[l.jsx("span",{className:"font-medium",children:($e==null?void 0:$e.name)||"Task"}),l.jsxs("span",{className:"ml-1 "+(o?"text-neutral-300":"text-neutral-700"),children:[Pe,"–",gt]})]})]},xe.id)})})})]}),u&&f&&l.jsx("button",{onClick:xe=>{xe.stopPropagation(),f(G.id)},title:"Delete shift",className:"absolute -top-1 w-4 h-4 rounded-full leading-[14px] text-[12px] text-center border bg-white/90 hover:bg-white",style:{left:`calc(${Ae}% + ${Ve}% - 8px)`},children:"×"})]},G.id)})]},te))]})]})}function sp({dark:e,tz:t,dayKey:n,shifts:r,pto:s}){const o=(()=>{try{const M=document.querySelector("[data-theme]");return(M==null?void 0:M.getAttribute("data-theme"))||"system"}catch{return"system"}})(),i=o==="night",a=o==="noir",u=o==="prism",f=o==="subtle",b=o==="spring"||o==="summer"||o==="autumn"||o==="winter",[g,p]=R.useState(Date.now());R.useEffect(()=>{let M,E;const y=()=>p(Date.now()),k=()=>{E&&clearInterval(E),M&&clearTimeout(M);const ue=6e4-Date.now()%6e4;M=window.setTimeout(()=>{y(),E=window.setInterval(y,6e4)},ue)},P=()=>{document.visibilityState==="visible"&&(y(),k())};return y(),k(),document.addEventListener("visibilitychange",P),()=>{E&&clearInterval(E),M&&clearTimeout(M),document.removeEventListener("visibilitychange",P)}},[]);const S=Pn(t.id),v=S.minutes,w=S.ymd,z=R.useMemo(()=>{const M=new Set;for(const E of s||[])E.startDate<=w&&w<=E.endDate&&M.add(E.person);return M},[s,w]),m=R.useMemo(()=>{const M=new Map;return r.forEach(E=>{const y=M.get(E.person),k=de(E.start);(y==null||k<y)&&M.set(E.person,k)}),Array.from(M.entries()).sort((E,y)=>E[1]-y[1]||E[0].localeCompare(y[0])).map(([E])=>E)},[r]),d=R.useMemo(()=>{const M=new Map,E=Math.max(1,m.length);return m.forEach((y,k)=>{const P=Math.round(k/E*360);M.set(y,P)}),M},[m]),h=R.useMemo(()=>{const M=r.filter(y=>{if(z.has(y.person))return!1;const k=de(y.start),P=de(y.end),O=P>k?P:1440;return v>=k&&v<O}),E=new Map;for(const y of M){const k=de(y.start),P=de(y.end),O=P>k?P:1440,ue=E.get(y.person);(!ue||O<ue.end)&&E.set(y.person,{start:k,end:O,label:`${y.start}–${y.end}`})}return Array.from(E.entries()).sort((y,k)=>y[1].end-k[1].end||y[0].localeCompare(k[0])).map(([y,k])=>({person:y,window:k.label,end:k.end}))},[r,v]),x=M=>{const E=Math.floor(M/60),y=M%60;return E>0&&y>0?`${E}h ${y}m`:E>0?`${E}h`:y>0?`${y}m`:"ending now"};return l.jsxs("section",{className:["rounded-2xl p-3 border",u?"prism-surface-2":"",e||i||a||u?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[l.jsxs("h2",{className:"text-base font-semibold",children:["On deck",l.jsxs("span",{className:["ml-2 text-sm",e?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",h.length,")"]})]}),l.jsxs("div",{className:["text-xs",e?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",et(v)]})]}),h.length===0?l.jsx("div",{className:["text-sm",e?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on right now."}):l.jsx("ul",{className:"space-y-1",children:h.map(M=>{const E=f?217:d.get(M.person)??0,y=e||i||a||u;let k=y?28:82,P=y?.22:.35,O=y?.1:.18,ue=y?40:62,Me=y?50:48;f&&(k=y?32:88,P=y?.2:.28,O=y?.1:.16,ue=y?52:66,Me=y?58:56),b&&(k=90,P=.35,O=.22,ue=70,Me=55),u&&(P=.12,O=.06,ue=55,Me=65),a&&(ue=70,Me=85),i&&(ue=30,Me=60);const ie=f?48:70,Oe={background:`linear-gradient(90deg, hsla(${E},${ie}%,${k}%,${P}) 0%, hsla(${E},${ie}%,${k}%,${O}) 100%)`,borderColor:`hsl(${E},${ie}%,${ue}%)`,borderLeftColor:`hsl(${E},${ie}%,${Me}%)`,borderLeftWidth:6,borderStyle:"solid"},He=Math.max(0,M.end-v);return l.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:Oe,children:[l.jsx("span",{className:"font-medium",children:M.person}),l.jsxs("span",{className:e||i||a||u?"text-neutral-300":"text-neutral-700",children:[M.window,l.jsx("span",{className:e||i||a||u?"text-neutral-400":"text-neutral-500","aria-hidden":"true",children:" • "}),l.jsxs("span",{className:e||i||a||u?"text-neutral-400":"text-neutral-500",children:[x(He)," left"]})]})]},M.person)})})]})}function lp({dark:e,tz:t,dayKey:n,shifts:r,pto:s,windowMin:o=120}){const i=(()=>{try{const E=document.querySelector("[data-theme]");return(E==null?void 0:E.getAttribute("data-theme"))||"system"}catch{return"system"}})(),a=i==="night",u=i==="noir",f=i==="prism",b=i==="subtle"||i==="spring"||i==="summer"||i==="autumn"||i==="winter",[g,p]=R.useState(Date.now());R.useEffect(()=>{let E,y;const k=()=>p(Date.now()),P=()=>{y&&clearInterval(y),E&&clearTimeout(E);const Me=6e4-Date.now()%6e4;E=window.setTimeout(()=>{k(),y=window.setInterval(k,6e4)},Me)},O=()=>{document.visibilityState==="visible"&&(k(),P())};return k(),P(),document.addEventListener("visibilitychange",O),()=>{y&&clearInterval(y),E&&clearTimeout(E),document.removeEventListener("visibilitychange",O)}},[]);const S=Pn(t.id),v=S.minutes,w=v+o,z=S.ymd,m=R.useMemo(()=>{const E=new Set;for(const y of s||[])y.startDate<=z&&z<=y.endDate&&E.add(y.person);return E},[s,z]),d=R.useMemo(()=>{const E=new Map;return r.forEach(y=>{const k=E.get(y.person),P=de(y.start);(k==null||P<k)&&E.set(y.person,P)}),Array.from(E.entries()).sort((y,k)=>y[1]-k[1]||y[0].localeCompare(k[0])).map(([y])=>y)},[r]),h=R.useMemo(()=>{const E=new Map,y=Math.max(1,d.length);return d.forEach((k,P)=>{const O=Math.round(P/y*360);E.set(k,O)}),E},[d]),x=R.useMemo(()=>{const E=r.filter(k=>{if(m.has(k.person))return!1;const P=de(k.start);return P>v&&P<=w}),y=new Map;for(const k of E){const P=de(k.start),O=y.get(k.person);(!O||P<O.start)&&y.set(k.person,{start:P,label:k.start})}return Array.from(y.entries()).sort((k,P)=>k[1].start-P[1].start||k[0].localeCompare(P[0])).map(([k,P])=>({person:k,at:P.label,start:P.start}))},[r,v,w]),M=E=>{const y=Math.max(0,E),k=Math.floor(y/60),P=y%60;return k>0&&P>0?`${k}h ${P}m`:k>0?`${k}h`:P>0?`${P}m`:"now"};return l.jsxs("section",{className:["rounded-2xl p-3 border",f?"prism-surface-3":"",e||a||u||f?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300 shadow-sm"].join(" "),children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[l.jsxs("h2",{className:"text-base font-semibold",children:["Up next",l.jsxs("span",{className:["ml-2 text-sm",e?"text-neutral-400":"text-neutral-500"].join(" "),children:["(",x.length,")"]})]}),l.jsxs("div",{className:["text-xs",e?"text-neutral-400":"text-neutral-500"].join(" "),children:["within 2 hours of ",et(v)]})]}),x.length===0?l.jsx("div",{className:["text-sm",e?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming starts in this window."}):l.jsx("ul",{className:"space-y-1",children:x.map(E=>{const y=h.get(E.person)??0,k=e||a||u||f;let P=k?28:82,O=k?.22:.35,ue=k?.1:.18,Me=k?40:62,ie=k?50:48;b&&(P=90,O=.35,ue=.22,Me=70,ie=55),f&&(O=.12,ue=.06,Me=55,ie=65),u&&(Me=70,ie=85),a&&(Me=30,ie=60);const Oe={background:`linear-gradient(90deg, hsla(${y},70%,${P}%,${O}) 0%, hsla(${y},70%,${P}%,${ue}) 100%)`,borderColor:`hsl(${y},70%,${Me}%)`,borderLeftColor:`hsl(${y},70%,${ie}%)`,borderLeftWidth:6,borderStyle:"solid"},He=Math.max(0,E.start-v);return l.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md border px-2 py-1",style:Oe,children:[l.jsx("span",{className:"font-medium",children:E.person}),l.jsxs("span",{className:e||a||u||f?"text-neutral-300":"text-neutral-700",children:[E.at," ",l.jsxs("span",{className:e||a||u||f?"text-neutral-400":"text-neutral-500",children:["• in ",M(He)]})]})]},E.person)})})]})}function op({dark:e,tz:t,dayKey:n,shifts:r,tasks:s}){const[o,i]=R.useState(Date.now());R.useEffect(()=>{let v,w;const z=()=>i(Date.now()),m=()=>{w&&clearInterval(w),v&&clearTimeout(v);const x=6e4-Date.now()%6e4;v=window.setTimeout(()=>{z(),w=window.setInterval(z,6e4)},x)},d=()=>{document.visibilityState==="visible"&&(z(),m())};return z(),m(),document.addEventListener("visibilitychange",d),()=>{w&&clearInterval(w),v&&clearTimeout(v),document.removeEventListener("visibilitychange",d)}},[]);const u=Pn(t.id).minutes,f=R.useMemo(()=>{const v=new Map;return s.forEach(w=>v.set(w.id,w)),v},[s]),b=R.useMemo(()=>{const v=[];for(const w of r){if(!Array.isArray(w.segments)||w.segments.length===0)continue;const z=de(w.start);for(const m of w.segments){const d=z+m.startOffsetMin,h=d+m.durationMin;v.push({taskId:m.taskId,person:w.person,start:d,end:h})}}return v.sort((w,z)=>w.start-z.start||w.end-z.end||w.person.localeCompare(z.person))},[r]),g=R.useMemo(()=>{const v=new Map;for(const w of b){const z=v.get(w.taskId)||{onNow:[],nextOne:null};w.start<=u&&u<w.end?z.onNow.push(w):w.start>u&&(!z.nextOne||w.start<z.nextOne.start)&&(z.nextOne=w),v.set(w.taskId,z)}for(const[w,z]of v)z.onNow.sort((m,d)=>m.end-d.end||m.person.localeCompare(d.person)),v.set(w,z);return v},[b,u]),p=Array.from(g.entries()).filter(([v,w])=>(w.onNow.length>0||w.nextOne)&&f.has(v));p.sort((v,w)=>(v[1].onNow.length?0:1)-(w[1].onNow.length?0:1)||v[0].localeCompare(w[0]));const S=v=>{const w=Math.max(0,v),z=Math.floor(w/60),m=w%60;return z>0&&m>0?`${z}h ${m}m`:z>0?`${z}h`:m>0?`${m}m`:"now"};return l.jsxs("section",{className:["rounded-2xl p-3",e?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[l.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[l.jsx("h2",{className:"text-base font-semibold",children:"Posture schedule today"}),l.jsxs("div",{className:["text-xs",e?"text-neutral-400":"text-neutral-500"].join(" "),children:["as of ",et(u)]})]}),p.length===0?l.jsx("div",{className:["text-sm",e?"text-neutral-400":"text-neutral-600"].join(" "),children:"No posture coverage configured today."}):l.jsx("div",{className:"space-y-3",children:p.map(([v,w])=>{const z=f.get(v),m=z.color||"#2563eb";return l.jsxs("div",{className:"rounded-lg p-2",style:{background:e?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.02)"},children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:m},"aria-hidden":!0}),l.jsx("div",{className:"font-medium",children:z.name})]}),l.jsxs("div",{className:["text-xs",e?"text-neutral-400":"text-neutral-500"].join(" "),children:[w.onNow.length>0&&l.jsxs("span",{children:["on now ",`(${w.onNow.length})`]}),w.onNow.length>0&&w.nextOne&&l.jsx("span",{className:"mx-1",children:"•"}),w.nextOne&&l.jsxs("span",{children:["next at ",et(w.nextOne.start)]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[l.jsx("div",{children:w.onNow.length===0?l.jsx("div",{className:["text-sm",e?"text-neutral-400":"text-neutral-600"].join(" "),children:"No one on now."}):l.jsx("ul",{className:"space-y-1",children:w.onNow.map(d=>{const h=Math.max(0,d.end-u),x={borderLeft:`6px solid ${m}`};return l.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md px-2 py-1",style:x,children:[l.jsx("span",{className:"font-medium",children:d.person}),l.jsxs("span",{className:e?"text-neutral-300":"text-neutral-700",children:[et(d.start),"–",et(d.end)," ",l.jsxs("span",{className:e?"text-neutral-400":"text-neutral-500",children:["• ",S(h)," left"]})]})]},`${v}-now-${d.person}-${d.start}`)})})}),l.jsx("div",{children:w.nextOne?(()=>{const d=w.nextOne,h=Math.max(0,d.start-u),x={borderLeft:`6px solid ${m}`};return l.jsx("ul",{className:"space-y-1",children:l.jsxs("li",{className:"flex items-center justify-between text-sm rounded-md px-2 py-1",style:x,children:[l.jsx("span",{className:"font-medium",children:d.person}),l.jsxs("span",{className:e?"text-neutral-300":"text-neutral-700",children:[et(d.start)," ",l.jsxs("span",{className:e?"text-neutral-400":"text-neutral-500",children:["• in ",S(h)]})]})]},`${v}-up-${d.person}-${d.start}`)})})():l.jsx("div",{className:["text-sm",e?"text-neutral-400":"text-neutral-600"].join(" "),children:"No upcoming today."})})]})]},v)})})]})}function ip({dark:e,tz:t,weekStart:n,agent:r,shifts:s,pto:o,tasks:i,calendarSegs:a,agents:u}){const b=e?"text-neutral-400":"text-neutral-500",p=(()=>{const[V,L]=R.useState(typeof window<"u"?window.innerWidth:1280);return R.useEffect(()=>{const U=()=>L(window.innerWidth);return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),V})(),S=p>=1024?"lg":p>=768?"md":p>=640?"sm":"xs",v=S==="lg"?1:S==="md"?.9:S==="sm"?.82:.75,w=S==="lg"?80:S==="md"?76:S==="sm"?70:66,z=Math.round(60*v),m=Math.max(9,Math.round(11*v)),d=Math.max(11,Math.round(12*v)),h=12,x=Math.max(9,Math.round(10*v)),M=Math.max(20,Math.round(24*v)),E=S==="lg"?2:S==="md"?3:4,y=2*60,k=V=>(V-y+1440)%1440/1440*100,P=Math.max(1,Math.round(24/E)),O=`${w}px`,ue=Math.round(30*v),Me=Math.max(12,Math.round(16*v)),ie=rr(n),Oe=R.useMemo(()=>Array.from({length:7},(V,L)=>{const U=vs(ie,L);return{key:Be[L],date:U,ymd:Mn(U)}}),[n]),He=R.useMemo(()=>Hr(s,t.offset).filter(V=>V.person===r),[s,t.offset,r]),pe=R.useMemo(()=>{const V=new Map;for(const L of Be)V.set(L,[]);for(const L of He)V.get(L.day).push(L);for(const[L,U]of V)U.sort((_,Se)=>de(_.start)-de(Se.start));return V},[He]),ae=R.useMemo(()=>{let V=0;for(const L of r)V=(V+L.charCodeAt(0))%360;return V},[r]),[T,D]=R.useState(Date.now());R.useEffect(()=>{const V=setInterval(()=>D(Date.now()),3e4);return()=>clearInterval(V)},[]);const B=Pn(t.id),ee=k(B.minutes),H=B.weekdayShort,we=`hsla(${ae},75%,70%,0.95)`,se=`hsla(${ae},60%,28%,0.95)`,he=`hsl(${ae},70%,55%)`,ne=R.useMemo(()=>{const V=new Map;for(const L of i||[])V.set(L.id,L);return V},[i]);return l.jsxs("div",{className:"overflow-x-auto no-scrollbar w-full no-select",children:[l.jsxs("div",{className:"grid sticky top-0 z-30",style:{gridTemplateColumns:`${O} 1fr`},children:[l.jsx("div",{className:e?"bg-neutral-900":"bg-white"}),l.jsx("div",{className:["relative",e?"bg-neutral-900":"bg-white"].join(" "),style:{height:z},children:l.jsx("div",{className:"absolute left-0 right-0",style:{top:ue,height:Me},children:Array.from({length:P},(V,L)=>L).map(V=>{const L=(2+V*E)%24;return l.jsx("div",{className:"absolute text-left pl-1 leading-none pointer-events-none",style:{left:`calc(${V} * (100% / ${P}))`,width:`calc(100% / ${P})`},children:l.jsxs("div",{className:["hour-label font-normal opacity-70",b].join(" "),style:{fontSize:m},children:[L===0?12:L>12?L-12:L,L<12?"am":"pm"]})},V)})})})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"absolute inset-y-0 right-0 z-20 pointer-events-none",style:{left:O},children:[l.jsx("div",{className:["absolute -translate-x-1/2 inset-y-0 w-px",e?"bg-red-400":"bg-red-500"].join(" "),style:{left:`${ee}%`}}),l.jsx("div",{className:["absolute -translate-x-1/2 -top-5 px-1.5 py-0.5 rounded-md shadow-sm",e?"bg-red-400 text-black":"bg-red-500 text-white"].join(" "),style:{left:`${ee}%`,fontSize:x},children:et(B.minutes)})]}),Oe.map(V=>{const L=(pe.get(V.key)||[]).map(_=>{const Se=(a||[]).filter(ge=>_.agentId&&ge.agentId===_.agentId||ge.person===r).flatMap(ge=>!ge.endDay||ge.endDay===ge.day?[ge]:[{...ge,day:ge.day,start:ge.start,end:"24:00"},{...ge,day:ge.endDay,start:"00:00",end:ge.end}]).filter(ge=>ge.day===V.key).map(ge=>({taskId:ge.taskId,start:ge.start,end:ge.end})),ke=_o(_,Se);return ke&&ke.length>0?{..._,segments:ke}:_}),U=V.key===H;return l.jsxs("div",{className:"grid",style:{gridTemplateColumns:`${O} 1fr`},children:[l.jsx("div",{className:["py-1.5 pr-2 font-medium sticky left-0 z-20 truncate",e?"bg-neutral-900":"bg-white"].join(" "),style:{fontSize:d},children:l.jsx("span",{className:U?e?"text-red-400":"text-red-600":void 0,children:V.key})}),l.jsx("div",{className:"relative",style:{backgroundImage:`linear-gradient(to right, ${e?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 0, ${e?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.03)"} 50%, ${e?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 50%, ${e?"rgba(255,255,255,0.07)":"rgba(0,0,0,0.06)"} 100%)`,backgroundSize:`calc(100%/${P}) 100%`,backgroundRepeat:"repeat-x",backgroundPosition:"0 0"},children:L.map(_=>{const Se=Us(u||[],_.agentId,_.person),ke=de(_.start),ge=de(_.end),Ie=ge>ke?ge:1440,dt=(ke-y+1440)%1440,I=(Ie-y+1440)%1440,$=[];I>dt?$.push({leftPct:dt/1440*100,widthPct:Math.max(.5,(I-dt)/1440*100)}):($.push({leftPct:dt/1440*100,widthPct:Math.max(.5,(1440-dt)/1440*100)}),I>0&&$.push({leftPct:0,widthPct:Math.max(.5,I/1440*100)}));const Z=Ie-ke,le=e?se:we,oe=e?he:`hsl(${ae},65%,50%)`,ut=(Array.isArray(_.segments)?_.segments:[]).slice().sort((fe,je)=>fe.startOffsetMin-je.startOffsetMin),Xe=[];let Ue=0;for(const fe of ut){const je=Math.max(0,Math.min(Z,fe.startOffsetMin)),ft=Math.max(0,Math.min(Z,fe.startOffsetMin+fe.durationMin));if(je>Ue){const Ye=ke+Ue,Wt=ke+je;Xe.push({kind:"base",startOff:Ue,len:je-Ue,color:le,title:`${_.person} • ${et(Ye)}–${et(Wt)}`,key:`gap-${Ue}`})}if(ft>je){const Ye=ne.get(fe.taskId),Wt=ke+je,Ht=ke+ft,te=(Ye==null?void 0:Ye.color)||oe,G=`color-mix(in oklab, ${te} 42%, ${e?"#0a0a0a":"#ffffff"} 58%)`,ye=`color-mix(in oklab, ${te} 70%, ${e?"#ffffff":"#000000"} 30%)`;Xe.push({kind:"seg",startOff:je,len:ft-je,color:G,border:ye,title:`${(Ye==null?void 0:Ye.name)||"Task"} • ${et(Wt)}–${et(Ht)}`,key:`seg-${fe.id}`})}Ue=Math.max(Ue,ft)}if(Ue<Z){const fe=ke+Ue,je=Ie;Xe.push({kind:"base",startOff:Ue,len:Z-Ue,color:le,title:`${_.person} • ${et(fe)}–${et(je)}`,key:`gap-${Ue}`})}const Ee=Xe.filter(fe=>fe.kind==="seg").map(fe=>fe.title.replace(/^.* • /,"")),De=`${Se} • ${_.start}-${_.end}`+(Ee.length?`

Tasks:
${Ee.join(`
`)}`:"");return l.jsxs("div",{className:"relative",title:De,children:[Xe.map(fe=>{const je=ke+fe.startOff,ft=je+fe.len,Ye=(je-y+1440)%1440,Wt=(ft-y+1440)%1440,Ht=[];if(Wt>Ye)Ht.push({leftPct:Ye/1440*100,widthPct:fe.len/1440*100,key:`one-${fe.key}`});else{const G=1440-Ye,ye=fe.len-G;Ht.push({leftPct:Ye/1440*100,widthPct:G/1440*100,key:`wrapA-${fe.key}`}),ye>0&&Ht.push({leftPct:0,widthPct:ye/1440*100,key:`wrapB-${fe.key}`})}const te=fe.kind==="seg"&&fe.border?fe.border:oe;return Ht.map(G=>l.jsx("div",{className:"absolute rounded",style:{left:`${G.leftPct}%`,width:`${G.widthPct}%`,height:M,backgroundColor:fe.color,boxShadow:`inset 0 0 0 1px ${te}`},title:fe.title},G.key))}),$.length>0&&l.jsxs("div",{className:"absolute flex items-center justify-center px-2 truncate pointer-events-none",style:{left:`${$[0].leftPct}%`,width:`${$[0].widthPct}%`,height:M,fontSize:h},children:[_.start,"-",_.end]})]},`${_.person}-${_.day}-${_.start}-${_.end}`)})})]},V.key)})]})]})}const ap=["system","light","dark","night","noir","prism","subtle","spring","summer","autumn","winter"];function up({dark:e}){const t=()=>{try{const a=localStorage.getItem("schedule_theme")||"system";return ap.includes(a)?a:"system"}catch{return"system"}},[n,r]=C.useState(()=>t());R.useEffect(()=>{const a=u=>{var g;const b=((g=u.detail)==null?void 0:g.value)||"system";r(b)};return window.addEventListener("schedule:set-theme",a),()=>window.removeEventListener("schedule:set-theme",a)},[]);const s=a=>{try{localStorage.setItem("schedule_theme",a)}catch{}r(a),window.dispatchEvent(new CustomEvent("schedule:set-theme",{detail:{value:a}}))},o=a=>{const u={borderRadius:6,height:16};switch(a){case"system":return{...u,background:"linear-gradient(90deg, #e5e7eb, #93c5fd 70%)"};case"light":return{...u,background:"linear-gradient(90deg, #ffffff, #e5e7eb)"};case"dark":return{...u,background:"linear-gradient(90deg, #0f172a, #1f2937)"};case"night":return{...u,background:"#000"};case"noir":return{...u,background:"linear-gradient(90deg, #000, #111)"};case"prism":return{...u,background:"linear-gradient(270deg, #ff0080, #ff8c00, #ffd300, #21d19f, #00c3ff, #7f00ff, #ff0080)",backgroundSize:"600% 100%",animation:"unicornShift 8s linear infinite"};case"subtle":return{...u,background:"linear-gradient(90deg, #f3f4f6, hsla(217,48%,60%,0.26))"};case"spring":return{...u,background:"linear-gradient(90deg, #ecfdf5, #34d399)"};case"summer":return{...u,background:"linear-gradient(90deg, #ecfeff, #06b6d4)"};case"autumn":return{...u,background:"linear-gradient(90deg, #fffbeb, #f59e0b)"};case"winter":return{...u,background:"linear-gradient(90deg, #e0e7ff, #6366f1)"}}},i=[{id:"system",label:"System"},{id:"light",label:"Light"},{id:"dark",label:"Dark"},{id:"subtle",label:"Subtle"},{id:"spring",label:"Spring"},{id:"summer",label:"Summer"},{id:"autumn",label:"Autumn"},{id:"winter",label:"Winter"},{id:"night",label:"Night"},{id:"noir",label:"Noir"},{id:"prism",label:"Prism"}];return l.jsxs("div",{className:"py-1",children:[l.jsx("div",{className:"text-sm mb-1",children:"Theme"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:i.map(a=>l.jsxs("button",{onClick:()=>s(a.id),className:["flex flex-col items-center justify-start gap-1 border rounded-md px-2 py-2 text-xs",n===a.id?e?"border-neutral-400":"border-blue-500":e?"border-neutral-700":"border-neutral-300",e?"bg-neutral-900 text-neutral-100":"bg-white text-neutral-900"].join(" "),"aria-pressed":n===a.id,title:a.label,children:[l.jsx("span",{className:"inline-block w-full",style:o(a.id)}),l.jsx("span",{className:"leading-tight text-[11px]",children:a.label})]},a.id))})]})}function cp({dark:e,weekStart:t,dayIndex:n,setDayIndex:r,shifts:s,pto:o,tasks:i,calendarSegs:a,tz:u,canEdit:f,editMode:b,onRemoveShift:g,agents:p,slimline:S}){const v=rr(t),w=vs(v,n),z=Be[n],m=R.useMemo(()=>{const D=new Set;for(const B of p||[]){const ee=[B.firstName||"",B.lastName||""].filter(Boolean).join(" ").trim();ee&&B.hidden&&D.add(ee)}return D},[p]),d=R.useMemo(()=>Lo(s,z,u.offset).sort((H,we)=>de(H.start)-de(we.start)).filter(H=>!m.has(H.person)).map(H=>{const we=a.filter(he=>he.day===z&&(H.agentId&&he.agentId===H.agentId||he.person===H.person)).map(he=>({taskId:he.taskId,start:he.start,end:he.end})),se=_o(H,we);return se&&se.length>0?{...H,segments:se}:H}),[s,z,u.offset,a,m]),h=R.useMemo(()=>Array.from(new Set(d.map(D=>D.person))),[d]),x=R.useMemo(()=>Array.from(new Set(s.map(B=>B.person))).sort().filter(B=>!m.has(B)),[s,m]),[M,E]=R.useState(""),[y,k]=R.useState(!1),[P,O]=R.useState(!1),ue=C.useRef(null),Me=C.useRef(null);R.useEffect(()=>{if(!(y||P))return;const D=ee=>{const H=ee.target;Me.current&&!Me.current.contains(H)&&k(!1),ue.current&&!ue.current.contains(H)&&O(!1)},B=ee=>{ee.key==="Escape"&&k(!1)};return document.addEventListener("mousedown",D),document.addEventListener("keydown",B),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("keydown",B)}},[y,P]),R.useEffect(()=>{k(!1),O(!1)},[M,n]);const Oe=Pn(u.id).weekdayShort,He=R.useMemo(()=>Lo(s,Oe,u.offset).sort((ee,H)=>de(ee.start)-de(H.start)).filter(ee=>!m.has(ee.person)).map(ee=>{const H=a.filter(se=>se.day===Oe&&(ee.agentId&&se.agentId===ee.agentId||se.person===ee.person)).map(se=>({taskId:se.taskId,start:se.start,end:se.end})),we=_o(ee,H);return we&&we.length>0?{...ee,segments:we}:ee}),[s,Oe,u.offset,a,m]),[pe,ae]=R.useState(()=>{const D=Pn(u.id),B=D.h%12||12,ee=String(B),H=String(D.m).padStart(2,"0"),we=D.h>=12?"PM":"AM";return{text:`${ee}:${H} ${we}`}});R.useEffect(()=>{let D,B;const ee=()=>{const se=Pn(u.id),he=se.h%12||12,ne=String(he),V=String(se.m).padStart(2,"0"),L=se.h>=12?"PM":"AM";ae({text:`${ne}:${V} ${L}`})},H=()=>{B&&clearInterval(B),D&&clearTimeout(D);const he=6e4-Date.now()%6e4;D=window.setTimeout(()=>{ee(),B=window.setInterval(ee,6e4)},he)},we=()=>{document.visibilityState==="visible"&&(ee(),H())};return ee(),H(),document.addEventListener("visibilitychange",we),()=>{B&&clearInterval(B),D&&clearTimeout(D),document.removeEventListener("visibilitychange",we)}},[u.id]);function T(D){return D.getDate()}return l.jsxs("section",{className:["rounded-2xl p-2 prism-surface-1",e?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[l.jsxs("div",{className:"flex flex-wrap items-center justify-between mb-2 gap-2",children:[l.jsxs("div",{className:"flex items-end gap-3 pl-2 order-1",children:[l.jsxs("div",{className:"text-neutral-600",style:{fontSize:"1.5rem",lineHeight:1.1,whiteSpace:"nowrap"},children:[w.toLocaleDateString(void 0,{month:"short"})," ",T(w)]}),l.jsx("div",{className:"flex flex-col items-start leading-tight text-left",children:l.jsx("div",{className:["uppercase tracking-wide",e?"text-neutral-400":"text-neutral-500"].join(" "),style:{fontSize:"0.72rem",lineHeight:1},children:xl(u.id)})})]}),l.jsx("div",{className:"order-2 ml-auto mr-2",children:l.jsx("div",{className:["font-bold tabular-nums text-right",e?"text-neutral-300":"text-neutral-700"].join(" "),style:{fontSize:"1.6rem",lineHeight:1},children:pe.text})}),M&&l.jsxs("div",{className:"pl-2 font-semibold text-xl sm:text-2xl order-3 sm:order-2",children:[M," ",l.jsxs("span",{className:"opacity-70",children:["Week of ",lo(v)]})]}),l.jsxs("div",{className:"flex items-center gap-2 order-2 sm:order-3 w-full sm:w-auto justify-between sm:justify-end",children:[l.jsxs("div",{className:"relative",ref:ue,children:[l.jsx("button",{"aria-label":"Choose agent",title:M?`Agent: ${M}`:"Choose agent",onClick:()=>O(D=>!D),className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),P&&l.jsxs("div",{className:["absolute right-0 mt-2 w-56 sm:w-64 max-w-[calc(100vw-2rem)] sm:max-w-none rounded-xl p-2 border shadow-lg z-50 max-h-[18rem] overflow-auto",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-xs font-medium px-2 pb-1",children:"Agents"}),l.jsx("button",{onClick:()=>{E(""),O(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",e?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:"All"}),x.map(D=>l.jsx("button",{onClick:()=>{E(D),O(!1)},className:["w-full text-left px-2 py-1 rounded text-sm",D===M?e?"bg-neutral-800":"bg-neutral-100":e?"hover:bg-neutral-800":"hover:bg-neutral-100"].join(" "),children:D},D))]})]}),!M&&l.jsx("div",{className:"overflow-x-auto no-scrollbar max-w-full",children:l.jsx("div",{className:"inline-flex gap-1.5 sm:gap-2 whitespace-nowrap pr-1",children:Be.map((D,B)=>{const ee=D===Oe,H="px-2.5 sm:px-3 py-1 sm:py-1.5 rounded-xl text-xs sm:text-sm border",we=B===n?e?"bg-neutral-800 border-neutral-600 text-white":"bg-blue-600 border-blue-600 text-white":e?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700 hover:bg-neutral-100",se=ee?e?"text-red-400":"text-red-600":"";return l.jsx("button",{onClick:()=>r(B),className:[H,we,se].filter(Boolean).join(" "),children:D},D)})})}),!M&&l.jsxs("div",{className:"relative",ref:Me,children:[l.jsx("button",{"aria-label":"View options",title:"View options",onClick:()=>k(D=>!D),className:["inline-flex items-center justify-center h-8 sm:h-9 w-9 rounded-lg border",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0A1.65 1.65 0 0 0 20.91 11H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1Z"})]})}),y&&l.jsxs("div",{className:["absolute right-0 mt-2 w-64 sm:w-72 max-w-[calc(100vw-2rem)] sm:max-w-none rounded-xl p-3 border shadow-lg z-50",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold mb-2",children:"Schedule settings"}),l.jsxs("div",{className:"flex items-center justify-between gap-3 text-sm py-1",children:[l.jsx("span",{className:"flex-1",children:"Hide off-duty agents"}),l.jsx("button",{role:"switch","aria-checked":!!S,onClick:()=>{const D=!S;try{localStorage.setItem("schedule_slimline",D?"1":"0")}catch{}window.dispatchEvent(new CustomEvent("schedule:set-slimline",{detail:{value:D}}))},className:["w-12 h-6 rounded-full border relative transition",e?"bg-neutral-800 border-neutral-700":"bg-white border-neutral-300"].join(" "),"aria-label":"Toggle slimline",children:l.jsx("span",{className:["absolute top-0.5 left-0.5 w-5 h-5 rounded-full shadow-sm flex items-center justify-center transition-transform",S?"translate-x-6":"translate-x-0",e?"bg-neutral-700 text-neutral-200":"bg-neutral-100 text-neutral-700"].join(" ")})})]}),l.jsx(up,{dark:e})]})]})]})]}),!M&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pl-1",children:(()=>{const D=lo(w)===lo(rr(Pn(u.id).ymd)),B=!S||!D?d:(()=>{const H=Pn(u.id),we=Be.indexOf(z)*1440+H.minutes,se=H.ymd;return d.filter(he=>{if(o.some(ge=>ge.person===he.person&&ge.startDate<=se&&se<=ge.endDate))return!1;const V=Be.indexOf(he.day),L=Be.indexOf(he.endDay||he.day),U=(V<0?0:V)*1440+de(he.start);let _=(L<0?V:L)*1440+(he.end==="24:00"?1440:de(he.end));_<=U&&(_+=1440);const Se=we>=U&&we<_,ke=U>we&&U<=we+120;return Se||ke?we<=_+30:!1})})(),ee=Array.from(new Set(B.map(H=>H.person)));return l.jsx(rp,{date:w,dayKey:z,people:!S||!D?h:ee,shifts:B,pto:S&&D?[]:o,dark:e,tz:u,canEdit:f,editMode:b,showHeaderTitle:!1,tasks:i,agents:p,onRemove:H=>{if(!f){alert("Enter the password in Manage to enable editing.");return}g(H)}})})()}),l.jsx("div",{className:"pl-1 mt-2"})]}),M?l.jsx("div",{className:"mt-4",children:l.jsx(ip,{dark:e,tz:u,weekStart:t,agent:M,shifts:s,pto:o,tasks:i,calendarSegs:a,agents:p||[]})}):l.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsx("div",{children:l.jsx(sp,{dark:e,tz:u,dayKey:Oe,shifts:He,pto:o})}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(lp,{dark:e,tz:u,dayKey:Oe,shifts:He,pto:o}),l.jsx(op,{dark:e,tz:u,dayKey:Oe,shifts:He,tasks:i})]})]})]})}function o0({dark:e,tz:t,weekStart:n,agent:r,shifts:s,pto:o,tasks:i,calendarSegs:a,agents:u,titlePrefix:f,bandHeight:b,dayLabelFontPx:g,onDragAll:p,onDragShift:S,draggable:v=!0,showDayLabels:w=!0,showWeekLabel:z=!0,framed:m=!0,showNowLine:d=!0,showNowLabel:h=!0,showShiftLabels:x=!0,alwaysShowTimeTags:M=!1,forceOuterTimeTags:E=!1,highlightIds:y,showEdgeTimeTagsForHighlights:k,selectedIds:P,onToggleSelect:O,avoidLabelOverlap:ue}){const Me=(()=>{try{const F=document.querySelector("[data-theme]");return(F==null?void 0:F.getAttribute("data-theme"))||"system"}catch{return"system"}})(),ie=Me==="night",Oe=Me==="noir",He=Me==="prism",pe=Me==="subtle",ae=Me==="spring",T=Me==="summer",D=Me==="autumn",B=Me==="winter";function ee(F){let re=0;for(let A=0;A<F.length;A++)re=(re<<5)-re+F.charCodeAt(A),re|=0;return(re%360+360)%360}const H=7*24*60,we=rr(n),se=F=>Be.indexOf(F),he=e?"text-neutral-400":"text-neutral-500",ne=R.useMemo(()=>Hr(s,t.offset).filter(F=>F.person===r),[s,t.offset,r]),V=R.useMemo(()=>{const F=new Map;for(const A of ne){const _e=se(A.day);if(_e<0)continue;const Ze=_e*1440+de(A.start);let Ae;if(A.end==="24:00")Ae=(_e+1)*1440;else{const Ge=A.endDay||A.day;let ct=se(Ge);ct<0&&(ct=_e),Ae=ct*1440+de(A.end),Ae<=Ze&&(ct<_e?Ae+=7*1440:Ae+=1440)}const Ve=Math.max(0,Math.min(H,Ze)),Qe=Math.max(0,Ae);if(Qe<=Ve)continue;const bt=`${A.day} ${A.start} – ${A.endDay||A.day} ${A.end}`,tt=de(A.start),it=A.end==="24:00"?0:de(A.end);let mn;try{const Ge=Math.max(0,Ae-Ze),ct=(a||[]).filter(ze=>A.agentId&&ze.agentId===A.agentId||ze.person===r).flatMap(ze=>!ze.endDay||ze.endDay===ze.day?[ze]:[{...ze,day:ze.day,start:ze.start,end:"24:00"},{...ze,day:ze.endDay,start:"00:00",end:ze.end}]).filter(ze=>ze.day===A.day).map(ze=>({taskId:ze.taskId,start:ze.start,end:ze.end})),ot=_o({...A},ct)||[];ot&&ot.length&&(mn=ot.map(ze=>{const pt=Math.max(0,Math.min(Ge,ze.startOffsetMin)),Je=Math.max(0,Math.min(Ge,ze.startOffsetMin+ze.durationMin));return{taskId:ze.taskId,stOff:pt,enOff:Je}}).filter(ze=>ze.enOff>ze.stOff))}catch{}const Yt={id:A.id,startAbs:Ve,endAbs:Qe,title:bt,key:`${A.person}-${A.id}-${A.day}-${A.start}-${A.end}`,sub:mn,dayKey:A.day},We=F.get(A.id)||{id:A.id,key:`${A.person}-${A.id}`,segs:[],earliest:1/0,latest:-1/0,title:bt};We.segs.push(Yt),We.earliest=Math.min(We.earliest,Ve),We.latest=Math.max(We.latest,Qe),We.title=bt,A.end==="24:00"&&(We.startMin=tt),A.start==="00:00"&&(We.endMin=it),A.end!=="24:00"&&A.start!=="00:00"&&(We.startMin==null&&(We.startMin=tt),We.endMin==null&&(We.endMin=it)),F.set(A.id,We)}const re=[];for(const[,A]of F){A.segs.sort((Ae,Ve)=>Ae.startAbs-Ve.startAbs);let _e=A.startMin,Ze=A.endMin;_e==null&&A.segs.length>0&&(_e=(A.segs.reduce((Ve,Qe)=>Qe.startAbs>Ve.startAbs?Qe:Ve,A.segs[0]).startAbs%1440+1440)%1440),Ze==null&&A.segs.length>0&&(Ze=(A.segs.reduce((Ve,Qe)=>Qe.endAbs>Ve.endAbs?Qe:Ve,A.segs[0]).endAbs%1440+1440)%1440),re.push({id:A.id,key:A.key,segments:A.segs,earliest:A.earliest,latest:A.latest,title:A.title,startMin:_e,endMin:Ze})}return re.sort((A,_e)=>A.earliest-_e.earliest),re},[ne]),L=Pn(t.id),U=we,_=vs(we,7),Se=new Date(L.y,(L.mo||1)-1,L.d||1),ke=Se>=U&&Se<_,Ie=(ke?Be.indexOf(L.weekdayShort)*1440+L.minutes:0)/H*100,dt=typeof b=="number"?b:28,I=10,$=C.useRef(null),[Z,le]=C.useState(null),oe=30,[ut,Xe]=C.useState(0),[Ue,Ee]=C.useState(!1),[De,fe]=C.useState(null),je=C.useRef(!1);let ft=-1/0,Ye=-1/0;const Wt=48,Ht=4;C.useEffect(()=>{const F=()=>{if(!$.current)return;const re=$.current.getBoundingClientRect();Xe(re.width)};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]);const te=F=>{const re=Math.floor(F/60),A=F%60,_e=re<12,Ze=re%12||12,Ae=A===0?"":A===30?":30":`:${A.toString().padStart(2,"0")}`;return`${Ze}${Ae}${_e?"a":"p"}`},G=F=>{if(!v||!$.current)return;const re=$.current.getBoundingClientRect(),A=H/re.width,_e=-1e9,Ze=1e9;je.current=!1,le({mode:"all",startX:F.clientX,pxToMin:A,delta:0,minDelta:_e,maxDelta:Ze})},ye=(F,re)=>{if(!v||(re.stopPropagation(),!$.current))return;const A=$.current.getBoundingClientRect(),_e=H/A.width;if(!V.find(We=>We.id===F))return;let Ae;if(P){const We=P instanceof Set?new Set(P):new Set(P);We.add(F),Ae=We}else Ae=new Set([F]);const Ve=Ae||new Set([F]),Qe=V.filter(We=>!Ve.has(We.id)),bt=H;let tt=1/0,it=-1/0;for(const We of V){if(!Ve.has(We.id))continue;const Ge=We.earliest,ct=We.latest;let ot=1/0,ze=-1/0;for(const pt of Qe)for(const Je of[-1,0,1]){const mt=pt.earliest+Je*bt,xe=pt.latest+Je*bt,$e=mt-ct;$e>=0&&(ot=Math.min(ot,$e));const nt=xe-Ge;nt<=0&&(ze=Math.max(ze,nt))}tt=Math.min(tt,ot),it=Math.max(it,ze)}Number.isFinite(tt)||(tt=1e9),Number.isFinite(it)||(it=-1e9);const mn=it,Yt=tt;je.current=!1,le({mode:"single",id:F,selectedIds:Ae,startX:re.clientX,pxToMin:_e,delta:0,minDelta:mn,maxDelta:Yt})};return C.useEffect(()=>{if(!Z)return;const F=A=>{const _e=(A.clientX-Z.startX)*Z.pxToMin,Ze=Math.round(_e/oe)*oe,Ae=Math.max(Z.minDelta,Math.min(Z.maxDelta,Ze));Ae!==0&&(je.current=!0),le(Ve=>Ve&&{...Ve,delta:Ae})},re=()=>{Z.delta!==0&&(Z.mode==="all"?p==null||p(Z.delta):Z.mode==="single"&&Z.id&&(S==null||S(Z.id,Z.delta))),window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",re),le(null)};return window.addEventListener("mousemove",F),window.addEventListener("mouseup",re),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",re)}},[Z,p,S]),C.useEffect(()=>{const F=re=>{if(!v||re.key!=="ArrowLeft"&&re.key!=="ArrowRight")return;const A=De,_e=Ue&&!De;if(!A&&!_e)return;re.preventDefault(),re.stopPropagation();const Ze=re.key==="ArrowLeft"?-15:15;A?S==null||S(A,Ze):_e&&(p==null||p(Ze))};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[v,Ue,De,p,S]),l.jsxs("div",{className:"w-full",children:[w&&l.jsx("div",{className:"relative h-6",children:Be.map((F,re)=>{const A=re/7*100,_e=1/7*100;return l.jsx("div",{className:["absolute text-center",he].join(" "),style:{left:`${A}%`,width:`${_e}%`,fontSize:typeof g=="number"?g:11},children:F},F)})}),l.jsx("div",{className:["relative",m?"rounded-md overflow-hidden":"",m?e?"bg-neutral-950":"bg-neutral-50":""].filter(Boolean).join(" "),style:{height:dt,overflow:"visible",marginBottom:0},children:l.jsxs("div",{ref:$,className:"absolute inset-y-0",style:{left:0,right:0,paddingLeft:m?6:0,paddingRight:m?6:0},onMouseDown:v?G:void 0,onMouseEnter:()=>Ee(!0),onMouseLeave:()=>{Ee(!1),fe(null)},children:[Array.from({length:7},(F,re)=>{const A=re/7*100,_e=12/24*(100/7);return l.jsx("div",{className:"absolute inset-y-0",style:{left:`${A}%`,width:`${_e}%`,background:e?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.03)"},"aria-hidden":!0},`am-${re}`)}),Array.from({length:8},(F,re)=>{const A=re/7*100;return l.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${A}%`,width:1,background:e?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"}},`dayline-${re}`)}),Array.from({length:7*4+1},(F,re)=>re).map(F=>{const re=F/28*100;return l.jsx("div",{className:"absolute inset-y-0 opacity-30",style:{left:`${re}%`,width:1,background:e?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)"}},`h${F}`)}),V.map(F=>{const re=Z&&Z.mode==="all",A=Z&&Z.mode==="single"&&Z.id===F.id,_e=Z&&Z.mode==="single"&&Z.selectedIds&&Z.selectedIds.has(F.id),Ze=re||A||_e?Z.delta:0,Ae=function(){return ie||Oe?"#000":pe?e?"hsla(217, 48%, 60%, 0.22)":"hsla(217, 48%, 60%, 0.18)":ae?e?"hsla(150, 60%, 40%, 0.45)":"hsla(150, 60%, 45%, 0.40)":T?e?"hsla(200, 80%, 50%, 0.50)":"hsla(200, 85%, 55%, 0.44)":D?e?"hsla(28, 85%, 50%, 0.48)":"hsla(28, 85%, 52%, 0.42)":B?e?"hsla(220, 50%, 60%, 0.46)":"hsla(220, 55%, 62%, 0.40)":e?"rgba(59,130,246,0.64)":"rgba(59,130,246,0.625)"}(),Ve=tt=>(tt%1440+1440)%1440,Qe=Ve(F.startMin+Ze),bt=Ve(F.endMin+Ze);return F.segments.flatMap(tt=>{const it=tt.startAbs+Ze,mn=tt.endAbs+Ze,Yt=Math.max(0,mn-it),We=Je=>(Je%H+H)%H,Ge=We(it),ct=We(mn),ot=(Je,mt,xe,$e,nt,Pe)=>{const gt=Je/H*100,Nt=(mt-Je)/H*100,j=(mt-Je)/H*ut;`${te(Qe)}${te(bt)}`;const K=De===F.id,q=!!y&&(y instanceof Set?y.has(F.id):y.includes(F.id)),ve=ie||Oe?"#000":q?e?"rgba(251,146,60,0.78)":"rgba(251,146,60,0.72)":Ae,Ne=!!P&&(P instanceof Set?P.has(F.id):P.includes(F.id)),qe=[K?m?ie||Oe?"inset 0 0 0 2px rgba(255,255,255,0.35)":e?"inset 0 0 0 2px rgba(255,255,255,0.85)":"inset 0 0 0 2px rgba(0,0,0,0.7)":ie||Oe?"0 0 0 2px rgba(255,255,255,0.35)":e?"0 0 0 2px rgba(255,255,255,0.85)":"0 0 0 2px rgba(0,0,0,0.7)":"",Ne?ie?"0 0 0 2px rgba(239,68,68,0.65)":Oe?"0 0 0 2px rgba(255,255,255,0.45)":"0 0 0 2px rgba(234,179,8,0.95)":""].filter(Boolean).join(", "),Dt=M||re||A||K||k&&q||Ne;let xt=Dt&&$e,hn=Dt&&nt;if(j<Wt*1.6&&xt&&hn&&(Je<=H-mt?hn=!1:xt=!1),ue){const lt=Je/H*ut,rt=mt/H*ut;lt<ft&&(ft=-1/0),rt<Ye-Wt&&(Ye=-1/0);const Rt=(Pe==null?void 0:Pe.forceStartOuter)||E,Pt=(Pe==null?void 0:Pe.forceEndOuter)||E;if(Rt&&xt){const wt=lt,Un=ft+Wt+Ht;wt<Un?xt=!1:ft=wt}if(Pt&&hn){const wt=rt,Un=Ye+Ht;wt<Un?hn=!1:Ye=wt+Wt}}const tn=[];if(tt.sub&&i)for(const lt of tt.sub){const rt=(i||[]).find(wt=>wt.id===lt.taskId),Rt=it+lt.stOff,Pt=it+lt.enOff;tn.push(`${(rt==null?void 0:rt.name)||"Task"}: ${et(Rt%1440)}–${et(Pt%1440)}`)}return l.jsxs("div",{className:"absolute inset-y-0",style:function(){const lt={left:`${gt}%`,width:`${Nt}%`,boxShadow:qe||void 0};if(He){const rt=ee(F.id),Rt=.42,Pt=88,wt=55;lt.backgroundColor="#0a0a0a",lt.backgroundImage=`linear-gradient(90deg,
                          hsla(${(rt+330)%360}, ${Pt}%, ${wt}%, ${Rt}),
                          hsla(${(rt+15)%360},  ${Pt}%, ${wt}%, ${Rt}),
                          hsla(${(rt+60)%360},  ${Pt}%, ${wt}%, ${Rt}),
                          hsla(${(rt+120)%360}, ${Pt}%, ${wt}%, ${Rt}),
                          hsla(${(rt+180)%360}, ${Pt}%, ${wt}%, ${Rt}),
                          hsla(${(rt+240)%360}, ${Pt}%, ${wt}%, ${Rt}),
                          hsla(${(rt+300)%360}, ${Pt}%, ${wt}%, ${Rt})
                        )`,lt.backgroundBlendMode="multiply",lt.backgroundSize="300% 100%",lt.animation="prismChip 12s ease-in-out infinite",lt.animationDelay=`${-(rt%7*.33)}s`}else lt.background=ve;return lt}(),title:(f?`${f} • ${F.title}`:F.title)+(tn.length?`

Postures:
${tn.join(`
`)}`:""),onMouseDown:v?lt=>ye(F.id,lt):void 0,onMouseEnter:()=>{fe(F.id),Ee(!1)},onMouseLeave:()=>{fe(null),Ee(!0)},onClick:lt=>{lt.stopPropagation(),!je.current&&(O==null||O(F.id))},children:[tt.sub&&i&&tt.sub.map((lt,rt)=>{const Rt=it+lt.stOff,Pt=it+lt.enOff,wt=Math.max(Je,Math.min(mt,Rt)),Un=Math.max(Je,Math.min(mt,Pt));if(Un<=wt)return null;const Nl=(wt-Je)/(mt-Je)*100,Er=(Un-wt)/(mt-Je)*100,jn=(i||[]).find(Cr=>Cr.id===lt.taskId),Ss=function(){return ie?"rgba(239,68,68,0.28)":Oe?"rgba(255,255,255,0.16)":jn!=null&&jn.color?jn.color:pe?e?"hsla(217, 48%, 60%, 0.30)":"hsla(217, 48%, 60%, 0.26)":ae?e?"hsla(150, 60%, 45%, 0.55)":"hsla(150, 60%, 55%, 0.50)":T?e?"hsla(190, 85%, 60%, 0.60)":"hsla(190, 90%, 65%, 0.55)":D?e?"hsla(28, 85%, 55%, 0.58)":"hsla(28, 90%, 58%, 0.52)":B?e?"hsla(228, 62%, 68%, 0.56)":"hsla(228, 62%, 68%, 0.50)":"rgba(59,130,246,0.85)"}(),Sl=jn!=null&&jn.color?`linear-gradient(90deg,
                            color-mix(in oklab, ${jn.color} 85%, #000 15%) 0%,
                            color-mix(in oklab, ${jn.color} 65%, #000 35%) 50%,
                            color-mix(in oklab, ${jn.color} 85%, #000 15%) 100%
                          )`:void 0;return l.jsx("div",{className:"absolute inset-y-0 pointer-events-none",style:{left:`${Nl}%`,width:`${Er}%`,background:He?void 0:Ss,backgroundImage:He?Sl:void 0,backgroundSize:He?"300% 100%":void 0,animation:He?"prismChip 12s ease-in-out infinite":void 0,backgroundBlendMode:He?"multiply":void 0,opacity:He?.75:ie?.35:Oe?.25:.9},"aria-hidden":!0},`${xe}-seg-${rt}`)}),xt&&l.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",Pe!=null&&Pe.forceStartOuter||E?"-left-1 -translate-x-full":m?"left-1":"-left-1 -translate-x-full","bg-black/70 text-white"].join(" "),children:et(Qe)}),hn&&l.jsx("div",{className:["absolute top-1/2 -translate-y-1/2 px-1 py-0.5 rounded text-[12px] font-medium whitespace-nowrap z-10",Pe!=null&&Pe.forceEndOuter||E?"-right-1 translate-x-full":m?"right-1":"-right-1 translate-x-full","bg-black/70 text-white"].join(" "),children:et(bt)})]},xe)};if(Yt<=0)return[];const ze=tt.startAbs===F.earliest,pt=tt.endAbs===F.latest;if(Ge<ct){const Je=ze||Ge===0,mt=pt||ct===H;return[ot(Ge,ct,`${tt.key}-p0`,Je,mt)]}else{const Je=Math.min(H-Ge,Yt),mt=Math.max(0,Yt-Je);if(mt>0){const xe=Ge,$e=Ge+Je,nt=0,Pe=mt,gt=pt||$e===H,Nt=ze||nt===0;return[ot(xe,$e,`${tt.key}-p0`,!1,gt,{forceEndOuter:!0}),ot(nt,Pe,`${tt.key}-p1`,Nt,!1,{forceStartOuter:!0})]}else{const xe=Ge,$e=Ge+Je,nt=pt||$e===H;return[ot(xe,$e,`${tt.key}-p0`,!1,nt,{forceEndOuter:!0})]}}})}),Ue&&!De&&l.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{boxShadow:e?"inset 0 0 0 2px rgba(255,255,255,0.35)":"inset 0 0 0 2px rgba(0,0,0,0.35)"}}),ke&&function(){const F=function(){return ae?e?"#22c55e":"#16a34a":T?e?"#22d3ee":"#06b6d4":D?"#f59e0b":B?e?"#a5b4fc":"#6366f1":pe?e?"rgba(255,255,255,0.55)":"rgba(0,0,0,0.55)":e?"#f87171":"#ef4444"}(),re=function(){return ae?e?"rgba(34,197,94,0.9)":"rgba(22,163,74,0.95)":T?e?"rgba(34,211,238,0.9)":"rgba(6,182,212,0.95)":D?e?"rgba(245,158,11,0.9)":"rgba(245,158,11,0.95)":B?e?"rgba(165,180,252,0.9)":"rgba(99,102,241,0.95)":pe?"rgba(0,0,0,0.70)":e?"rgba(248,113,113,0.95)":"rgba(239,68,68,0.95)"}();return l.jsxs(l.Fragment,{children:[d&&l.jsx("div",{className:"absolute -translate-x-1/2 inset-y-0",style:{left:`${Ie}%`,width:1,background:F}}),h&&l.jsx("div",{className:"absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded whitespace-nowrap",style:{left:`${Ie}%`,fontSize:I,background:re,color:"#fff"},children:et(L.minutes)})]})}()]})}),z&&l.jsxs("div",{className:["mt-1 text-xs",he].join(" "),children:[Mn(we)," – ",Mn(vs(we,6))]})]})}function Di(e){switch(e){case"America/Los_Angeles":return"Pacific";case"America/Denver":return"Mountain";case"America/Chicago":return"Central";case"America/New_York":return"Eastern";default:return e||"—"}}function dp({dark:e,agents:t,onAddAgent:n,onUpdateAgent:r,onDeleteAgent:s,weekStart:o,tz:i,shifts:a,pto:u,tasks:f,calendarSegs:b,onUpdateShift:g,onDeleteShift:p,onAddShift:S,selectedIdx:v,onSelectIdx:w}){var Pe,gt,Nt;const[z,m]=C.useState(""),[d,h]=C.useState(""),[x,M]=C.useState(((Pe=Zt[0])==null?void 0:Pe.id)||"UTC"),[E,y]=C.useState(null),[k,P]=C.useState(""),[O,ue]=C.useState(""),[Me,ie]=C.useState(((gt=Zt[0])==null?void 0:gt.id)||"UTC"),[Oe,He]=C.useState(null),pe=C.useRef(null),ae=C.useMemo(()=>t.map((j,K)=>({a:j,i:K})).sort((j,K)=>{const q=(j.a.firstName||"").toLowerCase(),ve=(K.a.firstName||"").toLowerCase();if(q!==ve)return q.localeCompare(ve);const Ne=(j.a.lastName||"").toLowerCase(),me=(K.a.lastName||"").toLowerCase();return Ne.localeCompare(me)}),[t]);C.useEffect(()=>{if(!Oe)return;const j=ae.findIndex(({a:K})=>`${K.firstName} ${K.lastName}`.trim()===Oe);if(j>=0&&pe.current){const K=pe.current.children[j];K==null||K.scrollIntoView({block:"nearest",behavior:"smooth"})}He(null)},[ae,Oe]);const[T,D]=C.useState(null),B=T!=null?t[T]:null;function ee(){T!=null&&(s==null||s(T),D(null))}const[H,we]=C.useState(null),se=v??H,he=j=>{w?w(j):we(j)},ne=se!=null?t[se]:null,V=ne?[ne.firstName,ne.lastName].filter(Boolean).join(" "):"",L=C.useMemo(()=>t.map((j,K)=>({i:K,id:j.id,name:[j.firstName,j.lastName].filter(Boolean).join(" "),isSupervisor:!!j.isSupervisor})),[t]),U=C.useMemo(()=>L.filter(j=>j.isSupervisor&&!!j.id),[L]);C.useEffect(()=>{var j,K;if(se!=null){const q=t[se];q&&(P(q.firstName||""),ue(q.lastName||""),ie(q.tzId||((j=Zt[0])==null?void 0:j.id)||"UTC"),y(se))}else P(""),ue(""),ie(((K=Zt[0])==null?void 0:K.id)||"UTC"),y(null)},[se]);const[_,Se]=C.useState([]);C.useEffect(()=>{if(!V){Se([]);return}const j=a.filter(q=>q.person===V),K=new Map(Be.map((q,ve)=>[q,ve]));Se(j.slice().sort((q,ve)=>K.get(q.day)-K.get(ve.day)||q.start.localeCompare(ve.start)))},[V,a]);const[ke,ge]=C.useState(null),Ie=C.useCallback(()=>{V&&ge({person:V,shifts:_.map(j=>({...j}))})},[V,_]),dt=C.useCallback(()=>{if(!ke)return;const j=ke.person,K=ke.shifts,q=V===j?_:a.filter(Ce=>Ce.person===j),ve=new Map(K.map(Ce=>[Ce.id,Ce])),Ne=new Map(q.map(Ce=>[Ce.id,Ce]));for(const[Ce]of Ne)ve.has(Ce)||p==null||p(Ce);for(const[,Ce]of ve)Ne.has(Ce.id)||S==null||S(Ce);for(const[,Ce]of ve){const qe=Ne.get(Ce.id);if(!qe)continue;const Dt=Ce.endDay,xt=qe.endDay;(Ce.day!==qe.day||Ce.start!==qe.start||Ce.end!==qe.end||Dt!==xt)&&(g==null||g(Ce.id,{day:Ce.day,start:Ce.start,end:Ce.end,endDay:Dt}))}const me=t.findIndex(Ce=>[Ce.firstName,Ce.lastName].filter(Boolean).join(" ")===j);me>=0&&he(me),Se(K.slice()),ge(null)},[ke,V,_,a,p,S,g,t]);C.useEffect(()=>{const j=K=>{(K.ctrlKey||K.metaKey)&&!K.shiftKey&&(K.key==="z"||K.key==="Z")&&(K.preventDefault(),dt())};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[dt]);const I=C.useMemo(()=>V?a.filter(K=>K.person!==V).concat(_):a,[a,V,_]),$=(j,K)=>{const[q,ve]=j.split(":").map(Dt=>parseInt(Dt||"0",10)||0);let Ne=q*60+ve+K;const me=1440;Ne=(Ne%me+me)%me;const Ce=Math.floor(Ne/60).toString().padStart(2,"0"),qe=(Ne%60).toString().padStart(2,"0");return`${Ce}:${qe}`},Z=j=>Be.indexOf(j),le=j=>Be[(j%7+7)%7],oe=j=>{const[K,q]=j.split(":");return(parseInt(K||"0",10)||0)*60+(parseInt(q||"0",10)||0)},ut=(j,K)=>{const ve=Z(j.day)*1440+oe(j.start),Ne=j.endDay||j.day,me=Z(Ne)*1440+oe(j.end),Ce=me<=ve?me+1440:me;let qe=ve+K,Dt=Ce+K;const xt=Math.floor((qe/1440%7+7)%7),hn=Math.floor((Dt/1440%7+7)%7),tn=(qe%1440+1440)%1440,lt=(Dt%1440+1440)%1440,rt=le(xt),Rt=$("00:00",tn),Pt=$("00:00",lt),wt=le(hn);return{...j,day:rt,start:Rt,end:Pt,endDay:wt}},Xe=(j,K,q,ve)=>Math.max(j,q)<Math.min(K,ve),Ue=j=>{const q=Z(j.day),ve=j.endDay||j.day,Ne=Z(ve),me=oe(j.start),Ce=oe(j.end),qe=q*1440+me;let Dt=Ne*1440+Ce;return Ne<q?Dt+=7*1440:Ne===q&&Dt<=qe&&(Dt+=1440),{start:qe,end:Dt}},Ee=j=>{const K=Ue(j);return Math.max(0,K.end-K.start)},De=j=>{const K=Math.floor(j/60),q=j%60;return q===0?`${K}h`:`${K}h ${q}m`},fe=C.useMemo(()=>_.reduce((j,K)=>j+Ee(K),0),[_]),je=_.length*30,ft=Math.max(0,fe-je),Ye=(j,K)=>{const q=Ue(j);for(const ve of K){if(ve.id===j.id)continue;const Ne=Ue(ve);if(Xe(q.start,q.end,Ne.start,Ne.end))return!0}return!1},Wt=j=>{if(Ie(),!V)return;const K=_.map(q=>ut(q,j));for(let q=0;q<K.length;q++)for(let ve=q+1;ve<K.length;ve++)if(Ye(K[q],K)){alert("Move would cause overlapping shifts for this agent.");return}Se(K),K.forEach(q=>{g==null||g(q.id,{day:q.day,start:q.start,end:q.end,endDay:q.endDay})})},Ht=(j,K)=>{Ie();const q=_,ve=q.findIndex(Ce=>Ce.id===j);if(ve<0)return;const Ne=ut(q[ve],K),me=q.map((Ce,qe)=>qe===ve?Ne:Ce);if(Ye(Ne,me)){alert("Move would cause overlapping shifts for this agent.");return}Se(me),g==null||g(Ne.id,{day:Ne.day,start:Ne.start,end:Ne.end,endDay:Ne.endDay})},[te,G]=C.useState(null),[ye,F]=C.useState(null),[re,A]=C.useState("Mon"),[_e,Ze]=C.useState(""),[Ae,Ve]=C.useState(""),[Qe,bt]=C.useState("Mon"),tt=C.useRef(null),it=C.useRef(null);function mn(j){G(j.id),A(j.day),Ze(j.start),Ve(j.end),bt(j.endDay||j.day)}function Yt(){G(null)}function We(){if(!te)return;Ie();const j={..._.find(q=>q.id===te),day:re,start:_e,end:Ae,endDay:Qe},K=_.map(q=>q.id===te?j:q);if(Ye(j,K)){alert("Saved times would overlap another shift for this agent.");return}Se(K),g==null||g(te,{day:re,start:_e,end:Ae,endDay:Qe}),G(null)}const[Ge,ct]=C.useState(null),ot=Ge?_.find(j=>j.id===Ge):null;function ze(){Ge&&(Ie(),Se(j=>j.filter(K=>K.id!==Ge)),p==null||p(Ge),ct(null))}const[pt,Je]=C.useState(0);function mt(j){j.preventDefault();const K=z.trim(),q=d.trim();!K||!q||(He(`${K} ${q}`.trim()),n==null||n({firstName:K,lastName:q,tzId:x}),m(""),h(""))}const xe=j=>Be[(Be.indexOf(j)+1)%Be.length],$e=j=>{if(j==="24:00")return 24*60;const[K,q]=j.split(":");return(parseInt(K||"0",10)||0)*60+(parseInt(q||"0",10)||0)};function nt(){var tn,lt;if(!ne||!V)return;Ie();const j=new Set(_.map(rt=>rt.day)),K=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],q=_.length===0?"Mon":K.find(rt=>!j.has(rt))||"Mon";let ve="08:00",Ne="16:30";if(_.length>0){const rt=_[_.length-1];ve=rt.start,Ne=rt.end}const me=Ne!=="24:00"&&$e(Ne)<=$e(ve),Ce=_.length===0?q:me?xe(q):q;let xt={id:((lt=(tn=globalThis.crypto)==null?void 0:tn.randomUUID)==null?void 0:lt.call(tn))||Math.random().toString(36).slice(2),person:V,day:q,start:ve,end:Ne,endDay:Ce},hn=0;for(;Ye(xt,_.concat([{...xt}]))&&hn<20;)xt={...xt,start:$(xt.start,30),end:$(xt.end,30)},hn++;hn>=20&&Ye(xt,_.concat([{...xt}]))&&alert("Could not find a non-overlapping slot for the default shift. Please adjust times after adding."),Se(rt=>rt.concat([xt])),F(xt.id),S==null||S(xt)}return C.useEffect(()=>{if(!ye)return;const j=setTimeout(()=>F(null),300);return()=>clearTimeout(j)},[ye]),l.jsxs("div",{className:["rounded-xl p-4 border",e?"bg-neutral-900 border-neutral-800":"bg-white border-neutral-200"].join(" "),children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[l.jsxs("section",{className:["rounded-lg p-3 border",e?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsxs("div",{className:"text-sm font-medium",children:["Agents (",t.length,")"]})}),t.length===0?l.jsx("div",{className:["rounded-md p-2 text-xs",e?"bg-neutral-900 text-neutral-300":"bg-white text-neutral-600"].join(" "),children:"No agents found."}):l.jsxs("div",{className:["rounded-md",""].join(" "),children:[l.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid grid-cols-4 gap-2",children:[l.jsx("div",{children:"First"}),l.jsx("div",{children:"Last"}),l.jsx("div",{children:"Timezone"}),l.jsx("div",{className:"text-right",children:"Actions"})]}),l.jsx("ul",{ref:pe,className:["max-h-[36vh] overflow-y-auto"].join(" "),children:ae.map(({a:j,i:K},q)=>l.jsxs("li",{className:["px-2 py-1.5 text-sm leading-6 grid grid-cols-4 gap-2 items-center cursor-pointer",se===K?e?"bg-neutral-800":"bg-blue-50":e?"odd:bg-neutral-900":"odd:bg-neutral-100"].join(" "),onClick:()=>he(K),children:[l.jsx("div",{className:[e?"text-neutral-200":"text-neutral-800",j.hidden?"opacity-60":""].join(" "),children:j.firstName||"—"}),l.jsx("div",{className:[e?"text-neutral-200":"text-neutral-800",j.hidden?"opacity-60":""].join(" "),children:j.lastName||"—"}),l.jsx("div",{className:e?"text-neutral-300":"text-neutral-700",children:Di(j.tzId)}),l.jsx("div",{className:"text-right",onClick:ve=>{ve.stopPropagation()}})]},`${j.firstName}-${j.lastName}-${K}`))})]}),l.jsx("div",{className:"mt-2",children:l.jsxs("form",{onSubmit:mt,className:"grid grid-cols-2 md:grid-cols-4 gap-2 items-end",children:[l.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs opacity-80",children:"First"}),l.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:z,onChange:j=>m(j.target.value),placeholder:"First name"})]}),l.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs opacity-80",children:"Last"}),l.jsx("input",{className:["border rounded-md px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:d,onChange:j=>h(j.target.value),placeholder:"Last name"})]}),l.jsxs("label",{className:"col-span-1 flex flex-col gap-1",children:[l.jsx("span",{className:"text-xs opacity-80",children:"Timezone"}),l.jsx("select",{className:["border rounded-md px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:x,onChange:j=>M(j.target.value),children:Zt.map(j=>l.jsx("option",{value:j.id,children:Di(j.id)},j.id))})]}),l.jsx("div",{className:"col-span-1 flex md:justify-end",children:l.jsx("button",{type:"submit",disabled:!z.trim()||!d.trim(),className:["px-3 py-1.5 rounded-md text-sm font-medium border",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add Agent"})})]})})]}),T!=null&&l.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",e?"bg-black/70":"bg-black/50"].join(" "),children:l.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete agent?"}),l.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove ",B==null?void 0:B.firstName," ",B==null?void 0:B.lastName,". This cannot be undone."]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>D(null),className:["px-3 py-1.5 rounded-md text-sm border",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),l.jsx("button",{onClick:ee,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),Ge&&ot&&l.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",e?"bg-black/70":"bg-black/50"].join(" "),children:l.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete shift?"}),l.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove the shift for ",V," on ",ot.day," ",ot.start,"–",ot.end,ot.endDay&&ot.endDay!==ot.day?l.jsxs(l.Fragment,{children:[" ","ending ",String(ot.endDay)]}):null,". This cannot be undone."]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>ct(null),className:["px-3 py-1.5 rounded-md text-sm border",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),l.jsx("button",{onClick:ze,className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete"})]})]})}),l.jsxs("section",{className:["rounded-lg p-3",e?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"text-sm font-medium",children:["Shifts (",_.length,")",_.length>0&&l.jsxs("span",{className:"ml-2 opacity-70",children:["• Total ",De(fe),l.jsxs("span",{"aria-hidden":!0,children:["− ",_.length,"×30m = ",De(ft)," billable"]})]})]}),l.jsxs("div",{className:"inline-flex items-center gap-1",children:[l.jsx("button",{title:"Delete all shifts","aria-label":"Delete all shifts",disabled:!ne||_.length===0,onClick:()=>Je(1),className:["inline-flex items-center justify-center w-8 h-8 rounded border",e?"border-neutral-800 text-red-300 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-red-600 hover:bg-red-50 disabled:opacity-50"].join(" "),children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:l.jsx("path",{d:"M5 12h14"})})}),l.jsx("button",{title:"Add shift","aria-label":"Add shift",disabled:!ne,onClick:nt,className:["inline-flex items-center justify-center w-8 h-8 rounded border",e?"border-neutral-800 text-neutral-200 hover:bg-neutral-900 disabled:opacity-50":"border-neutral-300 text-neutral-700 hover:bg-neutral-100 disabled:opacity-50"].join(" "),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]})})]})]}),ne?l.jsxs("div",{children:[l.jsx("div",{className:["text-2xl font-semibold mb-2",ne!=null&&ne.hidden?e?"text-neutral-400":"text-neutral-500":e?"text-neutral-100":"text-neutral-900"].join(" "),children:V}),l.jsxs("div",{className:["mb-3 rounded-md p-2 border",e?"border-neutral-800":"border-neutral-200"].join(" "),children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-2 items-end",children:[l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"First"}),l.jsx("input",{className:["w-full border rounded px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:k||ne.firstName,onChange:j=>{P(j.target.value),y(se)}})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Last"}),l.jsx("input",{className:["w-full border rounded px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:O||ne.lastName,onChange:j=>{ue(j.target.value),y(se)}})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Timezone"}),l.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Me||ne.tzId||((Nt=Zt[0])==null?void 0:Nt.id),onChange:j=>{ie(j.target.value),y(se)},children:Zt.map(j=>l.jsx("option",{value:j.id,children:Di(j.id)},j.id))})]}),l.jsxs("div",{className:"text-right flex items-end justify-end gap-2",children:[l.jsx("button",{onClick:()=>{var j;se!=null&&(P(""),ue(""),ie(ne.tzId||((j=Zt[0])==null?void 0:j.id)||"UTC"),r==null||r(se,{...ne,firstName:ne.firstName,lastName:ne.lastName,tzId:ne.tzId}))},className:["px-2 py-1 rounded border text-xs",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),l.jsx("button",{onClick:()=>{se!=null&&(r==null||r(se,{...ne,firstName:(k||ne.firstName).trim(),lastName:(O||ne.lastName).trim(),tzId:Me||ne.tzId}),P(""),ue(""))},className:["px-2 py-1 rounded border text-xs",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),l.jsx("button",{onClick:()=>D(se),className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})]}),l.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",title:"Supervisor",children:[l.jsx("input",{"aria-label":"Supervisor",title:"Supervisor",type:"checkbox",className:"w-4 h-4 align-middle",checked:!!ne.isSupervisor,onChange:j=>{se!=null&&(r==null||r(se,{...ne,isSupervisor:j.target.checked}))}}),l.jsx("span",{children:"Supervisor"})]}),l.jsx("div",{className:"min-w-[12rem]",children:l.jsxs("select",{title:"Assign supervisor",className:["text-sm border rounded px-2 py-1 h-9 leading-7 w-full",e?"bg-neutral-900 border-neutral-700 text-neutral-200":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:ne.supervisorId||"",onChange:j=>{se!=null&&(r==null||r(se,{...ne,supervisorId:j.target.value||void 0}))},children:[l.jsx("option",{value:"",children:"No supervisor"}),U.filter(j=>j.i!==se).map(j=>l.jsx("option",{value:j.id,children:j.name||`Agent ${j.i+1}`},j.i))]})}),l.jsxs("button",{title:ne.hidden?"Show in schedule":"Hide from schedule","aria-label":ne.hidden?"Show in schedule":"Hide from schedule",onClick:()=>{se!=null&&(r==null||r(se,{...ne,hidden:!ne.hidden}))},className:["inline-flex items-center justify-center px-3 h-9 rounded border",e?"border-neutral-700 text-neutral-200 hover:bg-neutral-800":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:[ne.hidden?l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]}):l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),l.jsx("span",{className:"ml-2 text-sm",children:ne.hidden?"Hidden":"Visible"})]})]})]}),l.jsxs("div",{className:"px-2 py-1.5 text-xs uppercase tracking-wide opacity-70 grid grid-cols-6 gap-2",children:[l.jsx("div",{children:"Start Day"}),l.jsx("div",{children:"Start Time"}),l.jsx("div",{children:"End Day"}),l.jsx("div",{children:"End Time"}),l.jsx("div",{children:"Length"}),l.jsx("div",{className:"text-right",children:"Actions"})]}),l.jsx("ul",{className:"max-h-[36vh] overflow-y-auto",children:_.length===0?l.jsx("li",{className:["px-2 py-6 text-sm",e?"text-neutral-300":"text-neutral-700"].join(" "),children:l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsx("div",{children:"No shifts for this agent."}),l.jsx("button",{onClick:()=>{if(!V)return;const j=["Mon","Tue","Wed","Thu","Fri"],K=()=>{var Ne,me;return((me=(Ne=globalThis.crypto)==null?void 0:Ne.randomUUID)==null?void 0:me.call(Ne))||Math.random().toString(36).slice(2)},q={person:V,day:"Mon",start:"08:00",end:"16:30"},ve=j.map(Ne=>({id:K(),...q,day:Ne,endDay:Ne}));Se(ve),ve.forEach(Ne=>S==null?void 0:S(Ne))},className:["px-3 py-1.5 rounded-md text-sm font-medium border",e?"bg-neutral-900 border-neutral-700 text-neutral-100 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white hover:opacity-95"].join(" "),children:"Create standard week (Mon–Fri, 8:00–4:30 PST)"})]})}):_.map(j=>{var Ne;const K=(ne==null?void 0:ne.tzId)||((Ne=Zt[0])==null?void 0:Ne.id)||"UTC",q=i.id;let ve=null;if(q!==K){const me={...j,person:j.person},qe=Hr([me],0)[0];ve=qe?{startDay:qe.day,start:qe.start,endDay:qe.endDay||qe.day,end:qe.end}:null}return l.jsx("li",{className:["px-2 py-1.5 text-sm leading-6 grid grid-cols-6 gap-2 items-center",e?"odd:bg-neutral-900":"odd:bg-neutral-100",ye===j.id?"shift-add-in":""].filter(Boolean).join(" "),children:te===j.id?l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:re,onChange:me=>A(me.target.value),children:Be.map(me=>l.jsx("option",{value:me,children:me},me))})}),l.jsx("div",{children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{ref:tt,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:_e,onChange:me=>{const Ce=me.target.value;Ze(Ce);const qe=$(Ce,8*60+30);Ve(qe);const Dt=oe(qe)<=oe(Ce);bt(Dt?xe(re):re)}}),l.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",e?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const me=tt.current;me!=null&&me.showPicker?me.showPicker():me==null||me.focus()},"aria-label":"Open time picker",tabIndex:-1,children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),l.jsx("div",{children:l.jsx("select",{className:["w-full border rounded px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Qe,onChange:me=>bt(me.target.value),children:Be.map(me=>l.jsx("option",{value:me,children:me},me))})}),l.jsx("div",{children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{ref:it,type:"time",className:["w-full border rounded px-2 pr-10 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Ae,onChange:me=>Ve(me.target.value)}),l.jsx("button",{type:"button",className:["absolute right-1 top-1/2 -translate-y-1/2 inline-flex items-center justify-center w-6 h-6 rounded",e?"text-neutral-300 hover:bg-neutral-800":"text-neutral-600 hover:bg-neutral-100"].join(" "),onClick:()=>{const me=it.current;me!=null&&me.showPicker?me.showPicker():me==null||me.focus()},"aria-label":"Open time picker",tabIndex:-1,children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[l.jsx("circle",{cx:"12",cy:"12",r:"9"}),l.jsx("path",{d:"M12 7v5l3 3"})]})})]})}),l.jsx("div",{className:e?"text-neutral-300":"text-neutral-700",children:De(Ee({...j,day:re,start:_e,end:Ae,endDay:Qe}))}),l.jsxs("div",{className:"inline-flex items-center justify-end gap-1 whitespace-nowrap",children:[l.jsx("button",{onClick:We,className:["px-2 py-1 rounded border text-xs",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),l.jsx("button",{onClick:Yt,className:["px-2 py-1 rounded border text-xs",e?"border-neutral-700 text-neutral-200":"border-neutral-300 text-neutral-700"].join(" "),children:"Cancel"})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:e?"text-neutral-200":"text-neutral-800",children:[l.jsx("div",{children:j.day}),ve&&l.jsxs("div",{className:"text-xs opacity-70",children:[ve.startDay," ",l.jsxs("span",{className:"opacity-60",children:["(",xl((ne==null?void 0:ne.tzId)||"UTC"),")"]})]})]}),l.jsxs("div",{className:e?"text-neutral-200":"text-neutral-800",children:[l.jsx("div",{children:j.start}),ve&&l.jsx("div",{className:"text-xs opacity-70",children:ve.start})]}),l.jsxs("div",{className:e?"text-neutral-200":"text-neutral-800",children:[l.jsx("div",{children:j.endDay||j.day}),ve&&l.jsx("div",{className:"text-xs opacity-70",children:ve.endDay})]}),l.jsxs("div",{className:e?"text-neutral-200":"text-neutral-800",children:[l.jsx("div",{children:j.end}),ve&&l.jsx("div",{className:"text-xs opacity-70",children:ve.end})]}),l.jsx("div",{className:e?"text-neutral-300":"text-neutral-700",children:De(Ee(j))}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"inline-flex items-center gap-1",children:[l.jsx("button",{title:"Edit","aria-label":"Edit shift",onClick:()=>mn(j),className:["inline-flex items-center justify-center w-7 h-7 rounded border",e?"border-neutral-700 text-neutral-200 hover:bg-neutral-800":"border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[l.jsx("path",{d:"M12 20h9"}),l.jsx("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z"})]})}),l.jsx("button",{title:"Delete","aria-label":"Delete shift",onClick:()=>ct(j.id),className:["inline-flex items-center justify-center w-7 h-7 rounded border",e?"border-neutral-700 text-red-300 hover:bg-neutral-800":"border-neutral-300 text-red-600 hover:bg-red-50"].join(" "),children:l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:"w-4 h-4",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"}),l.jsx("path",{d:"M10 11v6"}),l.jsx("path",{d:"M14 11v6"}),l.jsx("path",{d:"M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"})]})})]})})]})},j.id)})})]}):l.jsx("div",{className:"text-sm opacity-70",children:"Select an agent on the left to view and edit their shifts."})]}),pt===1&&l.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",e?"bg-black/70":"bg-black/50"].join(" "),children:l.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-base font-semibold mb-2",children:"Delete all shifts?"}),l.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["This will remove all shifts for ",V,". This cannot be undone."]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>Je(0),className:["px-3 py-1.5 rounded-md text-sm border",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),l.jsx("button",{onClick:()=>Je(2),className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Continue"})]})]})}),pt===2&&l.jsx("div",{role:"dialog","aria-modal":"true",className:["fixed inset-0 z-50 flex items-center justify-center",e?"bg-black/70":"bg-black/50"].join(" "),children:l.jsxs("div",{className:["max-w-sm w-[92%] rounded-xl p-4 border",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-200 text-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-base font-semibold mb-2",children:"Confirm delete all"}),l.jsxs("div",{className:"text-sm opacity-80 mb-4",children:["Are you absolutely sure? This will permanently remove ",_.length," shift(s) for ",V,"."]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:()=>Je(0),className:["px-3 py-1.5 rounded-md text-sm border",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"}),l.jsx("button",{onClick:()=>{Ie();const j=_.map(K=>K.id);Se([]),j.forEach(K=>p==null?void 0:p(K)),Je(0)},className:["px-3 py-1.5 rounded-md text-sm border bg-red-600 text-white border-red-600"].join(" "),children:"Delete all"})]})]})})]}),l.jsx("div",{className:"mt-3",children:l.jsx("div",{className:["rounded-lg border",e?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:ne?l.jsx("div",{className:"p-2",children:l.jsx(o0,{dark:e,tz:i,weekStart:o,agent:V,shifts:I,pto:u,tasks:f,calendarSegs:b,onDragAll:Wt,onDragShift:Ht,showShiftLabels:!0,showEdgeTimeTagsForHighlights:!0,framed:!0,alwaysShowTimeTags:!0,forceOuterTimeTags:!0,bandHeight:40,dayLabelFontPx:13})}):l.jsx("div",{className:["p-4 text-sm",e?"text-neutral-400":"text-neutral-600"].join(" "),children:"Select an agent to show their weekly timeline."})})}),l.jsx("div",{className:"mt-3",children:l.jsxs("div",{className:["rounded-lg p-3 border",e?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-medium mb-2",children:"Notes"}),ne?l.jsx("textarea",{className:["w-full min-h-[80px] border rounded-md p-2 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),placeholder:"Add notes about this agent...",value:ne.notes||"",onChange:j=>{se!=null&&(r==null||r(se,{...ne,notes:j.target.value}))}}):l.jsx("div",{className:"text-sm opacity-70",children:"Select an agent to view notes."}),l.jsx("div",{className:"mt-1 text-[11px] opacity-70",children:"Autosaves to backend."})]})})]})}function fp({dark:e,tz:t,weekStart:n,agents:r,shifts:s,pto:o,tasks:i,calendarSegs:a,visibleDays:u=7,scrollChunk:f,showAllTimeLabels:b=!1,onDragAll:g,onDragShift:p,sortMode:S="start",sortDir:v="asc",highlightIds:w,selectedIds:z,onToggleSelect:m}){const[d,h]=C.useState(null),[x,M]=C.useState(!1),E=C.useRef(null),[y,k]=C.useState(160);C.useEffect(()=>{try{if(!r||r.length===0){k(120);return}const pe=r.map(we=>[we.firstName,we.lastName].filter(Boolean).join(" ").trim()).filter(Boolean),T=document.createElement("canvas").getContext("2d");if(!T){k(160);return}T.font="500 13px ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif";let D=0;for(const we of pe){const se=T.measureText(we).width;se>D&&(D=se)}k(Math.max(120,Math.min(260,Math.ceil(D+28))))}catch{k(160)}},[r]);const P="shrink-0 text-left pl-1 text-sm truncate",O=R.useMemo(()=>{const pe=r.map(L=>[L.firstName,L.lastName].filter(Boolean).join(" ")),ae=Hr(s,t.offset),T=new Map(Be.map((L,U)=>[L,U])),D=L=>{let U=1/0;for(const _ of ae){if(_.person!==L)continue;const Se=T.get(_.day)??-1;if(Se<0)continue;const ke=Se*1440+de(_.start);ke<U&&(U=ke)}return U},B=L=>{let U=-1/0;for(const _ of ae){if(_.person!==L)continue;const Se=T.get(_.day)??0,ke=T.get(_.endDay||_.day)??Se,ge=Se*1440+de(_.start);let Ie=ke*1440+de(_.end);Ie<=ge&&(Ie+=1440),Ie>U&&(U=Ie)}return U},ee=L=>{let U=0;for(const _ of ae){if(_.person!==L)continue;const Se=T.get(_.day)??0,ke=T.get(_.endDay||_.day)??Se,ge=Se*1440+de(_.start);let Ie=ke*1440+de(_.end);Ie<=ge&&(Ie+=1440),U+=Math.max(0,Ie-ge)}return U},H=L=>ae.filter(U=>U.person===L).length,we=L=>{var U;return((U=r.find(_=>[_.firstName,_.lastName].filter(Boolean).join(" ")===L))==null?void 0:U.tzId)||""},se=L=>{let U=1/0;for(const _ of ae)if(_.person===L){const Se=T.get(_.day)??1/0;Se<U&&(U=Se)}return U},he=pe.map(L=>({name:L,startKey:D(L),startHas:Number.isFinite(D(L)),endKey:B(L),endHas:Number.isFinite(B(L)),totalKey:ee(L),countKey:H(L),hasShifts:H(L)>0,tzKey:we(L),tzHas:!!we(L),dayKey:se(L),dayHas:Number.isFinite(se(L))})),ne=(L,U)=>L.name.localeCompare(U.name),V=v==="asc"?1:-1;return S==="name"?he.sort((L,U)=>V*ne(L,U)).map(L=>L.name):S==="tz"?he.sort((L,U)=>{if(L.tzHas&&!U.tzHas)return-1;if(!L.tzHas&&U.tzHas)return 1;const _=L.tzKey.localeCompare(U.tzKey)*V;return _!==0?_:ne(L,U)}).map(L=>L.name):S==="end"?he.sort((L,U)=>{if(L.endHas&&!U.endHas)return-1;if(!L.endHas&&U.endHas)return 1;const _=(L.endKey-U.endKey)*V;return _!==0?_:ne(L,U)}).map(L=>L.name):S==="firstDay"?he.sort((L,U)=>{if(L.dayHas&&!U.dayHas)return-1;if(!L.dayHas&&U.dayHas)return 1;const _=(L.dayKey-U.dayKey)*V;return _!==0?_:ne(L,U)}).map(L=>L.name):S==="count"?he.sort((L,U)=>{const _=L.hasShifts,Se=U.hasShifts;if(_&&!Se)return-1;if(!_&&Se)return 1;const ke=(L.countKey-U.countKey)*V;return ke!==0?ke:ne(L,U)}).map(L=>L.name):S==="total"?he.sort((L,U)=>{const _=L.hasShifts,Se=U.hasShifts;if(_&&!Se)return-1;if(!_&&Se)return 1;const ke=(L.totalKey-U.totalKey)*V;return ke!==0?ke:ne(L,U)}).map(L=>L.name):he.sort((L,U)=>{if(L.startHas&&!U.startHas)return-1;if(!L.startHas&&U.startHas)return 1;const _=(L.startKey-U.startKey)*V;return _!==0?_:ne(L,U)}).map(L=>L.name)},[r,s,t.offset,S,v]),ue=Math.min(7,Math.max(1,u||7)),Me=7/ue*100,ie=28,Oe=R.useMemo(()=>Hr(s,t.offset),[s,t.offset]),He=pe=>{let ae=0;for(const T of Oe){const D=Be.indexOf(T.day);if(D<0)continue;const B=D*1440+de(T.start);let ee=(Be.indexOf(T.endDay||T.day)<0?D:Be.indexOf(T.endDay||T.day))*1440+de(T.end);ee<=B&&(ee+=1440);const H=(B%(7*1440)+7*1440)%(7*1440),we=(ee%(7*1440)+7*1440)%(7*1440),se=7*1440,he=(ne,V,L)=>ne>=V&&ne<L;H<we?he(pe,H,we)&&ae++:(he(pe,H,se)||he(pe,0,we))&&ae++}return ae};return C.useEffect(()=>{const pe=E.current;if(!pe)return;const ae=Math.max(1,Math.ceil(7/ue)),T=Math.min(ae-1,Math.max(0,f||0)),D=Math.min(pe.scrollWidth-pe.clientWidth,Math.round(T*pe.clientWidth));pe.scrollTo({left:D,behavior:"smooth"})},[f,ue]),l.jsx("div",{className:"space-y-1",children:l.jsxs("div",{className:"flex items-stretch gap-1",children:[l.jsxs("div",{className:"shrink-0",style:{width:y},children:[l.jsx("div",{className:"h-7 opacity-0 select-none",children:"label"}),O.length===0?l.jsx("div",{className:"text-sm opacity-70 px-2",children:"No agents."}):O.map(pe=>l.jsx("div",{className:["flex items-center",e?"text-neutral-300":"text-neutral-700"].join(" "),style:{height:ie},title:pe,children:l.jsx("div",{className:P,style:{width:y},children:pe})},pe))]}),l.jsx("div",{ref:E,className:"flex-1 overflow-x-auto no-scrollbar relative",onMouseLeave:()=>{M(!1),h(null)},onMouseMove:pe=>{const ae=E.current;if(!ae)return;const T=ae.firstElementChild;if(!T)return;const D=T.getBoundingClientRect(),B=pe.clientX-D.left;if(B<0||B>D.width){M(!1),h(null);return}M(!0),h(B)},children:l.jsxs("div",{style:{width:`${Me}%`},children:[l.jsxs("div",{className:"relative h-7",children:[Be.map((pe,ae)=>{const T=ae/7*100,D=1/7*100;return l.jsx("div",{className:["absolute text-center",e?"text-neutral-300":"text-neutral-600"].join(" "),style:{left:`${T}%`,width:`${D}%`,fontSize:13,lineHeight:1.5},children:pe},pe)}),x&&d!=null&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-y-0",style:{left:d,width:1,background:"rgba(59,130,246,0.9)"}}),l.jsx("div",{className:["absolute -translate-x-1/2 top-0 mt-0.5 px-1.5 py-0.5 rounded text-white text-[10px]",e?"bg-blue-500":"bg-blue-600"].join(" "),style:{left:d},children:(()=>{var we;const pe=(we=E.current)==null?void 0:we.firstElementChild,ae=(pe==null?void 0:pe.getBoundingClientRect().width)||1,T=7*1440,D=Math.max(0,Math.min(T-1,Math.round(d/ae*T))),B=Math.floor(D%1440/60).toString().padStart(2,"0"),ee=(D%60).toString().padStart(2,"0"),H=He(D);return`${B}:${ee} • ${H} on deck`})()})]})]}),O.length>0&&O.map(pe=>l.jsx("div",{className:"py-0 m-0",children:l.jsx(o0,{dark:e,tz:t,weekStart:n,agent:pe,shifts:s,pto:o,tasks:i,calendarSegs:(a||[]).flatMap(ae=>!ae.endDay||ae.endDay===ae.day?[ae]:[{...ae,day:ae.day,start:ae.start,end:"24:00"},{...ae,day:ae.endDay,start:"00:00",end:ae.end}]),titlePrefix:pe,draggable:!!(g||p),onDragAll:ae=>g==null?void 0:g(pe,ae),onDragShift:(ae,T)=>p==null?void 0:p(pe,ae,T),showDayLabels:!1,showWeekLabel:!1,framed:!1,showNowLabel:!1,showShiftLabels:!0,bandHeight:ie,alwaysShowTimeTags:b,forceOuterTimeTags:b,avoidLabelOverlap:b,highlightIds:w,showEdgeTimeTagsForHighlights:!0,selectedIds:z,onToggleSelect:m})},pe))]})})]})})}function mp({dark:e,tz:t,weekStart:n,shifts:r,visibleAgentNames:s,visibleDays:o=7,scrollChunk:i=0}){const[a,u]=C.useState(()=>{try{const x=localStorage.getItem("coverage_heatmap_collapsed");return x==="1"?!0:x!=="0"}catch{return!0}});C.useEffect(()=>{try{localStorage.setItem("coverage_heatmap_collapsed",a?"1":"0")}catch{}try{window.dispatchEvent(new CustomEvent("coverage:collapsed",{detail:{value:a}}))}catch{}},[a]);const f=C.useMemo(()=>new Set(s),[s]),b=C.useMemo(()=>Hr(r,t.offset).filter(x=>f.has(x.person)),[r,t.offset,f]),g=C.useMemo(()=>{const x=Array.from({length:7},()=>new Array(24).fill(0));for(const M of b){const E=Be.indexOf(M.day);if(E<0)continue;const y=de(M.start),k=de(M.end),P=k>y?k:1440;for(let O=0;O<24;O++){const ue=O*60,Me=(O+1)*60;Math.max(y,ue)<Math.min(P,Me)&&x[E][O]++}}return x},[b]),p=C.useMemo(()=>g.reduce((x,M)=>Math.max(x,...M),0),[g]),S=x=>{if(p<=0)return e?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.05)";const M=x/p,E=[[0,0,0],[239,68,68],[250,204,21]],y=M<=.5?0:1,k=M<=.5?M/.5:(M-.5)/.5,P=E[y],O=E[y+1]||E[y],ue=Math.round(P[0]*(1-k)+O[0]*k),Me=Math.round(P[1]*(1-k)+O[1]*k),ie=Math.round(P[2]*(1-k)+O[2]*k);return`rgba(${ue},${Me},${ie},${e?.9:.95})`},v=Math.min(7,Math.max(1,o||7)),w=7/v*100,z=C.useRef(null);C.useEffect(()=>{const x=z.current;if(!x)return;const M=Math.max(1,Math.ceil(7/v)),E=Math.min(M-1,Math.max(0,i||0)),y=Math.min(x.scrollWidth-x.clientWidth,Math.round(E*x.clientWidth));x.scrollTo({left:y,behavior:"smooth"})},[i,v]);const m=7,d=1,h=18;return l.jsx("div",{className:["sticky bottom-0 z-30",e?"bg-neutral-950/92":"bg-white/95","backdrop-blur","border-t",e?"border-neutral-800":"border-neutral-200"].join(" "),children:l.jsxs("div",{className:"px-2 py-1.5",children:[l.jsxs("div",{className:"relative h-6",children:[l.jsxs("div",{className:["absolute left-2 top-1/2 -translate-y-1/2 flex items-center gap-2 text-xs font-medium",e?"text-neutral-200":"text-neutral-700"].join(" "),children:[l.jsx("span",{children:"Coverage"}),l.jsx("button",{onClick:()=>u(x=>!x),"aria-expanded":!a,className:["inline-flex items-center justify-center w-6 h-6 rounded-full border",e?"bg-neutral-900 border-neutral-700 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-300 text-neutral-700 hover:bg-neutral-100"].join(" "),title:a?"Expand":"Collapse",children:l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":!0,children:a?l.jsx("polyline",{points:"18 15 12 9 6 15"}):l.jsx("polyline",{points:"6 9 12 15 18 9"})})})]}),l.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[10px] opacity-70",children:["max ",p||0]})]}),!a&&l.jsxs("div",{className:"flex items-stretch gap-1 mt-1",children:[l.jsx("div",{ref:z,className:"flex-1 overflow-x-auto no-scrollbar",children:l.jsxs("div",{style:{width:`${w}%`},children:[l.jsx("div",{className:"relative",style:{height:h},children:Be.map((x,M)=>{const E=M/7*100,y=1/7*100;return l.jsx("div",{className:["absolute text-center text-[11px]",e?"text-neutral-300":"text-neutral-600"].join(" "),style:{left:`${E}%`,width:`${y}%`,lineHeight:`${h}px`},children:x},x)})}),l.jsx("div",{className:"relative",style:{height:m*24+d*23},children:Be.map((x,M)=>{const E=M/7*100,y=1/7*100;return l.jsx("div",{className:"absolute inset-y-0",style:{left:`${E}%`,width:`${y}%`},children:Array.from({length:24},(k,P)=>P).map(k=>{const P=k*(m+d),O=g[M][k],ue=`${x} — ${String(k).padStart(2,"0")}:00 to ${String(k+1).padStart(2,"0")}:00 • ${O} on deck`;return l.jsx("div",{className:"w-full",style:{position:"absolute",top:P,height:m,backgroundColor:S(O),borderRadius:2},title:ue},k)})},x)})})]})}),l.jsxs("div",{className:"shrink-0",style:{width:44},children:[l.jsx("div",{className:"h-[20px]"}),l.jsx("div",{className:"relative",style:{height:m*24+d*23},children:[0,6,12,18,24].map(x=>{const M=x/24*100;return l.jsx("div",{className:["absolute right-0 translate-y-[-50%] text-[10px]",e?"text-neutral-400":"text-neutral-500"].join(" "),style:{top:`${M}%`},children:x===0?"12a":x<12?`${x}a`:x===12?"12p":`${x-12}p`},x)})})]})]})]})})}function hp({tasks:e,onCreate:t,onUpdate:n,onArchive:r,onDelete:s,dark:o,selectedId:i,onSelect:a}){const[u,f]=C.useState({name:"",color:"#2563eb"}),b=C.useMemo(()=>e.filter(x=>!x.archived),[e]),[g,p]=C.useState(null),[S,v]=C.useState(""),[w,z]=C.useState("#2563eb");function m(x){p(x.id),v(x.name),z(x.color)}function d(){p(null)}function h(x){S.trim()&&(n({id:x,name:S.trim(),color:w}),p(null))}return l.jsxs("section",{className:["rounded-xl p-3",o?"bg-neutral-950":"bg-neutral-50"].join(" "),children:[l.jsx("div",{className:["border rounded-xl overflow-auto",o?"border-neutral-800":"border-neutral-300"].join(" "),children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:o?"bg-neutral-900":"bg-white",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left",children:"Name"}),l.jsx("th",{className:"px-3 py-2 text-left",children:"Color"}),l.jsx("th",{className:"px-3 py-2 text-left w-36",children:"Actions"})]})}),l.jsx("tbody",{className:o?"divide-y divide-neutral-800":"divide-y divide-neutral-200",children:b.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-3 py-6 text-center opacity-70",children:"No postures configured."})}):b.map(x=>l.jsx("tr",{onClick:()=>a==null?void 0:a(x.id),className:[o?"hover:bg-neutral-900 cursor-pointer":"hover:bg-neutral-50 cursor-pointer",i===x.id?o?"bg-neutral-900 ring-1 ring-blue-500/40":"bg-blue-50 ring-1 ring-blue-500/40":""].join(" "),children:g===x.id?l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-3 py-1.5",children:l.jsx("input",{className:["w-full border rounded px-2 py-1",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:S,onChange:M=>v(M.target.value)})}),l.jsx("td",{className:"px-3 py-1.5",children:l.jsx("input",{type:"color",className:["w-10 h-8 border rounded",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:w,onChange:M=>z(M.target.value)})}),l.jsx("td",{className:"px-3 py-1.5",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>h(x.id),className:["px-2 py-1 rounded border text-xs",o?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),l.jsx("button",{onClick:d,className:["px-2 py-1 rounded border text-xs",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})})]}):l.jsxs(l.Fragment,{children:[l.jsx("td",{className:"px-3 py-1.5 font-medium",children:x.name}),l.jsx("td",{className:"px-3 py-1.5",children:l.jsx("span",{className:"inline-block w-5 h-5 rounded border align-middle",style:{background:x.color}})}),l.jsx("td",{className:"px-3 py-1.5",children:l.jsxs("div",{className:"flex gap-2",onClick:M=>M.stopPropagation(),children:[l.jsx("button",{onClick:()=>m(x),className:["px-2 py-1 rounded border text-xs",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),l.jsx("button",{onClick:()=>n({...x,archived:!0}),className:["px-2 py-1 rounded border text-xs",o?"border-neutral-700":"border-neutral-300"].join(" "),children:"Remove"}),l.jsx("button",{onClick:()=>{s&&confirm(`Delete posture "${x.name}"? This cannot be undone.`)&&s(x.id)},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})})]})},x.id))})]})}),l.jsxs("form",{className:"mt-4 grid grid-cols-1 md:grid-cols-6 gap-3 items-end",onSubmit:x=>{x.preventDefault();const M=u.name.trim();M&&(t({...u,name:M}),f({name:"",color:"#2563eb"}))},children:[l.jsxs("label",{className:"text-sm flex flex-col md:col-span-3",children:[l.jsx("span",{className:"mb-1",children:"Name"}),l.jsx("input",{className:["w-full border rounded-xl px-3 py-2",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:u.name,onChange:x=>f({...u,name:x.target.value}),placeholder:"e.g., Support Inbox"})]}),l.jsxs("label",{className:"text-sm flex flex-col md:col-span-1",children:[l.jsx("span",{className:"mb-1",children:"Color"}),l.jsx("input",{type:"color",className:["w-full border rounded-xl h-10",o&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:u.color,onChange:x=>f({...u,color:x.target.value}),"aria-label":"Posture color"})]}),l.jsx("div",{className:"md:col-span-2",children:l.jsx("button",{type:"submit",disabled:!u.name.trim(),className:["h-10 rounded-xl border font-medium px-4 w-full md:w-auto",u.name.trim()?o?"bg-neutral-800 border-neutral-700 hover:bg-neutral-700":"bg-blue-600 border-blue-600 text-white hover:bg-blue-500":o?"bg-neutral-900 border-neutral-800 opacity-60":"bg-neutral-200 border-neutral-300 text-neutral-500 cursor-not-allowed"].join(" "),children:"Add Posture"})})]})]})}function pp({dark:e,agents:t,onAddAgent:n,onUpdateAgent:r,onDeleteAgent:s,weekStart:o,tz:i,shifts:a,pto:u,tasks:f,calendarSegs:b,onUpdateShift:g,onDeleteShift:p,onAddShift:S,setTasks:v,setCalendarSegs:w,setPto:z}){var Eu;const[m,d]=C.useState(!1),[h,x]=C.useState(""),[M,E]=C.useState("");C.useEffect(()=>{ws()&&(d(!0),E(""))},[]);const y=C.useMemo(()=>e0(),[]),k=C.useMemo(()=>n0(),[]),P=C.useMemo(()=>t0(),[]),[O,ue]=C.useState(t);C.useEffect(()=>{ue(t)},[t]);const Me=["Agents","Shifts","Postures","PTO"],[ie,Oe]=C.useState("Agents"),[He,pe]=C.useState(!1),[ae,T]=C.useState("start"),[D,B]=C.useState("asc"),ee=C.useMemo(()=>`schedule2.v2.shifts.includeHidden.${o}.${i.id}`,[o,i.id]),[H,we]=C.useState(()=>{try{const c=localStorage.getItem(ee);return c?c==="1":!1}catch{return!1}});C.useEffect(()=>{try{localStorage.setItem(ee,H?"1":"0")}catch{}},[H,ee]);const se=C.useMemo(()=>`schedule2.v2.shifts.daysVisible.${o}.${i.id}`,[o,i.id]),[he,ne]=C.useState(()=>{try{const c=localStorage.getItem(se),N=c?parseInt(c,10):7;return Number.isFinite(N)&&N>=1&&N<=7?N:7}catch{return 7}});C.useEffect(()=>{try{localStorage.setItem(se,String(he))}catch{}},[he,se]);const[V,L]=C.useState(0);C.useEffect(()=>{L(0)},[he,o]);const[U,_]=C.useState(a),[Se,ke]=C.useState(u),[ge,Ie]=C.useState(!1),[dt,I]=C.useState(!1),[$,Z]=C.useState("https://team-schedule-api.bsteward.workers.dev/v1/schedule"),[le,oe]=C.useState(""),[ut,Xe]=C.useState(""),Ue=C.useRef(!1),Ee=C.useMemo(()=>`schedule2.v2.draft.${o}.${i.id}`,[o,i.id]),De=C.useMemo(()=>"schedule2.v2.drafts",[]),[fe,je]=C.useState(null);C.useEffect(()=>{ge||_(a)},[a,ge]),C.useEffect(()=>{ge||ke(u)},[u,ge]),C.useEffect(()=>{try{const c=localStorage.getItem(Ee);if(c){const N=JSON.parse(c);Array.isArray(N==null?void 0:N.shifts)&&(_(N.shifts),Ie(!0),N!=null&&N.draftId&&typeof N.draftId=="string"&&je(N.draftId),Ue.current=!1)}}catch{}},[Ee]),C.useEffect(()=>{if(!ge)return;const c=setTimeout(()=>{try{localStorage.setItem(Ee,JSON.stringify({shifts:U,weekStart:o,tzId:i.id,draftId:fe,updatedAt:new Date().toISOString()}))}catch{}},300);return()=>clearTimeout(c)},[ge,U,Ee,o,i.id,fe]);const[ft,Ye]=C.useState(new Set),[Wt,Ht]=C.useState(new Set),[te,G]=C.useState([]),[ye,F]=C.useState([]),re=te.length>0,A=ye.length>0;function _e(c,N){return c.id===N.id&&c.day===N.day&&c.start===N.start&&c.end===N.end&&c.endDay===N.endDay}function Ze(c,N){if(c.length!==N.length)return!1;const W=new Map(c.map(J=>[J.id,J]));for(const J of N){const X=W.get(J.id);if(!X||!_e(X,J))return!1}return!0}const Ae=C.useCallback(c=>{c.length!==0&&(!ge&&Ze(U,a)&&(Ue.current=!0),G(N=>{const W=N.concat([c]);return W.length>10&&W.shift(),W}),F([]),Ie(!0))},[ge,U,a]),Ve=C.useCallback(()=>{if(te.length===0)return;const c=te[te.length-1],N=c.map(({id:J})=>{const X=U.find(Le=>Le.id===J);return X?{id:J,patch:{day:X.day,start:X.start,end:X.end,endDay:X.endDay}}:{id:J,patch:{}}});if(_(J=>J.map(X=>{const Le=c.find(Re=>Re.id===X.id);return Le?{...X,...Le.patch}:X})),Ye(J=>{const X=new Set(J);return c.forEach(({id:Le})=>X.delete(Le)),X}),G(J=>J.slice(0,-1)),F(J=>J.concat([N])),Ie(!0),te.length-1===0&&Ue.current){_(a),Ie(!1),Ue.current=!1;try{localStorage.removeItem(Ee)}catch{}je(null)}},[te,U,a,Ee]),Qe=C.useCallback(()=>{if(ye.length===0)return;const c=ye[ye.length-1],N=c.map(({id:W})=>{const J=U.find(X=>X.id===W);return J?{id:W,patch:{day:J.day,start:J.start,end:J.end,endDay:J.endDay}}:{id:W,patch:{}}});_(W=>W.map(J=>{const X=c.find(Le=>Le.id===J.id);return X?{...J,...X.patch}:J})),Ye(W=>{const J=new Set(W);return c.forEach(({id:X})=>J.add(X)),J}),F(W=>W.slice(0,-1)),G(W=>W.concat([N])),Ie(!0)},[ye,U]);C.useEffect(()=>{if(ie!=="Shifts")return;te.length===0&&ye.length===0&&ft.size===0&&_(a)},[ie,a,te,ye,ft]),C.useEffect(()=>{const c=N=>{if(ie!=="Shifts")return;const W=(N.ctrlKey||N.metaKey)&&!N.shiftKey&&(N.key==="z"||N.key==="Z"),J=(N.ctrlKey||N.metaKey)&&N.shiftKey&&(N.key==="z"||N.key==="Z")||(N.ctrlKey||N.metaKey)&&(N.key==="y"||N.key==="Y");W?(N.preventDefault(),Ve()):J&&(N.preventDefault(),Qe());const X=(N.ctrlKey||N.metaKey)&&!N.shiftKey&&(N.key==="s"||N.key==="S"),Le=(N.ctrlKey||N.metaKey)&&N.shiftKey&&(N.key==="s"||N.key==="S");X?(N.preventDefault(),fe?Mu():ri()):Le&&(N.preventDefault(),ri()),N.key==="Escape"&&Ht(new Set)};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[ie,Ve,Qe,fe]);const bt=C.useMemo(()=>{const c=new Set;for(const N of O){const W=`${N.firstName} ${N.lastName}`.trim();W&&c.add(W)}for(const N of a)N.person&&c.add(N.person);for(const N of b)N.person&&c.add(N.person);for(const N of u)N.person&&c.add(N.person);return Array.from(c).sort()},[O,a,b,u]),tt=C.useMemo(()=>f.filter(c=>!c.archived),[f]),[it,mn]=C.useState(""),[Yt,We]=C.useState("Mon"),[Ge,ct]=C.useState("09:00"),[ot,ze]=C.useState("10:00"),[pt,Je]=C.useState(""),[mt,xe]=C.useState("Mon");C.useEffect(()=>{!pt&&tt[0]&&Je(tt[0].id)},[tt,pt]);const[$e,nt]=C.useState(null),[Pe,gt]=C.useState(""),[Nt,j]=C.useState("Mon"),[K,q]=C.useState("09:00"),[ve,Ne]=C.useState("10:00"),[me,Ce]=C.useState(""),[qe,Dt]=C.useState("Mon"),[xt,hn]=C.useState(""),[tn,lt]=C.useState(""),[rt,Rt]=C.useState(""),[Pt,wt]=C.useState(""),[Un,Nl]=C.useState(""),[Er,jn]=C.useState(""),[Ss,Sl]=C.useState(null),[Cr,qo]=C.useState(""),[Ml,ei]=C.useState(""),[kl,ti]=C.useState(""),[Nu,ni]=C.useState(""),i0=c=>{Sl(c),qo(c.person),ei(c.startDate),ti(c.endDate),ni(c.notes||"")},Su=()=>{Sl(null),qo(""),ei(""),ti(""),ni("")},[Vn,a0]=C.useState(()=>{try{const c=localStorage.getItem(De);if(!c)return[];const N=JSON.parse(c);if(Array.isArray(N))return N}catch{}return[]});function El(c){a0(c);try{localStorage.setItem(De,JSON.stringify(c))}catch{}}function Mu(){let c=fe;if(fe){const N=Vn.findIndex(W=>W.id===fe);if(N>=0){const W=Vn.slice();W[N]={...W[N],shifts:U},crypto.randomUUID()}else{const W=prompt("Name this draft",new Date().toLocaleString())||new Date().toLocaleString(),J=Math.random().toString(36).slice(2),X={id:J,name:W,createdAt:new Date().toISOString(),weekStart:o,tzId:i.id,shifts:U};El(Vn.concat([X])),je(J),Ms(J),c=J}}else{const N=prompt("Name this draft",new Date().toLocaleString())||new Date().toLocaleString(),W=Math.random().toString(36).slice(2),J={id:W,name:N,createdAt:new Date().toISOString(),weekStart:o,tzId:i.id,shifts:U};El(Vn.concat([J])),je(W),Ms(W),c=W}try{localStorage.setItem(Ee,JSON.stringify({shifts:U,weekStart:o,tzId:i.id,draftId:c||fe||void 0,updatedAt:new Date().toISOString()}))}catch{}}function ri(){const c=prompt("Name this draft",new Date().toLocaleString())||new Date().toLocaleString(),N=Math.random().toString(36).slice(2),W={id:N,name:c,createdAt:new Date().toISOString(),weekStart:o,tzId:i.id,shifts:U};El(Vn.concat([W])),je(N),Ms(N);try{localStorage.setItem(Ee,JSON.stringify({shifts:U,weekStart:o,tzId:i.id,draftId:N,updatedAt:new Date().toISOString()}))}catch{}}const[Kn,Ms]=C.useState("");function u0(){const c=Vn.find(N=>N.id===Kn);if(c){_(c.shifts),Ie(!0),je(c.id),G([]),F([]),Ye(new Set),Ue.current=!1;try{localStorage.setItem(Ee,JSON.stringify({shifts:c.shifts,weekStart:c.weekStart,tzId:c.tzId,draftId:c.id,updatedAt:new Date().toISOString()}))}catch{}}}const[ks,ku]=C.useState(null);C.useEffect(()=>{ks!=null&&(ks<0||ks>=O.length)&&ku(O.length>0?0:null)},[ks,O]);function c0(){if(!Kn)return;const c=Vn.filter(N=>N.id!==Kn);El(c),Ms(""),fe===Kn&&je(null)}function d0(){_(a),Ie(!1),G([]),F([]),Ye(new Set);try{localStorage.removeItem(Ee)}catch{}Ue.current=!1,je(null)}async function f0(){const c=await bu({shifts:U,pto:Se,calendarSegs:b,updatedAt:new Date().toISOString()});if(c.ok){Ie(!1);try{localStorage.removeItem(Ee)}catch{}alert("Published to live."),Ue.current=!1,je(null),Ye(new Set),z(()=>Se)}else c.status===404||c.error==="missing_site_session"||(c.bodyText||"").includes("missing_site_session")?(await To(),alert("Publish failed: missing or expired site session. Please sign in to view and then try again.")):c.status===401?alert("Publish failed: not signed in as admin (401)."):c.status===403?alert("Publish failed: CSRF mismatch (403). Try reloading and signing in again."):c.status===409?alert("Publish failed: conflict (409). Refresh to load latest, then retry."):alert(`Failed to publish. ${c.status?`HTTP ${c.status}`:""} ${c.error?`— ${c.error}`:""}`)}const m0=C.useCallback(c=>{n==null||n(c),ue(N=>N.concat([{firstName:c.firstName,lastName:c.lastName,tzId:c.tzId,hidden:!1}]))},[n]),h0=C.useCallback((c,N)=>{r==null||r(c,N),ue(W=>W.map((J,X)=>X===c?N:J))},[r]),p0=C.useCallback(c=>{s==null||s(c),ue(N=>N.filter((W,J)=>J!==c))},[s]);return m?l.jsxs("section",{className:["rounded-2xl p-3 space-y-3",e?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:[l.jsx("div",{className:"flex items-center gap-2",children:Me.map(c=>{const N=ie===c;return l.jsx("button",{onClick:()=>Oe(c),className:["px-3 py-1.5 rounded-lg text-sm border",N?e?"bg-neutral-900 border-neutral-600 text-neutral-200":"bg-white border-blue-600 text-blue-600":e?"bg-neutral-900 border-neutral-800 text-neutral-200 hover:bg-neutral-800":"bg-white border-neutral-200 text-neutral-700 hover:bg-neutral-100"].join(" "),children:c},c)})}),ie==="Shifts"&&l.jsxs("div",{className:["flex flex-wrap items-center justify-between gap-2 sm:gap-3 text-xs rounded-xl px-2 py-2 border",e?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[l.jsxs("div",{className:"flex min-w-0 items-center gap-2 sm:gap-3",children:[l.jsx("span",{className:["inline-flex items-center px-2 py-1 rounded-xl border font-medium",ge?e?"bg-neutral-900 border-amber-600 text-amber-400":"bg-white border-amber-500 text-amber-700":e?"bg-neutral-900 border-neutral-800 text-neutral-400":"bg-white border-neutral-200 text-neutral-500"].join(" "),children:ge?"Draft — not live":"Live"}),(()=>{const c=Vn.find(W=>W.id===fe),N=c?`Editing draft: ${c.name} — created ${new Date(c.createdAt).toLocaleString()}`:"No draft linked";return l.jsx("span",{className:"text-[11px] opacity-70 truncate whitespace-nowrap overflow-hidden text-ellipsis max-w-[42ch] sm:max-w-[64ch]",title:N,children:N})})()]}),l.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[l.jsxs("div",{className:"inline-flex items-center gap-1",title:"Sort ribbons",children:[l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 6h14"}),l.jsx("path",{d:"M7 12h10"}),l.jsx("path",{d:"M11 18h6"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[9.5rem] sm:w-[11rem] appearance-none",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:ae,onChange:c=>T(c.target.value),"aria-label":"Sort ribbons",children:[l.jsx("option",{value:"start",children:"Earliest start"}),l.jsx("option",{value:"end",children:"Latest end"}),l.jsx("option",{value:"count",children:"Shift count"}),l.jsx("option",{value:"total",children:"Total minutes"}),l.jsx("option",{value:"firstDay",children:"First day"}),l.jsx("option",{value:"tz",children:"Timezone"}),l.jsx("option",{value:"name",children:"Name (A–Z)"})]}),l.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(e?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l.jsx("button",{type:"button",onClick:()=>B(c=>c==="asc"?"desc":"asc"),"aria-pressed":D==="desc",title:D==="asc"?"Ascending":"Descending",className:["ml-1 px-2.5 py-1.5 rounded-xl border font-medium",e?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:D==="asc"?l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 19V5"}),l.jsx("path",{d:"m5 12 7-7 7 7"})]}):l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"m19 12-7 7-7-7"})]})})]}),l.jsx("button",{type:"button",onClick:()=>we(c=>!c),"aria-pressed":H,title:H?"Hide off-duty agents":"Show off-duty agents",className:["px-2.5 py-1.5 rounded-xl border font-medium",H?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:l.jsx("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:H?l.jsxs(l.Fragment,{children:[l.jsx("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7-11-7-11-7Z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}):l.jsxs(l.Fragment,{children:[l.jsx("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.77 21.77 0 0 1 5.06-5.94"}),l.jsx("path",{d:"M1 1l22 22"}),l.jsx("path",{d:"M9.88 9.88A3 3 0 0 0 12 15a3 3 0 0 0 2.12-5.12"})]})})}),l.jsxs("div",{className:"inline-flex items-center gap-1",title:"Visible days",children:[l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2"}),l.jsx("path",{d:"M16 2v4"}),l.jsx("path",{d:"M8 2v4"}),l.jsx("path",{d:"M3 10h18"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{className:["border rounded-xl pl-2 pr-7 py-1 w-[6rem] appearance-none",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:he,onChange:c=>ne(Math.max(1,Math.min(7,parseInt(c.target.value,10)||7))),"aria-label":"Visible days",children:Array.from({length:7},(c,N)=>N+1).map(c=>l.jsxs("option",{value:c,children:[c," day",c===1?"":"s"]},c))}),l.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(e?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),he<7&&l.jsxs("div",{className:"inline-flex items-center gap-1 ml-1",role:"group","aria-label":"Scroll days",children:[l.jsx("button",{type:"button",onClick:()=>L(c=>Math.max(0,c-1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",e?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Earlier days","aria-label":"Earlier days",disabled:V<=0,children:l.jsx("svg",{"aria-hidden":!0,className:V<=0?e?"text-neutral-600":"text-neutral-400":e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"15 18 9 12 15 6"})})}),l.jsx("button",{type:"button",onClick:()=>L(c=>Math.min(Math.max(1,Math.ceil(7/he))-1,c+1)),className:["px-2.5 py-1.5 rounded-xl border font-medium",e?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),title:"Later days","aria-label":"Later days",disabled:V>=Math.max(1,Math.ceil(7/he))-1,children:l.jsx("svg",{"aria-hidden":!0,className:V>=Math.max(1,Math.ceil(7/he))-1?e?"text-neutral-600":"text-neutral-400":e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]})]}),l.jsx("button",{type:"button",onClick:()=>pe(c=>!c),"aria-pressed":He,title:"Toggle time labels",className:["px-2.5 py-1.5 rounded-xl border font-medium",He?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 hover:bg-neutral-800":"bg-white border-neutral-200 hover:bg-neutral-100"].join(" "),children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]})}),l.jsxs("div",{className:"inline-flex items-center gap-1",title:"Undo / Redo",children:[l.jsx("button",{type:"button",disabled:!re,onClick:Ve,className:["px-2.5 py-1.5 rounded-xl border font-medium",re?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Undo (Ctrl/Cmd+Z)",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"9 14 4 9 9 4"}),l.jsx("path",{d:"M20 20a8 8 0 0 0-7-12H4"})]})}),l.jsx("button",{type:"button",disabled:!A,onClick:Qe,className:["px-2.5 py-1.5 rounded-xl border font-medium",A?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Redo (Ctrl/Cmd+Shift+Z or Ctrl/Cmd+Y)",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"15 14 20 9 15 4"}),l.jsx("path",{d:"M4 20a8 8 0 0 1 7-12h9"})]})})]}),l.jsxs("div",{className:"inline-flex items-center gap-1",title:"Save / Save new",children:[l.jsx("button",{onClick:Mu,disabled:!fe,className:["px-2.5 py-1.5 rounded-xl border font-medium",fe?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Save current draft (Ctrl/Cmd+S)",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),l.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),l.jsx("polyline",{points:"7 3 7 8 15 8"})]})}),l.jsx("button",{onClick:ri,className:["px-2.5 py-1.5 rounded-xl border font-medium",e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Save new draft (Ctrl/Cmd+Shift+S)",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"})]})})]}),l.jsxs("div",{className:"inline-flex items-center gap-1 min-w-0",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("select",{className:["border rounded-xl pl-2 pr-7 py-1 max-w-[28ch] sm:max-w-[36ch] truncate appearance-none",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:Kn,onChange:c=>Ms(c.target.value),title:"Select a saved draft","aria-label":"Select draft",children:[l.jsx("option",{value:"",children:"Drafts…"}),Vn.slice().reverse().map(c=>l.jsx("option",{value:c.id,children:c.name},c.id))]}),l.jsx("svg",{"aria-hidden":!0,className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 "+(e?"text-neutral-400":"text-neutral-500"),width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("polyline",{points:"6 9 12 15 18 9"})})]}),l.jsx("button",{disabled:!Kn,onClick:u0,className:["px-2.5 py-1.5 rounded-xl border shrink-0",Kn?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Load selected draft","aria-label":"Load draft",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),l.jsx("polyline",{points:"7 10 12 15 17 10"}),l.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),l.jsx("button",{disabled:!Kn,onClick:()=>{confirm("Delete selected draft?")&&c0()},className:["px-2.5 py-1.5 rounded-xl border shrink-0",Kn?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Delete selected draft","aria-label":"Delete draft",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),l.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),l.jsx("button",{type:"button",onClick:()=>{I(c=>!c),Xe("")},className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100"].join(" "),title:"Import shifts/PTO/postures from a legacy JSON URL or paste","aria-label":"Import",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"}),l.jsx("polyline",{points:"8 17 12 21 16 17"})]})}),l.jsx("button",{disabled:!ge,onClick:d0,className:["px-2.5 py-1.5 rounded-xl border font-medium shrink-0",ge?e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-white border-neutral-300 hover:bg-neutral-100":e?"bg-neutral-900 border-neutral-800 opacity-50":"bg-white border-neutral-200 opacity-50"].join(" "),title:"Discard working changes","aria-label":"Discard",children:l.jsxs("svg",{"aria-hidden":!0,className:e?"text-neutral-300":"text-neutral-700",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("polyline",{points:"3 6 5 6 21 6"}),l.jsx("path",{d:"M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2 2L5 6"}),l.jsx("path",{d:"M10 11v6"}),l.jsx("path",{d:"M14 11v6"})]})}),l.jsx("button",{onClick:f0,className:"px-3 py-1.5 rounded-xl border font-semibold bg-blue-600 border-blue-600 text-white hover:bg-blue-500 shrink-0",title:"Publish working changes to live","aria-label":"Publish",children:l.jsxs("svg",{"aria-hidden":!0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 5v14"}),l.jsx("path",{d:"M5 12h14"}),l.jsx("path",{d:"M16 5h2a2 2 0 0 1 2 2v2"})]})})]})]}),dt&&l.jsxs("div",{className:["mt-2 rounded-xl p-3 border",e?"bg-neutral-950 border-neutral-800":"bg-neutral-50 border-neutral-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-semibold mb-2",children:"Import legacy data"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 items-end",children:[l.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[l.jsx("span",{className:"mb-1",children:"From URL"}),l.jsx("input",{className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:$,onChange:c=>Z(c.target.value),placeholder:"https://…/schedule.json"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:async()=>{Xe("");try{const c=await fetch($,{credentials:"omit"});if(!c.ok){Xe(`Fetch failed: ${c.status}`);return}const N=await c.json();if(!Array.isArray(N.shifts)){Xe("Invalid JSON: missing shifts[]");return}const W=N.shifts.map((J,X)=>({id:J.id||`imp-${X}-${Math.random().toString(36).slice(2)}`,person:J.person,day:J.day,start:J.start,end:J.end,endDay:J.endDay}));_(W),Array.isArray(N.pto)&&ke(N.pto),Array.isArray(N.calendarSegs)&&w(J=>N.calendarSegs),Ie(!0),Xe(`Imported ${W.length} shifts${Array.isArray(N.pto)?`, ${N.pto.length} PTO`:""}${Array.isArray(N.calendarSegs)?`, ${N.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(c){Xe((c==null?void 0:c.message)||"Import failed")}},children:"Fetch"}),l.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",e?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>{oe(c=>c.trim()?c:`{
  "shifts": [],
  "pto": [],
  "calendarSegs": []
}`)},children:"Paste JSON…"})]}),l.jsx("div",{className:"md:col-span-3",children:le!==""&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("textarea",{className:["w-full h-40 border rounded-xl p-2 font-mono text-xs",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:le,onChange:c=>oe(c.target.value)}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",e?"bg-neutral-900 border-neutral-700 hover:bg-neutral-800":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{Xe("");try{const c=JSON.parse(le);if(!Array.isArray(c.shifts)){Xe("Invalid JSON: missing shifts[]");return}const N=c.shifts.map((W,J)=>({id:W.id||`imp-${J}-${Math.random().toString(36).slice(2)}`,person:W.person,day:W.day,start:W.start,end:W.end,endDay:W.endDay}));_(N),Array.isArray(c.calendarSegs)&&w(c.calendarSegs),Array.isArray(c.pto)&&ke(c.pto),Ie(!0),Xe(`Imported ${N.length} shifts${Array.isArray(c.pto)?`, ${c.pto.length} PTO`:""}${Array.isArray(c.calendarSegs)?`, ${c.calendarSegs.length} postures`:""}. Review then Publish.`)}catch(c){Xe((c==null?void 0:c.message)||"Invalid JSON")}},children:"Load"}),l.jsx("button",{className:["h-9 rounded-xl px-4 border font-medium",e?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>oe(""),children:"Clear"})]})]})}),ut&&l.jsx("div",{className:["md:col-span-3 text-sm",ut.startsWith("Imported")?e?"text-green-300":"text-green-700":e?"text-red-300":"text-red-700"].join(" "),children:ut}),l.jsx("div",{className:"md:col-span-3 text-xs opacity-70",children:"Note: After import, click Publish to write the data to live. Agents list will update automatically from shift names."})]})]}),ie==="Agents"?l.jsx(dp,{dark:e,agents:O,onAddAgent:m0,onUpdateAgent:h0,onDeleteAgent:p0,weekStart:o,tz:i,shifts:a,pto:u,tasks:f,calendarSegs:b,onUpdateShift:(c,N)=>{g==null||g(c,N),te.length===0&&ye.length===0&&_(J=>J.map(X=>X.id===c?{...X,...N}:X))},onDeleteShift:c=>{p==null||p(c),te.length===0&&ye.length===0&&_(W=>W.filter(J=>J.id!==c))},onAddShift:c=>{S==null||S(c),te.length===0&&ye.length===0&&_(W=>W.some(J=>J.id===c.id)?W:W.concat([c]))},selectedIdx:ks,onSelectIdx:c=>ku(c)}):ie==="Shifts"?l.jsxs("div",{className:["rounded-xl p-2 border",e?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[l.jsx(fp,{dark:e,tz:i,weekStart:o,agents:H?O:O.filter(c=>!c.hidden),shifts:U,pto:u,tasks:void 0,calendarSegs:void 0,visibleDays:he,scrollChunk:V,showAllTimeLabels:He,sortMode:ae,sortDir:D,highlightIds:ft,selectedIds:Wt,onToggleSelect:c=>{Ht(N=>{const W=new Set(N);return W.has(c)?W.delete(c):W.add(c),W})},onDragAll:(c,N)=>{const W=U.filter(Q=>Q.person===c),J=W.map(Q=>({id:Q.id,patch:{day:Q.day,start:Q.start,end:Q.end,endDay:Q.endDay}}));Ae(J);const X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Le=Q=>X.indexOf(Q),Re=Q=>X[(Q%7+7)%7],Ut=Q=>{const[Fe,Et]=Q.split(":").map(Number);return(Fe||0)*60+(Et||0)},$t=(Q,Fe)=>{const[Et,Vt]=Q.split(":").map(Number),Ot=((Et||0)*60+(Vt||0)+Fe+10080)%1440,on=Math.floor(Ot/60).toString().padStart(2,"0"),Ct=(Ot%60).toString().padStart(2,"0");return`${on}:${Ct}`},Lt=W.map(Q=>{const Fe=Le(Q.day),Et=Le(Q.endDay||Q.day),Vt=Fe*1440+Ut(Q.start);let Ot=Et*1440+Ut(Q.end);Ot<=Vt&&(Ot+=1440);let on=Vt+N,Ct=Ot+N;const Ir=Math.floor((on/1440%7+7)%7),lr=Math.floor((Ct/1440%7+7)%7),Es=(on%1440+1440)%1440,Cs=(Ct%1440+1440)%1440;return{...Q,day:Re(Ir),start:$t("00:00",Es),end:$t("00:00",Cs),endDay:Re(lr)}}),be=new Set(ft),Te=new Map(Lt.map(Q=>[Q.id,Q]));_(Q=>Q.map(Fe=>Te.get(Fe.id)||Fe)),Lt.forEach(Q=>be.add(Q.id)),Ye(be),Ie(!0)},onDragShift:(c,N,W)=>{const J=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],X=Q=>J.indexOf(Q),Le=Q=>J[(Q%7+7)%7],Re=Q=>{const[Fe,Et]=Q.split(":").map(Number);return(Fe||0)*60+(Et||0)},Ut=(Q,Fe)=>{const[Et,Vt]=Q.split(":").map(Number),Ot=((Et||0)*60+(Vt||0)+Fe+10080)%1440,on=Math.floor(Ot/60).toString().padStart(2,"0"),Ct=(Ot%60).toString().padStart(2,"0");return`${on}:${Ct}`},$t=new Set(Wt);$t.add(N);const Lt=U.filter(Q=>$t.has(Q.id));if(Lt.length===0)return;if(Lt.length===1){const Q=Lt[0];Ae([{id:Q.id,patch:{day:Q.day,start:Q.start,end:Q.end,endDay:Q.endDay}}]);const Fe=X(Q.day),Et=X(Q.endDay||Q.day),Vt=Fe*1440+Re(Q.start);let Ot=Et*1440+Re(Q.end);Ot<=Vt&&(Ot+=1440);const on=Vt+W,Ct=Ot+W,Ir=Math.floor((on/1440%7+7)%7),lr=Math.floor((Ct/1440%7+7)%7),Es=(on%1440+1440)%1440,Cs=(Ct%1440+1440)%1440,Is={day:Le(Ir),start:Ut("00:00",Es),end:Ut("00:00",Cs),endDay:Le(lr)};_(Ds=>Ds.map(Qn=>Qn.id===Q.id?{...Qn,...Is}:Qn)),Ye(Ds=>{const Qn=new Set(Ds);return Qn.add(Q.id),Qn}),Ie(!0);return}const be=Lt.map(Q=>({id:Q.id,patch:{day:Q.day,start:Q.start,end:Q.end,endDay:Q.endDay}}));Ae(be);const Te=new Set(ft);for(const Q of Lt){const Fe=X(Q.day),Et=X(Q.endDay||Q.day),Vt=Fe*1440+Re(Q.start);let Ot=Et*1440+Re(Q.end);Ot<=Vt&&(Ot+=1440);const on=Vt+W,Ct=Ot+W,Ir=Math.floor((on/1440%7+7)%7),lr=Math.floor((Ct/1440%7+7)%7),Es=(on%1440+1440)%1440,Cs=(Ct%1440+1440)%1440,Is={...Q,day:Le(Ir),start:Ut("00:00",Es),end:Ut("00:00",Cs),endDay:Le(lr)};_(Ds=>Ds.map(Qn=>Qn.id===Is.id?Is:Qn)),Te.add(Is.id)}Ye(Te),Ie(!0)}}),(()=>{const c=(H?O:O.filter(N=>!N.hidden)).map(N=>[N.firstName,N.lastName].filter(Boolean).join(" ").trim()).filter(Boolean);return l.jsx(mp,{dark:e,tz:i,weekStart:o,shifts:U,visibleAgentNames:c,visibleDays:he,scrollChunk:V})})()]}):ie==="Postures"?l.jsxs("div",{className:["rounded-xl p-3 border",e?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-start",children:[l.jsxs("div",{className:"md:col-span-1 space-y-3",children:[l.jsx(hp,{tasks:f,onCreate:c=>v(N=>N.concat([{...c,id:Lr()}])),onUpdate:c=>v(N=>N.map(W=>W.id===c.id?c:W)),onArchive:c=>v(N=>N.map(W=>W.id===c?{...W,archived:!0}:W)),onDelete:c=>{v(N=>N.filter(W=>W.id!==c)),w(N=>N.filter(W=>W.taskId!==c))},dark:e,selectedId:pt,onSelect:c=>Je(c)}),l.jsxs("div",{className:["rounded-xl p-3 border",e?"border-neutral-800":"border-neutral-200"].join(" "),children:[l.jsx("div",{className:"text-sm font-medium mb-2",children:"Assign posture to agent"}),l.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Agent"}),l.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:it,onChange:c=>mn(c.target.value),children:[l.jsx("option",{value:"",children:"—"}),bt.map(c=>l.jsx("option",{value:c,children:c},c))]})]}),l.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[l.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[l.jsx("span",{className:"mb-1",children:"Day"}),l.jsx("select",{className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Yt,onChange:c=>We(c.target.value),children:Be.map(c=>l.jsx("option",{value:c,children:c},c))})]}),l.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[l.jsx("span",{className:"mb-1",children:"Start"}),l.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ge,onChange:c=>ct(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[l.jsx("span",{className:"mb-1",children:"End"}),l.jsx("input",{type:"time",className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ot,onChange:c=>ze(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col col-span-1",children:[l.jsx("span",{className:"mb-1",children:"End Day"}),l.jsx("select",{className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:mt,onChange:c=>xe(c.target.value),children:Be.map(c=>l.jsx("option",{value:c,children:c},c))})]})]}),l.jsx("button",{onClick:()=>{if(!it)return alert("Choose an agent");if(!pt)return alert("Choose a posture");const c=de(Ge),N=de(ot);if(mt===Yt&&!(N>c))return alert("End must be after start (or choose a later End Day)");Lo(a,Yt,i.offset).filter(X=>X.person===it).some(X=>{const Le=de(X.start),Re=X.end==="24:00"?1440:de(X.end);return c<Re&&N>Le})||alert("No shift overlaps that time for this agent on that day. This posture will be saved but won't display until there is an overlapping shift."),w(X=>X.concat([{person:it,agentId:Vl(O,it),day:Yt,endDay:mt,start:Ge,end:ot,taskId:pt}]))},className:["h-10 rounded-xl border font-medium px-4",e?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Add assignment"})]})]})]}),l.jsxs("div",{className:"md:col-span-1 space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"text-sm font-medium",children:"Assigned postures"}),pt&&l.jsxs("div",{className:"text-xs opacity-70",children:["Filtered to: ",((Eu=f.find(c=>c.id===pt))==null?void 0:Eu.name)||pt]})]}),(()=>{const c=new Map(Be.map((X,Le)=>[X,Le])),N=b.map((X,Le)=>({...X,_idx:Le})),W=f.filter(X=>!X.archived&&(!pt||X.id===pt)),J=[];for(const X of W){const Le=N.filter($t=>$t.taskId===X.id);if(Le.length===0)continue;const Re=new Map;for(const $t of Le){const Lt=Re.get($t.person)||[];Lt.push($t),Re.set($t.person,Lt)}const Ut=Array.from(Re.keys()).sort();J.push(l.jsxs("div",{className:["rounded-xl border",e?"border-neutral-800":"border-neutral-200"].join(" "),children:[l.jsxs("div",{className:["px-3 py-2 flex items-center justify-between",e?"bg-neutral-900":"bg-white"].join(" "),children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx("span",{className:"inline-block w-2.5 h-2.5 rounded-full",style:{background:X.color||"#888"}}),l.jsx("span",{className:"font-medium text-sm",children:X.name})]}),l.jsxs("span",{className:"text-xs opacity-70",children:[Le.length," item",Le.length===1?"":"s"]})]}),l.jsx("div",{className:"divide-y "+(e?"divide-neutral-800":"divide-neutral-200"),children:Ut.map($t=>{var be;const Lt=Re.get($t).slice().sort((Te,Q)=>{const Fe=(c.get(Te.day)??0)-(c.get(Q.day)??0);if(Fe!==0)return Fe;const Et=de(Te.start)-de(Q.start);return Et!==0?Et:Te.end.localeCompare(Q.end)});return l.jsxs("details",{children:[l.jsxs("summary",{className:["px-3 py-1.5 cursor-pointer select-none flex items-center justify-between",e?"hover:bg-neutral-900":"hover:bg-neutral-50"].join(" "),children:[l.jsx("span",{className:"text-sm",children:Us(O,(be=Lt[0])==null?void 0:be.agentId,$t)}),l.jsxs("span",{className:"text-xs opacity-70",children:[Lt.length," shift",Lt.length===1?"":"s"]})]}),l.jsx("div",{className:"px-3 py-1.5 space-y-1",children:Lt.map(Te=>l.jsxs("div",{className:"flex items-center justify-between gap-2 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"w-[12ch] opacity-70",children:[Te.day,Te.endDay&&Te.endDay!==Te.day?` → ${Te.endDay}`:""]}),l.jsxs("span",{className:"w-[11ch] tabular-nums",children:[Te.start,"–",Te.end]})]}),l.jsxs("div",{className:"shrink-0 flex gap-1.5",children:[l.jsx("button",{onClick:()=>{nt(Te._idx),gt(Te.person),j(Te.day),q(Te.start),Ne(Te.end),Ce(Te.taskId),Dt(Te.endDay||Te.day)},className:["px-2 py-1 rounded border text-xs",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Edit"}),l.jsx("button",{onClick:()=>{confirm("Remove this assignment?")&&w(Q=>Q.filter((Fe,Et)=>Et!==Te._idx))},className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),children:"Delete"})]})]},`${Te._idx}-${Te.day}-${Te.start}-${Te.end}`))})]},$t)})})]},X.id))}return J.length===0?l.jsx("div",{className:"text-sm opacity-70",children:"No assigned postures."}):l.jsx("div",{className:"space-y-3 h-[28rem] overflow-auto pr-1",children:J})})(),$e!=null&&l.jsxs("div",{className:["rounded-xl p-3 border",e?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[l.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit assignment"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Agent"}),l.jsx("select",{className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Pe,onChange:c=>gt(c.target.value),children:bt.map(c=>l.jsx("option",{value:c,children:c},c))})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Day"}),l.jsx("select",{className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Nt,onChange:c=>j(c.target.value),children:Be.map(c=>l.jsx("option",{value:c,children:c},c))})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Start"}),l.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:K,onChange:c=>q(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"End"}),l.jsx("input",{type:"time",className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:ve,onChange:c=>Ne(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"End Day"}),l.jsx("select",{className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:qe,onChange:c=>Dt(c.target.value),children:Be.map(c=>l.jsx("option",{value:c,children:c},c))})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Posture"}),l.jsx("select",{className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:me,onChange:c=>Ce(c.target.value),children:f.filter(c=>!c.archived).map(c=>l.jsx("option",{value:c.id,children:c.name},c.id))})]}),l.jsxs("div",{className:"md:col-span-6 flex gap-2",children:[l.jsx("button",{onClick:()=>{if($e==null)return;if(!Pe.trim())return alert("Choose an agent");if(!me)return alert("Choose a posture");const c=de(K),N=de(ve);if(qe===Nt&&!(N>c))return alert("End must be after start (or choose a later End Day)");Lo(a,Nt,i.offset).filter(X=>X.person===Pe).some(X=>{const Le=de(X.start),Re=X.end==="24:00"?1440:de(X.end);return c<Re&&N>Le})||alert("No shift overlaps that time for this agent on that day. This posture will be saved but won't display until there is an overlapping shift."),w(X=>X.map((Le,Re)=>Re===$e?{person:Pe.trim(),agentId:Vl(O,Pe.trim()),day:Nt,endDay:qe,start:K,end:ve,taskId:me}:Le)),nt(null)},className:["px-3 py-1.5 rounded border text-sm",e?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),children:"Save"}),l.jsx("button",{onClick:()=>nt(null),className:["px-3 py-1.5 rounded border text-sm",e?"border-neutral-700":"border-neutral-300"].join(" "),children:"Cancel"})]})]})]})]})]}),l.jsxs("div",{className:["mt-3 rounded-xl p-3",e?"bg-neutral-900":"bg-white"].join(" "),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-sm font-medium",children:"Weekly posture calendar"}),l.jsxs("label",{className:"text-xs inline-flex items-center gap-2",children:[l.jsx("span",{className:e?"text-neutral-300":"text-neutral-700",children:"Filter"}),l.jsxs("select",{className:["border rounded-lg px-2 py-1 text-sm",e?"bg-neutral-900 border-neutral-700 text-neutral-100":"bg-white border-neutral-300 text-neutral-800"].join(" "),value:xt,onChange:c=>hn(c.target.value),children:[l.jsx("option",{value:"",children:"All postures"}),f.filter(c=>!c.archived).map(c=>l.jsx("option",{value:c.id,children:c.name},c.id))]})]})]}),(()=>{const N=e?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.06)",W=Array.from({length:25},(X,Le)=>Le),J=new Map(f.map(X=>[X.id,X]));return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:Be.map(X=>{const Le=b.map((be,Te)=>({...be,_idx:Te})).flatMap(be=>!be.endDay||be.endDay===be.day?[be]:(de(be.start),be.end==="24:00"||de(be.end),[{...be,day:be.day,start:be.start,end:"24:00"},{...be,day:be.endDay,start:"00:00",end:be.end}])).filter(be=>be.day===X&&(!xt||be.taskId===xt)).sort((be,Te)=>de(be.start)-de(Te.start)),Re=[],Ut=Le.map(be=>{const Te=de(be.start),Q=be.end==="24:00"?1440:de(be.end);let Fe=0;for(Fe=0;Fe<Re.length;Fe++)if(Te>=Re[Fe]){Re[Fe]=Q;break}return Fe===Re.length&&Re.push(Q),{it:be,lane:Fe,s:Te,e:Q}}),Lt=100/Math.max(1,Re.length);return l.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",e?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:420},children:[l.jsx("div",{className:"font-medium mb-1",children:X}),l.jsxs("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:[W.map(be=>{const Te=be/24*100;return l.jsx("div",{className:"absolute left-0 right-0",style:{top:`${Te}%`,height:1},children:l.jsx("div",{style:{borderTop:`1px solid ${N}`}})},be)}),Ut.map(({it:be,lane:Te,s:Q,e:Fe})=>{const Et=Q/1440*100,Vt=Math.max(1.5,(Fe-Q)/1440*100),Ot=`calc(${Te*Lt}% + 0px)`,on=`calc(${Lt}% - 4px)`,Ct=J.get(be.taskId),Ir=(Ct==null?void 0:Ct.color)||"#888",lr=Us(O,be.agentId,be.person);return l.jsxs("div",{className:["absolute rounded-md px-2 py-1 overflow-hidden",e?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:`${Et}%`,height:`${Vt}%`,left:Ot,width:on},title:`${lr} — ${be.start}–${be.end} • ${(Ct==null?void 0:Ct.name)||be.taskId}`,children:[l.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] leading-tight",children:[l.jsx("span",{className:"inline-block w-2 h-2 rounded-full",style:{background:Ir}}),l.jsx("span",{className:"truncate",children:(Ct==null?void 0:Ct.name)||be.taskId})]}),l.jsxs("div",{className:"text-[11px] opacity-70 leading-tight truncate",children:[be.start,"–",be.end," ",l.jsxs("span",{className:"opacity-60",children:["(",lr,")"]})]})]},`${be._idx}-${be.person}-${be.start}-${be.end}`)})]})]},X)})})})()]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:["rounded-xl p-3 border",e?"bg-neutral-950 border-neutral-800 text-neutral-200":"bg-neutral-50 border-neutral-200 text-neutral-800"].join(" "),children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end mb-3",children:[l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Agent"}),l.jsxs("select",{className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:tn,onChange:c=>lt(c.target.value),children:[l.jsx("option",{value:"",children:"—"}),bt.map(c=>l.jsx("option",{value:c,children:c},c))]})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Start date"}),l.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:rt,onChange:c=>Rt(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"End date"}),l.jsx("input",{type:"date",className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Pt,onChange:c=>wt(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[l.jsx("span",{className:"mb-1",children:"Notes"}),l.jsx("input",{type:"text",placeholder:"Optional",className:["w-full border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Un,onChange:c=>Nl(c.target.value)})]}),l.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[l.jsx("button",{className:["h-10 rounded-xl px-4 border font-medium",e?"bg-neutral-900 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(!tn)return alert("Choose an agent");if(!rt||!Pt)return alert("Choose start and end dates");if(Pt<rt)return alert("End date must be on/after start date");const c={id:Lr(),person:tn,agentId:Vl(O,tn),startDate:rt,endDate:Pt,notes:Un||void 0};ke(N=>N.concat([c])),lt(""),Rt(""),wt(""),Nl(""),Ie(!0)},children:"Add PTO"}),l.jsxs("div",{className:"ml-auto inline-flex items-center gap-2",children:[l.jsx("span",{className:e?"text-neutral-300":"text-neutral-700",children:"Filter"}),l.jsxs("select",{className:["border rounded-xl px-2 py-1",e?"bg-neutral-900 border-neutral-700":"bg-white border-neutral-300"].join(" "),value:Er,onChange:c=>jn(c.target.value),children:[l.jsx("option",{value:"",children:"All"}),bt.map(c=>l.jsx("option",{value:c,children:c},c))]})]})]})]}),null,(()=>{const c=Se.filter(J=>!Er||J.person===Er).slice().sort((J,X)=>J.person.localeCompare(X.person)||J.startDate.localeCompare(X.startDate));if(c.length===0)return l.jsx("div",{className:"text-sm opacity-70",children:"No PTO entries."});const N=new Map;for(const J of c){const X=N.get(J.person)||[];X.push(J),N.set(J.person,X)}const W=Array.from(N.keys()).sort();return l.jsx("div",{className:"space-y-3",children:W.map(J=>{var Le;const X=N.get(J).slice().sort((Re,Ut)=>Re.startDate.localeCompare(Ut.startDate));return l.jsxs("details",{className:["rounded-xl border overflow-hidden",e?"border-neutral-800":"border-neutral-200"].join(" "),open:!0,children:[l.jsxs("summary",{className:["px-3 py-2 cursor-pointer select-none flex items-center justify-between",e?"bg-neutral-900":"bg-white"].join(" "),children:[l.jsx("span",{className:"text-sm font-medium",children:Us(O,(Le=X[0])==null?void 0:Le.agentId,J)}),l.jsxs("span",{className:"text-xs opacity-70",children:[X.length," item",X.length===1?"":"s"]})]}),l.jsx("div",{className:"divide-y "+(e?"divide-neutral-800":"divide-neutral-200"),children:X.map(Re=>l.jsxs("div",{className:"px-3 py-2 flex items-center justify-between gap-2 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"tabular-nums",children:[Re.startDate," → ",Re.endDate]}),Re.notes&&l.jsx("span",{className:"opacity-70 max-w-[40ch] truncate",children:Re.notes})]}),l.jsxs("div",{className:"shrink-0 inline-flex gap-1.5",children:[l.jsx("button",{className:["px-2 py-1 rounded border text-xs",e?"border-neutral-700":"border-neutral-300"].join(" "),onClick:()=>i0(Re),children:"Edit"}),l.jsx("button",{className:["px-2 py-1 rounded border text-xs","bg-red-600 border-red-600 text-white"].join(" "),onClick:()=>{confirm("Delete PTO?")&&ke(Ut=>Ut.filter($t=>$t.id!==Re.id))},children:"Delete"})]})]},Re.id))})]},J)})})})(),Ss&&l.jsxs("div",{className:["mt-3 rounded-xl p-3 border",e?"border-neutral-800 bg-neutral-900":"border-neutral-200 bg-white"].join(" "),children:[l.jsx("div",{className:"text-sm font-medium mb-2",children:"Edit PTO"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3 items-end",children:[l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Agent"}),l.jsx("select",{className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Cr,onChange:c=>qo(c.target.value),children:bt.map(c=>l.jsx("option",{value:c,children:c},c))})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"Start"}),l.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Ml,onChange:c=>ei(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col",children:[l.jsx("span",{className:"mb-1",children:"End"}),l.jsx("input",{type:"date",className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:kl,onChange:c=>ti(c.target.value)})]}),l.jsxs("label",{className:"text-sm flex flex-col md:col-span-2",children:[l.jsx("span",{className:"mb-1",children:"Notes"}),l.jsx("input",{type:"text",className:["w-full border rounded px-2 py-1",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:Nu,onChange:c=>ni(c.target.value)})]}),l.jsxs("div",{className:"md:col-span-5 flex gap-2",children:[l.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",e?"bg-neutral-800 border-neutral-700":"bg-blue-600 border-blue-600 text-white"].join(" "),onClick:()=>{if(Ss){if(!Cr.trim())return alert("Choose an agent");if(!Ml||!kl)return alert("Choose start/end");if(kl<Ml)return alert("End date must be on/after start date");ke(c=>c.map(N=>N.id===Ss.id?{...N,person:Cr.trim(),agentId:Vl(O,Cr.trim()),startDate:Ml,endDate:kl,notes:Nu||void 0}:N)),Su(),Ie(!0)}},children:"Save"}),l.jsx("button",{className:["px-3 py-1.5 rounded border text-sm",e?"border-neutral-700":"border-neutral-300"].join(" "),onClick:Su,children:"Cancel"})]})]})]})]}),l.jsxs("div",{className:["mt-3 rounded-xl p-3",e?"bg-neutral-900":"bg-white"].join(" "),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("div",{className:"text-sm font-medium",children:"Weekly PTO calendar"}),l.jsx("div",{className:"text-xs opacity-70",children:"Full-day entries by person"})]}),(()=>{const W=rr(o),J=Be.map((X,Le)=>Mn(vs(W,Le)));return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-3 text-sm",children:Be.map((X,Le)=>{const Re=J[Le],Ut=Se.filter(Q=>(!Er||Q.person===Er)&&Q.startDate<=Re&&Q.endDate>=Re).slice().sort((Q,Fe)=>Q.person.localeCompare(Fe.person)||Q.startDate.localeCompare(Fe.startDate)),$t=new Map;let Lt=0;const be=Ut.map(Q=>{let Fe=$t.get(Q.person);return Fe==null&&(Fe=Lt++,$t.set(Q.person,Fe)),{p:Q,lane:Fe}});Math.max(be.length,1);const Te=Math.min(220,Math.max(be.length*28+28,120));return l.jsxs("div",{className:["rounded-lg p-2 relative overflow-hidden",e?"bg-neutral-950":"bg-neutral-50"].join(" "),style:{height:Te},children:[l.jsx("div",{className:"font-medium mb-1",children:X}),l.jsx("div",{className:"absolute left-2 right-2 bottom-2 top-7",children:be.map(({p:Q,lane:Fe})=>{const Et=Fe*28,Vt=Us(O,Q.agentId,Q.person);return l.jsxs("div",{className:["absolute left-0 right-0 rounded-md px-2 h-[22px] flex items-center justify-between",e?"bg-neutral-800 text-neutral-100 border border-neutral-700":"bg-white text-neutral-900 border border-neutral-300 shadow-sm"].join(" "),style:{top:Et},title:`${Vt} • ${Q.startDate} → ${Q.endDate}`,children:[l.jsx("span",{className:"truncate",children:Vt}),Q.notes&&l.jsx("span",{className:"ml-2 text-[11px] opacity-70 truncate",children:Q.notes})]},`${Q.id}-${Re}`)})})]},X)})})})()]})]})]}):l.jsx("section",{className:["rounded-2xl p-6",e?"bg-neutral-900":"bg-white shadow-sm"].join(" "),children:l.jsxs("div",{className:"max-w-md mx-auto space-y-3",children:[l.jsx("div",{className:"text-lg font-semibold",children:"Protected — Manage Data"}),l.jsx("p",{className:"text-sm opacity-80",children:"Sign in to your session."}),l.jsx("form",{onSubmit:c=>{c.preventDefault(),(async()=>{const N=await s0(h);if(N.ok){try{await To(h)}catch{}if(ka(),ws()){d(!0),E("");try{localStorage.setItem("schedule_admin_unlocked","1")}catch{}try{Po(t.map(W=>({id:W.id||Math.random().toString(36).slice(2),firstName:W.firstName||"",lastName:W.lastName||"",tzId:W.tzId,hidden:!!W.hidden,isSupervisor:!!W.isSupervisor,supervisorId:W.supervisorId||void 0})))}catch{}}else d(!1),E("Signed in, but CSRF missing. Check cookie Domain/Path and SameSite; reload and try again.")}else E(N.status===401?"Incorrect password":"Login failed")})()},children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"password",autoFocus:!0,className:["flex-1 border rounded-xl px-3 py-2",e&&"bg-neutral-900 border-neutral-700"].filter(Boolean).join(" "),value:h,onChange:c=>x(c.target.value),placeholder:"Password"}),l.jsx("button",{type:"submit",className:["rounded-xl px-4 py-2 font-medium border",e?"bg-neutral-800 border-neutral-700":"bg-blue-600 text-white border-blue-600"].join(" "),children:"Sign in"})]})}),M&&l.jsx("div",{className:["text-sm",e?"text-red-300":"text-red-600"].join(" "),children:M}),l.jsx("div",{className:"text-xs opacity-70",children:"Your API should set a session cookie and CSRF token on success."}),l.jsxs("div",{className:"text-xs opacity-60 mt-2",children:[l.jsxs("div",{children:["API base: ",l.jsx("code",{children:y})]}),l.jsxs("div",{children:["API path: ",l.jsx("code",{children:k})]}),l.jsxs("div",{children:["Dev proxy: ",P?"on (local only)":"off"]}),(()=>{const c=ka();return l.jsxs("div",{children:[l.jsxs("div",{children:["CSRF token available: ",c.token?"yes":"no"]}),l.jsxs("div",{className:"opacity-75",children:["• cookie readable: ",c.cookie?"yes":"no","; • memory: ",c.memory?"yes":"no"]})]})})()]})]})})}function gp(){const e=Array.from({length:40},(r,s)=>`Agent${s+1}`),t=[],n=[{id:Lr(),person:"Agent5",startDate:"2025-08-21",endDate:"2025-08-23",notes:"Vacation"},{id:Lr(),person:"Agent12",startDate:"2025-08-22",endDate:"2025-08-22",notes:"Appt"}];for(const r of Be){if(r==="Sat"||r==="Sun")continue;let s=0;const o=[];let i=6*60;for(;i<=17*60+30;)o.push(i),i+=120+Math.floor(Math.random()*61);for(const a of o){const u=2+Math.floor(Math.random()*2);for(let f=0;f<u;f++){const b=e[s%e.length];s++;const g=a,p=a+510;if(p<=1440)t.push({id:Lr(),person:b,day:r,start:et(g),end:et(p)});else{const S=p-1440,v=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],w=v[(v.indexOf(r)+1)%7];t.push({id:Lr(),person:b,day:r,start:et(g),end:"24:00",endDay:w}),t.push({id:Lr(),person:b,day:w,start:"00:00",end:et(S),endDay:w})}}}}return{shifts:t,pto:n}}const $i=gp();function xp(){const[t,n]=R.useState(!0),[r,s]=R.useState(""),[o,i]=R.useState("");R.useEffect(()=>{(async()=>n(!0))()},[!1]),R.useEffect(()=>{},[]);const a=I=>{const $=(I||"").toLowerCase();return $.includes("manage2")||$.includes("manage")?"manageV2":"schedule"},[u,f]=R.useState(()=>a(window.location.hash)),[b,g]=R.useState(()=>Mn(oo(new Date))),[p,S]=R.useState(()=>new Date().getDay()),[v,w]=R.useState(()=>{try{return localStorage.getItem("schedule_theme")||"system"}catch{return"system"}}),[z,m]=R.useState(()=>{try{const I=localStorage.getItem("schedule_theme"),$=I==="unicorn"?"system":I;return $==="light"?!1:$==="dark"||$==="night"||$==="noir"?!0:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}catch{return!0}});R.useEffect(()=>{const I=$=>{var oe;const Z=$,le=(oe=Z==null?void 0:Z.detail)==null?void 0:oe.value;if(le){w(le),le==="light"?m(!1):le==="dark"||le==="night"||le==="noir"||le==="prism"?m(!0):le==="subtle"||le==="spring"||le==="summer"||le==="autumn"||le==="winter"?m(!1):le==="system"&&m(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);try{localStorage.setItem("schedule_theme",le)}catch{}}};return window.addEventListener("schedule:set-theme",I),()=>window.removeEventListener("schedule:set-theme",I)},[]),R.useEffect(()=>{if(!window.matchMedia)return;const I=window.matchMedia("(prefers-color-scheme: dark)"),$=()=>{try{localStorage.getItem("schedule_theme")==="system"&&m(I.matches)}catch{}};return I.addEventListener?I.addEventListener("change",$):I.addListener&&I.addListener($),()=>{I.removeEventListener?I.removeEventListener("change",$):I.removeListener&&I.removeListener($)}},[]);const d=R.useMemo(()=>{let I=u==="schedule"?v:z?"dark":"light";return I==="unicorn"&&(I="system"),I},[u,v,z]),h=R.useMemo(()=>{const I="min-h-screen w-full";return d==="night"?`${I} bg-black text-red-400`:d==="noir"?`${I} bg-black text-white`:d==="prism"?`${I} bg-black text-neutral-100`:d==="subtle"?`${I} bg-neutral-50 text-neutral-900`:d==="spring"?`${I} bg-emerald-50 text-neutral-900`:d==="summer"?`${I} bg-sky-50 text-neutral-900`:d==="autumn"?`${I} bg-amber-50 text-neutral-900`:d==="winter"?`${I} bg-blue-50 text-neutral-900`:z?`${I} bg-neutral-950 text-neutral-100`:`${I} bg-neutral-100 text-neutral-900`},[d,z]),x=R.useMemo(()=>u==="manageV2"||u==="schedule"&&v==="system",[u,v]),[M,E]=R.useState($i.shifts),[y,k]=R.useState($i.pto),[P,O]=R.useState(Zt[0]),[ue,Me]=R.useState(()=>{try{const I=localStorage.getItem("schedule_slimline");return I===null?!1:I==="1"}catch{return!1}});R.useEffect(()=>{try{localStorage.setItem("schedule_slimline",ue?"1":"0")}catch{}},[ue]),R.useEffect(()=>{const I=$=>{var le;const Z=$;Z&&typeof((le=Z.detail)==null?void 0:le.value)=="boolean"&&Me(Z.detail.value)};return window.addEventListener("schedule:set-slimline",I),()=>window.removeEventListener("schedule:set-slimline",I)},[]);const[ie,Oe]=R.useState(()=>{try{const I=localStorage.getItem("schedule_agents_v2_v1");if(I){const $=JSON.parse(I);if(Array.isArray($))return $}}catch{}return[]}),[He,pe]=R.useState(()=>{try{const I=localStorage.getItem("schedule_tasks");if(I){const $=JSON.parse(I);if(Array.isArray($))return $}}catch{}return[]}),[ae,T]=R.useState(()=>{try{const I=localStorage.getItem("schedule_calendarSegs");if(I){const $=JSON.parse(I);if(Array.isArray($))return $}}catch{}return[]}),[D,B]=R.useState(!1),[ee,H]=R.useState(!1),[we,se]=R.useState(!1),[he,ne]=R.useState(()=>{try{const I=localStorage.getItem("schedule_draft_v1");if(I){const $=JSON.parse(I);if($&&$.meta&&$.data)return $}}catch{}return null}),V=!!he,L=I=>{try{I?localStorage.setItem("schedule_draft_v1",JSON.stringify(I)):localStorage.removeItem("schedule_draft_v1")}catch{}},U=I=>{V?ne($=>{if(!$)return $;const Z=I($.data.shifts),le={meta:{...$.meta,updatedAt:new Date().toISOString()},data:{...$.data,shifts:Z}};return L(le),le}):E(I)},_=I=>{V?ne($=>{if(!$)return $;const Z=I($.data.pto),le={meta:{...$.meta,updatedAt:new Date().toISOString()},data:{...$.data,pto:Z}};return L(le),le}):k(I)},Se=I=>{V?ne($=>{if(!$)return $;const Z=I($.data.calendarSegs),le={meta:{...$.meta,updatedAt:new Date().toISOString()},data:{...$.data,calendarSegs:Z}};return L(le),le}):T(I)};R.useEffect(()=>{(async()=>H(ws()))()},[u]),R.useEffect(()=>{const I=$=>{const Z=!!ws();if(H(Z),Z){const le=ie.map(oe=>{var ut;return{id:oe.id||((ut=crypto.randomUUID)==null?void 0:ut.call(crypto))||Math.random().toString(36).slice(2),firstName:oe.firstName||"",lastName:oe.lastName||"",tzId:oe.tzId,hidden:!!oe.hidden,isSupervisor:!!oe.isSupervisor,supervisorId:oe.supervisorId||void 0,notes:oe.notes||void 0}});Po(le)}};return window.addEventListener("schedule:auth",I),()=>window.removeEventListener("schedule:auth",I)},[ie]),R.useEffect(()=>{(async()=>{const I=await Ea();if(I&&(E(I.shifts),k(I.pto),Array.isArray(I.calendarSegs)&&T(I.calendarSegs),Array.isArray(I.agents))){const $=I.agents;Oe($);try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify($))}catch{}}B(!0)})()},[!1,t]),R.useEffect(()=>{const I=()=>f(a(window.location.hash));return window.addEventListener("hashchange",I),()=>window.removeEventListener("hashchange",I)},[]),R.useEffect(()=>{if(u==="manageV2"){const I="#manage2";window.location.hash!==I&&(window.location.hash=I)}else if(window.location.hash)try{history.replaceState(null,"",window.location.pathname+window.location.search)}catch{}},[u]),R.useEffect(()=>{He.length===0&&pe([{id:"support",name:"Support Inbox",color:"#2563eb"},{id:"meetings",name:"Meetings",color:"#16a34a"}])},[]),R.useEffect(()=>{try{localStorage.setItem("schedule_tasks",JSON.stringify(He))}catch{}},[He]),R.useEffect(()=>{try{localStorage.setItem("schedule_calendarSegs",JSON.stringify(ae))}catch{}},[ae]),R.useEffect(()=>{try{localStorage.setItem("schedule_agents_v2_v1",JSON.stringify(ie))}catch{}},[ie]),R.useEffect(()=>{ie.length!==0&&(ie.every(I=>!!I.id)||Oe(I=>I.map($=>{var Z;return $.id?$:{...$,id:((Z=crypto.randomUUID)==null?void 0:Z.call(crypto))||Math.random().toString(36).slice(2)}})))},[ie]);const ke=I=>`${I.firstName||""} ${I.lastName||""}`.trim(),ge=I=>(I||"").trim().toLowerCase(),Ie=I=>{const $=(I||"").trim().toLowerCase();if(!$)return;const Z=ie.find(le=>ke(le).toLowerCase()===$);return Z==null?void 0:Z.id};R.useEffect(()=>{if(!D||!ee||V)return;const I=setTimeout(()=>{const $=M.map(oe=>oe.agentId?oe:{...oe,agentId:Ie(oe.person)}),Z=y.map(oe=>oe.agentId?oe:{...oe,agentId:Ie(oe.person)}),le=ie.map(oe=>{var ut;return{id:oe.id||((ut=crypto.randomUUID)==null?void 0:ut.call(crypto))||Math.random().toString(36).slice(2),firstName:oe.firstName||"",lastName:oe.lastName||"",tzId:oe.tzId,hidden:!!oe.hidden,isSupervisor:!!oe.isSupervisor,supervisorId:oe.supervisorId||void 0,notes:oe.notes||void 0}});l0({shifts:$,pto:Z,calendarSegs:ae,agents:le,updatedAt:new Date().toISOString()})},600);return()=>clearTimeout(I)},[M,y,ae,D,ee,V]),R.useEffect(()=>{if(!D||!ee)return;const I=setTimeout(()=>{Po(ie.map($=>{var Z;return{id:$.id||((Z=crypto.randomUUID)==null?void 0:Z.call(crypto))||Math.random().toString(36).slice(2),firstName:$.firstName||"",lastName:$.lastName||"",tzId:$.tzId,hidden:!!$.hidden,isSupervisor:!!$.isSupervisor,supervisorId:$.supervisorId||void 0,notes:$.notes||void 0}}))},600);return()=>clearTimeout(I)},[ie,D,ee]);const dt=C.useRef({shifts:"",pto:"",cal:"",agents:""});return R.useEffect(()=>{if(u!=="schedule")return;let I=!1;const $=async()=>{const oe=await Ea();if(!oe||I)return;const ut=JSON.stringify(oe.shifts||[]),Xe=JSON.stringify(oe.pto||[]),Ue=JSON.stringify(Array.isArray(oe.calendarSegs)?oe.calendarSegs:[]),Ee=JSON.stringify(Array.isArray(oe.agents)?oe.agents:[]);if(ut!==dt.current.shifts&&(E(oe.shifts),dt.current.shifts=ut),Xe!==dt.current.pto&&(k(oe.pto),dt.current.pto=Xe),Ue!==dt.current.cal&&(T(oe.calendarSegs||[]),dt.current.cal=Ue),Ee!==dt.current.agents&&Array.isArray(oe.agents)){Oe(oe.agents),dt.current.agents=Ee;try{localStorage.setItem("schedule_agents_v2_v1",Ee)}catch{}}};$();const Z=setInterval($,5*60*1e3);let le=null;return()=>{I=!0,clearInterval(Z);try{le==null||le.close()}catch{}}},[u,!1,t]),R.useMemo(()=>Array.from(new Set(M.map(I=>I.person))).sort(),[M]),R.useEffect(()=>{if(!D)return;const I=Ee=>Ee.map(De=>`${De.firstName} ${De.lastName}`.trim()).sort(),$=Ee=>Array.from(new Set(Ee)).sort(),Z=I(ie),le=$($i.shifts.map(Ee=>Ee.person)),oe=$(M.map(Ee=>Ee.person)),ut=ie.length===0,Ue=((Ee,De)=>Ee.length===De.length&&Ee.every((fe,je)=>fe===De[je]))(Z,le);if(ut||Ue){const Ee=oe.map(De=>{var je,ft;const fe=De.split(" ");return{id:((je=crypto.randomUUID)==null?void 0:je.call(crypto))||Math.random().toString(36).slice(2),firstName:fe[0]||De,lastName:fe.slice(1).join(" ")||"",tzId:(ft=Zt[0])==null?void 0:ft.id,hidden:!1}});Oe(Ee)}},[D,M,ie]),t?l.jsx(yp,{dark:z,children:l.jsx("div",{className:h,"data-theme":d,children:l.jsxs("div",{className:"max-w-full mx-auto p-2 md:p-4 space-y-4",children:[l.jsx(np,{dark:z,setDark:m,allowDarkToggle:x,view:u,setView:f,weekStart:b,setWeekStart:g,tz:P,setTz:O,canEdit:ee,editMode:we,setEditMode:se}),u==="schedule"?l.jsx(cp,{dark:z,weekStart:b,dayIndex:p,setDayIndex:S,shifts:M,pto:y,tasks:He,calendarSegs:ae,tz:P,canEdit:ee,editMode:we,onRemoveShift:I=>E($=>$.filter(Z=>Z.id!==I)),agents:ie,slimline:ue}):l.jsx(pp,{dark:z,agents:ie,onAddAgent:I=>{const $=`${(I.firstName||"").trim()} ${(I.lastName||"").trim()}`.trim();if(!$){alert("Enter a first and/or last name");return}if(ie.some(le=>ge(ke(le))===ge($))){alert("An agent with that name already exists.");return}Oe(le=>{var oe;return le.concat([{id:((oe=crypto.randomUUID)==null?void 0:oe.call(crypto))||Math.random().toString(36).slice(2),firstName:I.firstName,lastName:I.lastName,tzId:I.tzId,hidden:!1,isSupervisor:!1,supervisorId:void 0,notes:""}])})},onUpdateAgent:(I,$)=>{const Z=ie[I];if(!Z)return;const le=ke(Z),oe=($.firstName||"").trim(),ut=($.lastName||"").trim(),Xe=`${oe} ${ut}`.trim();if(!Xe){alert("Enter a first and/or last name");return}if(ie.some((Ee,De)=>De!==I&&ge(ke(Ee))===ge(Xe))){alert("An agent with that name already exists.");return}if(ge(Xe)!==ge(le)){const Ee=Z.id,De=fe=>fe||Ee;U(fe=>fe.map(je=>je.person===le?{...je,person:Xe,agentId:De(je.agentId)}:je)),_(fe=>fe.map(je=>je.person===le?{...je,person:Xe,agentId:De(je.agentId)}:je)),Se(fe=>fe.map(je=>je.person===le?{...je,person:Xe,agentId:De(je.agentId)}:je))}Oe(Ee=>Ee.map((De,fe)=>fe!==I?De:{...De,firstName:oe,lastName:ut,tzId:$.tzId||De.tzId,hidden:$.hidden!=null?$.hidden:De.hidden,isSupervisor:$.isSupervisor!=null?!!$.isSupervisor:De.isSupervisor,supervisorId:$.supervisorId!==void 0?$.supervisorId:De.supervisorId,notes:$.notes!==void 0?$.notes:De.notes}))},onDeleteAgent:I=>Oe($=>$.filter((Z,le)=>le!==I)),weekStart:b,tz:P,shifts:V?he.data.shifts:M,pto:V?he.data.pto:y,tasks:He,calendarSegs:V?he.data.calendarSegs:ae,onUpdateShift:(I,$)=>U(Z=>Z.map(le=>le.id===I?{...le,...$}:le)),onDeleteShift:I=>U($=>$.filter(Z=>Z.id!==I)),onAddShift:I=>U($=>$.concat([{...I,agentId:I.agentId||Ie(I.person)}])),setTasks:pe,setCalendarSegs:Se,setPto:_})]})})}):l.jsx("div",{className:"min-h-screen w-full bg-neutral-950 text-neutral-100",children:l.jsx("div",{className:"max-w-md mx-auto p-6",children:l.jsxs("section",{className:["rounded-2xl p-6 space-y-3","bg-neutral-900"].join(" "),children:[l.jsx("div",{className:"text-lg font-semibold",children:"Protected — Enter Site Password"}),l.jsx("p",{className:"text-sm opacity-80",children:"Sign in to view the schedule."}),l.jsx("form",{onSubmit:I=>{I.preventDefault(),(async()=>{const{devSiteLogin:$}=await Qh(async()=>{const{devSiteLogin:oe}=await Promise.resolve().then(()=>tp);return{devSiteLogin:oe}},void 0,import.meta.url),{ok:Z,status:le}=await $(r);if(Z){n(!0),i("");try{localStorage.setItem("site_unlocked_hint","1")}catch{}}else i(le===401?"Incorrect password":le===403?"Origin blocked by dev proxy. Check DEV_ALLOWED_ORIGIN(S).":le===404?"Endpoint missing on dev proxy. Restart it to pick up routes.":"Network/CORS error. Is dev proxy running?")})()},children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"password",autoFocus:!0,className:"flex-1 border rounded-xl px-3 py-2 bg-neutral-900 border-neutral-700",value:r,onChange:I=>s(I.target.value),placeholder:"Password"}),l.jsx("button",{type:"submit",className:"rounded-xl px-4 py-2 font-medium border bg-neutral-800 border-neutral-700",children:"Sign in"})]})}),o&&l.jsx("div",{className:"text-sm text-red-300",children:o})]})})})}class yp extends C.Component{constructor(){super(...arguments);Cu(this,"state",{hasError:!1,err:void 0})}static getDerivedStateFromError(n){return{hasError:!0,err:n}}componentDidCatch(n,r){console.error("App error",n,r)}componentDidMount(){window.addEventListener("error",n=>{console.error("Window error",n.error||n.message)}),window.addEventListener("unhandledrejection",n=>{console.error("Unhandled rejection",n.reason)})}render(){var n;if(this.state.hasError){const{dark:r}=this.props;return l.jsx("div",{className:r?"min-h-screen w-full bg-neutral-950 text-neutral-100":"min-h-screen w-full bg-neutral-100 text-neutral-900",children:l.jsx("div",{className:"max-w-3xl mx-auto p-4",children:l.jsxs("div",{className:["rounded-xl p-4 border",r?"bg-red-900/30 border-red-800 text-red-200":"bg-red-50 border-red-200 text-red-900"].join(" "),children:[l.jsx("div",{className:"font-semibold mb-2",children:"A runtime error occurred"}),l.jsx("div",{className:"text-xs whitespace-pre-wrap break-all",children:String(((n=this.state.err)==null?void 0:n.message)||this.state.err||"Unknown error")}),l.jsx("div",{className:"text-xs opacity-80 mt-2",children:"Check the developer console for details."})]})})})}return this.props.children}}Li.createRoot(document.getElementById("root")).render(l.jsx(C.StrictMode,{children:l.jsx(xp,{})}));
